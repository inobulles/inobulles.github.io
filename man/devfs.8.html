<!DOCTYPE html>
<html><head><meta charset=utf-8><title>devfs(8)</title><keywords content=man,devfs></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>devfs(8)</h1><table class=head><tr><td class=head-ltitle>DEVFS(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>DEVFS(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>devfs</code> — <div class=Nd>DEVFS control</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>devfs</code></td><td>[<code class=Fl>-m</code><var class=Ar>mount-point</var>] <var class=Ar>keyword</var><var class=Ar>argument ...</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>devfs</code> utility provides an interface to manipulate properties of <a class=Xr href=devfs.5.html>devfs(5)</a> mounts. <p class=Pp>The rules, by default as configured by <span class=Pa>/etc/rc.conf</span>, are loaded at boot via the devfs <a class=Xr href=service.8.html>service(8)</a>. The rules can be reloaded by running the command:</p><div class="Bd Pp Bd-indent"><pre>
service devfs restart
</pre></div><p class=Pp>The <var class=Ar>keyword</var> argument determines the context for the rest of the arguments. For example, most of the commands related to the rule subsystem must be preceded by the <code class=Cm>rule</code> keyword. The following flags are common to all keywords:</p><dl class=Bl-tag><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>mount-point</var></dt><dd>Operate on <var class=Ar>mount-point</var>, which is expected to be a <a class=Xr href=devfs.5.html>devfs(5)</a> mount. If this option is not specified, <code class=Nm>devfs</code> operates on <span class=Pa>/dev</span>.</dd></dl><section class=Ss><h2 class=Ss id=Rule_Subsystem><a class=permalink href=#Rule_Subsystem>Rule Subsystem</a></h2> The <a class=Xr href=devfs.5.html>devfs(5)</a> rule subsystem provides a way for the administrator of a system to control the attributes of DEVFS nodes. Each DEVFS mount-point has a “ruleset”, or a list of rules, associated with it. When a device driver creates a new node, all the rules in the ruleset associated with each mount-point are applied (see below) before the node becomes visible to the userland. This permits the administrator to change the properties, including the visibility, of certain nodes. For example, one might want to hide all disk nodes in a <a class=Xr href=jail.2.html>jail(2)</a>'s <span class=Pa>/dev</span>. </section><section class=Ss><h2 class=Ss id=Rule_Manipulation><a class=permalink href=#Rule_Manipulation>Rule Manipulation</a></h2> Rule manipulation commands follow the <code class=Cm>rule</code> keyword. The following flags are common to all of the rule manipulation commands: <dl class=Bl-tag><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>ruleset</var></dt><dd>Operate on the ruleset with the number <var class=Ar>ruleset</var>. If this is not specified, the commands operate on the ruleset currently associated with the specified mount-point.</dd></dl><p class=Pp>The following commands are recognized:</p><dl class=Bl-tag><dt><a class=permalink href=#rule_add><code class=Cm id=rule_add>rule add</code></a> [<var class=Ar>rulenum</var>] <var class=Ar>rulespec</var></dt><dd>Add the rule described by <var class=Ar>rulespec</var> (defined below) to the ruleset. The rule has the number <var class=Ar>rulenum</var> if it is explicitly specified; otherwise, the rule number is automatically determined by the kernel.</dd><dt><a class=permalink href=#rule_apply><code class=Cm id=rule_apply>rule apply</code></a><var class=Ar>rulenum</var> | <var class=Ar>rulespec</var></dt><dd>Apply rule number <var class=Ar>rulenum</var> or the rule described by <var class=Ar>rulespec</var> to the mount-point. Rules that are “applied” have their conditions checked against all nodes in the mount-point and the actions taken if they match.</dd><dt><a class=permalink href=#rule_applyset><code class=Cm id=rule_applyset>rule applyset</code></a></dt><dd>Apply all the rules in the ruleset to the mount-point (see above for the definition of “apply”).</dd><dt><a class=permalink href=#rule_del><code class=Cm id=rule_del>rule del</code></a><var class=Ar>rulenum</var></dt><dd>Delete rule number <var class=Ar>rulenum</var> from the ruleset.</dd><dt><a class=permalink href=#rule_delset><code class=Cm id=rule_delset>rule delset</code></a></dt><dd>Delete all rules from the ruleset.</dd><dt><a class=permalink href=#rule_show><code class=Cm id=rule_show>rule show</code></a> [<var class=Ar>rulenum</var>]</dt><dd>Display the rule number <var class=Ar>rulenum</var>, or all the rules in the ruleset. The output lines (one line per rule) are expected to be valid <var class=Ar>rulespec</var>s.</dd><dt><a class=permalink href=#rule_showsets><code class=Cm id=rule_showsets>rule showsets</code></a></dt><dd>Report the numbers of existing rulesets.</dd><dt><a class=permalink href=#ruleset><code class=Cm id=ruleset>ruleset</code></a><var class=Ar>ruleset</var></dt><dd>Set ruleset number <var class=Ar>ruleset</var> as the current ruleset for the mount-point.</dd></dl></section><section class=Ss><h2 class=Ss id=Rule_Specification><a class=permalink href=#Rule_Specification>Rule Specification</a></h2> Rules have two parts: the conditions and the actions. The conditions determine which DEVFS nodes the rule matches and the actions determine what should be done when a rule matches a node. For example, a rule can be written that sets the GID to “<code class=Li>operator</code>” for all devices of type tape. If the first token of a rule specification is a single dash (‘<code class=Fl>-</code>’), rules are read from the standard input and the rest of the specification is ignored. <p class=Pp>The following conditions are recognized. Conditions are ANDed together when matching a device; if OR is desired, multiple rules can be written.</p><dl class=Bl-tag><dt><a class=permalink href=#path><code class=Cm id=path>path</code></a><var class=Ar>pattern</var></dt><dd>Matches any node with a path that matches <var class=Ar>pattern</var>, which is interpreted as a <a class=Xr href=glob.3.html>glob(3)</a>-style pattern.</dd><dt><a class=permalink href=#type><code class=Cm id=type>type</code></a><var class=Ar>devtype</var></dt><dd>Matches any node that is of type <var class=Ar>devtype</var>. Valid types are <code class=Cm>disk</code>, <code class=Cm>mem</code>, <code class=Cm>tape</code> and <code class=Cm>tty</code>.</dd></dl><p class=Pp>The following actions are recognized. Although there is no explicit delimiter between conditions and actions, they may not be intermixed.</p><dl class=Bl-tag><dt><a class=permalink href=#group><code class=Cm id=group>group</code></a><var class=Ar>gid</var></dt><dd>Set the GID of the node to <var class=Ar>gid</var>, which may be a group name (looked up in <span class=Pa>/etc/group</span>) or number.</dd><dt><a class=permalink href=#hide><code class=Cm id=hide>hide</code></a></dt><dd>Hide the node. Nodes may later be revived manually with <a class=Xr href=mknod.8.html>mknod(8)</a> or with the <code class=Cm>unhide</code> action. Hiding a directory node effectively hides all of its child nodes.</dd><dt><a class=permalink href=#include><code class=Cm id=include>include</code></a><var class=Ar>ruleset</var></dt><dd>Apply all the rules in ruleset number <var class=Ar>ruleset</var> to the node. This does not necessarily result in any changes to the node (e.g., if none of the rules in the included ruleset match). Include commands in the referenced <var class=Ar>ruleset</var> are not resolved.</dd><dt><a class=permalink href=#mode><code class=Cm id=mode>mode</code></a><var class=Ar>filemode</var></dt><dd>Set the file mode to <var class=Ar>filemode</var>, which is interpreted as in <a class=Xr href=chmod.1.html>chmod(1)</a>.</dd><dt><a class=permalink href=#user><code class=Cm id=user>user</code></a><var class=Ar>uid</var></dt><dd>Set the UID to <var class=Ar>uid</var>, which may be a user name (looked up in <span class=Pa>/etc/passwd</span>) or number.</dd><dt><a class=permalink href=#unhide><code class=Cm id=unhide>unhide</code></a></dt><dd>Unhide the node. If the node resides in a subdirectory, all parent directory nodes must be visible to be able to access the node.</dd></dl></section></section><section class=Sh><h2 class=Sh id=IMPLEMENTATION_NOTES><a class=permalink href=#IMPLEMENTATION_NOTES>IMPLEMENTATION NOTES</a></h2> Rulesets are created by the kernel at the first reference and destroyed when the last reference disappears. E.g., a ruleset is created when a rule is added to it or when it is set as the current ruleset for a mount-point, and a ruleset is destroyed when the last rule in it is deleted and no other references to it exist (i.e., it is not included by any rules and it is not the current ruleset for any mount-point). <p class=Pp>Ruleset number 0 is the default ruleset for all new mount-points. It is always empty, cannot be modified or deleted, and does not show up in the output of <code class=Cm>showsets</code>.</p><p class=Pp>Rules and rulesets are unique to the entire system, not a particular mount-point. I.e., a <code class=Cm>showsets</code> will return the same information regardless of the mount-point specified with <code class=Fl>-m</code>. The mount-point is only relevant when changing what its current ruleset is or when using one of the apply commands.</p></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/defaults/devfs.rules</span></dt><dd>Default <code class=Nm>devfs</code> configuration file.</dd><dt><span class=Pa>/etc/devfs.rules</span></dt><dd>Local <code class=Nm>devfs</code> configuration file. Rulesets in here override those in <span class=Pa>/etc/defaults/devfs.rules</span> with the same ruleset number, otherwise the two files are effectively merged.</dd><dt><span class=Pa>/etc/devfs.conf</span></dt><dd>Boot-time <code class=Nm>devfs</code> configuration file.</dd><dt><span class=Pa>/usr/share/examples/etc/devfs.conf</span></dt><dd>Example boot-time <code class=Nm>devfs</code> configuration file.</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> When the system boots, the only ruleset that exists is ruleset number 0; since the latter may not be modified, we have to create another ruleset before adding rules. Note that since most of the following examples do not specify <code class=Fl>-m</code>, the operations are performed on <span class=Pa>/dev</span> (this only matters for things that might change the properties of nodes). <p class=Pp>Specify that ruleset 10 should be the current ruleset for <span class=Pa>/dev</span> (if it does not already exist, it is created):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs ruleset 10</code></div><p class=Pp>Add a rule that causes all nodes that have a path that matches “<code class=Li>speaker</code>” (this is only <span class=Pa>/dev/speaker</span>) to have the file mode 666 (read and write for all). Note that if any such nodes already exist, their mode will not be changed unless this rule (or ruleset) is explicitly applied (see below). The mode <i class=Em>will</i> be changed if the node is created <i class=Em>after</i> the rule is added (e.g., the <span class=Pa>atspeaker</span> module is loaded after the above rule is added):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule add path speaker mode 666</code></div><p class=Pp>Apply all the rules in the current ruleset to all the existing nodes. E.g., if the below rule was added after <span class=Pa>/dev/speaker</span> was created, this command will cause its file mode to be changed to 666 as prescribed by the rule:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule applyset</code></div><p class=Pp>For all devices with a path that matches “<code class=Li>snp*</code>”, set the file mode to 660 and the GID to “<code class=Li>snoopers</code>”. This permits users in the “<code class=Li>snoopers</code>” group to use the <a class=Xr href=snp.4.html>snp(4)</a> devices (quoting the argument to <code class=Cm>path</code> is often necessary to disable the shell's globbing features):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule add path snp* mode 660 group snoopers</code></div><p class=Pp>Add a rule to ruleset number 20. Since this ruleset is not the current ruleset for any mount-points, this rule is never applied automatically (unless ruleset 20 becomes a current ruleset for some mount-point at a later time):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule -s 20 add type disk group wheel</code></div><p class=Pp>Explicitly apply all rules in ruleset number 20 to the DEVFS mount on <span class=Pa>/my/jail/dev</span>. It does not matter that ruleset 20 is not the current ruleset for that mount-point; the rules are still applied:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs -m /my/jail/dev rule -s 20 applyset</code></div><p class=Pp>Since the following rule has no conditions, the action (<code class=Cm>hide</code>) will be applied to all nodes:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule apply hide</code></div><p class=Pp>Since hiding all nodes is not very useful, we can undo it. The following applies <code class=Cm>unhide</code> to all the nodes, causing them to reappear:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule apply unhide</code></div><p class=Pp>Add all the rules from the file <span class=Pa>my_rules</span> to ruleset 10:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule -s 10 add - &lt; my_rules</code></div><p class=Pp>The below copies all the rules from ruleset 20 into ruleset 10. The rule numbers are preserved, but ruleset 10 may already have rules with non-conflicting numbers (these will be preserved). Since <code class=Cm>show</code> outputs valid rules, this feature can be used to copy rulesets:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>devfs rule -s 20 show | devfs rule -s 10 add -</code></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=chmod.1.html>chmod(1)</a>, <a class=Xr href=jail.2.html>jail(2)</a>, <a class=Xr href=glob.3.html>glob(3)</a>, <a class=Xr href=devfs.5.html>devfs(5)</a>, <a class=Xr href=devfs.conf.5.html>devfs.conf(5)</a>, <a class=Xr href=devfs.rules.5.html>devfs.rules(5)</a>, <a class=Xr href=chown.8.html>chown(8)</a>, <a class=Xr href=jail.8.html>jail(8)</a>, <a class=Xr href=mknod.8.html>mknod(8)</a>, <a class=Xr href=service.8.html>service(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>devfs</code> utility first appeared in <span class=Ux>FreeBSD 5.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Dima Dorfman</span></section></div><table class=foot><tr><td class=foot-date>December 1, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>