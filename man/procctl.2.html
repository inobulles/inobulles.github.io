<!DOCTYPE html>
<html><head><meta charset=utf-8><title>procctl(2)</title><keywords content=man,procctl></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>procctl(2)</h1><table class=head><tr><td class=head-ltitle>PROCCTL(2)</td><td class=head-vol>FreeBSD System Calls Manual</td><td class=head-rtitle>PROCCTL(2)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>procctl</code> — <div class=Nd>control processes</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/procctl.h.html>sys/procctl.h</a>&gt;</code><p class=Pp><var class=Ft>int</var><br><code class=Fn>procctl</code>(<var class=Fa style="white-space: nowrap;">idtype_t idtype</var>, <var class=Fa style="white-space: nowrap;">id_t id</var>, <var class=Fa style="white-space: nowrap;">int cmd</var>, <var class=Fa style="white-space: nowrap;">void *data</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Fn>procctl</code>() system call provides for control over processes. The <var class=Fa>idtype</var> and <var class=Fa>id</var> arguments specify the set of processes to control. If multiple processes match the identifier, <code class=Nm>procctl</code> will make a “best effort” to control as many of the selected processes as possible. An error is only returned if no selected processes successfully complete the request. The following identifier types are supported: <dl class=Bl-tag><dt><a class=permalink href=#P_PID><code class=Dv id=P_PID>P_PID</code></a></dt><dd>Control the process with the process ID <var class=Fa>id</var>. <var class=Fa>id</var> zero is a shortcut for the calling process ID.</dd><dt><a class=permalink href=#P_PGID><code class=Dv id=P_PGID>P_PGID</code></a></dt><dd>Control processes belonging to the process group with the ID <var class=Fa>id</var>.</dd></dl><p class=Pp>The control request to perform is specified by the <var class=Fa>cmd</var> argument.</p><p class=Pp>All status changing requests <code class=Dv>*_CTL</code> require the caller to have the right to debug the target. All status query requests require the caller to have the right to observe the target.</p><p class=Pp>The following commands are supported:</p><dl class=Bl-tag><dt><a class=permalink href=#PROC_ASLR_CTL><code class=Dv id=PROC_ASLR_CTL>PROC_ASLR_CTL</code></a></dt><dd>Controls the Address Space Layout Randomization (ASLR) in the program images created by <a class=Xr href=execve.2.html>execve(2)</a> in the specified process or its descendants that did not changed the control nor modified it by other means. The <var class=Fa>data</var> parameter must point to the integer variable holding one of the following values: <dl class=Bl-tag><dt><a class=permalink href=#PROC_ASLR_FORCE_ENABLE><code class=Dv id=PROC_ASLR_FORCE_ENABLE>PROC_ASLR_FORCE_ENABLE</code></a></dt><dd>Request that ASLR is enabled after execution, even if it is disabled system-wide. The image flag and set-uid might prevent ASLR enablement still.</dd><dt><a class=permalink href=#PROC_ASLR_FORCE_DISABLE><code class=Dv id=PROC_ASLR_FORCE_DISABLE>PROC_ASLR_FORCE_DISABLE</code></a></dt><dd>Request that ASLR is disabled after execution. Same notes as for <code class=Dv>PROC_ASLR_FORCE_ENABLE</code> apply.</dd><dt><a class=permalink href=#PROC_ASLR_NOFORCE><code class=Dv id=PROC_ASLR_NOFORCE>PROC_ASLR_NOFORCE</code></a></dt><dd>Use the system-wide configured policy for ASLR.</dd></dl></dd><dt><a class=permalink href=#PROC_ASLR_STATUS><code class=Dv id=PROC_ASLR_STATUS>PROC_ASLR_STATUS</code></a></dt><dd>Returns the current status of ASLR enablement for the target process. The <var class=Fa>data</var> parameter must point to the integer variable, where one of the following values is written: <dl class=Bl-tag><dt><a class=permalink href=#PROC_ASLR_FORCE_ENABLE_2><code class=Dv id=PROC_ASLR_FORCE_ENABLE_2>PROC_ASLR_FORCE_ENABLE</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_ASLR_FORCE_DISABLE_2><code class=Dv id=PROC_ASLR_FORCE_DISABLE_2>PROC_ASLR_FORCE_DISABLE</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_ASLR_NOFORCE_2><code class=Dv id=PROC_ASLR_NOFORCE_2>PROC_ASLR_NOFORCE</code></a></dt><dd style="width: auto;"> </dd></dl><p class=Pp>If the currently executed image in the process itself has ASLR enabled, the <code class=Dv>PROC_ASLR_ACTIVE</code> flag is or-ed with the value listed above.</p></dd><dt><a class=permalink href=#PROC_PROTMAX_CTL><code class=Dv id=PROC_PROTMAX_CTL>PROC_PROTMAX_CTL</code></a></dt><dd>Controls implicit application of PROT_MAX protection equal to the <var class=Fa>prot</var> argument of the <a class=Xr href=mmap.2.html>mmap(2)</a> syscall, in the target process. The <var class=Fa>data</var> parameter must point to the integer variable holding one of the following values: <dl class=Bl-tag><dt><a class=permalink href=#PROC_PROTMAX_FORCE_ENABLE><code class=Dv id=PROC_PROTMAX_FORCE_ENABLE>PROC_PROTMAX_FORCE_ENABLE</code></a></dt><dd>Enables implicit PROT_MAX application, even if it is disabled system-wide by the sysctl <var class=Va>vm.imply_prot_max</var>. The image flag might still prevent the enablement.</dd><dt><a class=permalink href=#PROC_PROTMAX_FORCE_DISABLE><code class=Dv id=PROC_PROTMAX_FORCE_DISABLE>PROC_PROTMAX_FORCE_DISABLE</code></a></dt><dd>Request that implicit application of PROT_MAX be disabled. Same notes as for <code class=Dv>PROC_PROTMAX_FORCE_ENABLE</code> apply.</dd><dt><a class=permalink href=#PROC_PROTMAX_NOFORCE><code class=Dv id=PROC_PROTMAX_NOFORCE>PROC_PROTMAX_NOFORCE</code></a></dt><dd>Use the system-wide configured policy for PROT_MAX.</dd></dl></dd><dt><a class=permalink href=#PROC_PROTMAX_STATUS><code class=Dv id=PROC_PROTMAX_STATUS>PROC_PROTMAX_STATUS</code></a></dt><dd>Returns the current status of implicit PROT_MAX enablement for the target process. The <var class=Fa>data</var> parameter must point to the integer variable, where one of the following values is written: <dl class=Bl-tag><dt><a class=permalink href=#PROC_PROTMAX_FORCE_ENABLE_2><code class=Dv id=PROC_PROTMAX_FORCE_ENABLE_2>PROC_PROTMAX_FORCE_ENABLE</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_PROTMAX_FORCE_DISABLE_2><code class=Dv id=PROC_PROTMAX_FORCE_DISABLE_2>PROC_PROTMAX_FORCE_DISABLE</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_PROTMAX_NOFORCE_2><code class=Dv id=PROC_PROTMAX_NOFORCE_2>PROC_PROTMAX_NOFORCE</code></a></dt><dd style="width: auto;"> </dd></dl><p class=Pp>If the currently executed image in the process itself has implicit PROT_MAX application enabled, the <code class=Dv>PROC_PROTMAX_ACTIVE</code> flag is or-ed with the value listed above.</p></dd><dt><a class=permalink href=#PROC_SPROTECT><code class=Dv id=PROC_SPROTECT>PROC_SPROTECT</code></a></dt><dd>Set process protection state. This is used to mark a process as protected from being killed if the system exhausts the available memory and swap. The <var class=Fa>data</var> parameter must point to an integer containing an operation and zero or more optional flags. The following operations are supported: <dl class=Bl-tag><dt><a class=permalink href=#PPROT_SET><code class=Dv id=PPROT_SET>PPROT_SET</code></a></dt><dd>Mark the selected processes as protected.</dd><dt><a class=permalink href=#PPROT_CLEAR><code class=Dv id=PPROT_CLEAR>PPROT_CLEAR</code></a></dt><dd>Clear the protected state of selected processes.</dd></dl><p class=Pp>The following optional flags are supported:</p><dl class=Bl-tag><dt><a class=permalink href=#PPROT_DESCEND><code class=Dv id=PPROT_DESCEND>PPROT_DESCEND</code></a></dt><dd>Apply the requested operation to all child processes of each selected process in addition to each selected process.</dd><dt><a class=permalink href=#PPROT_INHERIT><code class=Dv id=PPROT_INHERIT>PPROT_INHERIT</code></a></dt><dd>When used with <code class=Dv>PPROT_SET</code>, mark all future child processes of each selected process as protected. Future child processes will also mark all of their future child processes.</dd></dl></dd><dt><a class=permalink href=#PROC_REAP_ACQUIRE><code class=Dv id=PROC_REAP_ACQUIRE>PROC_REAP_ACQUIRE</code></a></dt><dd>Acquires the reaper status for the current process. Reaper status means that children orphaned by the reaper's descendants that were forked after the acquisition of reaper status are reparented to the reaper process. After system initialization, <a class=Xr href=init.8.html>init(8)</a> is the default reaper.</dd><dt><a class=permalink href=#PROC_REAP_RELEASE><code class=Dv id=PROC_REAP_RELEASE>PROC_REAP_RELEASE</code></a></dt><dd>Release the reaper state for the current process. The reaper of the current process becomes the new reaper of the current process's descendants.</dd><dt><a class=permalink href=#PROC_REAP_STATUS><code class=Dv id=PROC_REAP_STATUS>PROC_REAP_STATUS</code></a></dt><dd>Provides information about the reaper of the specified process, or the process itself when it is a reaper. The <var class=Fa>data</var> argument must point to a <var class=Vt>procctl_reaper_status</var> structure which is filled in by the syscall on successful return. <div class="Bd Pp"><pre>
struct procctl_reaper_status {
	u_int	rs_flags;
	u_int	rs_children;
	u_int	rs_descendants;
	pid_t	rs_reaper;
	pid_t	rs_pid;
};
    </pre></div> The <var class=Fa>rs_flags</var> may have the following flags returned: <dl class=Bl-tag><dt><a class=permalink href=#REAPER_STATUS_OWNED><code class=Dv id=REAPER_STATUS_OWNED>REAPER_STATUS_OWNED</code></a></dt><dd>The specified process has acquired reaper status and has not released it. When the flag is returned, the specified process <var class=Fa>id</var>, pid, identifies the reaper, otherwise the <var class=Fa>rs_reaper</var> field of the structure is set to the pid of the reaper for the specified process id.</dd><dt><a class=permalink href=#REAPER_STATUS_REALINIT><code class=Dv id=REAPER_STATUS_REALINIT>REAPER_STATUS_REALINIT</code></a></dt><dd>The specified process is the root of the reaper tree, i.e., <a class=Xr href=init.8.html>init(8)</a>.</dd></dl><p class=Pp>The <var class=Fa>rs_children</var> field returns the number of children of the reaper among the descendants. It is possible to have a child whose reaper is not the specified process, since the reaper for any existing children is not reset on the <code class=Dv>PROC_REAP_ACQUIRE</code> operation. The <var class=Fa>rs_descendants</var> field returns the total number of descendants of the reaper(s), not counting descendants of the reaper in the subtree. The <var class=Fa>rs_reaper</var> field returns the reaper pid. The <var class=Fa>rs_pid</var> returns the pid of one reaper child if there are any descendants.</p></dd><dt><a class=permalink href=#PROC_REAP_GETPIDS><code class=Dv id=PROC_REAP_GETPIDS>PROC_REAP_GETPIDS</code></a></dt><dd>Queries the list of descendants of the reaper of the specified process. The request takes a pointer to a <var class=Vt>procctl_reaper_pids</var> structure in the <var class=Fa>data</var> parameter. <div class="Bd Pp"><pre>
struct procctl_reaper_pids {
	u_int	rp_count;
	struct procctl_reaper_pidinfo *rp_pids;
};
    </pre></div> When called, the <var class=Fa>rp_pids</var> field must point to an array of <var class=Vt>procctl_reaper_pidinfo</var> structures, to be filled in on return, and the <var class=Fa>rp_count</var> field must specify the size of the array, into which no more than <var class=Fa>rp_count</var> elements will be filled in by the kernel. <p class=Pp>The <var class=Vt>struct procctl_reaper_pidinfo</var> structure provides some information about one of the reaper's descendants. Note that for a descendant that is not a child, it may be incorrectly identified because of a race in which the original child process exited and the exited process's pid was reused for an unrelated process.</p><div class="Bd Pp"><pre>
struct procctl_reaper_pidinfo {
	pid_t	pi_pid;
	pid_t	pi_subtree;
	u_int	pi_flags;
};
    </pre></div> The <var class=Fa>pi_pid</var> field is the process id of the descendant. The <var class=Fa>pi_subtree</var> field provides the pid of the child of the reaper, which is the (grand-)parent of the process. The <var class=Fa>pi_flags</var> field returns the following flags, further describing the descendant: <dl class=Bl-tag><dt><a class=permalink href=#REAPER_PIDINFO_VALID><code class=Dv id=REAPER_PIDINFO_VALID>REAPER_PIDINFO_VALID</code></a></dt><dd>Set to indicate that the <var class=Vt>procctl_reaper_pidinfo</var> structure was filled in by the kernel. Zero-filling the <var class=Fa>rp_pids</var> array and testing the <code class=Dv>REAPER_PIDINFO_VALID</code> flag allows the caller to detect the end of the returned array.</dd><dt><a class=permalink href=#REAPER_PIDINFO_CHILD><code class=Dv id=REAPER_PIDINFO_CHILD>REAPER_PIDINFO_CHILD</code></a></dt><dd>The <var class=Fa>pi_pid</var> field identifies the direct child of the reaper.</dd><dt><a class=permalink href=#REAPER_PIDINFO_REAPER><code class=Dv id=REAPER_PIDINFO_REAPER>REAPER_PIDINFO_REAPER</code></a></dt><dd>The reported process is itself a reaper. The descendants of the subordinate reaper are not reported.</dd></dl></dd><dt><a class=permalink href=#PROC_REAP_KILL><code class=Dv id=PROC_REAP_KILL>PROC_REAP_KILL</code></a></dt><dd>Request to deliver a signal to some subset of the descendants of the reaper. The <var class=Fa>data</var> parameter must point to a <var class=Vt>procctl_reaper_kill</var> structure, which is used both for parameters and status return. <div class="Bd Pp"><pre>
struct procctl_reaper_kill {
	int	rk_sig;
	u_int	rk_flags;
	pid_t	rk_subtree;
	u_int	rk_killed;
	pid_t	rk_fpid;
};
    </pre></div> The <var class=Fa>rk_sig</var> field specifies the signal to be delivered. Zero is not a valid signal number, unlike for <a class=Xr href=kill.2.html>kill(2)</a>. The <var class=Fa>rk_flags</var> field further directs the operation. It is or-ed from the following flags: <dl class=Bl-tag><dt><a class=permalink href=#REAPER_KILL_CHILDREN><code class=Dv id=REAPER_KILL_CHILDREN>REAPER_KILL_CHILDREN</code></a></dt><dd>Deliver the specified signal only to direct children of the reaper.</dd><dt><a class=permalink href=#REAPER_KILL_SUBTREE><code class=Dv id=REAPER_KILL_SUBTREE>REAPER_KILL_SUBTREE</code></a></dt><dd>Deliver the specified signal only to descendants that were forked by the direct child with pid specified in the <var class=Fa>rk_subtree</var> field.</dd></dl> If neither the <code class=Dv>REAPER_KILL_CHILDREN</code> nor the <code class=Dv>REAPER_KILL_SUBTREE</code> flags are specified, all current descendants of the reaper are signalled. <p class=Pp>If a signal was delivered to any process, the return value from the request is zero. In this case, the <var class=Fa>rk_killed</var> field identifies the number of processes signalled. The <var class=Fa>rk_fpid</var> field is set to the pid of the first process for which signal delivery failed, e.g., due to permission problems. If no such process exists, the <var class=Fa>rk_fpid</var> field is set to -1.</p></dd><dt><a class=permalink href=#PROC_TRACE_CTL><code class=Dv id=PROC_TRACE_CTL>PROC_TRACE_CTL</code></a></dt><dd>Enable or disable tracing of the specified process(es), according to the value of the integer argument. Tracing includes attachment to the process using the <a class=Xr href=ptrace.2.html>ptrace(2)</a> and <a class=Xr href=ktrace.2.html>ktrace(2)</a>, debugging sysctls, <a class=Xr href=hwpmc.4.html>hwpmc(4)</a>, <a class=Xr href=dtrace.1.html>dtrace(1)</a>, and core dumping. Possible values for the <var class=Fa>data</var> argument are: <dl class=Bl-tag><dt><a class=permalink href=#PROC_TRACE_CTL_ENABLE><code class=Dv id=PROC_TRACE_CTL_ENABLE>PROC_TRACE_CTL_ENABLE</code></a></dt><dd>Enable tracing, after it was disabled by <code class=Dv>PROC_TRACE_CTL_DISABLE</code>. Only allowed for self.</dd><dt><a class=permalink href=#PROC_TRACE_CTL_DISABLE><code class=Dv id=PROC_TRACE_CTL_DISABLE>PROC_TRACE_CTL_DISABLE</code></a></dt><dd>Disable tracing for the specified process. Tracing is re-enabled when the process changes the executing program with the <a class=Xr href=execve.2.html>execve(2)</a> syscall. A child inherits the trace settings from the parent on <a class=Xr href=fork.2.html>fork(2)</a>.</dd><dt><a class=permalink href=#PROC_TRACE_CTL_DISABLE_EXEC><code class=Dv id=PROC_TRACE_CTL_DISABLE_EXEC>PROC_TRACE_CTL_DISABLE_EXEC</code></a></dt><dd>Same as <code class=Dv>PROC_TRACE_CTL_DISABLE</code>, but the setting persists for the process even after <a class=Xr href=execve.2.html>execve(2)</a>.</dd></dl></dd><dt><a class=permalink href=#PROC_TRACE_STATUS><code class=Dv id=PROC_TRACE_STATUS>PROC_TRACE_STATUS</code></a></dt><dd>Returns the current tracing status for the specified process in the integer variable pointed to by <var class=Fa>data</var>. If tracing is disabled, <var class=Fa>data</var> is set to -1. If tracing is enabled, but no debugger is attached by the <a class=Xr href=ptrace.2.html>ptrace(2)</a> syscall, <var class=Fa>data</var> is set to 0. If a debugger is attached, <var class=Fa>data</var> is set to the pid of the debugger process.</dd><dt><a class=permalink href=#PROC_TRAPCAP_CTL><code class=Dv id=PROC_TRAPCAP_CTL>PROC_TRAPCAP_CTL</code></a></dt><dd>Controls the capability mode sandbox actions for the specified sandboxed processes, on a return from any syscall which gives either a <code class=Er>ENOTCAPABLE</code> or <code class=Er>ECAPMODE</code> error. If the control is enabled, such errors from the syscalls cause delivery of the synchronous <code class=Dv>SIGTRAP</code> signal to the thread immediately before returning from the syscalls. <p class=Pp>Possible values for the <var class=Fa>data</var> argument are:</p><dl class=Bl-tag><dt><a class=permalink href=#PROC_TRAPCAP_CTL_ENABLE><code class=Dv id=PROC_TRAPCAP_CTL_ENABLE>PROC_TRAPCAP_CTL_ENABLE</code></a></dt><dd>Enable the <code class=Dv>SIGTRAP</code> signal delivery on capability mode access violations. The enabled mode is inherited by the children of the process, and is kept after <a class=Xr href=fexecve.2.html>fexecve(2)</a> calls.</dd><dt><a class=permalink href=#PROC_TRAPCAP_CTL_DISABLE><code class=Dv id=PROC_TRAPCAP_CTL_DISABLE>PROC_TRAPCAP_CTL_DISABLE</code></a></dt><dd>Disable the signal delivery on capability mode access violations. Note that the global sysctl <code class=Dv>kern.trap_enotcap</code> might still cause the signal to be delivered. See <a class=Xr href=capsicum.4.html>capsicum(4)</a>.</dd></dl><p class=Pp>On signal delivery, the <var class=Va>si_errno</var> member of the <var class=Fa>siginfo</var> signal handler parameter is set to the syscall error value, and the <var class=Va>si_code</var> member is set to <code class=Dv>TRAP_CAP</code>. The system call number is stored in the <var class=Va>si_syscall</var> field of the <var class=Fa>siginfo</var> signal handler parameter. The other system call parameters can be read from the <var class=Fa>ucontext_t</var> but the system call number is typically stored in the register that also contains the return value and so is unavailable in the signal handler.</p><p class=Pp>See <a class=Xr href=capsicum.4.html>capsicum(4)</a> for more information about the capability mode.</p></dd><dt><a class=permalink href=#PROC_TRAPCAP_STATUS><code class=Dv id=PROC_TRAPCAP_STATUS>PROC_TRAPCAP_STATUS</code></a></dt><dd>Return the current status of signalling capability mode access violations for the specified process. The integer value pointed to by the <var class=Fa>data</var> argument is set to the <code class=Dv>PROC_TRAPCAP_CTL_ENABLE</code> value if the process control enables signal delivery, and to <code class=Dv>PROC_TRAPCAP_CTL_DISABLE</code> otherwise. <p class=Pp>See the note about sysctl <code class=Dv>kern.trap_enotcap</code> above, which gives independent global control of signal delivery.</p></dd><dt><a class=permalink href=#PROC_PDEATHSIG_CTL><code class=Dv id=PROC_PDEATHSIG_CTL>PROC_PDEATHSIG_CTL</code></a></dt><dd>Request the delivery of a signal when the parent of the calling process exits. <var class=Fa>idtype</var> must be <code class=Dv>P_PID</code> and <var class=Fa>id</var> must be the either caller's pid or zero, with no difference in effect. The value is cleared for child processes and when executing set-user-ID or set-group-ID binaries. <var class=Fa>data</var> must point to a value of type <var class=Vt>int</var> indicating the signal that should be delivered to the caller. Use zero to cancel a previously requested signal delivery.</dd><dt><a class=permalink href=#PROC_PDEATHSIG_STATUS><code class=Dv id=PROC_PDEATHSIG_STATUS>PROC_PDEATHSIG_STATUS</code></a></dt><dd>Query the current signal number that will be delivered when the parent of the calling process exits. <var class=Fa>idtype</var> must be <code class=Dv>P_PID</code> and <var class=Fa>id</var> must be the either caller's pid or zero, with no difference in effect. <var class=Fa>data</var> must point to a memory location that can hold a value of type <var class=Vt>int</var>. If signal delivery has not been requested, it will contain zero on return.</dd><dt><a class=permalink href=#PROC_STACKGAP_CTL><code class=Dv id=PROC_STACKGAP_CTL>PROC_STACKGAP_CTL</code></a></dt><dd>Controls the stack gaps in the specified process. A stack gap is the part of the growth area for a <code class=Dv>MAP_STACK</code> mapped region that is reserved and never filled by memory. Instead, the process is guaranteed to receive a <code class=Dv>SIGSEGV</code> signal on accessing pages in the gap. Gaps protect against stack overflow corrupting memory adjacent to the stack. <p class=Pp>The <var class=Fa>data</var> argument must point to an integer variable containing flags. The following flags are allowed:</p><dl class=Bl-tag><dt><a class=permalink href=#PROC_STACKGAP_ENABLE><code class=Dv id=PROC_STACKGAP_ENABLE>PROC_STACKGAP_ENABLE</code></a></dt><dd>This flag is only accepted for consistency with <code class=Dv>PROC_STACKGAP_STATUS</code>. If stack gaps are enabled, the flag is ignored. If disabled, the flag causes an <code class=Ev>EINVAL</code> error to be returned. After gaps are disabled in a process, they can only be re-enabled when an <a class=Xr href=execve.2.html>execve(2)</a> is performed.</dd><dt><a class=permalink href=#PROC_STACKGAP_DISABLE><code class=Dv id=PROC_STACKGAP_DISABLE>PROC_STACKGAP_DISABLE</code></a></dt><dd>Disable stack gaps for the process. For existing stacks, the gap is no longer a reserved part of the growth area and can be filled by memory on access.</dd><dt><a class=permalink href=#PROC_STACKGAP_ENABLE_EXEC><code class=Dv id=PROC_STACKGAP_ENABLE_EXEC>PROC_STACKGAP_ENABLE_EXEC</code></a></dt><dd>Enable stack gaps for programs started after an <a class=Xr href=execve.2.html>execve(2)</a> by the specified process.</dd><dt><a class=permalink href=#PROC_STACKGAP_DISABLE_EXEC><code class=Dv id=PROC_STACKGAP_DISABLE_EXEC>PROC_STACKGAP_DISABLE_EXEC</code></a></dt><dd>Inherit disabled stack gaps state after <a class=Xr href=execve.2.html>execve(2)</a>. In other words, if the currently executing program has stack gaps disabled, they are kept disabled on exec. If gaps were enabled, they are kept enabled after exec.</dd></dl><p class=Pp>The stack gap state is inherited from the parent on <a class=Xr href=fork.2.html>fork(2)</a>.</p></dd><dt><a class=permalink href=#PROC_STACKGAP_STATUS><code class=Dv id=PROC_STACKGAP_STATUS>PROC_STACKGAP_STATUS</code></a></dt><dd>Returns the current stack gap state for the specified process. <var class=Fa>data</var> must point to an integer variable, which is used to return a bitmask consisting of the following flags: <dl class=Bl-tag><dt><a class=permalink href=#PROC_STACKGAP_ENABLE_2><code class=Dv id=PROC_STACKGAP_ENABLE_2>PROC_STACKGAP_ENABLE</code></a></dt><dd>Stack gaps are enabled.</dd><dt><a class=permalink href=#PROC_STACKGAP_DISABLE_2><code class=Dv id=PROC_STACKGAP_DISABLE_2>PROC_STACKGAP_DISABLE</code></a></dt><dd>Stack gaps are disabled.</dd><dt><a class=permalink href=#PROC_STACKGAP_ENABLE_EXEC_2><code class=Dv id=PROC_STACKGAP_ENABLE_EXEC_2>PROC_STACKGAP_ENABLE_EXEC</code></a></dt><dd>Stack gaps are enabled in the process after <a class=Xr href=execve.2.html>execve(2)</a>.</dd><dt><a class=permalink href=#PROC_STACKGAP_DISABLE_EXEC_2><code class=Dv id=PROC_STACKGAP_DISABLE_EXEC_2>PROC_STACKGAP_DISABLE_EXEC</code></a></dt><dd>Stack gaps are disabled in the process after <a class=Xr href=execve.2.html>execve(2)</a>.</dd></dl></dd><dt><a class=permalink href=#PROC_NO_NEW_PRIVS_CTL><code class=Dv id=PROC_NO_NEW_PRIVS_CTL>PROC_NO_NEW_PRIVS_CTL</code></a></dt><dd>Allows one to ignore the SUID and SGID bits on the program images activated by <a class=Xr href=execve.2.html>execve(2)</a> in the specified process and its future descendants. The <var class=Fa>data</var> parameter must point to the integer variable holding the following value: <dl class=Bl-tag><dt><a class=permalink href=#PROC_NO_NEW_PRIVS_ENABLE><code class=Dv id=PROC_NO_NEW_PRIVS_ENABLE>PROC_NO_NEW_PRIVS_ENABLE</code></a></dt><dd>Request SUID and SGID bits to be ignored.</dd></dl><p class=Pp>It is not possible to disable it once it has been enabled.</p></dd><dt><a class=permalink href=#PROC_NO_NEW_PRIVS_STATUS><code class=Dv id=PROC_NO_NEW_PRIVS_STATUS>PROC_NO_NEW_PRIVS_STATUS</code></a></dt><dd>Returns the current status of SUID/SGID enablement for the target process. The <var class=Fa>data</var> parameter must point to the integer variable, where one of the following values is written: <dl class=Bl-tag><dt><a class=permalink href=#PROC_NO_NEW_PRIVS_ENABLE_2><code class=Dv id=PROC_NO_NEW_PRIVS_ENABLE_2>PROC_NO_NEW_PRIVS_ENABLE</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_NO_NEW_PRIVS_DISABLE><code class=Dv id=PROC_NO_NEW_PRIVS_DISABLE>PROC_NO_NEW_PRIVS_DISABLE</code></a></dt><dd style="width: auto;"> </dd></dl></dd><dt><a class=permalink href=#PROC_WXMAP_CTL><code class=Dv id=PROC_WXMAP_CTL>PROC_WXMAP_CTL</code></a></dt><dd>Controls the 'write exclusive against execution' permissions for the mappings in the process address space. It overrides the global settings established by the <code class=Dv>kern.elf{32/64}.allow_wx</code> sysctl, and the corresponding bit in the ELF control note, see <a class=Xr href=elfctl.1.html>elfctl(1)</a>. <p class=Pp>The <var class=Fa>data</var> parameter must point to the integer variable holding one of the following values:</p><dl class=Bl-tag><dt><a class=permalink href=#PROC_WX_MAPPINGS_PERMIT><code class=Dv id=PROC_WX_MAPPINGS_PERMIT>PROC_WX_MAPPINGS_PERMIT</code></a></dt><dd>Enable creation of mappings that have both write and execute protection attributes, in the specified process' address space.</dd><dt><a class=permalink href=#PROC_WX_MAPPINGS_DISALLOW_EXEC><code class=Dv id=PROC_WX_MAPPINGS_DISALLOW_EXEC>PROC_WX_MAPPINGS_DISALLOW_EXEC</code></a></dt><dd>In the new address space created by <a class=Xr href=execve.2.html>execve(2)</a>, disallow creation of mappings that have both write and execute permissions.</dd></dl><p class=Pp>Once creation of writeable and executable mappings is allowed, it is impossible (and pointless) to disallow it. The only way to ensure the absence of such mappings after they were enabled in a given process, is to set the <code class=Dv>PROC_WX_MAPPINGS_DISALLOW_EXEC</code> flag and <a class=Xr href=execve.2.html>execve(2)</a> an image.</p></dd><dt><a class=permalink href=#PROC_WXMAP_STATUS><code class=Dv id=PROC_WXMAP_STATUS>PROC_WXMAP_STATUS</code></a></dt><dd>Returns the current status of the 'write exclusive against execution' enforcement for the specified process. The <code class=Dv>data</code> parameter must point to the integer variable, where one of the following values is written: <dl class=Bl-tag><dt><a class=permalink href=#PROC_WX_MAPPINGS_PERMIT_2><code class=Dv id=PROC_WX_MAPPINGS_PERMIT_2>PROC_WX_MAPPINGS_PERMIT</code></a></dt><dd>Creation of simultaneously writable and executable mapping is permitted, otherwise the process cannot create such mappings.</dd><dt><a class=permalink href=#PROC_WX_MAPPINGS_DISALLOW_EXEC_2><code class=Dv id=PROC_WX_MAPPINGS_DISALLOW_EXEC_2>PROC_WX_MAPPINGS_DISALLOW_EXEC</code></a></dt><dd>After <a class=Xr href=execve.2.html>execve(2)</a>, the new address space should disallow creation of simultaneously writable and executable mappings.</dd></dl><p class=Pp>Additionally, if the address space of the process disallows creation of simultaneously writable and executable mappings and it is guaranteed that no such mapping was created since address space creation, the <code class=Dv>PROC_WXORX_ENFORCE</code> flag is set in the returned value.</p></dd></dl></section><section class=Sh><h2 class=Sh id=x86_MACHINE_SPECIFIC_REQUESTS><a class=permalink href=#x86_MACHINE_SPECIFIC_REQUESTS>x86 MACHINE-SPECIFIC REQUESTS</a></h2><dl class=Bl-tag><dt><a class=permalink href=#PROC_KPTI_CTL><code class=Dv id=PROC_KPTI_CTL>PROC_KPTI_CTL</code></a></dt><dd>AMD64 only. Controls the Kernel Page Table Isolation (KPTI) option for the children of the specified process. For the command to work, the <var class=Va>vm.pmap.kpti</var> tunable must be enabled on boot. It is not possible to change the KPTI setting for a running process, except at the <a class=Xr href=execve.2.html>execve(2)</a>, where the address space is reinitialized. <p class=Pp>The <var class=Fa>data</var> parameter must point to an integer variable containing one of the following commands:</p><dl class=Bl-tag><dt><a class=permalink href=#PROC_KPTI_CTL_ENABLE_ON_EXEC><code class=Dv id=PROC_KPTI_CTL_ENABLE_ON_EXEC>PROC_KPTI_CTL_ENABLE_ON_EXEC</code></a></dt><dd>Enable KPTI after <a class=Xr href=execve.2.html>execve(2)</a>.</dd><dt><a class=permalink href=#PROC_KPTI_CTL_DISABLE_ON_EXEC><code class=Dv id=PROC_KPTI_CTL_DISABLE_ON_EXEC>PROC_KPTI_CTL_DISABLE_ON_EXEC</code></a></dt><dd>Disable KPTI after <a class=Xr href=execve.2.html>execve(2)</a>. Only root or a process having the <var class=Va>PRIV_IO</var> privilege might use this option.</dd></dl></dd><dt><a class=permalink href=#PROC_KPTI_STATUS><code class=Dv id=PROC_KPTI_STATUS>PROC_KPTI_STATUS</code></a></dt><dd>Returns the current KPTI status for the specified process. <var class=Fa>data</var> must point to the integer variable, which returns the following statuses: <dl class=Bl-tag><dt><a class=permalink href=#PROC_KPTI_CTL_ENABLE_ON_EXEC_2><code class=Dv id=PROC_KPTI_CTL_ENABLE_ON_EXEC_2>PROC_KPTI_CTL_ENABLE_ON_EXEC</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#PROC_KPTI_CTL_DISABLE_ON_EXEC_2><code class=Dv id=PROC_KPTI_CTL_DISABLE_ON_EXEC_2>PROC_KPTI_CTL_DISABLE_ON_EXEC</code></a></dt><dd style="width: auto;"> </dd></dl><p class=Pp>The status is or-ed with the <var class=Va>PROC_KPTI_STATUS_ACTIVE</var> in case KPTI is active for the current address space of the process.</p></dd></dl></section><section class=Sh><h2 class=Sh id=NOTES><a class=permalink href=#NOTES>NOTES</a></h2> Disabling tracing on a process should not be considered a security feature, as it is bypassable both by the kernel and privileged processes, and via other system mechanisms. As such, it should not be utilized to reliably protect cryptographic keying material or other confidential data. <p class=Pp>Note that processes can trivially bypass the 'no simultaneously writable and executable mappings' policy by first marking some mapping as writeable and write code to it, then removing write and adding execute permission. This may be legitimately required by some programs, such as JIT compilers.</p></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> If an error occurs, a value of -1 is returned and <var class=Va>errno</var> is set to indicate the error. </section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The <code class=Fn>procctl</code>() system call will fail if: <dl class=Bl-tag><dt>[<a class=permalink href=#EFAULT><code class=Er id=EFAULT>EFAULT</code></a>]</dt><dd>The <var class=Fa>data</var> parameter points outside the process's allocated address space.</dd><dt>[<a class=permalink href=#EINVAL><code class=Er id=EINVAL>EINVAL</code></a>]</dt><dd>The <var class=Fa>cmd</var> argument specifies an unsupported command. <p class=Pp>The <var class=Fa>idtype</var> argument specifies an unsupported identifier type.</p></dd><dt>[<a class=permalink href=#EPERM><code class=Er id=EPERM>EPERM</code></a>]</dt><dd>The calling process does not have permission to perform the requested operation on any of the selected processes.</dd><dt>[<a class=permalink href=#ESRCH><code class=Er id=ESRCH>ESRCH</code></a>]</dt><dd>No processes matched the requested <var class=Fa>idtype</var> and <var class=Fa>id</var>.</dd><dt>[<a class=permalink href=#EINVAL_2><code class=Er id=EINVAL_2>EINVAL</code></a>]</dt><dd>An invalid operation or flag was passed in <var class=Fa>data</var> for a <code class=Dv>PROC_SPROTECT</code> command.</dd><dt>[<a class=permalink href=#EPERM_2><code class=Er id=EPERM_2>EPERM</code></a>]</dt><dd>The <var class=Fa>idtype</var> argument is not equal to <code class=Dv>P_PID</code>, or <var class=Fa>id</var> is not equal to the pid of the calling process, for <code class=Dv>PROC_REAP_ACQUIRE</code> or <code class=Dv>PROC_REAP_RELEASE</code> requests.</dd><dt>[<a class=permalink href=#EINVAL_3><code class=Er id=EINVAL_3>EINVAL</code></a>]</dt><dd>Invalid or undefined flags were passed to a <code class=Dv>PROC_REAP_KILL</code> request.</dd><dt>[<a class=permalink href=#EINVAL_4><code class=Er id=EINVAL_4>EINVAL</code></a>]</dt><dd>An invalid or zero signal number was requested for a <code class=Dv>PROC_REAP_KILL</code> request.</dd><dt>[<a class=permalink href=#EINVAL_5><code class=Er id=EINVAL_5>EINVAL</code></a>]</dt><dd>The <code class=Dv>PROC_REAP_RELEASE</code> request was issued by the <a class=Xr href=init.8.html>init(8)</a> process.</dd><dt>[<a class=permalink href=#EBUSY><code class=Er id=EBUSY>EBUSY</code></a>]</dt><dd>The <code class=Dv>PROC_REAP_ACQUIRE</code> request was issued by a process that had already acquired reaper status and has not yet released it.</dd><dt>[<a class=permalink href=#EBUSY_2><code class=Er id=EBUSY_2>EBUSY</code></a>]</dt><dd>The <code class=Dv>PROC_TRACE_CTL</code> request was issued for a process already being traced.</dd><dt>[<a class=permalink href=#EPERM_3><code class=Er id=EPERM_3>EPERM</code></a>]</dt><dd>The <code class=Dv>PROC_TRACE_CTL</code> request to re-enable tracing of the process (<code class=Dv>PROC_TRACE_CTL_ENABLE</code>), or to disable persistence of <code class=Dv>PROC_TRACE_CTL_DISABLE</code> on <a class=Xr href=execve.2.html>execve(2)</a> was issued for a non-current process.</dd><dt>[<a class=permalink href=#EINVAL_6><code class=Er id=EINVAL_6>EINVAL</code></a>]</dt><dd>The value of the integer <var class=Fa>data</var> parameter for the <code class=Dv>PROC_TRACE_CTL</code> or <code class=Dv>PROC_TRAPCAP_CTL</code> request is invalid.</dd><dt>[<a class=permalink href=#EINVAL_7><code class=Er id=EINVAL_7>EINVAL</code></a>]</dt><dd>The <code class=Dv>PROC_PDEATHSIG_CTL</code> or <code class=Dv>PROC_PDEATHSIG_STATUS</code> request referenced an unsupported <var class=Fa>id</var>, <var class=Fa>idtype</var> or invalid signal number.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=dtrace.1.html>dtrace(1)</a>, <a class=Xr href=proccontrol.1.html>proccontrol(1)</a>, <a class=Xr href=protect.1.html>protect(1)</a>, <a class=Xr href=cap_enter.2.html>cap_enter(2)</a>, <a class=Xr href=kill.2.html>kill(2)</a>, <a class=Xr href=ktrace.2.html>ktrace(2)</a>, <a class=Xr href=mmap.2.html>mmap(2)</a>, <a class=Xr href=mprotect.2.html>mprotect(2)</a>, <a class=Xr href=ptrace.2.html>ptrace(2)</a>, <a class=Xr href=wait.2.html>wait(2)</a>, <a class=Xr href=capsicum.4.html>capsicum(4)</a>, <a class=Xr href=hwpmc.4.html>hwpmc(4)</a>, <a class=Xr href=init.8.html>init(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Fn>procctl</code>() function appeared in <span class=Ux>FreeBSD 10.0</span>. <p class=Pp>The reaper facility is based on a similar feature of Linux and DragonflyBSD, and first appeared in <span class=Ux>FreeBSD 10.2</span>.</p><p class=Pp>The <code class=Dv>PROC_PDEATHSIG_CTL</code> facility is based on the prctl(PR_SET_PDEATHSIG, ...) feature of Linux, and first appeared in <span class=Ux>FreeBSD 11.2</span>.</p><p class=Pp>The ASLR support was added to system for the checklists compliance in <span class=Ux>FreeBSD 13.0</span>.</p></section></div><table class=foot><tr><td class=foot-date>September 2, 2021</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>