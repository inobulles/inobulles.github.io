<!DOCTYPE html>
<html><head><meta charset=utf-8><title>dtc(1)</title><keywords content=man,dtc></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>dtc(1)</h1><table class=head><tr><td class=head-ltitle>DTC(1)</td><td class=head-vol>FreeBSD General Commands Manual</td><td class=head-rtitle>DTC(1)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>dtc</code> — <div class=Nd>device tree compiler</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>dtc</code></td><td>[<code class=Fl>-@fhsv</code>] [<code class=Fl>-b</code><var class=Ar>boot_cpu_id</var>] [<code class=Fl>-d</code><var class=Ar>dependency_file</var>] [<code class=Fl>-i</code><var class=Ar>include_path</var>] [<code class=Fl>-E</code><var class=Ar>[no-]checker_name</var>] [<code class=Fl>-H</code><var class=Ar>phandle_format</var>] [<code class=Fl>-I</code><var class=Ar>input_format</var>] [<code class=Fl>-O</code><var class=Ar>output_format</var>] [<code class=Fl>-o</code><var class=Ar>output_file</var>] [<code class=Fl>-R</code><var class=Ar>entries</var>] [<code class=Fl>-S</code><var class=Ar>bytes</var>] [<code class=Fl>-p</code><var class=Ar>bytes</var>] [<code class=Fl>-V</code><var class=Ar>blob_version</var>] [<code class=Fl>-W</code><var class=Ar>[no-]checker_name</var>] [<code class=Fl>-P</code><var class=Ar>predefined_properties</var>] <var class=Ar>input_file</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>dtc</code> utility converts between flattened device tree (FDT) representations. It is most commonly used to generate device tree blobs (DTB), the binary representation of an FDT, from device tree sources (DTS), the ASCII text source representation. <p class=Pp>The binary can be written in two formats, binary and assembly. The binary is identical to the in-memory representation and can be used directly by firmware, loaders, and so on. The assembly format, documented in <a class=Sx href=#ASM_FORMAT>ASM FORMAT</a>, will produce the same binary format when assembled, but also includes some global variables that refer to parts of the table. This format is most commonly used to produce a kernel specific to a device, with the device tree blob compiled in.</p><p class=Pp>The options are as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a><var class=Ar>dependency_file</var></dt><dd>Writes a dependency file understandable by make to the specified file. This file can be included in a Makefile and will ensure that the output file depends on the input file and any files that it includes. This argument is only useful when the input is DTS, as only the source format has a notion of inclusions.</dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a><var class=Ar>include_path</var></dt><dd>Adds a path to search for include files.</dd><dt><a class=permalink href=#E><code class=Fl id=E>-E</code></a><var class=Ar>[no-]checker_name</var></dt><dd>Enable or disable a specified checker. The argument is the name of the checker. The full list of checkers is given in <a class=Sx href=#CHECKERS>CHECKERS</a>.</dd><dt><a class=permalink href=#@><code class=Fl id=@>-@</code></a></dt><dd>Emit a __symbols__ node to allow plugins to be loaded.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a></dt><dd>Force the tool to attempt to generate the output, even if the input had errors.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Display the help text and exit.</dd><dt><a class=permalink href=#H><code class=Fl id=H>-H</code></a><var class=Ar>phandle_format</var></dt><dd>Specifies the type of phandle nodes to generate in the output. Valid values are: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Ar>linux</var></dt><dd>Generate the legacy linux,phandle nodes expected by older systems.</dd><dt><var class=Ar>epapr</var></dt><dd>Generate the phandle nodes, as described in the ePAPR specification. This is the most sensible option for device trees being used with <span class=Ux>FreeBSD</span>.</dd><dt><var class=Ar>both</var></dt><dd>Generate both, for maximum compatibility.</dd></dl></dd><dt><a class=permalink href=#I><code class=Fl id=I>-I</code></a><var class=Ar>input_format</var></dt><dd>Specifies the input format. Valid values are: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Ar>dtb</var></dt><dd>Device tree blob. The binary representation of the FDT.</dd><dt><var class=Ar>dts</var></dt><dd>Device tree source. The ASCII representation of the FDT. This is the default if the input format is not explicitly stated.</dd></dl></dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>output_format</var></dt><dd>Specifies the output format. Valid values are: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Ar>asm</var></dt><dd>Assembler source for generating a device tree blob, as described in <a class=Sx href=#ASM_FORMAT>ASM FORMAT</a>.</dd><dt><var class=Ar>dtb</var></dt><dd>Device tree blob. The binary representation of the FDT. This is the default if the output format is not explicitly stated.</dd><dt><var class=Ar>dts</var></dt><dd>Device tree source. The ASCII representation of the FDT.</dd></dl></dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>output_file</var></dt><dd>The file to which to write the output.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>predefined_macro</var></dt><dd>Defines a macro, in the form <var class=Ar>name=value</var> or <var class=Ar>name</var> to be used for device tree source files that contain conditional components. This tool supports two extensions to the standard to support conditional compilation of device trees. The first is an <var class=Ar>/include/if [property]/ file.dts</var> directive that is allowed at the start of a file and which will only include the specified file if it the specified property is passed with this flag. The second is the <var class=Ar>$NAME</var> format for property values. These allow property value to be specified on the command line.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a><var class=Ar>entries</var></dt><dd>The number of empty reservation table entries to pad the table with. This is useful if you are generating a device tree blob for bootloader or similar that needs to reserve some memory before passing control to the operating system.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>bytes</var></dt><dd>The minimum size in bytes of the blob. The blob will be padded after the strings table to ensure that it is the correct size. This is useful for environments where the device tree blob must be modified in place.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>bytes</var></dt><dd>The number of bytes of padding to add to the blob. The blob will be padded after the strings table to ensure that it is the correct size. This is useful for environments where the device tree blob must be modified in place.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a><var class=Ar>[no-]checker_name</var></dt><dd>Enable or disable a specified checker. This is an alias for <code class=Fl>-E</code>.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>Sorts the properties and nodes in the tree. This is mainly useful when using tools like <a class=Xr href=diff.1.html>diff(1)</a> to compare two device tree sources.</dd><dt><a class=permalink href=#V><code class=Fl id=V>-V</code></a><var class=Ar>output_version</var></dt><dd>The version of the format to output. This is only relevant for binary outputs, and only a value of 17 is currently supported.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Display the tool version and exit.</dd><dt><var class=Ar>input_file</var></dt><dd>The source file.</dd></dl></section><section class=Sh><h2 class=Sh id=ASM_FORMAT><a class=permalink href=#ASM_FORMAT>ASM FORMAT</a></h2> The assembly format defines several globals that can be referred to from other compilation units, in addition to any labels specified in the source. These are: <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>dt_blob_start</dt><dd>start of the device tree blob.</dd><dt>dt_header</dt><dd>start of the header, usually identical to the start of the blob.</dd><dt>dt_reserve_map</dt><dd>start of the reservation map.</dd><dt>dt_struct_start</dt><dd>start of the structure table.</dd><dt>dt_struct_end</dt><dd>end of the structure table.</dd><dt>dt_strings_start</dt><dd>start of the strings table.</dd><dt>dt_strings_end</dt><dd>end of the strings table.</dd><dt>dt_blob_end</dt><dd>end of the device tree blob.</dd></dl></div></section><section class=Sh><h2 class=Sh id=CHECKERS><a class=permalink href=#CHECKERS>CHECKERS</a></h2> The utility provides a number of semantic checks on the correctness of the tree. These can be disabled with the <code class=Fl>-W</code> flag. For example, <code class=Fl>-W</code><var class=Ar>no-type-phandle</var> will disable the phandle type check. The supported checks are: <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>type-compatible</dt><dd>Checks the type of the <var class=Va>compatible</var> property.</dd><dt>type-model</dt><dd>Checks the type of the <var class=Va>model</var> property.</dd><dt>type-compatible</dt><dd>Checks the type of the <var class=Va>compatible</var> property.</dd><dt>cells-attributes</dt><dd>Checks that all nodes with children have both <var class=Va>#address-cells</var> and <var class=Va>#size-cells</var> properties.</dd><dt>deleted-nodes</dt><dd>Checks that all <var class=Va>/delete-node/</var> statements refer to nodes that are merged.</dd></dl></div></section><section class=Sh><h2 class=Sh id=OVERLAYS><a class=permalink href=#OVERLAYS>OVERLAYS</a></h2> The utility provides support for generating overlays, also known as plugins. Overlays are a method of patching a base device tree that has been compiled with the <code class=Fl>-@</code> flag, with some limited support for patching device trees that were not compiled with the <code class=Fl>-@</code> flag. <p class=Pp>To denote that a DTS is intended to be used as an overlay, <var class=Va>/plugin/;</var> should be included in the header, following any applicable <var class=Va>/dts-v1/;</var> tag.</p><p class=Pp>Conventional overlays are crafted by creating <var class=Va>fragment</var> nodes in a root. Each fragment node must have either a <var class=Va>target</var> property set to a label reference, or a <var class=Va>target-path</var> string property set to a path. It must then have an <var class=Va>__overlay__</var> child node, whose properties and child nodes are merged into the base device tree when the overlay is applied.</p><p class=Pp>Much simpler syntactic sugar was later invented to simplify generating overlays. Instead of creating targeted fragments manually, one can instead create a root node that targets a label in the base FDT using the <var class=Va>&amp;label</var> syntax supported in conventional DTS. This will indicate that a fragment should be generated for the node, with the given <var class=Va>label</var> being the target, and the properties and child nodes will be used as the __overlay__.</p><p class=Pp>Additionally, a path-based version of this syntactic sugar is supported. A root node may target a path in the base FDT using a name of the form <var class=Va>&amp;{/path}</var>. A fragment will be generated for the node as it is in the <var class=Va>&amp;label</var> case, except the <var class=Va>target-path</var> property will be set to <var class=Va>/path</var> and no <var class=Va>target</var> will be set.</p><p class=Pp>Both conventional overlays and the later-added syntactic sugar are supported.</p><p class=Pp>Overlay blobs can be applied at boot time by setting <var class=Va>fdt_overlays</var> in <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>. Multiple overlays may be specified, and they will be applied in the order given.</p></section><section class=Sh><h2 class=Sh id=NODE_OMISSION><a class=permalink href=#NODE_OMISSION>NODE OMISSION</a></h2> This utility supports the <var class=Va>/omit-if-no-ref/</var> statement to mark nodes for omission if they are ultimately not referenced elsewhere in the device tree. This may be used in more space-constrained environments to remove nodes that may not be applicable to the specific device the tree is being compiled for. <p class=Pp>When the <code class=Fl>-@</code> flag is used to write symbols, nodes with labels will be considered referenced and will not be removed from the tree.</p></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> The command: <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>dtc -o blob.S -O asm device.dts</code></div><p class=Pp>will generate a <span class=Pa>blob.S</span> file from the device tree source <span class=Pa>device.dts</span> and print errors if any occur during parsing or property checking. The resulting file can be assembled and linked into a binary.</p><p class=Pp>The command:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>dtc -o - -O dts -I dtb device.dtb</code></div><p class=Pp>will write the device tree source for the device tree blob <span class=Pa>device.dtb</span> to the standard output. This is useful when debugging device trees.</p><p class=Pp>The command:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>dtc -@ -O dtb -I dts -o device.dtb device.dts</code></div><p class=Pp>will generate a <span class=Pa>device.dtb</span> file from the device tree source <span class=Pa>device.dts</span> with a __symbols__ node included so that overlays may be applied to it.</p><p class=Pp>The command:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>dtc -@ -O dtb -I dts -o device_overlay.dtbo device_overlay.dts</code></div><p class=Pp>will generate a <span class=Pa>device_overlay.dtbo</span> file, using the standard extension for a device tree overlay, from the device tree source <span class=Pa>device_overlay.dts</span>. A __symbols__ node will be included so that overlays may be applied to it. The presence of a <var class=Va>/plugin/;</var> directive in <span class=Pa>device_overlay.dts</span> will indicate to the utility that it should also generate the underlying metadata required in overlays.</p></section><section class=Sh><h2 class=Sh id=COMPATIBILITY><a class=permalink href=#COMPATIBILITY>COMPATIBILITY</a></h2> This utility is intended to be compatible with the device tree compiler provided by elinux.org. Currently, it implements the subset of features required to build <span class=Ux>FreeBSD</span> and others that have been requested by <span class=Ux>FreeBSD</span> developers. <p class=Pp>The <var class=Ar>fs</var> input format is not supported. This builds a tree from a Linux <span class=Pa>/proc/device-tree</span>, a file system hierarchy not found in <span class=Ux>FreeBSD</span>, which instead exposes the DTB directly via a sysctl.</p><p class=Pp>The warnings and errors supported by the elinux.org tool are not documented. This tool supports the warnings described in the <a class=Sx href=#CHECKERS>CHECKERS</a> section.</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=fdt.4.html>fdt(4)</a></section><section class=Sh><h2 class=Sh id=STANDARDS><a class=permalink href=#STANDARDS>STANDARDS</a></h2> The device tree formats understood by this tool conform to the Power.org Standard for Embedded Power Architecture Platform Requirements (<var class=Vt>ePAPR</var>), except as noted in the <a class=Sx href=#BUGS>BUGS</a> section and with the following exceptions for compatibility with the elinux.org tool: <p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>The target of cross references is defined to be a node name in the specification, but is in fact a label.</li></ul><p class=Pp>The /include/ directive is not part of the standard, however it is implemented with the semantics compatible with the elinux.org tool. It must appear in the top level of a file, and imports a new root definition. If a file, plus all of its inclusions, contains multiple roots then they are merged. All nodes that are present in the second but not the first are imported. Any that appear in both are recursively merged, with properties from the second replacing those from the first and properties child nodes being recursively merged.</p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> A dtc tool first appeared in <span class=Ux>FreeBSD 9.0</span>. This version of the tool first appeared in <span class=Ux>FreeBSD 10.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><code class=Nm>dtc</code> was written by <span class=An>David T. Chisnall</span>. Some features were added later by <br><span class=An>Kyle Evans</span>. <p class=Pp>Note: The fact that the tool and the author share the same initials is entirely coincidental.</p></section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The device tree compiler does not yet support the following features: <p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>Labels in the middle of property values. This is only useful in the assembly output, and only vaguely useful there, so is unlikely to be added soon.</li><li>Full paths, rather than labels, as the targets for phandles. This is not very hard to add, but will probably not be added until something actually needs it.</li></ul><p class=Pp>The current version performs a very limited set of semantic checks on the tree. This will be improved in future versions.</p></section></div><table class=foot><tr><td class=foot-date>February 26, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>