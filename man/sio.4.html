<!DOCTYPE html>
<html><head><meta charset=utf-8><title>sio(4)</title><keywords content=man,sio></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>sio(4)</h1><table class=head><tr><td class=head-ltitle>SIO(4)</td><td class=head-vol>FreeBSD Kernel Interfaces Manual</td><td class=head-rtitle>SIO(4)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>sio</code> — <div class=Nd>fast interrupt driven asynchronous serial communications interface</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2> For standard ISA ports: <div class="Bd Bd-indent"><code class=Cd>device sio</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.sio.0.at="isa"</code><br><code class=Cd>hint.sio.0.port="0x3f8"</code><br><code class=Cd>hint.sio.0.flags="0x10"</code><br><code class=Cd>hint.sio.0.irq="4"</code><br><code class=Cd>hint.sio.1.at="isa"</code><br><code class=Cd>hint.sio.1.port="0x2f8"</code><br><code class=Cd>hint.sio.1.flags="0x0"</code><br><code class=Cd>hint.sio.1.irq="3"</code></p></div><p class=Pp>For AST compatible multiport cards with 4 ports:</p><div class="Bd Bd-indent"><code class=Cd>options COM_MULTIPORT</code><br><code class=Cd>device sio</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.sio.4.at="isa"</code><br><code class=Cd>hint.sio.4.port="0x2a0"</code><br><code class=Cd>hint.sio.4.flags="0x701"</code><br><code class=Cd>hint.sio.5.at="isa"</code><br><code class=Cd>hint.sio.5.port="0x2a8"</code><br><code class=Cd>hint.sio.5.flags="0x701"</code><br><code class=Cd>hint.sio.6.at="isa"</code><br><code class=Cd>hint.sio.6.port="0x2b0"</code><br><code class=Cd>hint.sio.6.flags="0x701"</code><br><code class=Cd>hint.sio.7.at="isa"</code><br><code class=Cd>hint.sio.7.port="0x2b8"</code><br><code class=Cd>hint.sio.7.flags="0x701"</code><br><code class=Cd>hint.sio.7.irq="12"</code></p></div><p class=Pp>For Boca Board compatible multiport cards with 8 ports:</p><div class="Bd Bd-indent"><code class=Cd>options COM_MULTIPORT</code><br><code class=Cd>device sio</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.sio.4.at="isa"</code><br><code class=Cd>hint.sio.4.port="0x100"</code><br><code class=Cd>hint.sio.4.flags="0xb05"</code><br><code class=Cd>...</code><br><code class=Cd>hint.sio.11.at="isa"</code><br><code class=Cd>hint.sio.11.port="0x138"</code><br><code class=Cd>hint.sio.11.flags="0xb05"</code><br><code class=Cd>hint.sio.11.irq="12"</code></p></div><p class=Pp>For Netmos Nm9845 multiport cards with 6 ports:</p><div class="Bd Bd-indent"><code class=Cd>options COM_MULTIPORT</code><br><code class=Cd>device sio</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.sio.4.at="isa"</code><br><code class=Cd>hint.sio.4.port="0xb000"</code><br><code class=Cd>hint.sio.4.flags="0x901"</code><br><code class=Cd>hint.sio.5.at="isa"</code><br><code class=Cd>hint.sio.5.port="0xb400"</code><br><code class=Cd>hint.sio.5.flags="0x901"</code><br><code class=Cd>hint.sio.6.at="isa"</code><br><code class=Cd>hint.sio.6.port="0xb800"</code><br><code class=Cd>hint.sio.6.flags="0x901"</code><br><code class=Cd>hint.sio.7.at="isa"</code><br><code class=Cd>hint.sio.7.port="0xbc00"</code><br><code class=Cd>hint.sio.7.flags="0x901"</code><br><code class=Cd>hint.sio.8.at="isa"</code><br><code class=Cd>hint.sio.8.port="0xc000"</code><br><code class=Cd>hint.sio.8.flags="0x901"</code><br><code class=Cd>hint.sio.9.at="isa"</code><br><code class=Cd>hint.sio.9.port="0xac00"</code><br><code class=Cd>hint.sio.9.flags="0x901"</code><br><code class=Cd>hint.sio.9.irq="12"</code></p></div><p class=Pp>For Hayes ESP cards:</p><div class="Bd Bd-indent"><code class=Cd>options COM_ESP</code><br><code class=Cd>device sio</code><br><code class=Cd>...</code></div><p class=Pp>For single port PCI and PCCARD cards:</p><div class="Bd Bd-indent"><code class=Cd>device sio</code><p class=Pp>No lines are required in <span class=Pa>/boot/device.hints</span> for these cards.</p></div><p class=Pp>For dual port PCI cards that share an interrupt:</p><div class="Bd Bd-indent"><code class=Cd>device sio</code><br><code class=Cd>options COM_MULTIPORT</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.sio.2.flags="0x201"</code><br><code class=Cd>hint.sio.3.flags="0x201"</code></p></div><p class=Pp>Meaning of <var class=Ar>flags</var>:</p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>0x00001</dt><dd>shared IRQs</dd><dt>0x00002</dt><dd>disable FIFO</dd><dt>0x00004</dt><dd>no AST/4 compatible IRQ control register</dd><dt>0x00008</dt><dd>recover sooner from lost output interrupts</dd><dt>0x00010</dt><dd>device is potential system console</dd><dt>0x00020</dt><dd>device is forced to become system console</dd><dt>0x00040</dt><dd>device is reserved for low-level IO (e.g. for remote kernel debugging)</dd><dt>0x00080</dt><dd>use this port for remote kernel debugging</dd><dt>0x0<i class=Em>??</i>00</dt><dd>minor number of master port</dd><dt>0x10000</dt><dd>PPS timestamping on CTS instead of DCD</dd><dt>0x20000</dt><dd>device is assumed to use a 16650A-type (extended FIFO) chip</dd></dl></div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>sio</code> driver provides support for NS8250-, NS16450-, NS16550 and NS16550A-based EIA RS-232C (CCITT V.24) communications interfaces. The NS8250 and NS16450 have single character buffers, the NS16550A has 16 character FIFO input and output buffers. <p class=Pp>Input and output for each line may set to one of following baud rates; 50, 75, 110, 134.5, 150, 300, 600, 1200, 1800, 2400, 4800, 9600, 19200, 28800, 38400, 57600, or 115200. Your hardware may limit your baud rate choices.</p><p class=Pp>The driver supports `multiport' cards. Multiport cards are those that have one or more groups of ports that share an Interrupt Request (IRQ) line per group. Shared IRQs on different cards are not supported. Frequently 4 ports share 1 IRQ; some 8 port cards have 2 groups of 4 ports, thus using 2 IRQs. Some cards allow the first 2 serial ports to have separate IRQs per port (as per DOS PC standard).</p><p class=Pp>Some cards have an IRQ control register for each group. Some cards require special initialization related to such registers. Only AST/4 compatible IRQ control registers are supported. Some cards have an IRQ status register for each group. The driver does not require or use such registers yet. To work, the control and status registers for a group, if any, must be mapped to the scratch register (register 7) of a port in the group. Such a port is called a <i class=Em>master</i> port.</p><p class=Pp>The driver supports controller based PCI modems. The 3Com FaxModem PCI and the Advantec 56k Voice Messaging PCI FaxModem are the only cards supported. WinModems, softmodems, hfc modems and any other modems that are not controller based are not supported.</p><p class=Pp>The <i class=Em>flags</i> keyword may be used on each <i class=Em>device sio</i> line in the kernel configuration file to disable the FIFO on 16550A UARTs (see the synopsis). Disabling the FIFO should rarely be necessary.</p><p class=Pp>The <i class=Em>flags</i> keyword <i class=Em>must</i> be used for all ports that are part of an IRQ sharing group. One bit specifies IRQ sharing; another bit specifies whether the port does <i class=Em>not</i> require AST/4 compatible initialization. The minor number of the device corresponding a master port for the group is encoded as a bitfield in the high byte. The same master port must be specified for all ports in a group.</p><p class=Pp>The <i class=Em>irq</i> specification must be given for master ports and for ports that are not part of an IRQ sharing group, and not for other ports.</p><p class=Pp>In the synopsis, <i class=Em>flags 0x701</i> means that the 8th port (sio7) is the master port, and that the port is on a multiport card with shared IRQs and an AST/4 compatible IRQ control register.</p><p class=Pp><i class=Em>flags 0xb05</i> means that the 12th port (sio11) is the master port, and that the port is on a multiport card with shared IRQs and no special IRQ control register.</p><p class=Pp>Which port is the master port depends on the card type. Consult the hardware documentation of your card. Since IRQ status registers are never used, and IRQ control registers are only used for AST/4 compatible cards, and some cards map the control/status registers to all ports in a group, any port in a group will sometimes do for the master port. Choose a port containing an IRQ status register for forwards compatibility, and the highest possible port for consistency.</p><p class=Pp>Serial ports controlled by the <code class=Nm>sio</code> driver can be used for both `callin' and `callout'. For each port there is a callin device and a callout device. The minor number of the callout device is 128 higher than that of the corresponding callin port. The callin device is general purpose. Processes opening it normally wait for carrier and for the callout device to become inactive. The callout device is used to steal the port from processes waiting for carrier on the callin device. Processes opening it do not wait for carrier and put any processes waiting for carrier on the callin device into a deeper sleep so that they do not conflict with the callout session. The callout device is abused for handling programs that are supposed to work on general ports and need to open the port without waiting but are too stupid to do so.</p><p class=Pp>The <code class=Nm>sio</code> driver also supports an initial-state and a lock-state control device for each of the callin and the callout "data" devices. The termios settings of a data device are copied from those of the corresponding initial-state device on first opens and are not inherited from previous opens. Use <a class=Xr href=stty.1.html>stty(1)</a> in the normal way on the initial-state devices to program initial termios states suitable for your setup.</p><p class=Pp>The lock termios state acts as flags to disable changing the termios state. E.g., to lock a flag variable such as CRTSCTS, use <i class=Em>stty crtscts</i> on the lock-state device. Speeds and special characters may be locked by setting the corresponding value in the lock-state device to any nonzero value. E.g., to lock a speed to 115200, use “<code class=Li>stty 115200</code>” on the initial-state device and “<code class=Li>stty 1</code>” on the lock-state device.</p><p class=Pp>Correct programs talking to correctly wired external devices work with almost arbitrary initial states and almost no locking, but other setups may benefit from changing some of the default initial state and locking the state. In particular, the initial states for non (POSIX) standard flags should be set to suit the devices attached and may need to be locked to prevent buggy programs from changing them. E.g., CRTSCTS should be locked on for devices that support RTS/CTS handshaking at all times and off for devices that do not support it at all. CLOCAL should be locked on for devices that do not support carrier. HUPCL may be locked off if you do not want to hang up for some reason. In general, very bad things happen if something is locked to the wrong state, and things should not be locked for devices that support more than one setting. The CLOCAL flag on callin ports should be locked off for logins to avoid certain security holes, but this needs to be done by getty if the callin port is used for anything else.</p></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/ttyd?</span></dt><dd>for callin ports</dd><dt><span class=Pa>/dev/ttyd?.init</span></dt><dd style="width: auto;"> </dd><dt><span class=Pa>/dev/ttyd?.lock</span></dt><dd>corresponding callin initial-state and lock-state devices <p class=Pp></p></dd><dt><span class=Pa>/dev/cuad?</span></dt><dd>for callout ports</dd><dt><span class=Pa>/dev/cuad?.init</span></dt><dd style="width: auto;"> </dd><dt><span class=Pa>/dev/cuad?.lock</span></dt><dd>corresponding callout initial-state and lock-state devices</dd></dl><p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/rc.d/serial</span></dt><dd>examples of setting the initial-state and lock-state devices</dd></dl><p class=Pp>The device numbers are made from the set [0-9a-v] so that more than 10 ports can be supported.</p></section><section class=Sh><h2 class=Sh id=DIAGNOSTICS><a class=permalink href=#DIAGNOSTICS>DIAGNOSTICS</a></h2><dl class=Bl-diag><dt>sio%d: silo overflow.</dt><dd>Problem in the interrupt handler.</dd></dl><dl class=Bl-diag><dt>sio%d: interrupt-level buffer overflow.</dt><dd>Problem in the bottom half of the driver.</dd></dl><dl class=Bl-diag><dt>sio%d: tty-level buffer overflow.</dt><dd>Problem in the application. Input has arrived faster than the given module could process it and some has been lost.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=stty.1.html>stty(1)</a>, <a class=Xr href=termios.4.html>termios(4)</a>, <a class=Xr href=tty.4.html>tty(4)</a>, <a class=Xr href=comcontrol.8.html>comcontrol(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>sio</code> driver is derived from the HP9000/300 <a class=Xr href=dca.4.html>dca(4)</a> driver and is currently under development. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> Data loss may occur at very high baud rates on slow systems, or with too many ports on any system, or on heavily loaded systems when crtscts cannot be used. The use of NS16550A's reduces system load and helps to avoid data loss. <p class=Pp>Stay away from plain NS16550's. These are early implementations of the chip with non-functional FIFO hardware.</p><p class=Pp>The constants which define the locations of the various serial ports are holdovers from DOS. As shown, hex addresses can be and for clarity probably should be used instead.</p><p class=Pp>Note that on the AST/4 the card's dipswitches should <i class=Em>not</i> be set to use interrupt sharing. AST/4-like interrupt sharing is only used when <i class=Em>multiple</i> AST/4 cards are installed in the same system. The <code class=Nm>sio</code> driver does not support more than 1 AST/4 on one IRQ.</p><p class=Pp>The examples in the synopsis are too vendor-specific.</p></section></div><table class=foot><tr><td class=foot-date>August 30, 2006</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>