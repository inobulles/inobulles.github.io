<!DOCTYPE html>
<html><head><meta charset=utf-8><title>fts_get_stream(3)</title><keywords content=man,fts_get_stream></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>fts_get_stream(3)</h1><table class=head><tr><td class=head-ltitle>FTS(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>FTS(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>fts</code> — <div class=Nd>traverse a file hierarchy</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/fts.h.html>fts.h</a>&gt;</code><p class=Pp><var class=Ft>FTS *</var><br><code class=Fn>fts_open</code>(<var class=Fa style="white-space: nowrap;">char * const *path_argv</var>, <var class=Fa style="white-space: nowrap;">int options</var>, <var class=Fa style="white-space: nowrap;">int (*compar)(const FTSENT * const *, const FTSENT * const *)</var>);</p><p class=Pp><var class=Ft>FTSENT *</var><br><code class=Fn>fts_read</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>);</p><p class=Pp><var class=Ft>FTSENT *</var><br><code class=Fn>fts_children</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>, <var class=Fa style="white-space: nowrap;">int options</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>fts_set</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>, <var class=Fa style="white-space: nowrap;">FTSENT *f</var>, <var class=Fa style="white-space: nowrap;">int options</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>fts_set_clientptr</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>, <var class=Fa style="white-space: nowrap;">void *clientdata</var>);</p><p class=Pp><var class=Ft>void *</var><br><code class=Fn>fts_get_clientptr</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>);</p><p class=Pp><var class=Ft>FTS *</var><br><code class=Fn>fts_get_stream</code>(<var class=Fa style="white-space: nowrap;">FTSENT *f</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>fts_close</code>(<var class=Fa style="white-space: nowrap;">FTS *ftsp</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>fts</code> functions are provided for traversing <span class=Ux>UNIX</span> file hierarchies. A simple overview is that the <code class=Fn>fts_open</code>() function returns a “handle” on a file hierarchy, which is then supplied to the other <code class=Nm>fts</code> functions. The function <code class=Fn>fts_read</code>() returns a pointer to a structure describing one of the files in the file hierarchy. The function <code class=Fn>fts_children</code>() returns a pointer to a linked list of structures, each of which describes one of the files contained in a directory in the hierarchy. In general, directories are visited two distinguishable times; in pre-order (before any of their descendants are visited) and in post-order (after all of their descendants have been visited). Files are visited once. It is possible to walk the hierarchy “logically” (ignoring symbolic links) or physically (visiting symbolic links), order the walk of the hierarchy or prune and/or re-visit portions of the hierarchy. <p class=Pp>Two structures are defined (and typedef'd) in the include file <code class=In>&lt;<a class=In href=../src/fts.h.html>fts.h</a>&gt;</code>. The first is <var class=Vt>FTS</var>, the structure that represents the file hierarchy itself. The second is <var class=Vt>FTSENT</var>, the structure that represents a file in the file hierarchy. Normally, an <var class=Vt>FTSENT</var> structure is returned for every file in the file hierarchy. In this manual page, “file” and “<var class=Vt>FTSENT</var><span class=No>structure</span>” are generally interchangeable.</p><p class=Pp>The <var class=Vt>FTS</var> structure contains space for a single pointer, which may be used to store application data or per-hierarchy state. The <code class=Fn>fts_set_clientptr</code>() and <code class=Fn>fts_get_clientptr</code>() functions may be used to set and retrieve this pointer. This is likely to be useful only when accessed from the sort comparison function, which can determine the original <var class=Vt>FTS</var> stream of its arguments using the <code class=Fn>fts_get_stream</code>() function. The two <code class=Li>get</code> functions are also available as macros of the same name.</p><p class=Pp>The <var class=Vt>FTSENT</var> structure contains at least the following fields, which are described in greater detail below:</p><div class="Bd Pp"><pre>
typedef struct _ftsent {
	int fts_info;			/* status for FTSENT structure */
	char *fts_accpath;		/* access path */
	char *fts_path;			/* root path */
	size_t fts_pathlen;		/* strlen(fts_path) */
	char *fts_name;			/* file name */
	size_t fts_namelen;		/* strlen(fts_name) */
	long fts_level;			/* depth (-1 to N) */
	int fts_errno;			/* file errno */
	long long fts_number;		/* local numeric value */
	void *fts_pointer;		/* local address value */
	struct ftsent *fts_parent;	/* parent directory */
	struct ftsent *fts_link;	/* next file structure */
	struct ftsent *fts_cycle;	/* cycle structure */
	struct stat *fts_statp;		/* stat(2) information */
} FTSENT;
</pre></div><p class=Pp>These fields are defined as follows:</p><dl class=Bl-tag><dt><var class=Fa>fts_info</var></dt><dd>One of the following values describing the returned <var class=Vt>FTSENT</var> structure and the file it represents. With the exception of directories without errors (<code class=Dv>FTS_D</code>), all of these entries are terminal, that is, they will not be revisited, nor will any of their descendants be visited. <dl class=Bl-tag><dt><a class=permalink href=#FTS_D><code class=Dv id=FTS_D>FTS_D</code></a></dt><dd>A directory being visited in pre-order.</dd><dt><a class=permalink href=#FTS_DC><code class=Dv id=FTS_DC>FTS_DC</code></a></dt><dd>A directory that causes a cycle in the tree. (The <var class=Fa>fts_cycle</var> field of the <var class=Vt>FTSENT</var> structure will be filled in as well.)</dd><dt><a class=permalink href=#FTS_DEFAULT><code class=Dv id=FTS_DEFAULT>FTS_DEFAULT</code></a></dt><dd>Any <var class=Vt>FTSENT</var> structure that represents a file type not explicitly described by one of the other <var class=Fa>fts_info</var> values.</dd><dt><a class=permalink href=#FTS_DNR><code class=Dv id=FTS_DNR>FTS_DNR</code></a></dt><dd>A directory which cannot be read. This is an error return, and the <var class=Fa>fts_errno</var> field will be set to indicate what caused the error.</dd><dt><a class=permalink href=#FTS_DOT><code class=Dv id=FTS_DOT>FTS_DOT</code></a></dt><dd>A file named ‘<code class=Li>.</code>’ or ‘<code class=Li>..</code>’ which was not specified as a file name to <code class=Fn>fts_open</code>() (see <code class=Dv>FTS_SEEDOT</code>).</dd><dt><a class=permalink href=#FTS_DP><code class=Dv id=FTS_DP>FTS_DP</code></a></dt><dd>A directory being visited in post-order. The contents of the <var class=Vt>FTSENT</var> structure will be unchanged from when the directory was visited in pre-order, except for the <var class=Fa>fts_info</var> field.</dd><dt><a class=permalink href=#FTS_ERR><code class=Dv id=FTS_ERR>FTS_ERR</code></a></dt><dd>This is an error return, and the <var class=Fa>fts_errno</var> field will be set to indicate what caused the error.</dd><dt><a class=permalink href=#FTS_F><code class=Dv id=FTS_F>FTS_F</code></a></dt><dd>A regular file.</dd><dt><a class=permalink href=#FTS_NS><code class=Dv id=FTS_NS>FTS_NS</code></a></dt><dd>A file for which no <a class=Xr href=stat.2.html>stat(2)</a> information was available. The contents of the <var class=Fa>fts_statp</var> field are undefined. This is an error return, and the <var class=Fa>fts_errno</var> field will be set to indicate what caused the error.</dd><dt><a class=permalink href=#FTS_NSOK><code class=Dv id=FTS_NSOK>FTS_NSOK</code></a></dt><dd>A file for which no <a class=Xr href=stat.2.html>stat(2)</a> information was requested. The contents of the <var class=Fa>fts_statp</var> field are undefined.</dd><dt><a class=permalink href=#FTS_SL><code class=Dv id=FTS_SL>FTS_SL</code></a></dt><dd>A symbolic link.</dd><dt><a class=permalink href=#FTS_SLNONE><code class=Dv id=FTS_SLNONE>FTS_SLNONE</code></a></dt><dd>A symbolic link with a non-existent target. The contents of the <var class=Fa>fts_statp</var> field reference the file characteristic information for the symbolic link itself.</dd></dl></dd><dt><var class=Fa>fts_accpath</var></dt><dd>A path for accessing the file from the current directory.</dd><dt><var class=Fa>fts_path</var></dt><dd>The path for the file relative to the root of the traversal. This path contains the path specified to <code class=Fn>fts_open</code>() as a prefix.</dd><dt><var class=Fa>fts_pathlen</var></dt><dd>The length of the string referenced by <var class=Fa>fts_path</var>.</dd><dt><var class=Fa>fts_name</var></dt><dd>The name of the file.</dd><dt><var class=Fa>fts_namelen</var></dt><dd>The length of the string referenced by <var class=Fa>fts_name</var>.</dd><dt><var class=Fa>fts_level</var></dt><dd>The depth of the traversal, numbered from -1 to N, where this file was found. The <var class=Vt>FTSENT</var> structure representing the parent of the starting point (or root) of the traversal is numbered <code class=Dv>FTS_ROOTPARENTLEVEL</code> (-1), and the <var class=Vt>FTSENT</var> structure for the root itself is numbered <code class=Dv>FTS_ROOTLEVEL</code> (0).</dd><dt><var class=Fa>fts_errno</var></dt><dd>Upon return of a <var class=Vt>FTSENT</var> structure from the <code class=Fn>fts_children</code>() or <code class=Fn>fts_read</code>() functions, with its <var class=Fa>fts_info</var> field set to <code class=Dv>FTS_DNR</code>, <code class=Dv>FTS_ERR</code> or <code class=Dv>FTS_NS</code>, the <var class=Fa>fts_errno</var> field contains the value of the external variable <var class=Va>errno</var> specifying the cause of the error. Otherwise, the contents of the <var class=Fa>fts_errno</var> field are undefined.</dd><dt><var class=Fa>fts_number</var></dt><dd>This field is provided for the use of the application program and is not modified by the <code class=Nm>fts</code> functions. It is initialized to 0.</dd><dt><var class=Fa>fts_pointer</var></dt><dd>This field is provided for the use of the application program and is not modified by the <code class=Nm>fts</code> functions. It is initialized to <code class=Dv>NULL</code>.</dd><dt><var class=Fa>fts_parent</var></dt><dd>A pointer to the <var class=Vt>FTSENT</var> structure referencing the file in the hierarchy immediately above the current file, i.e., the directory of which this file is a member. A parent structure for the initial entry point is provided as well, however, only the <var class=Fa>fts_level</var>, <var class=Fa>fts_number</var> and <var class=Fa>fts_pointer</var> fields are guaranteed to be initialized.</dd><dt><var class=Fa>fts_link</var></dt><dd>Upon return from the <code class=Fn>fts_children</code>() function, the <var class=Fa>fts_link</var> field points to the next structure in the NULL-terminated linked list of directory members. Otherwise, the contents of the <var class=Fa>fts_link</var> field are undefined.</dd><dt><var class=Fa>fts_cycle</var></dt><dd>If a directory causes a cycle in the hierarchy (see <code class=Dv>FTS_DC</code>), either because of a hard link between two directories, or a symbolic link pointing to a directory, the <var class=Fa>fts_cycle</var> field of the structure will point to the <var class=Vt>FTSENT</var> structure in the hierarchy that references the same file as the current <var class=Vt>FTSENT</var> structure. Otherwise, the contents of the <var class=Fa>fts_cycle</var> field are undefined.</dd><dt><var class=Fa>fts_statp</var></dt><dd>A pointer to <a class=Xr href=stat.2.html>stat(2)</a> information for the file.</dd></dl><p class=Pp>A single buffer is used for all of the paths of all of the files in the file hierarchy. Therefore, the <var class=Fa>fts_path</var> and <var class=Fa>fts_accpath</var> fields are guaranteed to be <code class=Dv>NUL</code>-terminated <i class=Em>only</i> for the file most recently returned by <code class=Fn>fts_read</code>(). To use these fields to reference any files represented by other <var class=Vt>FTSENT</var> structures will require that the path buffer be modified using the information contained in that <var class=Vt>FTSENT</var> structure's <var class=Fa>fts_pathlen</var> field. Any such modifications should be undone before further calls to <code class=Fn>fts_read</code>() are attempted. The <var class=Fa>fts_name</var> field is always <code class=Dv>NUL</code>-terminated.</p></section><section class=Sh><h2 class=Sh id=FTS_OPEN><a class=permalink href=#FTS_OPEN>FTS_OPEN</a></h2> The <code class=Fn>fts_open</code>() function takes a pointer to an array of character pointers naming one or more paths which make up a logical file hierarchy to be traversed. The array must be terminated by a <code class=Dv>NULL</code> pointer. <p class=Pp>There are a number of options, at least one of which (either <code class=Dv>FTS_LOGICAL</code> or <code class=Dv>FTS_PHYSICAL</code>) must be specified. The options are selected by <i class=Em>or</i>'ing the following values:</p><dl class=Bl-tag><dt><a class=permalink href=#FTS_COMFOLLOW><code class=Dv id=FTS_COMFOLLOW>FTS_COMFOLLOW</code></a></dt><dd>This option causes any symbolic link specified as a root path to be followed immediately whether or not <code class=Dv>FTS_LOGICAL</code> is also specified.</dd><dt><a class=permalink href=#FTS_LOGICAL><code class=Dv id=FTS_LOGICAL>FTS_LOGICAL</code></a></dt><dd>This option causes the <code class=Nm>fts</code> routines to return <var class=Vt>FTSENT</var> structures for the targets of symbolic links instead of the symbolic links themselves. If this option is set, the only symbolic links for which <var class=Vt>FTSENT</var> structures are returned to the application are those referencing non-existent files. Either <code class=Dv>FTS_LOGICAL</code> or <code class=Dv>FTS_PHYSICAL</code><i class=Em>must</i> be provided to the <code class=Fn>fts_open</code>() function.</dd><dt><a class=permalink href=#FTS_NOCHDIR><code class=Dv id=FTS_NOCHDIR>FTS_NOCHDIR</code></a></dt><dd>To allow descending to arbitrary depths (independent of {<code class=Dv>PATH_MAX</code>}) and improve performance, the <code class=Nm>fts</code> functions change directories as they walk the file hierarchy. This has the side-effect that an application cannot rely on being in any particular directory during the traversal. The <code class=Dv>FTS_NOCHDIR</code> option turns off this feature, and the <code class=Nm>fts</code> functions will not change the current directory. Note that applications should not themselves change their current directory and try to access files unless <code class=Dv>FTS_NOCHDIR</code> is specified and absolute pathnames were provided as arguments to <code class=Fn>fts_open</code>().</dd><dt><a class=permalink href=#FTS_NOSTAT><code class=Dv id=FTS_NOSTAT>FTS_NOSTAT</code></a></dt><dd>By default, returned <var class=Vt>FTSENT</var> structures reference file characteristic information (the <var class=Fa>statp</var> field) for each file visited. This option relaxes that requirement as a performance optimization, allowing the <code class=Nm>fts</code> functions to set the <var class=Fa>fts_info</var> field to <code class=Dv>FTS_NSOK</code> and leave the contents of the <var class=Fa>statp</var> field undefined.</dd><dt><a class=permalink href=#FTS_PHYSICAL><code class=Dv id=FTS_PHYSICAL>FTS_PHYSICAL</code></a></dt><dd>This option causes the <code class=Nm>fts</code> routines to return <var class=Vt>FTSENT</var> structures for symbolic links themselves instead of the target files they point to. If this option is set, <var class=Vt>FTSENT</var> structures for all symbolic links in the hierarchy are returned to the application. Either <code class=Dv>FTS_LOGICAL</code> or <code class=Dv>FTS_PHYSICAL</code><i class=Em>must</i> be provided to the <code class=Fn>fts_open</code>() function.</dd><dt><a class=permalink href=#FTS_SEEDOT><code class=Dv id=FTS_SEEDOT>FTS_SEEDOT</code></a></dt><dd>By default, unless they are specified as path arguments to <code class=Fn>fts_open</code>(), any files named ‘<code class=Li>.</code>’ or ‘<code class=Li>..</code>’ encountered in the file hierarchy are ignored. This option causes the <code class=Nm>fts</code> routines to return <var class=Vt>FTSENT</var> structures for them.</dd><dt><a class=permalink href=#FTS_XDEV><code class=Dv id=FTS_XDEV>FTS_XDEV</code></a></dt><dd>This option prevents <code class=Nm>fts</code> from descending into directories that have a different device number than the file from which the descent began.</dd></dl><p class=Pp>The argument <code class=Fn>compar</code>() specifies a user-defined function which may be used to order the traversal of the hierarchy. It takes two pointers to pointers to <var class=Vt>FTSENT</var> structures as arguments and should return a negative value, zero, or a positive value to indicate if the file referenced by its first argument comes before, in any order with respect to, or after, the file referenced by its second argument. The <var class=Fa>fts_accpath</var>, <var class=Fa>fts_path</var> and <var class=Fa>fts_pathlen</var> fields of the <var class=Vt>FTSENT</var> structures may <i class=Em>never</i> be used in this comparison. If the <var class=Fa>fts_info</var> field is set to <code class=Dv>FTS_NS</code> or <code class=Dv>FTS_NSOK</code>, the <var class=Fa>fts_statp</var> field may not either. If the <code class=Fn>compar</code>() argument is <code class=Dv>NULL</code>, the directory traversal order is in the order listed in <var class=Fa>path_argv</var> for the root paths, and in the order listed in the directory for everything else.</p></section><section class=Sh><h2 class=Sh id=FTS_READ><a class=permalink href=#FTS_READ>FTS_READ</a></h2> The <code class=Fn>fts_read</code>() function returns a pointer to an <var class=Vt>FTSENT</var> structure describing a file in the hierarchy. Directories (that are readable and do not cause cycles) are visited at least twice, once in pre-order and once in post-order. All other files are visited at least once. (Hard links between directories that do not cause cycles or symbolic links to symbolic links may cause files to be visited more than once, or directories more than twice.) <p class=Pp>If all the members of the hierarchy have been returned, <code class=Fn>fts_read</code>() returns <code class=Dv>NULL</code> and sets the external variable <var class=Va>errno</var> to 0. If an error unrelated to a file in the hierarchy occurs, <code class=Fn>fts_read</code>() returns <code class=Dv>NULL</code> and sets <var class=Va>errno</var> appropriately. If an error related to a returned file occurs, a pointer to an <var class=Vt>FTSENT</var> structure is returned, and <var class=Va>errno</var> may or may not have been set (see <var class=Fa>fts_info</var>).</p><p class=Pp>The <var class=Vt>FTSENT</var> structures returned by <code class=Fn>fts_read</code>() may be overwritten after a call to <code class=Fn>fts_close</code>() on the same file hierarchy stream, or, after a call to <code class=Fn>fts_read</code>() on the same file hierarchy stream unless they represent a file of type directory, in which case they will not be overwritten until after a call to <code class=Fn>fts_read</code>() after the <var class=Vt>FTSENT</var> structure has been returned by the function <code class=Fn>fts_read</code>() in post-order.</p></section><section class=Sh><h2 class=Sh id=FTS_CHILDREN><a class=permalink href=#FTS_CHILDREN>FTS_CHILDREN</a></h2> The <code class=Fn>fts_children</code>() function returns a pointer to an <var class=Vt>FTSENT</var> structure describing the first entry in a NULL-terminated linked list of the files in the directory represented by the <var class=Vt>FTSENT</var> structure most recently returned by <code class=Fn>fts_read</code>(). The list is linked through the <var class=Fa>fts_link</var> field of the <var class=Vt>FTSENT</var> structure, and is ordered by the user-specified comparison function, if any. Repeated calls to <code class=Fn>fts_children</code>() will recreate this linked list. <p class=Pp>As a special case, if <code class=Fn>fts_read</code>() has not yet been called for a hierarchy, <code class=Fn>fts_children</code>() will return a pointer to the files in the logical directory specified to <code class=Fn>fts_open</code>(), i.e., the arguments specified to <code class=Fn>fts_open</code>(). Otherwise, if the <var class=Vt>FTSENT</var> structure most recently returned by <code class=Fn>fts_read</code>() is not a directory being visited in pre-order, or the directory does not contain any files, <code class=Fn>fts_children</code>() returns <code class=Dv>NULL</code> and sets <var class=Va>errno</var> to zero. If an error occurs, <code class=Fn>fts_children</code>() returns <code class=Dv>NULL</code> and sets <var class=Va>errno</var> appropriately.</p><p class=Pp>The <var class=Vt>FTSENT</var> structures returned by <code class=Fn>fts_children</code>() may be overwritten after a call to <code class=Fn>fts_children</code>(), <code class=Fn>fts_close</code>() or <code class=Fn>fts_read</code>() on the same file hierarchy stream.</p><p class=Pp><i class=Em>Option</i> may be set to the following value:</p><dl class=Bl-tag><dt><a class=permalink href=#FTS_NAMEONLY><code class=Dv id=FTS_NAMEONLY>FTS_NAMEONLY</code></a></dt><dd>Only the names of the files are needed. The contents of all the fields in the returned linked list of structures are undefined with the exception of the <var class=Fa>fts_name</var> and <var class=Fa>fts_namelen</var> fields.</dd></dl></section><section class=Sh><h2 class=Sh id=FTS_SET><a class=permalink href=#FTS_SET>FTS_SET</a></h2> The function <code class=Fn>fts_set</code>() allows the user application to determine further processing for the file <var class=Fa>f</var> of the stream <var class=Fa>ftsp</var>. The <code class=Fn>fts_set</code>() function returns 0 on success, and -1 if an error occurs. <i class=Em>Option</i> must be set to one of the following values: <dl class=Bl-tag><dt><a class=permalink href=#FTS_AGAIN><code class=Dv id=FTS_AGAIN>FTS_AGAIN</code></a></dt><dd>Re-visit the file; any file type may be re-visited. The next call to <code class=Fn>fts_read</code>() will return the referenced file. The <var class=Fa>fts_stat</var> and <var class=Fa>fts_info</var> fields of the structure will be reinitialized at that time, but no other fields will have been changed. This option is meaningful only for the most recently returned file from <code class=Fn>fts_read</code>(). Normal use is for post-order directory visits, where it causes the directory to be re-visited (in both pre and post-order) as well as all of its descendants.</dd><dt><a class=permalink href=#FTS_FOLLOW><code class=Dv id=FTS_FOLLOW>FTS_FOLLOW</code></a></dt><dd>The referenced file must be a symbolic link. If the referenced file is the one most recently returned by <code class=Fn>fts_read</code>(), the next call to <code class=Fn>fts_read</code>() returns the file with the <var class=Fa>fts_info</var> and <var class=Fa>fts_statp</var> fields reinitialized to reflect the target of the symbolic link instead of the symbolic link itself. If the file is one of those most recently returned by <code class=Fn>fts_children</code>(), the <var class=Fa>fts_info</var> and <var class=Fa>fts_statp</var> fields of the structure, when returned by <code class=Fn>fts_read</code>(), will reflect the target of the symbolic link instead of the symbolic link itself. In either case, if the target of the symbolic link does not exist the fields of the returned structure will be unchanged and the <var class=Fa>fts_info</var> field will be set to <code class=Dv>FTS_SLNONE</code>. <p class=Pp>If the target of the link is a directory, the pre-order return, followed by the return of all of its descendants, followed by a post-order return, is done.</p></dd><dt><a class=permalink href=#FTS_SKIP><code class=Dv id=FTS_SKIP>FTS_SKIP</code></a></dt><dd>No descendants of this file are visited. The file may be one of those most recently returned by either <code class=Fn>fts_children</code>() or <code class=Fn>fts_read</code>().</dd></dl></section><section class=Sh><h2 class=Sh id=FTS_CLOSE><a class=permalink href=#FTS_CLOSE>FTS_CLOSE</a></h2> The <code class=Fn>fts_close</code>() function closes a file hierarchy stream <var class=Fa>ftsp</var> and restores the current directory to the directory from which <code class=Fn>fts_open</code>() was called to open <var class=Fa>ftsp</var>. The <code class=Fn>fts_close</code>() function returns 0 on success, and -1 if an error occurs. </section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The function <code class=Fn>fts_open</code>() may fail and set <var class=Va>errno</var> for any of the errors specified for the library functions <a class=Xr href=open.2.html>open(2)</a> and <a class=Xr href=malloc.3.html>malloc(3)</a>. <p class=Pp>The function <code class=Fn>fts_close</code>() may fail and set <var class=Va>errno</var> for any of the errors specified for the library functions <a class=Xr href=chdir.2.html>chdir(2)</a> and <a class=Xr href=close.2.html>close(2)</a>.</p><p class=Pp>The functions <code class=Fn>fts_read</code>() and <code class=Fn>fts_children</code>() may fail and set <var class=Va>errno</var> for any of the errors specified for the library functions <a class=Xr href=chdir.2.html>chdir(2)</a>, <a class=Xr href=malloc.3.html>malloc(3)</a>, <a class=Xr href=opendir.3.html>opendir(3)</a>, <a class=Xr href=readdir.3.html>readdir(3)</a> and <a class=Xr href=stat.2.html>stat(2)</a>.</p><p class=Pp>In addition, <code class=Fn>fts_children</code>(), <code class=Fn>fts_open</code>() and <code class=Fn>fts_set</code>() may fail and set <var class=Va>errno</var> as follows:</p><dl class=Bl-tag><dt>[<a class=permalink href=#EINVAL><code class=Er id=EINVAL>EINVAL</code></a>]</dt><dd>The options were invalid, or the list were empty.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=find.1.html>find(1)</a>, <a class=Xr href=chdir.2.html>chdir(2)</a>, <a class=Xr href=stat.2.html>stat(2)</a>, <a class=Xr href=ftw.3.html>ftw(3)</a>, <a class=Xr href=qsort.3.html>qsort(3)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>fts</code> interface was first introduced in <span class=Ux>4.4BSD</span>. The <code class=Fn>fts_get_clientptr</code>(), <code class=Fn>fts_get_stream</code>(), and <code class=Fn>fts_set_clientptr</code>() functions were introduced in <span class=Ux>FreeBSD 5.0</span>, principally to provide for alternative interfaces to the <code class=Nm>fts</code> functionality using different data structures. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The <code class=Fn>fts_open</code>() function will automatically set the <code class=Dv>FTS_NOCHDIR</code> option if the <code class=Dv>FTS_LOGICAL</code> option is provided, or if it cannot <a class=Xr href=open.2.html>open(2)</a> the current directory. </section></div><table class=foot><tr><td class=foot-date>January 12, 2014</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>