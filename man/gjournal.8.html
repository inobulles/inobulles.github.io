<!DOCTYPE html>
<html><head><meta charset=utf-8><title>gjournal(8)</title><keywords content=man,gjournal></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>gjournal(8)</h1><table class=head><tr><td class=head-ltitle>GJOURNAL(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>GJOURNAL(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>gjournal</code> — <div class=Nd>control utility for journaled devices</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>label</code> [<code class=Fl>-cfhv</code>] [<code class=Fl>-s</code><var class=Ar>jsize</var>] <var class=Ar>dataprov</var> [<var class=Ar>jprov</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>stop</code> [<code class=Fl>-fv</code>] <var class=Ar>name ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>sync</code> [<code class=Fl>-v</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>clear</code> [<code class=Fl>-v</code>] <var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>dump</code><var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>list</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>status</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>load</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gjournal</code></td><td><code class=Cm>unload</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>gjournal</code> utility is used for journal configuration on the given GEOM provider. The Journal and data may be stored on the same provider or on two separate providers. This is block level journaling, not file system level journaling, which means everything gets logged, e.g. for file systems, it journals both data and metadata. The <code class=Nm>gjournal</code> GEOM class can talk to file systems, which allows the use of <code class=Nm>gjournal</code> for file system journaling and to keep file systems in a consistent state. At this time, only UFS file system is supported. <p class=Pp>To configure journaling on the UFS file system using <code class=Nm>gjournal</code>, one should first create a <code class=Nm>gjournal</code> provider using the <code class=Nm>gjournal</code> utility, then run <a class=Xr href=newfs.8.html>newfs(8)</a> or <a class=Xr href=tunefs.8.html>tunefs(8)</a> on it with the <code class=Fl>-J</code> flag which instructs UFS to cooperate with the <code class=Nm>gjournal</code> provider below. There are important differences in how journaled UFS works. The most important one is that <a class=Xr href=sync.2.html>sync(2)</a> and <a class=Xr href=fsync.2.html>fsync(2)</a> system calls do not work as expected anymore. To ensure that data is stored on the data provider, the <code class=Nm>gjournal</code><code class=Cm>sync</code> command should be used after calling <a class=Xr href=sync.2.html>sync(2)</a>. For the best performance possible, soft-updates should be disabled when <code class=Nm>gjournal</code> is used. It is also safe and recommended to use the <code class=Cm>async</code><a class=Xr href=mount.8.html>mount(8)</a> option.</p><p class=Pp>When <code class=Nm>gjournal</code> is configured on top of <a class=Xr href=gmirror.8.html>gmirror(8)</a> or <a class=Xr href=graid3.8.html>graid3(8)</a> providers, it also keeps them in a consistent state, thus automatic synchronization on power failure or system crash may be disabled on those providers.</p><p class=Pp>The <code class=Nm>gjournal</code> utility uses on-disk metadata, stored in the provider's last sector, to store all needed information. This could be a problem when an existing file system is converted to use <code class=Nm>gjournal</code>.</p><p class=Pp>The first argument to <code class=Nm>gjournal</code> indicates an action to be performed:</p><dl class=Bl-tag><dt><a class=permalink href=#label><code class=Cm id=label>label</code></a></dt><dd>Configures <code class=Nm>gjournal</code> on the given provider(s). If only one provider is given, both data and journal are stored on the same provider. If two providers are given, the first one will be used as data provider and the second will be used as the journal provider. <p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a></dt><dd>Checksum journal records.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a></dt><dd>May be used to convert an existing file system to use <code class=Nm>gjournal</code>, but only if the journal will be configured on a separate provider and if the last sector in the data provider is not used by the existing file system. If <code class=Nm>gjournal</code> detects that the last sector is used, it will refuse to overwrite it and return an error. This behavior may be forced by using the <code class=Fl>-f</code> flag, which will force <code class=Nm>gjournal</code> to overwrite the last sector.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Hardcode provider names in metadata.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>jsize</var></dt><dd>Specifies size of the journal if only one provider is used for both data and journal. The default is one gigabyte. Size should be chosen based on provider's load, and not on its size; recommended minimum is twice the size of the physical memory installed. It is not recommended to use <code class=Nm>gjournal</code> for small file systems (e.g.: only few gigabytes big).</dd></dl></dd><dt><a class=permalink href=#clear><code class=Cm id=clear>clear</code></a></dt><dd>Clear metadata on the given providers.</dd><dt><a class=permalink href=#stop><code class=Cm id=stop>stop</code></a></dt><dd>Stop the given provider. <p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a></dt><dd>Stop the given provider even if it is opened.</dd></dl></dd><dt><a class=permalink href=#sync><code class=Cm id=sync>sync</code></a></dt><dd>Trigger journal switch and enforce sending data to the data provider.</dd><dt><a class=permalink href=#dump><code class=Cm id=dump>dump</code></a></dt><dd>Dump metadata stored on the given providers.</dd><dt><a class=permalink href=#list><code class=Cm id=list>list</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#status><code class=Cm id=status>status</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#load><code class=Cm id=load>load</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#unload><code class=Cm id=unload>unload</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd></dl><p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Be more verbose.</dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Exit status is 0 on success, and 1 if the command fails. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Create a <code class=Nm>gjournal</code> based UFS file system and mount it: <div class="Bd Pp Bd-indent"><pre>
gjournal load
gjournal label da0
newfs -J /dev/da0.journal
mount -o async /dev/da0.journal /mnt
</pre></div><p class=Pp>Configure journaling on an existing file system, but only if <code class=Nm>gjournal</code> allows this (i.e., if the last sector is not already used by the file system):</p><div class="Bd Pp Bd-indent"><pre>
umount /dev/da0s1d
gjournal label da0s1d da0s1e &amp;&amp; \
    tunefs -J enable -n disable da0s1d.journal &amp;&amp; \
    mount -o async /dev/da0s1d.journal /mnt || \
    mount /dev/da0s1d /mnt
</pre></div></section><section class=Sh><h2 class=Sh id=SYSCTLS><a class=permalink href=#SYSCTLS>SYSCTLS</a></h2> Gjournal adds the sysctl level kern.geom.journal. The string and integer information available is detailed below. The changeable column shows whether a process with appropriate privilege may change the value. <table class="Bl-column Bd-indent"><tr><td><b class=Sy>sysctl name</b></td><td>Type</td><td>Changeable</td></tr><tr><td>debug</td><td>integer</td><td>yes</td></tr><tr><td>switch_time</td><td>integer</td><td>yes</td></tr><tr><td>force_switch</td><td>integer</td><td>yes</td></tr><tr><td>parallel_flushes</td><td>integer</td><td>yes</td></tr><tr><td>accept_immediately</td><td>integer</td><td>yes</td></tr><tr><td>parallel_copies</td><td>integer</td><td>yes</td></tr><tr><td>record_entries</td><td>integer</td><td>yes</td></tr><tr><td>optimize</td><td>integer</td><td>yes</td></tr></table><dl class=Bl-tag><dt><a class=permalink href=#debug><code class=Li id=debug>debug</code></a></dt><dd>Setting a non-zero value enables debugging at various levels. Debug level 1 will record actions at a journal level, relating to journal switches, metadata updates, etc. Debug level 2 will record actions at a higher level, relating to the numbers of entries in journals, access requests, etc. Debug level 3 will record verbose detail, including insertion of I/Os to the journal.</dd><dt><a class=permalink href=#switch_time><code class=Li id=switch_time>switch_time</code></a></dt><dd>The maximum number of seconds a journal is allowed to remain open before switching to a new journal.</dd><dt><a class=permalink href=#force_switch><code class=Li id=force_switch>force_switch</code></a></dt><dd>Force a journal switch when the journal uses more than N% of the free journal space.</dd><dt><a class=permalink href=#parallel_flushes><code class=Li id=parallel_flushes>parallel_flushes</code></a></dt><dd>The number of flush I/O requests to be sent in parallel when flushing the journal to the data provider.</dd><dt><a class=permalink href=#accept_immediately><code class=Li id=accept_immediately>accept_immediately</code></a></dt><dd>The maximum number of I/O requests accepted at the same time.</dd><dt><a class=permalink href=#parallel_copies><code class=Li id=parallel_copies>parallel_copies</code></a></dt><dd>The number of copy I/O requests to send in parallel.</dd><dt><a class=permalink href=#record_entries><code class=Li id=record_entries>record_entries</code></a></dt><dd>The maximum number of record entries to allow in a single journal.</dd><dt><a class=permalink href=#optimize><code class=Li id=optimize>optimize</code></a></dt><dd>Controls whether entries in a journal will be optimized by combining overlapping I/Os into a single I/O and reordering the entries in a journal. This can be disabled by setting the sysctl to 0.</dd></dl><section class=Ss><h2 class=Ss id=cache><a class=permalink href=#cache>cache</a></h2> The string and integer information available for the cache level is detailed below. The changeable column shows whether a process with appropriate privilege may change the value. <table class="Bl-column Bd-indent"><tr><td><b class=Sy>sysctl name</b></td><td>Type</td><td>Changeable</td></tr><tr><td>used</td><td>integer</td><td>no</td></tr><tr><td>limit</td><td>integer</td><td>yes</td></tr><tr><td>divisor</td><td>integer</td><td>no</td></tr><tr><td>switch</td><td>integer</td><td>yes</td></tr><tr><td>misses</td><td>integer</td><td>yes</td></tr><tr><td>alloc_failures</td><td>integer</td><td>yes</td></tr></table><dl class=Bl-tag><dt><a class=permalink href=#used><code class=Li id=used>used</code></a></dt><dd>The number of bytes currently allocated to the cache.</dd><dt><a class=permalink href=#limit><code class=Li id=limit>limit</code></a></dt><dd>The maximum number of bytes to be allocated to the cache.</dd><dt><a class=permalink href=#divisor><code class=Li id=divisor>divisor</code></a></dt><dd>Sets the cache size to be used as a proportion of kmem_size. A value of 2 (the default) will cause the cache size to be set to 1/2 of the kmem_size.</dd><dt><a class=permalink href=#switch><code class=Li id=switch>switch</code></a></dt><dd>Force a journal switch when this percentage of cache has been used.</dd><dt><a class=permalink href=#misses><code class=Li id=misses>misses</code></a></dt><dd>The number of cache misses, when data has been read, but was not found in the cache.</dd><dt><a class=permalink href=#alloc_failures><code class=Li id=alloc_failures>alloc_failures</code></a></dt><dd>The number of times memory failed to be allocated to the cache because the cache limit was hit.</dd></dl></section><section class=Ss><h2 class=Ss id=stats><a class=permalink href=#stats>stats</a></h2> The string and integer information available for the statistics level is detailed below. The changeable column shows whether a process with appropriate privilege may change the value. <table class="Bl-column Bd-indent"><tr><td><b class=Sy>sysctl name</b></td><td>Type</td><td>Changeable</td></tr><tr><td>skipped_bytes</td><td>integer</td><td>yes</td></tr><tr><td>combined_ios</td><td>integer</td><td>yes</td></tr><tr><td>switches</td><td>integer</td><td>yes</td></tr><tr><td>wait_for_copy</td><td>integer</td><td>yes</td></tr><tr><td>journal_full</td><td>integer</td><td>yes</td></tr><tr><td>low_mem</td><td>integer</td><td>yes</td></tr></table><dl class=Bl-tag><dt><a class=permalink href=#skipped_bytes><code class=Li id=skipped_bytes>skipped_bytes</code></a></dt><dd>The number of bytes skipped.</dd><dt><a class=permalink href=#combined_ios><code class=Li id=combined_ios>combined_ios</code></a></dt><dd>The number of I/Os which were combined by journal optimization.</dd><dt><a class=permalink href=#switches><code class=Li id=switches>switches</code></a></dt><dd>The number of journal switches.</dd><dt><a class=permalink href=#wait_for_copy><code class=Li id=wait_for_copy>wait_for_copy</code></a></dt><dd>The number of times the journal switch process had to wait for the previous journal copy to complete.</dd><dt><a class=permalink href=#journal_full><code class=Li id=journal_full>journal_full</code></a></dt><dd>The number of times the journal was almost full, forcing a journal switch.</dd><dt><a class=permalink href=#low_mem><code class=Li id=low_mem>low_mem</code></a></dt><dd>The number of times the low_mem hook was called.</dd></dl></section></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=geom.4.html>geom(4)</a>, <a class=Xr href=geom.8.html>geom(8)</a>, <a class=Xr href=mount.8.html>mount(8)</a>, <a class=Xr href=newfs.8.html>newfs(8)</a>, <a class=Xr href=tunefs.8.html>tunefs(8)</a>, <a class=Xr href=umount.8.html>umount(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>gjournal</code> utility appeared in <span class=Ux>FreeBSD 7.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Pawel Jakub Dawidek</span> &lt;<a class=Mt href=mailto:pjd@FreeBSD.org>pjd@FreeBSD.org</a>&gt; </section></div><table class=foot><tr><td class=foot-date>February 17, 2009</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>