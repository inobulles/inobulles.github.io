<!DOCTYPE html>
<html><head><meta charset=utf-8><title>makefs(8)</title><keywords content=man,makefs></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>makefs(8)</h1><table class=head><tr><td class=head-ltitle>MAKEFS(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>MAKEFS(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>makefs</code> — <div class=Nd>create a file system image from a directory tree or a mtree manifest</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>makefs</code></td><td>[<code class=Fl>-DxZ</code>] [<code class=Fl>-B</code><var class=Ar>endian</var>] [<code class=Fl>-b</code><var class=Ar>free-blocks</var>] [<code class=Fl>-d</code><var class=Ar>debug-mask</var>] [<code class=Fl>-F</code><var class=Ar>mtree-specfile</var>] [<code class=Fl>-f</code><var class=Ar>free-files</var>] [<code class=Fl>-M</code><var class=Ar>minimum-size</var>] [<code class=Fl>-m</code><var class=Ar>maximum-size</var>] [<code class=Fl>-N</code><var class=Ar>userdb-dir</var>] [<code class=Fl>-O</code><var class=Ar>offset</var>] [<code class=Fl>-o</code><var class=Ar>fs-options</var>] [<code class=Fl>-R</code><var class=Ar>roundup-size</var>] [<code class=Fl>-S</code><var class=Ar>sector-size</var>] [<code class=Fl>-s</code><var class=Ar>image-size</var>] [<code class=Fl>-T</code><var class=Ar>timestamp</var>] [<code class=Fl>-t</code><var class=Ar>fs-type</var>] <var class=Ar>image-file</var><var class=Ar>directory</var> | <var class=Ar>manifest</var> [<var class=Ar>extra-directory ...</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The utility <code class=Nm>makefs</code> creates a file system image into <var class=Ar>image-file</var> from the directory tree <var class=Ar>directory</var> or from the mtree manifest <var class=Ar>manifest</var>. If any optional directory trees are passed in the <var class=Ar>extra-directory</var> arguments, then the directory tree of each argument will be merged into the <var class=Ar>directory</var> or <var class=Ar>manifest</var> first before creating <var class=Ar>image-file</var>. No special devices or privileges are required to perform this task. <p class=Pp>The options are as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#B><code class=Fl id=B>-B</code></a><var class=Ar>endian</var></dt><dd>Set the byte order of the image to <var class=Ar>endian</var>. Valid byte orders are ‘<code class=Li>4321</code>’, ‘<code class=Li>big</code>’, or ‘<code class=Li>be</code>’ for big endian, and ‘<code class=Li>1234</code>’, ‘<code class=Li>little</code>’, or ‘<code class=Li>le</code>’ for little endian. Some file systems may have a fixed byte order; in those cases this argument will be ignored.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>free-blocks</var></dt><dd>Ensure that a minimum of <var class=Ar>free-blocks</var> free blocks exist in the image. An optional ‘<code class=Li>%</code>’ suffix may be provided to indicate that <var class=Ar>free-blocks</var> indicates a percentage of the calculated image size.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>Treat duplicate paths in an mtree manifest as warnings not error.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a><var class=Ar>debug-mask</var></dt><dd>Enable various levels of debugging, depending upon which bits are set in <var class=Ar>debug-mask</var>. XXX: document these</dd><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a><var class=Ar>mtree-specfile</var></dt><dd><i class=Em>This is almost certainly not the option you are looking for.</i> To create an image from a list of files in an mtree format manifest, specify it as the last argument on the command line, not as a the argument to <code class=Fl>-F</code>. <p class=Pp>Use <var class=Ar>mtree-specfile</var> as an <a class=Xr href=mtree.8.html>mtree(8)</a> ‘specfile’ specification. This option has no effect when the image is created from a mtree manifest rather than a directory.</p><p class=Pp>If a specfile entry exists in the underlying file system, its permissions and modification time will be used unless specifically overridden by the specfile. An error will be raised if the type of entry in the specfile conflicts with that of an existing entry.</p><p class=Pp>In the opposite case (where a specfile entry does not have an entry in the underlying file system) the following occurs: If the specfile entry is marked <b class=Sy>optional</b>, the specfile entry is ignored. Otherwise, the entry will be created in the image, and it is necessary to specify at least the following parameters in the specfile: <b class=Sy>type</b>, <b class=Sy>mode</b>, <b class=Sy>gname</b>, or <b class=Sy>gid</b>, and <b class=Sy>uname</b> or <b class=Sy>uid</b>, and <b class=Sy>link</b> (in the case of symbolic links). If <b class=Sy>time</b> is not provided, the current time will be used. If <b class=Sy>flags</b> is not provided, the current file flags will be used. Missing regular file entries will be created as zero-length files.</p></dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>free-files</var></dt><dd>Ensure that a minimum of <var class=Ar>free-files</var> free files (inodes) exist in the image. An optional ‘<code class=Li>%</code>’ suffix may be provided to indicate that <var class=Ar>free-files</var> indicates a percentage of the calculated image size.</dd><dt><a class=permalink href=#M><code class=Fl id=M>-M</code></a><var class=Ar>minimum-size</var></dt><dd>Set the minimum size of the file system image to <var class=Ar>minimum-size</var>.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>maximum-size</var></dt><dd>Set the maximum size of the file system image to <var class=Ar>maximum-size</var>. An error will be raised if the target file system needs to be larger than this to accommodate the provided directory tree.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a><var class=Ar>userdb-dir</var></dt><dd>Use the user database text file <span class=Pa>master.passwd</span> and group database text file <span class=Pa>group</span> from <var class=Ar>userdb-dir</var>, rather than using the results from the system's <a class=Xr href=getpwnam.3.html>getpwnam(3)</a> and <a class=Xr href=getgrnam.3.html>getgrnam(3)</a> (and related) library calls.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>offset</var></dt><dd>Instead of creating the filesystem at the beginning of the file, start at offset. Valid only for <b class=Sy>ffs</b> and <b class=Sy>msdos</b>.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>fs-options</var></dt><dd>Set file system specific options. <var class=Ar>fs-options</var> is a comma separated list of options. Valid file system specific options are detailed below.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>Deprecated. See the <code class=Fl>-Z</code> flag.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a><var class=Ar>roundup-size</var></dt><dd>Round the image up to <var class=Ar>roundup-size</var>. <var class=Ar>roundup-size</var> should be a multiple of the file system block size. This option only applies to the <b class=Sy>ffs</b> file system type.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>sector-size</var></dt><dd>Set the file system sector size to <var class=Ar>sector-size</var>. Defaults to 512.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>image-size</var></dt><dd>Set the size of the file system image to <var class=Ar>image-size</var>. This is equivalent to setting both the minimum (<code class=Fl>-M</code>) and the maximum (<code class=Fl>-m</code>) sizes to the same value. For <b class=Sy>ffs</b> and <b class=Sy>msdos</b> the <var class=Ar>image-size</var> does not include the <var class=Ar>offset</var>. <var class=Ar>offset</var> is not included in that size.</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><var class=Ar>timestamp</var></dt><dd>Specify a timestamp to be set for all filesystem files and directories created so that repeatable builds are possible. The <var class=Ar>timestamp</var> can be a <span class=Pa>pathname</span>, where the timestamps are derived from that file, or an integer value interpreted as the number of seconds from the Epoch. Note that timestamps specified in an <a class=Xr href=mtree.5.html>mtree(5)</a> spec file, override the default timestamp.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>fs-type</var></dt><dd>Create an <var class=Ar>fs-type</var> file system image. The following file system types are supported: <div class=Bd-indent><dl class=Bl-tag><dt><b class=Sy>ffs</b></dt><dd>BSD fast file system (default).</dd><dt><b class=Sy>cd9660</b></dt><dd>ISO 9660 file system.</dd><dt><b class=Sy>msdos</b></dt><dd>FAT12, FAT16, or FAT32 file system.</dd><dt><b class=Sy>zfs</b></dt><dd>ZFS pool containing one or more file systems.</dd></dl></div></dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>Exclude file system nodes not explicitly listed in the specfile.</dd><dt><a class=permalink href=#Z><code class=Fl id=Z>-Z</code></a></dt><dd>Create a sparse file for <b class=Sy>ffs</b>. This is useful for virtual machine images.</dd></dl><p class=Pp>Where sizes are specified, a decimal number of bytes is expected. Two or more numbers may be separated by an “x” to indicate a product. Each number may have one of the following optional suffixes:</p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>b</dt><dd>Block; multiply by 512</dd><dt>k</dt><dd>Kibi; multiply by 1024 (1 KiB)</dd><dt>m</dt><dd>Mebi; multiply by 1048576 (1 MiB)</dd><dt>g</dt><dd>Gibi; multiply by 1073741824 (1 GiB)</dd><dt>t</dt><dd>Tebi; multiply by 1099511627776 (1 TiB)</dd><dt>w</dt><dd>Word; multiply by the number of bytes in an integer</dd></dl></div><section class=Ss><h2 class=Ss id=FFS_specific_options><a class=permalink href=#FFS_specific_options>FFS-specific options</a></h2><b class=Sy>ffs</b> images have ffs-specific optional parameters that may be provided. Each of the options consists of a keyword, an equal sign (‘<code class=Li>=</code>’), and a value. The following keywords are supported: <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><b class=Sy>avgfilesize</b></dt><dd>Expected average file size.</dd><dt><b class=Sy>avgfpdir</b></dt><dd>Expected number of files per directory.</dd><dt><b class=Sy>bsize</b></dt><dd>Block size.</dd><dt><b class=Sy>density</b></dt><dd>Bytes per inode. If unset, will allocate the minimum number of inodes to represent the filesystem if no free space has been requested (free blocks or minimum size set); otherwise the larger of the newfs defaults or what is required by the free inode parameters if set.</dd><dt><b class=Sy>fsize</b></dt><dd>Fragment size.</dd><dt><b class=Sy>label</b></dt><dd>Label name of the image.</dd><dt><b class=Sy>maxbpg</b></dt><dd>Maximum blocks per file in a cylinder group.</dd><dt><b class=Sy>minfree</b></dt><dd>Minimum % free.</dd><dt><b class=Sy>optimization</b></dt><dd>Optimization preference; one of ‘<code class=Li>space</code>’ or ‘<code class=Li>time</code>’.</dd><dt><b class=Sy>extent</b></dt><dd>Maximum extent size.</dd><dt><b class=Sy>maxbpcg</b></dt><dd>Maximum total number of blocks in a cylinder group.</dd><dt><b class=Sy>version</b></dt><dd>UFS version. 1 for FFS (default), 2 for UFS2.</dd><dt><b class=Sy>softupdates</b></dt><dd>0 for disable (default), 1 for enable</dd></dl></div></section><section class=Ss><h2 class=Ss id=CD9660-specific_options><a class=permalink href=#CD9660-specific_options>CD9660-specific options</a></h2><b class=Sy>cd9660</b> images have ISO9660-specific optional parameters that may be provided. The arguments consist of a keyword and, optionally, an equal sign (‘<code class=Li>=</code>’), and a value. The following keywords are supported: <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><b class=Sy>allow-deep-trees</b></dt><dd>Allow the directory structure to exceed the maximum specified in the spec.</dd><dt><b class=Sy>allow-illegal-chars</b></dt><dd>Allow illegal characters in filenames. This option is not implemented.</dd><dt><b class=Sy>allow-lowercase</b></dt><dd>Allow lowercase characters in filenames. This option is not implemented.</dd><dt><b class=Sy>allow-max-name</b></dt><dd>Allow 37 instead of 33 characters for filenames by omitting the version id.</dd><dt><b class=Sy>allow-multidot</b></dt><dd>Allow multiple dots in a filename.</dd><dt><b class=Sy>applicationid</b></dt><dd>Application ID of the image.</dd><dt><b class=Sy>archimedes</b></dt><dd>Use the ‘<code class=Li>ARCHIMEDES</code>’ extension to encode RISC OS metadata.</dd><dt><b class=Sy>bootimagedir</b></dt><dd>Boot image directory. This option is not implemented.</dd><dt><b class=Sy>chrp-boot</b></dt><dd>Write an MBR partition table to the image to allow older CHRP hardware to boot.</dd><dt><b class=Sy>boot-load-segment</b></dt><dd>Set load segment for the boot image.</dd><dt><b class=Sy>bootimage</b></dt><dd>Filename of a boot image in the format “sysid;filename”, where “sysid” is one of ‘<code class=Li>efi</code>’, ‘<code class=Li>i386</code>’, ‘<code class=Li>mac68k</code>’, ‘<code class=Li>macppc</code>’, or ‘<code class=Li>powerpc</code>’.</dd><dt><b class=Sy>generic-bootimage</b></dt><dd>Load a generic boot image into the first 32K of the cd9660 image.</dd><dt><b class=Sy>hard-disk-boot</b></dt><dd>Boot image is a hard disk image.</dd><dt><b class=Sy>isolevel</b></dt><dd>An integer representing the ISO 9660 interchange level where “level” is either ‘<code class=Li>1</code>’ or ‘<code class=Li>2</code>’. “level” ‘<code class=Li>3</code>’ is not implemented.</dd><dt><b class=Sy>keep-bad-images</b></dt><dd>Do not discard images whose write was aborted due to an error. For debugging purposes.</dd><dt><b class=Sy>label</b></dt><dd>Label name of the image.</dd><dt><b class=Sy>no-boot</b></dt><dd>Boot image is not bootable.</dd><dt><b class=Sy>no-emul-boot</b></dt><dd>Boot image is a “no emulation” ElTorito image.</dd><dt><b class=Sy>no-trailing-padding</b></dt><dd>Do not pad the image (apparently Linux needs the padding).</dd><dt><b class=Sy>omit-trailing-period</b></dt><dd>Omit trailing periods in filenames.</dd><dt><b class=Sy>platformid</b></dt><dd>Set platform ID of section header entry of the boot image.</dd><dt><b class=Sy>preparer</b></dt><dd>Preparer ID of the image.</dd><dt><b class=Sy>publisher</b></dt><dd>Publisher ID of the image.</dd><dt><b class=Sy>rockridge</b></dt><dd>Use RockRidge extensions (for longer filenames, etc.).</dd><dt><b class=Sy>verbose</b></dt><dd>Turns on verbose output.</dd><dt><b class=Sy>volumeid</b></dt><dd>Volume set identifier of the image.</dd></dl></div></section><section class=Ss><h2 class=Ss id=msdos_specific_options><a class=permalink href=#msdos_specific_options>msdos-specific options</a></h2><b class=Sy>msdos</b> images have MS-DOS-specific optional parameters that may be provided. The arguments consist of a keyword, an equal sign (‘<code class=Li>=</code>’), and a value. The following keywords are supported (see <a class=Xr href=newfs_msdos.8.html>newfs_msdos(8)</a> for more details): <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#backup_sector><code class=Cm id=backup_sector>backup_sector</code></a></dt><dd>Location of the backup boot sector.</dd><dt><a class=permalink href=#block_size><code class=Cm id=block_size>block_size</code></a></dt><dd>Block size.</dd><dt><a class=permalink href=#bootstrap><code class=Cm id=bootstrap>bootstrap</code></a></dt><dd>Bootstrap file.</dd><dt><a class=permalink href=#bytes_per_sector><code class=Cm id=bytes_per_sector>bytes_per_sector</code></a></dt><dd>Bytes per sector.</dd><dt><a class=permalink href=#create_size><code class=Cm id=create_size>create_size</code></a></dt><dd>Create file size.</dd><dt><a class=permalink href=#directory_entries><code class=Cm id=directory_entries>directory_entries</code></a></dt><dd>Directory entries.</dd><dt><a class=permalink href=#drive_heads><code class=Cm id=drive_heads>drive_heads</code></a></dt><dd>Drive heads.</dd><dt><a class=permalink href=#fat_type><code class=Cm id=fat_type>fat_type</code></a></dt><dd>FAT type (12, 16, or 32).</dd><dt><a class=permalink href=#floppy><code class=Cm id=floppy>floppy</code></a></dt><dd>Preset drive parameters for standard format floppy disks (160, 180, 320, 360, 640, 720, 1200, 1232, 1440, or 2880).</dd><dt><a class=permalink href=#hidden_sectors><code class=Cm id=hidden_sectors>hidden_sectors</code></a></dt><dd>Hidden sectors.</dd><dt><a class=permalink href=#info_sector><code class=Cm id=info_sector>info_sector</code></a></dt><dd>Location of the info sector.</dd><dt><a class=permalink href=#media_descriptor><code class=Cm id=media_descriptor>media_descriptor</code></a></dt><dd>Media descriptor.</dd><dt><a class=permalink href=#num_FAT><code class=Cm id=num_FAT>num_FAT</code></a></dt><dd>Number of FATs.</dd><dt><a class=permalink href=#OEM_string><code class=Cm id=OEM_string>OEM_string</code></a></dt><dd>OEM string.</dd><dt><a class=permalink href=#offset><code class=Cm id=offset>offset</code></a></dt><dd>Offset in device. This option will be ignored if <code class=Fl>-O</code> is set to a positive number.</dd><dt><a class=permalink href=#reserved_sectors><code class=Cm id=reserved_sectors>reserved_sectors</code></a></dt><dd>Reserved sectors.</dd><dt><a class=permalink href=#sectors_per_cluster><code class=Cm id=sectors_per_cluster>sectors_per_cluster</code></a></dt><dd>Sectors per cluster.</dd><dt><a class=permalink href=#sectors_per_fat><code class=Cm id=sectors_per_fat>sectors_per_fat</code></a></dt><dd>Sectors per FAT.</dd><dt><a class=permalink href=#sectors_per_track><code class=Cm id=sectors_per_track>sectors_per_track</code></a></dt><dd>Sectors per track.</dd><dt><a class=permalink href=#size><code class=Cm id=size>size</code></a></dt><dd>File System size.</dd><dt><a class=permalink href=#volume_id><code class=Cm id=volume_id>volume_id</code></a></dt><dd>Volume ID.</dd><dt><a class=permalink href=#volume_label><code class=Cm id=volume_label>volume_label</code></a></dt><dd>Volume Label.</dd></dl></div></section><section class=Ss><h2 class=Ss id=zfs_specific_options><a class=permalink href=#zfs_specific_options>zfs-specific options</a></h2> Note: ZFS support is currently considered experimental. Do not use it for anything critical. <p class=Pp>The image created by <code class=Nm>makefs</code> contains a ZFS pool with a single vdev of type ‘<code class=Li>disk</code>’. The root dataset is always created implicitly and contains the entire input directory tree unless additional datasets are specified using the options described below.</p><p class=Pp>The arguments consist of a keyword, an equal sign (‘<code class=Li>=</code>’), and a value. The following keywords are supported:</p><p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>ashift</dt><dd>The base-2 logarithm of the minimum block size. Typical values are 9 (512B blocks) and 12 (4KB blocks). The default value is 12.</dd><dt>bootfs</dt><dd>The name of the bootable dataset for the pool. Specifying this option causes the ‘<code class=Li>bootfs</code>’ property to be set in the created pool.</dd><dt>mssize</dt><dd>The size of metaslabs in the created pool. By default, <code class=Nm>makefs</code> allocates large (up to 512MB) metaslabs with the expectation that the image will be auto-expanded upon first use. This option allows the default heuristic to be overridden.</dd><dt>poolname</dt><dd>The name of the ZFS pool. This option must be specified.</dd><dt>rootpath</dt><dd>An implicit path prefix added to dataset mountpoints. By default it is <span class=Pa>/&lt;poolname&gt;</span>. For creating bootable pools, the <var class=Va>rootpath</var> should be set to <span class=Pa>/</span>. At least one dataset must have a mountpoint equal to <var class=Va>rootpath</var>.</dd><dt>fs</dt><dd>Create an additional dataset. This option may be specified multiple times. The argument value must be of the form <var class=Ar>&lt;dataset&gt;[;&lt;prop1=v1&gt;[;&lt;prop2=v2&gt;[;...]]]</var>, where <var class=Ar>dataset</var> is the name of the dataset and must belong to the pool's namespace. For example, with a pool name of ‘<code class=Li>test</code>’ all dataset names must be prefixed by ‘<code class=Li>test/</code>’. A dataset must exist at each level of the pool's namespace. For example, to create ‘<code class=Li>test/foo/bar</code>’, ‘<code class=Li>test/foo</code>’ must be created as well. <p class=Pp>The dataset mountpoints determine how the datasets are populated with files from the staged directory tree. Conceptually, all datasets are mounted before any are populated with files. The root of the staged directory tree is mapped to <var class=Va>rootpath</var>.</p><p class=Pp>Dataset properties, as described in <a class=Xr href=zfsprops.8.html>zfsprops(8)</a>, may be specified following the dataset name. The following properties may be set for a dataset:</p><p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt>atime</dt><dd style="width: auto;"> </dd><dt>canmount</dt><dd style="width: auto;"> </dd><dt>exec</dt><dd style="width: auto;"> </dd><dt>mountpoint</dt><dd style="width: auto;"> </dd><dt>setuid</dt><dd style="width: auto;"> </dd></dl></div></dd></dl></div></section></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=mtree.5.html>mtree(5)</a>, <a class=Xr href=mtree.8.html>mtree(8)</a>, <a class=Xr href=newfs.8.html>newfs(8)</a>, <a class=Xr href=zfsconcepts.8.html>zfsconcepts(8)</a>, <a class=Xr href=zfsprops.8.html>zfsprops(8)</a>, <a class=Xr href=zpoolprops.8.html>zpoolprops(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>makefs</code> utility appeared in <span class=Ux>NetBSD 1.6</span>. It was ported to <span class=Ux>FreeBSD</span> and first appeared in <span class=Ux>FreeBSD 8.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Luke Mewburn</span> &lt;<a class=Mt href=mailto:lukem@NetBSD.org>lukem@NetBSD.org</a>&gt; (original program), <br><span class=An>Daniel Watt</span>, <br><span class=An>Walter Deignan</span>, <br><span class=An>Ryan Gabrys</span>, <br><span class=An>Alan Perez-Rathke</span>, <br><span class=An>Ram Vedam</span> (cd9660 support), <br><span class=An>Christos Zoulas</span> (msdos support), <br><span class=An>Mark Johnston</span> (zfs support). </section></div><table class=foot><tr><td class=foot-date>August 5, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>