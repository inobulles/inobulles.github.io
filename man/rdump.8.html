<!DOCTYPE html>
<html><head><meta charset=utf-8><title>rdump(8)</title><keywords content=man,rdump></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>rdump(8)</h1><table class=head><tr><td class=head-ltitle>DUMP(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>DUMP(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>dump</code>, <code class=Nm>rdump</code> — <div class=Nd>file system backup</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>dump</code></td><td>[<code class=Fl>-0123456789acLnrRSu</code>] [<code class=Fl>-B</code><var class=Ar>records</var>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-C</code><var class=Ar>cachesize</var>] [<code class=Fl>-D</code><var class=Ar>dumpdates</var>] [<code class=Fl>-d</code><var class=Ar>density</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-h</code><var class=Ar>level</var>] [<code class=Fl>-s</code><var class=Ar>feet</var>] [<code class=Fl>-T</code><var class=Ar>date</var>] <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>dump</code></td><td><code class=Fl>-W</code> | <code class=Fl>-w</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>dump</code> utility examines files on a file system and determines which files need to be backed up. These files are copied to the given disk, tape or other storage medium for safe keeping (see the <code class=Fl>-f</code> option below for doing remote backups). A dump that is larger than the output medium is broken into multiple volumes. On most media the size is determined by writing until an end-of-media indication is returned. This can be enforced by using the <code class=Fl>-a</code> option. <p class=Pp>On media that cannot reliably return an end-of-media indication (such as some cartridge tape drives) each volume is of a fixed size; the actual size is determined by the tape size and density and/or <code class=Fl>-B</code> options. By default, the same output file name is used for each volume after prompting the operator to change media.</p><p class=Pp>The file system to be dumped is specified by the argument <var class=Ar>filesystem</var> as either its device-special file or its mount point (if that is in a standard entry in <span class=Pa>/etc/fstab</span>).</p><p class=Pp><code class=Nm>dump</code> may also be invoked as <code class=Nm>rdump</code>. The <span class=Ux>4.3BSD</span> option syntax is implemented for backward compatibility, but is not documented here.</p><p class=Pp>The following options are supported by <code class=Nm>dump</code>:</p><dl class=Bl-tag><dt><a class=permalink href=#0-9><code class=Fl id=0-9>-0-9</code></a></dt><dd>Dump levels. A level 0, full backup, guarantees the entire file system is copied (but see also the <code class=Fl>-h</code> option below). A level number above 0, incremental backup, tells dump to copy all files new or modified since the last dump of any lower level. The default level is 0.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>“auto-size”. Bypass all tape length considerations, and enforce writing until an end-of-media indication is returned. This fits best for most modern tape drives. Use of this option is particularly recommended when appending to an existing tape, or using a tape drive with hardware compression (where you can never be sure about the compression ratio).</dd><dt><a class=permalink href=#B><code class=Fl id=B>-B</code></a><var class=Ar>records</var></dt><dd>The number of kilobytes per output volume, except that if it is not an integer multiple of the output block size, the command uses the next smaller such multiple. This option overrides the calculation of tape size based on length and density.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>blocksize</var></dt><dd>The number of kilobytes per output block. The default block size is 10.</dd><dt><a class=permalink href=#C><code class=Fl id=C>-C</code></a><var class=Ar>cachesize</var></dt><dd>Specify the cache size in megabytes. This will greatly improve performance at the cost of <code class=Nm>dump</code> possibly not noticing changes in the file system between passes. It is recommended that you always use this option when dumping a snapshot. Beware that <code class=Nm>dump</code> forks, and the actual memory use may be larger than the specified cache size. The recommended cache size is between 8 and 32 (megabytes).</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a></dt><dd>Change the defaults for use with a cartridge tape drive, with a density of 8000 bpi, and a length of 1700 feet.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a><var class=Ar>dumpdates</var></dt><dd>Specify an alternate path to the <span class=Pa>dumpdates</span> file. The default is <span class=Pa>/etc/dumpdates</span>.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a><var class=Ar>density</var></dt><dd>Set tape density to <var class=Ar>density</var>. The default is 1600BPI.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>file</var></dt><dd>Write the backup to <var class=Ar>file</var>; <var class=Ar>file</var> may be a special device file like <span class=Pa>/dev/sa0</span> (a tape drive), <span class=Pa>/dev/fd1</span> (a floppy disk drive), an ordinary file, or ‘<code class=Fl>-</code>’ (the standard output). Multiple file names may be given as a single argument separated by commas. Each file will be used for one dump volume in the order listed; if the dump requires more volumes than the number of names given, the last file name will used for all remaining volumes after prompting for media changes. If the name of the file is of the form “host:file”, or “user@host:file”, <code class=Nm>dump</code> writes to the named file on the remote host using <a class=Xr href=rmt.8.html>rmt(8)</a>. The default path name of the remote <a class=Xr href=rmt.8.html>rmt(8)</a> program is <span class=Pa>/etc/rmt</span>; this can be overridden by the environment variable <code class=Ev>RMT</code>.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>pipecommand</var></dt><dd>Use <a class=Xr href=popen.3.html>popen(3)</a> to execute the <a class=Xr href=sh.1.html>sh(1)</a> script string defined by <var class=Ar>pipecommand</var> for the output device of each volume. This child pipeline's <code class=Dv>stdin</code> (<span class=Pa>/dev/fd/0</span>) is redirected from the <code class=Nm>dump</code> output stream, and the environment variable <code class=Ev>DUMP_VOLUME</code> is set to the current volume number being written. After every volume, the writer side of the pipe is closed and <var class=Ar>pipecommand</var> is executed again. Subject to the media size specified by <code class=Fl>-B</code>, each volume is written in this manner as if the output were a tape drive.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a><var class=Ar>level</var></dt><dd>Honor the user “nodump” flag (<code class=Dv>UF_NODUMP</code>) only for dumps at or above the given <var class=Ar>level</var>. The default honor level is 1, so that incremental backups omit such files but full backups retain them.</dd><dt><a class=permalink href=#L><code class=Fl id=L>-L</code></a></dt><dd>This option is to notify <code class=Nm>dump</code> that it is dumping a live file system. To obtain a consistent dump image, <code class=Nm>dump</code> takes a snapshot of the file system in the <span class=Pa>.snap</span> directory in the root of the file system being dumped and then does a dump of the snapshot. The snapshot is unlinked as soon as the dump starts, and is thus removed when the dump is complete. This option is ignored for unmounted or read-only file systems. If the <span class=Pa>.snap</span> directory does not exist in the root of the file system being dumped, a warning will be issued and the <code class=Nm>dump</code> will revert to the standard behavior. This problem can be corrected by creating a <span class=Pa>.snap</span> directory in the root of the file system to be dumped; its owner should be “<code class=Li>root</code>”, its group should be “<code class=Li>operator</code>”, and its mode should be “<code class=Li>0770</code>”.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Whenever <code class=Nm>dump</code> requires operator attention, notify all operators in the group “operator” by means similar to a <a class=Xr href=wall.1.html>wall(1)</a>.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Be rsync-friendly. Normally dump stores the date of the current and prior dump in numerous places throughout the dump. These scattered changes significantly slow down rsync or another incremental file transfer program when they are used to update a remote copy of a level 0 dump, since the date changes for each dump. This option sets both dates to the epoch, permitting rsync to be much more efficient when transferring a dump file. The <code class=Fl>-r</code> option can be used only to create level 0 dumps. A dump using the <code class=Fl>-r</code> option cannot be used as the basis for a later incremental dump.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a></dt><dd>Be even more rsync-friendly. This option disables the storage of the actual inode access time (storing it instead as the inode's modified time). This option permits rsync to be even more efficient when transferring dumps generated from filesystems with numerous files which are not changing other than their access times. The <code class=Fl>-R</code> option also sets <code class=Fl>-r</code>. The <code class=Fl>-R</code> option can be used only to create level 0 dumps. A dump using the <code class=Fl>-R</code> option cannot be used as the basis for a later incremental dump.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a></dt><dd>Display an estimate of the backup size and the number of tapes required, and exit without actually performing the dump.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>feet</var></dt><dd>Attempt to calculate the amount of tape needed at a particular density. If this amount is exceeded, <code class=Nm>dump</code> prompts for a new tape. It is recommended to be a bit conservative on this option. The default tape length is 2300 feet.</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><var class=Ar>date</var></dt><dd>Use the specified date as the starting time for the dump instead of the time determined from looking in the <span class=Pa>dumpdates</span> file. The format of date is the same as that of <a class=Xr href=ctime.3.html>ctime(3)</a>. This option is useful for automated dump scripts that wish to dump over a specific period of time. The <code class=Fl>-T</code> option is mutually exclusive from the <code class=Fl>-u</code> option.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>Update the <span class=Pa>dumpdates</span> file after a successful dump. The format of the <span class=Pa>dumpdates</span> file is readable by people, consisting of one free format record per line: file system name, increment level and <a class=Xr href=ctime.3.html>ctime(3)</a> format dump date. There may be only one entry per file system at each level. The <span class=Pa>dumpdates</span> file may be edited to change any of the fields, if necessary. The default path for the <span class=Pa>dumpdates</span> file is <span class=Pa>/etc/dumpdates</span>, but the <code class=Fl>-D</code> option may be used to change it.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a></dt><dd>Tell the operator what file systems need to be dumped. This information is gleaned from the files <span class=Pa>dumpdates</span> and <span class=Pa>/etc/fstab</span>. The <code class=Fl>-W</code> option causes <code class=Nm>dump</code> to print out, for each file system in the <span class=Pa>dumpdates</span> file the most recent dump date and level, and highlights those file systems that should be dumped. If the <code class=Fl>-W</code> option is set, all other options are ignored, and <code class=Nm>dump</code> exits immediately.</dd><dt><a class=permalink href=#w><code class=Fl id=w>-w</code></a></dt><dd>Is like <code class=Fl>-W</code>, but prints only those file systems which need to be dumped.</dd></dl><p class=Pp>Directories and regular files which have their “nodump” flag (<code class=Dv>UF_NODUMP</code>) set will be omitted along with everything under such directories, subject to the <code class=Fl>-h</code> option.</p><p class=Pp>The <code class=Nm>dump</code> utility requires operator intervention on these conditions: end of tape, end of dump, tape write error, tape open error or disk read error (if there are more than a threshold of 32). In addition to alerting all operators implied by the <code class=Fl>-n</code> key, <code class=Nm>dump</code> interacts with the operator on <i class=Em>dump's</i> control terminal at times when <code class=Nm>dump</code> can no longer proceed, or if something is grossly wrong. All questions <code class=Nm>dump</code> poses <i class=Em>must</i> be answered by typing “yes” or “no”, appropriately.</p><p class=Pp>Since making a dump involves a lot of time and effort for full dumps, <code class=Nm>dump</code> checkpoints itself at the start of each tape volume. If writing that volume fails for some reason, <code class=Nm>dump</code> will, with operator permission, restart itself from the checkpoint after the old tape has been rewound and removed, and a new tape has been mounted.</p><p class=Pp>The <code class=Nm>dump</code> utility tells the operator what is going on at periodic intervals (every 5 minutes, or promptly after receiving <code class=Dv>SIGINFO</code>), including usually low estimates of the number of blocks to write, the number of tapes it will take, the time to completion, and the time to the tape change. The output is verbose, so that others know that the terminal controlling <code class=Nm>dump</code> is busy, and will be for some time.</p><p class=Pp>In the event of a catastrophic disk event, the time required to restore all the necessary backup tapes or files to disk can be kept to a minimum by staggering the incremental dumps. An efficient method of staggering incremental dumps to minimize the number of tapes follows:</p><ul class="Bl-bullet Bd-indent"><li>Always start with a level 0 backup, for example: <div class="Bd Pp Bd-indent"><pre>
/sbin/dump -0u -f /dev/nsa0 /usr/src
    </pre></div><p class=Pp>This should be done at set intervals, say once a month or once every two months, and on a set of fresh tapes that is saved forever.</p></li><li>After a level 0, dumps of active file systems (file systems with files that change, depending on your partition layout some file systems may contain only data that does not change) are taken on a daily basis, using a modified Tower of Hanoi algorithm, with this sequence of dump levels: <div class="Bd Pp Bd-indent"><pre>
3 2 5 4 7 6 9 8 9 9 ...
    </pre></div><p class=Pp>For the daily dumps, it should be possible to use a fixed number of tapes for each day, used on a weekly basis. Each week, a level 1 dump is taken, and the daily Hanoi sequence repeats beginning with 3. For weekly dumps, another fixed set of tapes per dumped file system is used, also on a cyclical basis.</p></li></ul><p class=Pp>After several months or so, the daily and weekly tapes should get rotated out of the dump cycle and fresh tapes brought in.</p></section><section class=Sh><h2 class=Sh id=ENVIRONMENT><a class=permalink href=#ENVIRONMENT>ENVIRONMENT</a></h2><dl class=Bl-tag><dt><a class=permalink href=#TAPE><code class=Ev id=TAPE>TAPE</code></a></dt><dd>The <var class=Ar>file</var> or device to dump to if the <code class=Fl>-f</code> option is not used.</dd><dt><a class=permalink href=#RMT><code class=Ev id=RMT>RMT</code></a></dt><dd>Pathname of the remote <a class=Xr href=rmt.8.html>rmt(8)</a> program.</dd><dt><a class=permalink href=#RSH><code class=Ev id=RSH>RSH</code></a></dt><dd>Pathname of a remote shell program, if not <a class=Xr href=rsh.1.html>rsh(1)</a>.</dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/sa0</span></dt><dd>default tape unit to dump to</dd><dt><span class=Pa>/etc/dumpdates</span></dt><dd>dump date records (this can be changed; see the <code class=Fl>-D</code> option)</dd><dt><span class=Pa>/etc/fstab</span></dt><dd>dump table: file systems and frequency</dd><dt><span class=Pa>/etc/group</span></dt><dd>to find group <i class=Em>operator</i></dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Dump exits with zero status on success. Startup errors are indicated with an exit code of 1; abnormal termination is indicated with an exit code of 3. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Dumps the <span class=Pa>/u</span> file system to DVDs using <code class=Nm>growisofs</code>. Uses a 16MB cache, creates a snapshot of the dump, and records the <span class=Pa>dumpdates</span> file. <div class="Bd Pp"><pre>
/sbin/dump -0u  -L -C16 -B4589840 -P 'growisofs -Z /dev/cd0=/dev/fd/0' /u
</pre></div></section><section class=Sh><h2 class=Sh id=DIAGNOSTICS><a class=permalink href=#DIAGNOSTICS>DIAGNOSTICS</a></h2> Many, and verbose. </section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=chflags.1.html>chflags(1)</a>, <a class=Xr href=fstab.5.html>fstab(5)</a>, <a class=Xr href=restore.8.html>restore(8)</a>, <a class=Xr href=rmt.8.html>rmt(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> A <code class=Nm>dump</code> utility appeared in <span class=Ux>Version 4 AT&amp;T UNIX</span>. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> Fewer than 32 read errors on the file system are ignored, though all errors will generate a warning message. This is a bit of a compromise. In practice, it is possible to generate read errors when doing dumps on mounted partitions if the file system is being modified while the <code class=Nm>dump</code> is running. Since dumps are often done in an unattended fashion using <a class=Xr href=cron.8.html>cron(8)</a> jobs asking for Operator intervention would result in the <code class=Nm>dump</code> dying. However, there is nothing wrong with a dump tape written when this sort of read error occurs, and there is no reason to terminate the <code class=Nm>dump</code>. <p class=Pp>Each reel requires a new process, so parent processes for reels already written just hang around until the entire tape is written.</p><p class=Pp>The <code class=Nm>dump</code> utility with the <code class=Fl>-W</code> or <code class=Fl>-w</code> options does not report file systems that have never been recorded in the <span class=Pa>dumpdates</span> file, even if listed in <span class=Pa>/etc/fstab</span>.</p><p class=Pp>It would be nice if <code class=Nm>dump</code> knew about the dump sequence, kept track of the tapes scribbled on, told the operator which tape to mount when, and provided more assistance for the operator running <a class=Xr href=restore.8.html>restore(8)</a>.</p><p class=Pp>The <code class=Nm>dump</code> utility cannot do remote backups without being run as root, due to its security history. This will be fixed in a later version of <span class=Ux>FreeBSD</span>. Presently, it works if you set it setuid (like it used to be), but this might constitute a security risk.</p></section></div><table class=foot><tr><td class=foot-date>June 13, 2019</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>