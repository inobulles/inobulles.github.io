<!DOCTYPE html>
<html><head><meta charset=utf-8><title>open(2)</title><keywords content=man,open></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>open(2)</h1><table class=head><tr><td class=head-ltitle>OPEN(2)</td><td class=head-vol>FreeBSD System Calls Manual</td><td class=head-rtitle>OPEN(2)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>open</code>, <code class=Nm>openat</code> — <div class=Nd>open or create a file for reading, writing or executing</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/fcntl.h.html>fcntl.h</a>&gt;</code><p class=Pp><var class=Ft>int</var><br><code class=Fn>open</code>(<var class=Fa style="white-space: nowrap;">const char *path</var>, <var class=Fa style="white-space: nowrap;">int flags</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>openat</code>(<var class=Fa style="white-space: nowrap;">int fd</var>, <var class=Fa style="white-space: nowrap;">const char *path</var>, <var class=Fa style="white-space: nowrap;">int flags</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The file name specified by <var class=Fa>path</var> is opened for either execution or reading and/or writing as specified by the argument <var class=Fa>flags</var> and the file descriptor returned to the calling process. The <var class=Fa>flags</var> argument may indicate the file is to be created if it does not exist (by specifying the <code class=Dv>O_CREAT</code> flag). In this case <code class=Fn>open</code>() and <code class=Fn>openat</code>() require an additional argument <var class=Fa>mode_t mode</var>, and the file is created with mode <var class=Fa>mode</var> as described in <a class=Xr href=chmod.2.html>chmod(2)</a> and modified by the process' umask value (see <a class=Xr href=umask.2.html>umask(2)</a>). <p class=Pp>The <code class=Fn>openat</code>() function is equivalent to the <code class=Fn>open</code>() function except in the case where the <var class=Fa>path</var> specifies a relative path. For <code class=Fn>openat</code>() and relative <var class=Fa>path</var>, the file to be opened is determined relative to the directory associated with the file descriptor <var class=Fa>fd</var> instead of the current working directory. The <var class=Fa>flag</var> parameter and the optional fourth parameter correspond exactly to the parameters of <code class=Fn>open</code>(). If <code class=Fn>openat</code>() is passed the special value <code class=Dv>AT_FDCWD</code> in the <var class=Fa>fd</var> parameter, the current working directory is used and the behavior is identical to a call to <code class=Fn>open</code>().</p><p class=Pp>When <code class=Fn>openat</code>() is called with an absolute <var class=Fa>path</var>, it ignores the <var class=Fa>fd</var> argument.</p><p class=Pp>In <a class=Xr href=capsicum.4.html>capsicum(4)</a> capability mode, <code class=Fn>open</code>() is not permitted. The <var class=Fa>path</var> argument to <code class=Fn>openat</code>() must be strictly relative to a file descriptor <var class=Fa>fd</var>. <var class=Fa>path</var> must not be an absolute path and must not contain ".." components which cause the path resolution to escape the directory hierarchy starting at <var class=Fa>fd</var>. Additionally, no symbolic link in <var class=Fa>path</var> may target absolute path or contain escaping ".." components. <var class=Fa>fd</var> must not be <code class=Dv>AT_FDCWD</code>.</p><p class=Pp>If the <code class=Dv>vfs.lookup_cap_dotdot</code><a class=Xr href=sysctl.3.html>sysctl(3)</a> MIB is set to zero, ".." components in the paths, used in capability mode, are completely disabled. If the <code class=Dv>vfs.lookup_cap_dotdot_nonlocal</code> MIB is set to zero, ".." is not allowed if found on non-local filesystem.</p><p class=Pp>The flags specified are formed by <i class=Em>or</i>'ing the following values</p><p class=Pp></p><div class="Bd Bd-indent"><pre>
O_RDONLY	open for reading only
O_WRONLY	open for writing only
O_RDWR		open for reading and writing
O_EXEC		open for execute only
O_SEARCH	open for search only, an alias for O_EXEC
O_NONBLOCK	do not block on open
O_APPEND	append on each write
O_CREAT		create file if it does not exist
O_TRUNC		truncate size to 0
O_EXCL		error if create and file exists
O_SHLOCK	atomically obtain a shared lock
O_EXLOCK	atomically obtain an exclusive lock
O_DIRECT	eliminate or reduce cache effects
O_FSYNC		synchronous writes (historical synonym for O_SYNC)
O_SYNC		synchronous writes
O_DSYNC		synchronous data writes
O_NOFOLLOW	do not follow symlinks
O_NOCTTY	ignored
O_TTY_INIT	ignored
O_DIRECTORY	error if file is not a directory
O_CLOEXEC	set FD_CLOEXEC upon open
O_VERIFY	verify the contents of the file
O_RESOLVE_BENEATH	path resolution must not cross the fd directory
O_PATH		record only the target path in the opened descriptor
O_EMPTY_PATH	openat, open file referenced by fd if path is empty
</pre></div><p class=Pp>Opening a file with <code class=Dv>O_APPEND</code> set causes each write on the file to be appended to the end. If <code class=Dv>O_TRUNC</code> is specified and the file exists, the file is truncated to zero length. If <code class=Dv>O_EXCL</code> is set with <code class=Dv>O_CREAT</code> and the file already exists, <code class=Fn>open</code>() returns an error. This may be used to implement a simple exclusive access locking mechanism. If <code class=Dv>O_EXCL</code> is set and the last component of the pathname is a symbolic link, <code class=Fn>open</code>() will fail even if the symbolic link points to a non-existent name. If the <code class=Dv>O_NONBLOCK</code> flag is specified and the <code class=Fn>open</code>() system call would result in the process being blocked for some reason (e.g., waiting for carrier on a dialup line), <code class=Fn>open</code>() returns immediately. The descriptor remains in non-blocking mode for subsequent operations.</p><p class=Pp>If <code class=Dv>O_SYNC</code> is used in the mask, all writes will immediately and synchronously be written to disk. <code class=Dv>O_FSYNC</code> is an historical synonym for <code class=Dv>O_SYNC</code>.</p><p class=Pp>If <code class=Dv>O_DSYNC</code> is used in the mask, all data and metadata required to read the data will be synchronously written to disk, but changes to metadata such as file access and modification timestamps may be written later.</p><p class=Pp>If <code class=Dv>O_NOFOLLOW</code> is used in the mask and the target file passed to <code class=Fn>open</code>() is a symbolic link then the <code class=Fn>open</code>() will fail.</p><p class=Pp>When opening a file, a lock with <a class=Xr href=flock.2.html>flock(2)</a> semantics can be obtained by setting <code class=Dv>O_SHLOCK</code> for a shared lock, or <code class=Dv>O_EXLOCK</code> for an exclusive lock. If creating a file with <code class=Dv>O_CREAT</code>, the request for the lock will never fail (provided that the underlying file system supports locking).</p><p class=Pp><code class=Dv>O_DIRECT</code> may be used to minimize or eliminate the cache effects of reading and writing. The system will attempt to avoid caching the data you read or write. If it cannot avoid caching the data, it will minimize the impact the data has on the cache. Use of this flag can drastically reduce performance if not used with care.</p><p class=Pp><code class=Dv>O_NOCTTY</code> may be used to ensure the OS does not assign this file as the controlling terminal when it opens a tty device. This is the default on <span class=Ux>FreeBSD</span>, but is present for POSIX compatibility. The <code class=Fn>open</code>() system call will not assign controlling terminals on <span class=Ux>FreeBSD</span>.</p><p class=Pp><code class=Dv>O_TTY_INIT</code> may be used to ensure the OS restores the terminal attributes when initially opening a TTY. This is the default on <span class=Ux>FreeBSD</span>, but is present for POSIX compatibility. The initial call to <code class=Fn>open</code>() on a TTY will always restore default terminal attributes on <span class=Ux>FreeBSD</span>.</p><p class=Pp><code class=Dv>O_DIRECTORY</code> may be used to ensure the resulting file descriptor refers to a directory. This flag can be used to prevent applications with elevated privileges from opening files which are even unsafe to open with <code class=Dv>O_RDONLY</code>, such as device nodes.</p><p class=Pp><code class=Dv>O_CLOEXEC</code> may be used to set <code class=Dv>FD_CLOEXEC</code> flag for the newly returned file descriptor.</p><p class=Pp><code class=Dv>O_VERIFY</code> may be used to indicate to the kernel that the contents of the file should be verified before allowing the open to proceed. The details of what “verified” means is implementation specific. The run-time linker (rtld) uses this flag to ensure shared objects have been verified before operating on them.</p><p class=Pp><code class=Dv>O_RESOLVE_BENEATH</code> returns <code class=Er>ENOTCAPABLE</code> if any intermediate component of the specified relative path does not reside in the directory hierarchy beneath the starting directory. Absolute paths or even the temporal escape from beneath of the starting directory is not allowed.</p><p class=Pp>When <var class=Fa>fd</var> is opened with <code class=Dv>O_SEARCH</code>, execute permissions are checked at open time. The <var class=Fa>fd</var> may not be used for any read operations like <a class=Xr href=getdirentries.2.html>getdirentries(2)</a>. The primary use for this descriptor will be as the lookup descriptor for the <code class=Fn>*at</code>() family of functions.</p><p class=Pp><code class=Dv>O_PATH</code> returns a file descriptor that can be used as a directory file descriptor for <a class=Xr href=openat.2.html>openat(2)</a> and other system calls taking a file descriptor argument, like <a class=Xr href=fstatat.2.html>fstatat(2)</a> and others. The other functionality of the returned file descriptor is limited to the descriptor-level operations. It can be used for</p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><a class=Xr href=fcntl.2.html>fcntl(2)</a></dt><dd>but advisory locking is not allowed</dd><dt><a class=Xr href=dup.2.html>dup(2)</a></dt><dd style="width: auto;"> </dd><dt><a class=Xr href=close.2.html>close(2)</a></dt><dd style="width: auto;"> </dd><dt><a class=Xr href=fstat.2.html>fstat(2)</a></dt><dd style="width: auto;"> </dd><dt><a class=Xr href=fexecve.2.html>fexecve(2)</a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#SCM_RIGHTS><code class=Dv id=SCM_RIGHTS>SCM_RIGHTS</code></a></dt><dd>can be passed over a <a class=Xr href=unix.4.html>unix(4)</a> socket using a <code class=Dv>SCM_RIGHTS</code> message</dd><dt><a class=Xr href=kqueue.2.html>kqueue(2)</a></dt><dd>using for <code class=Dv>EVFILT_VNODE</code></dd><dt><a class=Xr href=readlinkat.2.html>readlinkat(2)</a></dt><dd style="width: auto;"> </dd></dl></div> But operations like <a class=Xr href=read.2.html>read(2)</a>, <a class=Xr href=ftruncate.2.html>ftruncate(2)</a>, and any other that operate on file and not on file descriptor (except <a class=Xr href=fstat.2.html>fstat(2)</a> ), are not allowed. <p class=Pp>A file descriptor created with the <code class=Dv>O_PATH</code> flag can be opened into normal (operable) file descriptor by specifying it as the <var class=Fa>fd</var> argument to <code class=Fn>openat</code>() with empty <var class=Fa>path</var> and flag <code class=Dv>O_EMPTY_PATH</code>. Such an open behaves as if the current path of the file referenced by <var class=Fa>fd</var> is passed, except that the path walk permissions are not checked. See also the description of <code class=Dv>AT_EMPTY_PATH</code> flag for <a class=Xr href=fstatat.2.html>fstatat(2)</a> and related syscalls.</p><p class=Pp>If successful, <code class=Fn>open</code>() returns a non-negative integer, termed a file descriptor. It returns -1 on failure. The file pointer used to mark the current position within the file is set to the beginning of the file.</p><p class=Pp>If a sleeping open of a device node from <a class=Xr href=devfs.5.html>devfs(5)</a> is interrupted by a signal, the call always fails with <code class=Er>EINTR</code>, even if the <code class=Dv>SA_RESTART</code> flag is set for the signal. A sleeping open of a fifo (see <a class=Xr href=mkfifo.2.html>mkfifo(2)</a>) is restarted as normal.</p><p class=Pp>When a new file is created it is given the group of the directory which contains it.</p><p class=Pp>Unless <code class=Dv>O_CLOEXEC</code> flag was specified, the new descriptor is set to remain open across <a class=Xr href=execve.2.html>execve(2)</a> system calls; see <a class=Xr href=close.2.html>close(2)</a>, <a class=Xr href=fcntl.2.html>fcntl(2)</a> and <code class=Dv>O_CLOEXEC</code> description.</p><p class=Pp>The system imposes a limit on the number of file descriptors open simultaneously by one process. The <a class=Xr href=getdtablesize.2.html>getdtablesize(2)</a> system call returns the current system limit.</p></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> If successful, <code class=Fn>open</code>() and <code class=Fn>openat</code>() return a non-negative integer, termed a file descriptor. They return -1 on failure, and set <var class=Va>errno</var> to indicate the error. </section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The named file is opened unless: <dl class=Bl-tag><dt>[<a class=permalink href=#ENOTDIR><code class=Er id=ENOTDIR>ENOTDIR</code></a>]</dt><dd>A component of the path prefix is not a directory.</dd><dt>[<a class=permalink href=#ENAMETOOLONG><code class=Er id=ENAMETOOLONG>ENAMETOOLONG</code></a>]</dt><dd>A component of a pathname exceeded 255 characters, or an entire path name exceeded 1023 characters.</dd><dt>[<a class=permalink href=#ENOENT><code class=Er id=ENOENT>ENOENT</code></a>]</dt><dd><a class=permalink href=#O_CREAT><code class=Dv id=O_CREAT>O_CREAT</code></a> is not set and the named file does not exist.</dd><dt>[<a class=permalink href=#ENOENT_2><code class=Er id=ENOENT_2>ENOENT</code></a>]</dt><dd>A component of the path name that must exist does not exist.</dd><dt>[<a class=permalink href=#EACCES><code class=Er id=EACCES>EACCES</code></a>]</dt><dd>Search permission is denied for a component of the path prefix.</dd><dt>[<a class=permalink href=#EACCES_2><code class=Er id=EACCES_2>EACCES</code></a>]</dt><dd>The required permissions (for reading and/or writing) are denied for the given flags.</dd><dt>[<a class=permalink href=#EACCES_3><code class=Er id=EACCES_3>EACCES</code></a>]</dt><dd><a class=permalink href=#O_TRUNC><code class=Dv id=O_TRUNC>O_TRUNC</code></a> is specified and write permission is denied.</dd><dt>[<a class=permalink href=#EACCES_4><code class=Er id=EACCES_4>EACCES</code></a>]</dt><dd><a class=permalink href=#O_CREAT_2><code class=Dv id=O_CREAT_2>O_CREAT</code></a> is specified, the file does not exist, and the directory in which it is to be created does not permit writing.</dd><dt>[<a class=permalink href=#EPERM><code class=Er id=EPERM>EPERM</code></a>]</dt><dd><a class=permalink href=#O_CREAT_3><code class=Dv id=O_CREAT_3>O_CREAT</code></a> is specified, the file does not exist, and the directory in which it is to be created has its immutable flag set, see the <a class=Xr href=chflags.2.html>chflags(2)</a> manual page for more information.</dd><dt>[<a class=permalink href=#EPERM_2><code class=Er id=EPERM_2>EPERM</code></a>]</dt><dd>The named file has its immutable flag set and the file is to be modified.</dd><dt>[<a class=permalink href=#EPERM_3><code class=Er id=EPERM_3>EPERM</code></a>]</dt><dd>The named file has its append-only flag set, the file is to be modified, and <code class=Dv>O_TRUNC</code> is specified or <code class=Dv>O_APPEND</code> is not specified.</dd><dt>[<a class=permalink href=#ELOOP><code class=Er id=ELOOP>ELOOP</code></a>]</dt><dd>Too many symbolic links were encountered in translating the pathname.</dd><dt>[<a class=permalink href=#EISDIR><code class=Er id=EISDIR>EISDIR</code></a>]</dt><dd>The named file is a directory, and the arguments specify it is to be modified.</dd><dt>[<a class=permalink href=#EISDIR_2><code class=Er id=EISDIR_2>EISDIR</code></a>]</dt><dd>The named file is a directory, and the flags specified <code class=Dv>O_CREAT</code> without <code class=Dv>O_DIRECTORY</code>.</dd><dt>[<a class=permalink href=#EROFS><code class=Er id=EROFS>EROFS</code></a>]</dt><dd>The named file resides on a read-only file system, and the file is to be modified.</dd><dt>[<a class=permalink href=#EROFS_2><code class=Er id=EROFS_2>EROFS</code></a>]</dt><dd><a class=permalink href=#O_CREAT_4><code class=Dv id=O_CREAT_4>O_CREAT</code></a> is specified and the named file would reside on a read-only file system.</dd><dt>[<a class=permalink href=#EMFILE><code class=Er id=EMFILE>EMFILE</code></a>]</dt><dd>The process has already reached its limit for open file descriptors.</dd><dt>[<a class=permalink href=#ENFILE><code class=Er id=ENFILE>ENFILE</code></a>]</dt><dd>The system file table is full.</dd><dt>[<a class=permalink href=#EMLINK><code class=Er id=EMLINK>EMLINK</code></a>]</dt><dd><a class=permalink href=#O_NOFOLLOW><code class=Dv id=O_NOFOLLOW>O_NOFOLLOW</code></a> was specified and the target is a symbolic link.</dd><dt>[<a class=permalink href=#ENXIO><code class=Er id=ENXIO>ENXIO</code></a>]</dt><dd>The named file is a character special or block special file, and the device associated with this special file does not exist.</dd><dt>[<a class=permalink href=#ENXIO_2><code class=Er id=ENXIO_2>ENXIO</code></a>]</dt><dd><a class=permalink href=#O_NONBLOCK><code class=Dv id=O_NONBLOCK>O_NONBLOCK</code></a> is set, the named file is a fifo, <code class=Dv>O_WRONLY</code> is set, and no process has the file open for reading.</dd><dt>[<a class=permalink href=#EINTR><code class=Er id=EINTR>EINTR</code></a>]</dt><dd>The <code class=Fn>open</code>() operation was interrupted by a signal.</dd><dt>[<a class=permalink href=#EOPNOTSUPP><code class=Er id=EOPNOTSUPP>EOPNOTSUPP</code></a>]</dt><dd><a class=permalink href=#O_SHLOCK><code class=Dv id=O_SHLOCK>O_SHLOCK</code></a> or <code class=Dv>O_EXLOCK</code> is specified but the underlying file system does not support locking.</dd><dt>[<a class=permalink href=#EOPNOTSUPP_2><code class=Er id=EOPNOTSUPP_2>EOPNOTSUPP</code></a>]</dt><dd>The named file is a special file mounted through a file system that does not support access to it (e.g. NFS).</dd><dt>[<a class=permalink href=#EWOULDBLOCK><code class=Er id=EWOULDBLOCK>EWOULDBLOCK</code></a>]</dt><dd><a class=permalink href=#O_NONBLOCK_2><code class=Dv id=O_NONBLOCK_2>O_NONBLOCK</code></a> and one of <code class=Dv>O_SHLOCK</code> or <code class=Dv>O_EXLOCK</code> is specified and the file is locked.</dd><dt>[<a class=permalink href=#ENOSPC><code class=Er id=ENOSPC>ENOSPC</code></a>]</dt><dd><a class=permalink href=#O_CREAT_5><code class=Dv id=O_CREAT_5>O_CREAT</code></a> is specified, the file does not exist, and the directory in which the entry for the new file is being placed cannot be extended because there is no space left on the file system containing the directory.</dd><dt>[<a class=permalink href=#ENOSPC_2><code class=Er id=ENOSPC_2>ENOSPC</code></a>]</dt><dd><a class=permalink href=#O_CREAT_6><code class=Dv id=O_CREAT_6>O_CREAT</code></a> is specified, the file does not exist, and there are no free inodes on the file system on which the file is being created.</dd><dt>[<a class=permalink href=#EDQUOT><code class=Er id=EDQUOT>EDQUOT</code></a>]</dt><dd><a class=permalink href=#O_CREAT_7><code class=Dv id=O_CREAT_7>O_CREAT</code></a> is specified, the file does not exist, and the directory in which the entry for the new file is being placed cannot be extended because the user's quota of disk blocks on the file system containing the directory has been exhausted.</dd><dt>[<a class=permalink href=#EDQUOT_2><code class=Er id=EDQUOT_2>EDQUOT</code></a>]</dt><dd><a class=permalink href=#O_CREAT_8><code class=Dv id=O_CREAT_8>O_CREAT</code></a> is specified, the file does not exist, and the user's quota of inodes on the file system on which the file is being created has been exhausted.</dd><dt>[<a class=permalink href=#EIO><code class=Er id=EIO>EIO</code></a>]</dt><dd>An I/O error occurred while making the directory entry or allocating the inode for <code class=Dv>O_CREAT</code>.</dd><dt>[<a class=permalink href=#EINTEGRITY><code class=Er id=EINTEGRITY>EINTEGRITY</code></a>]</dt><dd>Corrupted data was detected while reading from the file system.</dd><dt>[<a class=permalink href=#ETXTBSY><code class=Er id=ETXTBSY>ETXTBSY</code></a>]</dt><dd>The file is a pure procedure (shared text) file that is being executed and the <code class=Fn>open</code>() system call requests write access.</dd><dt>[<a class=permalink href=#EFAULT><code class=Er id=EFAULT>EFAULT</code></a>]</dt><dd>The <var class=Fa>path</var> argument points outside the process's allocated address space.</dd><dt>[<a class=permalink href=#EEXIST><code class=Er id=EEXIST>EEXIST</code></a>]</dt><dd><a class=permalink href=#O_CREAT_9><code class=Dv id=O_CREAT_9>O_CREAT</code></a> and <code class=Dv>O_EXCL</code> were specified and the file exists.</dd><dt>[<a class=permalink href=#EOPNOTSUPP_3><code class=Er id=EOPNOTSUPP_3>EOPNOTSUPP</code></a>]</dt><dd>An attempt was made to open a socket (not currently implemented).</dd><dt>[<a class=permalink href=#EINVAL><code class=Er id=EINVAL>EINVAL</code></a>]</dt><dd>An attempt was made to open a descriptor with an illegal combination of <code class=Dv>O_RDONLY</code>, <code class=Dv>O_WRONLY</code>, or <code class=Dv>O_RDWR</code>, and <code class=Dv>O_EXEC</code> or <code class=Dv>O_SEARCH</code>.</dd><dt>[<a class=permalink href=#EINVAL_2><code class=Er id=EINVAL_2>EINVAL</code></a>]</dt><dd>The <code class=Dv>O_RESOLVE_BENEATH</code> flag is specified and <code class=Dv>path</code> is absolute.</dd><dt>[<a class=permalink href=#EBADF><code class=Er id=EBADF>EBADF</code></a>]</dt><dd>The <var class=Fa>path</var> argument does not specify an absolute path and the <var class=Fa>fd</var> argument is neither <code class=Dv>AT_FDCWD</code> nor a valid file descriptor open for searching.</dd><dt>[<a class=permalink href=#ENOTDIR_2><code class=Er id=ENOTDIR_2>ENOTDIR</code></a>]</dt><dd>The <var class=Fa>path</var> argument is not an absolute path and <var class=Fa>fd</var> is neither <code class=Dv>AT_FDCWD</code> nor a file descriptor associated with a directory.</dd><dt>[<a class=permalink href=#ENOTDIR_3><code class=Er id=ENOTDIR_3>ENOTDIR</code></a>]</dt><dd><a class=permalink href=#O_DIRECTORY><code class=Dv id=O_DIRECTORY>O_DIRECTORY</code></a> is specified and the file is not a directory.</dd><dt>[<a class=permalink href=#ECAPMODE><code class=Er id=ECAPMODE>ECAPMODE</code></a>]</dt><dd><a class=permalink href=#AT_FDCWD><code class=Dv id=AT_FDCWD>AT_FDCWD</code></a> is specified and the process is in capability mode.</dd><dt>[<a class=permalink href=#ECAPMODE_2><code class=Er id=ECAPMODE_2>ECAPMODE</code></a>]</dt><dd><code class=Fn>open</code>() was called and the process is in capability mode.</dd><dt>[<a class=permalink href=#ENOTCAPABLE><code class=Er id=ENOTCAPABLE>ENOTCAPABLE</code></a>]</dt><dd><var class=Fa>path</var> is an absolute path, or contained a ".." component leading to a directory outside of the directory hierarchy specified by <var class=Fa>fd</var>, and the process is in capability mode.</dd><dt>[<a class=permalink href=#ENOTCAPABLE_2><code class=Er id=ENOTCAPABLE_2>ENOTCAPABLE</code></a>]</dt><dd>The <code class=Dv>O_RESOLVE_BENEATH</code> flag was provided, and the relative <var class=Fa>path</var> escapes the <var class=Ar>fd</var> directory.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=chmod.2.html>chmod(2)</a>, <a class=Xr href=close.2.html>close(2)</a>, <a class=Xr href=dup.2.html>dup(2)</a>, <a class=Xr href=fexecve.2.html>fexecve(2)</a>, <a class=Xr href=fhopen.2.html>fhopen(2)</a>, <a class=Xr href=getdtablesize.2.html>getdtablesize(2)</a>, <a class=Xr href=getfh.2.html>getfh(2)</a>, <a class=Xr href=lgetfh.2.html>lgetfh(2)</a>, <a class=Xr href=lseek.2.html>lseek(2)</a>, <a class=Xr href=read.2.html>read(2)</a>, <a class=Xr href=umask.2.html>umask(2)</a>, <a class=Xr href=write.2.html>write(2)</a>, <a class=Xr href=fopen.3.html>fopen(3)</a>, <a class=Xr href=capsicum.4.html>capsicum(4)</a></section><section class=Sh><h2 class=Sh id=STANDARDS><a class=permalink href=#STANDARDS>STANDARDS</a></h2> These functions are specified by <span class=St>IEEE Std 1003.1-2008 (“POSIX.1”)</span>. <span class=Ux>FreeBSD</span> sets <var class=Va>errno</var> to <code class=Er>EMLINK instead of</code><code class=Er>ELOOP</code> as specified by POSIX when <code class=Dv>O_NOFOLLOW</code> is set in flags and the final component of pathname is a symbolic link to distinguish it from the case of too many symbolic link traversals in one of its non-final components. </section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Fn>open</code>() function appeared in <span class=Ux>Version 1 AT&amp;T UNIX</span>. The <code class=Fn>openat</code>() function was introduced in <span class=Ux>FreeBSD 8.0</span>. <code class=Dv>O_DSYNC</code> appeared in 13.0. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The Open Group Extended API Set 2 specification requires that the test for whether <var class=Fa>fd</var> is searchable is based on whether <var class=Fa>fd</var> is open for searching, not whether the underlying directory currently permits searches. The present implementation of the <var class=Fa>openat</var> checks the current permissions of directory instead. <p class=Pp>The <var class=Fa>mode</var> argument is variadic and may result in different calling conventions than might otherwise be expected.</p></section></div><table class=foot><tr><td class=foot-date>April 22, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>