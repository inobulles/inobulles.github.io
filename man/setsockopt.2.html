<!DOCTYPE html>
<html><head><meta charset=utf-8><title>setsockopt(2)</title><keywords content=man,setsockopt></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>setsockopt(2)</h1><table class=head><tr><td class=head-ltitle>GETSOCKOPT(2)</td><td class=head-vol>FreeBSD System Calls Manual</td><td class=head-rtitle>GETSOCKOPT(2)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>getsockopt</code>, <code class=Nm>setsockopt</code> — <div class=Nd>get and set options on sockets</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/types.h.html>sys/types.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/sys/socket.h.html>sys/socket.h</a>&gt;</code><p class=Pp><var class=Ft>int</var><br><code class=Fn>getsockopt</code>(<var class=Fa style="white-space: nowrap;">int s</var>, <var class=Fa style="white-space: nowrap;">int level</var>, <var class=Fa style="white-space: nowrap;">int optname</var>, <var class=Fa style="white-space: nowrap;">void * restrict optval</var>, <var class=Fa style="white-space: nowrap;">socklen_t * restrict optlen</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>setsockopt</code>(<var class=Fa style="white-space: nowrap;">int s</var>, <var class=Fa style="white-space: nowrap;">int level</var>, <var class=Fa style="white-space: nowrap;">int optname</var>, <var class=Fa style="white-space: nowrap;">const void *optval</var>, <var class=Fa style="white-space: nowrap;">socklen_t optlen</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Fn>getsockopt</code>() and <code class=Fn>setsockopt</code>() system calls manipulate the <i class=Em>options</i> associated with a socket. Options may exist at multiple protocol levels; they are always present at the uppermost “socket” level. <p class=Pp>When manipulating socket options the level at which the option resides and the name of the option must be specified. To manipulate options at the socket level, <var class=Fa>level</var> is specified as <code class=Dv>SOL_SOCKET</code>. To manipulate options at any other level the protocol number of the appropriate protocol controlling the option is supplied. For example, to indicate that an option is to be interpreted by the TCP protocol, <var class=Fa>level</var> should be set to the protocol number of TCP; see <a class=Xr href=getprotoent.3.html>getprotoent(3)</a>.</p><p class=Pp>The <var class=Fa>optval</var> and <var class=Fa>optlen</var> arguments are used to access option values for <code class=Fn>setsockopt</code>(). For <code class=Fn>getsockopt</code>() they identify a buffer in which the value for the requested option(s) are to be returned. For <code class=Fn>getsockopt</code>(), <var class=Fa>optlen</var> is a value-result argument, initially containing the size of the buffer pointed to by <var class=Fa>optval</var>, and modified on return to indicate the actual size of the value returned. If no option value is to be supplied or returned, <var class=Fa>optval</var> may be NULL.</p><p class=Pp>The <var class=Fa>optname</var> argument and any specified options are passed uninterpreted to the appropriate protocol module for interpretation. The include file <code class=In>&lt;<a class=In href=../src/sys/socket.h.html>sys/socket.h</a>&gt;</code> contains definitions for socket level options, described below. Options at other protocol levels vary in format and name; consult the appropriate entries in section 4 of the manual.</p><p class=Pp>Most socket-level options utilize an <var class=Vt>int</var> argument for <var class=Fa>optval</var>. For <code class=Fn>setsockopt</code>(), the argument should be non-zero to enable a boolean option, or zero if the option is to be disabled. <code class=Dv>SO_LINGER</code> uses a <var class=Vt>struct linger</var> argument, defined in <code class=In>&lt;<a class=In href=../src/sys/socket.h.html>sys/socket.h</a>&gt;</code>, which specifies the desired state of the option and the linger interval (see below). <code class=Dv>SO_SNDTIMEO</code> and <code class=Dv>SO_RCVTIMEO</code> use a <var class=Vt>struct timeval</var> argument, defined in <code class=In>&lt;<a class=In href=../src/sys/time.h.html>sys/time.h</a>&gt;</code>.</p><p class=Pp>The following options are recognized at the socket level. For protocol-specific options, see protocol manual pages, e.g. <a class=Xr href=ip.4.html>ip(4)</a> or <a class=Xr href=tcp.4.html>tcp(4)</a>. Except as noted, each may be examined with <code class=Fn>getsockopt</code>() and set with <code class=Fn>setsockopt</code>().</p><table class="Bl-column Bd-indent"><tr><td><a class=permalink href=#SO_DEBUG><code class=Dv id=SO_DEBUG>SO_DEBUG</code></a></td><td>enables recording of debugging information</td></tr><tr><td><a class=permalink href=#SO_REUSEADDR><code class=Dv id=SO_REUSEADDR>SO_REUSEADDR</code></a></td><td>enables local address reuse</td></tr><tr><td><a class=permalink href=#SO_REUSEPORT><code class=Dv id=SO_REUSEPORT>SO_REUSEPORT</code></a></td><td>enables duplicate address and port bindings</td></tr><tr><td><a class=permalink href=#SO_REUSEPORT_LB><code class=Dv id=SO_REUSEPORT_LB>SO_REUSEPORT_LB</code></a></td><td>enables duplicate address and port bindings with load balancing</td></tr><tr><td><a class=permalink href=#SO_KEEPALIVE><code class=Dv id=SO_KEEPALIVE>SO_KEEPALIVE</code></a></td><td>enables keep connections alive</td></tr><tr><td><a class=permalink href=#SO_DONTROUTE><code class=Dv id=SO_DONTROUTE>SO_DONTROUTE</code></a></td><td>enables routing bypass for outgoing messages</td></tr><tr><td><a class=permalink href=#SO_LINGER><code class=Dv id=SO_LINGER>SO_LINGER</code></a></td><td>linger on close if data present</td></tr><tr><td><a class=permalink href=#SO_BROADCAST><code class=Dv id=SO_BROADCAST>SO_BROADCAST</code></a></td><td>enables permission to transmit broadcast messages</td></tr><tr><td><a class=permalink href=#SO_OOBINLINE><code class=Dv id=SO_OOBINLINE>SO_OOBINLINE</code></a></td><td>enables reception of out-of-band data in band</td></tr><tr><td><a class=permalink href=#SO_SNDBUF><code class=Dv id=SO_SNDBUF>SO_SNDBUF</code></a></td><td>set buffer size for output</td></tr><tr><td><a class=permalink href=#SO_RCVBUF><code class=Dv id=SO_RCVBUF>SO_RCVBUF</code></a></td><td>set buffer size for input</td></tr><tr><td><a class=permalink href=#SO_SNDLOWAT><code class=Dv id=SO_SNDLOWAT>SO_SNDLOWAT</code></a></td><td>set minimum count for output</td></tr><tr><td><a class=permalink href=#SO_RCVLOWAT><code class=Dv id=SO_RCVLOWAT>SO_RCVLOWAT</code></a></td><td>set minimum count for input</td></tr><tr><td><a class=permalink href=#SO_SNDTIMEO><code class=Dv id=SO_SNDTIMEO>SO_SNDTIMEO</code></a></td><td>set timeout value for output</td></tr><tr><td><a class=permalink href=#SO_RCVTIMEO><code class=Dv id=SO_RCVTIMEO>SO_RCVTIMEO</code></a></td><td>set timeout value for input</td></tr><tr><td><a class=permalink href=#SO_ACCEPTFILTER><code class=Dv id=SO_ACCEPTFILTER>SO_ACCEPTFILTER</code></a></td><td>set accept filter on listening socket</td></tr><tr><td><a class=permalink href=#SO_NOSIGPIPE><code class=Dv id=SO_NOSIGPIPE>SO_NOSIGPIPE</code></a></td><td>controls generation of <code class=Dv>SIGPIPE</code> for the socket</td></tr><tr><td><a class=permalink href=#SO_TIMESTAMP><code class=Dv id=SO_TIMESTAMP>SO_TIMESTAMP</code></a></td><td>enables reception of a timestamp with datagrams</td></tr><tr><td><a class=permalink href=#SO_BINTIME><code class=Dv id=SO_BINTIME>SO_BINTIME</code></a></td><td>enables reception of a timestamp with datagrams</td></tr><tr><td><a class=permalink href=#SO_ACCEPTCONN><code class=Dv id=SO_ACCEPTCONN>SO_ACCEPTCONN</code></a></td><td>get listening status of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_DOMAIN><code class=Dv id=SO_DOMAIN>SO_DOMAIN</code></a></td><td>get the domain of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_TYPE><code class=Dv id=SO_TYPE>SO_TYPE</code></a></td><td>get the type of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_PROTOCOL><code class=Dv id=SO_PROTOCOL>SO_PROTOCOL</code></a></td><td>get the protocol number for the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_PROTOTYPE><code class=Dv id=SO_PROTOTYPE>SO_PROTOTYPE</code></a></td><td>SunOS alias for the Linux SO_PROTOCOL (get only)</td></tr><tr><td><a class=permalink href=#SO_ERROR><code class=Dv id=SO_ERROR>SO_ERROR</code></a></td><td>get and clear error on the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_SETFIB><code class=Dv id=SO_SETFIB>SO_SETFIB</code></a></td><td>set the associated FIB (routing table) for the socket (set only)</td></tr></table><p class=Pp>The following options are recognized in <span class=Ux>FreeBSD</span>:</p><table class="Bl-column Bd-indent"><tr><td><a class=permalink href=#SO_LABEL><code class=Dv id=SO_LABEL>SO_LABEL</code></a></td><td>get MAC label of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_PEERLABEL><code class=Dv id=SO_PEERLABEL>SO_PEERLABEL</code></a></td><td>get socket's peer's MAC label (get only)</td></tr><tr><td><a class=permalink href=#SO_LISTENQLIMIT><code class=Dv id=SO_LISTENQLIMIT>SO_LISTENQLIMIT</code></a></td><td>get backlog limit of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_LISTENQLEN><code class=Dv id=SO_LISTENQLEN>SO_LISTENQLEN</code></a></td><td>get complete queue length of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_LISTENINCQLEN><code class=Dv id=SO_LISTENINCQLEN>SO_LISTENINCQLEN</code></a></td><td>get incomplete queue length of the socket (get only)</td></tr><tr><td><a class=permalink href=#SO_USER_COOKIE><code class=Dv id=SO_USER_COOKIE>SO_USER_COOKIE</code></a></td><td>set the 'so_user_cookie' value for the socket (uint32_t, set only)</td></tr><tr><td><a class=permalink href=#SO_TS_CLOCK><code class=Dv id=SO_TS_CLOCK>SO_TS_CLOCK</code></a></td><td>set specific format of timestamp returned by SO_TIMESTAMP</td></tr><tr><td><a class=permalink href=#SO_MAX_PACING_RATE><code class=Dv id=SO_MAX_PACING_RATE>SO_MAX_PACING_RATE</code></a></td><td>set the maximum transmit rate in bytes per second for the socket</td></tr><tr><td><a class=permalink href=#SO_NO_OFFLOAD><code class=Dv id=SO_NO_OFFLOAD>SO_NO_OFFLOAD</code></a></td><td>disables protocol offloads</td></tr><tr><td><a class=permalink href=#SO_NO_DDP><code class=Dv id=SO_NO_DDP>SO_NO_DDP</code></a></td><td>disables direct data placement offload</td></tr></table><p class=Pp><code class=Dv>SO_DEBUG</code> enables debugging in the underlying protocol modules.</p><p class=Pp><code class=Dv>SO_REUSEADDR</code> indicates that the rules used in validating addresses supplied in a <a class=Xr href=bind.2.html>bind(2)</a> system call should allow reuse of local addresses.</p><p class=Pp><code class=Dv>SO_REUSEPORT</code> allows completely duplicate bindings by multiple processes if they all set <code class=Dv>SO_REUSEPORT</code> before binding the port. This option permits multiple instances of a program to each receive UDP/IP multicast or broadcast datagrams destined for the bound port.</p><p class=Pp><code class=Dv>SO_REUSEPORT_LB</code> allows completely duplicate bindings by multiple processes if they all set <code class=Dv>SO_REUSEPORT_LB</code> before binding the port. Incoming TCP and UDP connections are distributed among the sharing processes based on a hash function of local port number, foreign IP address and port number. A maximum of 256 processes can share one socket.</p><p class=Pp><code class=Dv>SO_KEEPALIVE</code> enables the periodic transmission of messages on a connected socket. Should the connected party fail to respond to these messages, the connection is considered broken and processes using the socket are notified via a <code class=Dv>SIGPIPE</code> signal when attempting to send data.</p><p class=Pp><code class=Dv>SO_DONTROUTE</code> indicates that outgoing messages should bypass the standard routing facilities. Instead, messages are directed to the appropriate network interface according to the network portion of the destination address.</p><p class=Pp><code class=Dv>SO_LINGER</code> controls the action taken when unsent messages are queued on socket and a <a class=Xr href=close.2.html>close(2)</a> is performed. If the socket promises reliable delivery of data and <code class=Dv>SO_LINGER</code> is set, the system will block the process on the <a class=Xr href=close.2.html>close(2)</a> attempt until it is able to transmit the data or until it decides it is unable to deliver the information (a timeout period, termed the linger interval, is specified in seconds in the <code class=Fn>setsockopt</code>() system call when <code class=Dv>SO_LINGER</code> is requested). If <code class=Dv>SO_LINGER</code> is disabled and a <a class=Xr href=close.2.html>close(2)</a> is issued, the system will process the close in a manner that allows the process to continue as quickly as possible.</p><p class=Pp>The option <code class=Dv>SO_BROADCAST</code> requests permission to send broadcast datagrams on the socket. Broadcast was a privileged operation in earlier versions of the system.</p><p class=Pp>With protocols that support out-of-band data, the <code class=Dv>SO_OOBINLINE</code> option requests that out-of-band data be placed in the normal data input queue as received; it will then be accessible with <a class=Xr href=recv.2.html>recv(2)</a> or <a class=Xr href=read.2.html>read(2)</a> calls without the <code class=Dv>MSG_OOB</code> flag. Some protocols always behave as if this option is set.</p><p class=Pp><code class=Dv>SO_SNDBUF</code> and <code class=Dv>SO_RCVBUF</code> are options to adjust the normal buffer sizes allocated for output and input buffers, respectively. The buffer size may be increased for high-volume connections, or may be decreased to limit the possible backlog of incoming data. The system places an absolute maximum on these values, which is accessible through the <a class=Xr href=sysctl.3.html>sysctl(3)</a> MIB variable “<code class=Li>kern.ipc.maxsockbuf</code>”.</p><p class=Pp><code class=Dv>SO_SNDLOWAT</code> is an option to set the minimum count for output operations. Most output operations process all of the data supplied by the call, delivering data to the protocol for transmission and blocking as necessary for flow control. Nonblocking output operations will process as much data as permitted subject to flow control without blocking, but will process no data if flow control does not allow the smaller of the low water mark value or the entire request to be processed. A <a class=Xr href=select.2.html>select(2)</a> operation testing the ability to write to a socket will return true only if the low water mark amount could be processed. The default value for <code class=Dv>SO_SNDLOWAT</code> is set to a convenient size for network efficiency, often 1024.</p><p class=Pp><code class=Dv>SO_RCVLOWAT</code> is an option to set the minimum count for input operations. In general, receive calls will block until any (non-zero) amount of data is received, then return with the smaller of the amount available or the amount requested. The default value for <code class=Dv>SO_RCVLOWAT</code> is 1. If <code class=Dv>SO_RCVLOWAT</code> is set to a larger value, blocking receive calls normally wait until they have received the smaller of the low water mark value or the requested amount. Receive calls may still return less than the low water mark if an error occurs, a signal is caught, or the type of data next in the receive queue is different from that which was returned.</p><p class=Pp><code class=Dv>SO_SNDTIMEO</code> is an option to set a timeout value for output operations. It accepts a <var class=Vt>struct timeval</var> argument with the number of seconds and microseconds used to limit waits for output operations to complete. If a send operation has blocked for this much time, it returns with a partial count or with the error <code class=Er>EWOULDBLOCK</code> if no data were sent. In the current implementation, this timer is restarted each time additional data are delivered to the protocol, implying that the limit applies to output portions ranging in size from the low water mark to the high water mark for output.</p><p class=Pp><code class=Dv>SO_RCVTIMEO</code> is an option to set a timeout value for input operations. It accepts a <var class=Vt>struct timeval</var> argument with the number of seconds and microseconds used to limit waits for input operations to complete. In the current implementation, this timer is restarted each time additional data are received by the protocol, and thus the limit is in effect an inactivity timer. If a receive operation has been blocked for this much time without receiving additional data, it returns with a short count or with the error <code class=Er>EWOULDBLOCK</code> if no data were received.</p><p class=Pp><code class=Dv>SO_SETFIB</code> can be used to over-ride the default FIB (routing table) for the given socket. The value must be from 0 to one less than the number returned from the sysctl <i class=Em>net.fibs</i>.</p><p class=Pp><code class=Dv>SO_USER_COOKIE</code> can be used to set the uint32_t so_user_cookie field in the socket. The value is an uint32_t, and can be used in the kernel code that manipulates traffic related to the socket. The default value for the field is 0. As an example, the value can be used as the skipto target or pipe number in <code class=Nm>ipfw/dummynet</code>.</p><p class=Pp><code class=Dv>SO_ACCEPTFILTER</code> places an <a class=Xr href=accept_filter.9.html>accept_filter(9)</a> on the socket, which will filter incoming connections on a listening stream socket before being presented for <a class=Xr href=accept.2.html>accept(2)</a>. Once more, <a class=Xr href=listen.2.html>listen(2)</a> must be called on the socket before trying to install the filter on it, or else the <code class=Fn>setsockopt</code>() system call will fail.</p><div class="Bd Pp"><pre>
struct  accept_filter_arg {
        char    af_name[16];
        char    af_arg[256-16];
};
</pre></div><p class=Pp>The <var class=Fa>optval</var> argument should point to a <var class=Fa>struct accept_filter_arg</var> that will select and configure the <a class=Xr href=accept_filter.9.html>accept_filter(9)</a>. The <var class=Fa>af_name</var> argument should be filled with the name of the accept filter that the application wishes to place on the listening socket. The optional argument <var class=Fa>af_arg</var> can be passed to the accept filter specified by <var class=Fa>af_name</var> to provide additional configuration options at attach time. Passing in an <var class=Fa>optval</var> of NULL will remove the filter.</p><p class=Pp>The <code class=Dv>SO_NOSIGPIPE</code> option controls generation of the <code class=Dv>SIGPIPE</code> signal normally sent when writing to a connected socket where the other end has been closed returns with the error <code class=Er>EPIPE</code>.</p><p class=Pp>If the <code class=Dv>SO_TIMESTAMP</code> or <code class=Dv>SO_BINTIME</code> option is enabled on a <code class=Dv>SOCK_DGRAM</code> socket, the <a class=Xr href=recvmsg.2.html>recvmsg(2)</a> call may return a timestamp corresponding to when the datagram was received. However, it may not, for example due to a resource shortage. The <var class=Va>msg_control</var> field in the <var class=Vt>msghdr</var> structure points to a buffer that contains a <var class=Vt>cmsghdr</var> structure followed by a <var class=Vt>struct timeval</var> for <code class=Dv>SO_TIMESTAMP</code> and <var class=Vt>struct bintime</var> for <code class=Dv>SO_BINTIME</code>. The <var class=Vt>cmsghdr</var> fields have the following values for TIMESTAMP by default:</p><div class="Bd Pp"><pre>
     cmsg_len = CMSG_LEN(sizeof(struct timeval));
     cmsg_level = SOL_SOCKET;
     cmsg_type = SCM_TIMESTAMP;
</pre></div><p class=Pp>and for <code class=Dv>SO_BINTIME</code>:</p><div class="Bd Pp"><pre>
     cmsg_len = CMSG_LEN(sizeof(struct bintime));
     cmsg_level = SOL_SOCKET;
     cmsg_type = SCM_BINTIME;
</pre></div><p class=Pp>Additional timestamp types are available by following <code class=Dv>SO_TIMESTAMP</code> with <code class=Dv>SO_TS_CLOCK</code>, which requests a specific timestamp format to be returned instead of <code class=Dv>SCM_TIMESTAMP when</code><code class=Dv>SO_TIMESTAMP is enabled.</code> These <code class=Dv>SO_TS_CLOCK</code> values are recognized in <span class=Ux>FreeBSD</span>:</p><table class="Bl-column Bd-indent"><tr><td><a class=permalink href=#SO_TS_REALTIME_MICRO><code class=Dv id=SO_TS_REALTIME_MICRO>SO_TS_REALTIME_MICRO</code></a></td><td>realtime (SCM_TIMESTAMP, struct timeval), default</td></tr><tr><td><a class=permalink href=#SO_TS_BINTIME><code class=Dv id=SO_TS_BINTIME>SO_TS_BINTIME</code></a></td><td>realtime (SCM_BINTIME, struct bintime)</td></tr><tr><td><a class=permalink href=#SO_TS_REALTIME><code class=Dv id=SO_TS_REALTIME>SO_TS_REALTIME</code></a></td><td>realtime (SCM_REALTIME, struct timespec)</td></tr><tr><td><a class=permalink href=#SO_TS_MONOTONIC><code class=Dv id=SO_TS_MONOTONIC>SO_TS_MONOTONIC</code></a></td><td>monotonic time (SCM_MONOTONIC, struct timespec)</td></tr></table><p class=Pp><code class=Dv>SO_ACCEPTCONN</code>, <code class=Dv>SO_TYPE</code>, <code class=Dv>SO_PROTOCOL</code> (and its alias <code class=Dv>SO_PROTOTYPE</code>) and <code class=Dv>SO_ERROR</code> are options used only with <code class=Fn>getsockopt</code>(). <code class=Dv>SO_ACCEPTCONN</code> returns whether the socket is currently accepting connections, that is, whether or not the <a class=Xr href=listen.2.html>listen(2)</a> system call was invoked on the socket. <code class=Dv>SO_TYPE</code> returns the type of the socket, such as <code class=Dv>SOCK_STREAM</code>; it is useful for servers that inherit sockets on startup. <code class=Dv>SO_PROTOCOL</code> returns the protocol number for the socket, for <code class=Dv>AF_INET</code> and <code class=Dv>AF_INET6</code> address families. <code class=Dv>SO_ERROR</code> returns any pending error on the socket and clears the error status. It may be used to check for asynchronous errors on connected datagram sockets or for other asynchronous errors.</p><p class=Pp><code class=Dv>SO_LABEL</code> returns the MAC label of the socket. <code class=Dv>SO_PEERLABEL</code> returns the MAC label of the socket's peer. Note that your kernel must be compiled with MAC support. See <a class=Xr href=mac.3.html>mac(3)</a> for more information.</p><p class=Pp><code class=Dv>SO_LISTENQLIMIT</code> returns the maximal number of queued connections, as set by <a class=Xr href=listen.2.html>listen(2)</a>. <code class=Dv>SO_LISTENQLEN</code> returns the number of unaccepted complete connections. <code class=Dv>SO_LISTENINCQLEN</code> returns the number of unaccepted incomplete connections.</p><p class=Pp><code class=Dv>SO_MAX_PACING_RATE</code> instruct the socket and underlying network adapter layers to limit the transfer rate to the given unsigned 32-bit value in bytes per second.</p><p class=Pp><code class=Dv>SO_NO_OFFLOAD</code> disables support for protocol offloads. At present, this prevents TCP sockets from using TCP offload engines. <code class=Dv>SO_NO_DDP</code> disables support for a specific TCP offload known as direct data placement (DDP). DDP is an offload supported by Chelsio network adapters that permits reassembled TCP data streams to be received via zero-copy in user-supplied buffers using <a class=Xr href=aio_read.2.html>aio_read(2)</a>.</p></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> Upon successful completion, the value 0 is returned; otherwise the value -1 is returned and the global variable <var class=Va>errno</var> is set to indicate the error. </section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The <code class=Fn>getsockopt</code>() and <code class=Fn>setsockopt</code>() system calls succeed unless: <dl class=Bl-tag><dt>[<a class=permalink href=#EBADF><code class=Er id=EBADF>EBADF</code></a>]</dt><dd>The argument <var class=Fa>s</var> is not a valid descriptor.</dd><dt>[<a class=permalink href=#ENOTSOCK><code class=Er id=ENOTSOCK>ENOTSOCK</code></a>]</dt><dd>The argument <var class=Fa>s</var> is a file, not a socket.</dd><dt>[<a class=permalink href=#ENOPROTOOPT><code class=Er id=ENOPROTOOPT>ENOPROTOOPT</code></a>]</dt><dd>The option is unknown at the level indicated.</dd><dt>[<a class=permalink href=#EFAULT><code class=Er id=EFAULT>EFAULT</code></a>]</dt><dd>The address pointed to by <var class=Fa>optval</var> is not in a valid part of the process address space. For <code class=Fn>getsockopt</code>(), this error may also be returned if <var class=Fa>optlen</var> is not in a valid part of the process address space.</dd><dt>[<a class=permalink href=#EINVAL><code class=Er id=EINVAL>EINVAL</code></a>]</dt><dd>Installing an <a class=Xr href=accept_filter.9.html>accept_filter(9)</a> on a non-listening socket was attempted.</dd><dt>[<a class=permalink href=#ENOMEM><code class=Er id=ENOMEM>ENOMEM</code></a>]</dt><dd>A memory allocation failed that was required to service the request.</dd></dl><p class=Pp>The <code class=Fn>setsockopt</code>() system call may also return the following error:</p><dl class=Bl-tag><dt>[<a class=permalink href=#ENOBUFS><code class=Er id=ENOBUFS>ENOBUFS</code></a>]</dt><dd>Insufficient resources were available in the system to perform the operation.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=ioctl.2.html>ioctl(2)</a>, <a class=Xr href=listen.2.html>listen(2)</a>, <a class=Xr href=recvmsg.2.html>recvmsg(2)</a>, <a class=Xr href=socket.2.html>socket(2)</a>, <a class=Xr href=getprotoent.3.html>getprotoent(3)</a>, <a class=Xr href=mac.3.html>mac(3)</a>, <a class=Xr href=sysctl.3.html>sysctl(3)</a>, <a class=Xr href=ip.4.html>ip(4)</a>, <a class=Xr href=ip6.4.html>ip6(4)</a>, <a class=Xr href=sctp.4.html>sctp(4)</a>, <a class=Xr href=tcp.4.html>tcp(4)</a>, <a class=Xr href=protocols.5.html>protocols(5)</a>, <a class=Xr href=sysctl.8.html>sysctl(8)</a>, <a class=Xr href=accept_filter.9.html>accept_filter(9)</a>, <a class=Xr href=bintime.9.html>bintime(9)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Fn>getsockopt</code>() and <code class=Fn>setsockopt</code>() system calls appeared in <span class=Ux>4.2BSD</span>. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> Several of the socket options should be handled at lower levels of the system. </section></div><table class=foot><tr><td class=foot-date>June 3, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>