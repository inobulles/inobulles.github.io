<!DOCTYPE html>
<html><head><meta charset=utf-8><title>if_ti(4)</title><keywords content=man,if_ti></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>if_ti(4)</h1><table class=head><tr><td class=head-ltitle>TI(4)</td><td class=head-vol>FreeBSD Kernel Interfaces Manual</td><td class=head-rtitle>TI(4)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>ti</code> — <div class=Nd>Alteon Networks Tigon I and Tigon II Gigabit Ethernet driver</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2> To compile this driver into the kernel, place the following lines in your kernel configuration file: <div class="Bd Pp Bd-indent"><code class=Cd>device ti</code><br><code class=Cd>options TI_SF_BUF_JUMBO</code><br><code class=Cd>options TI_JUMBO_HDRSPLIT</code></div><p class=Pp>Alternatively, to load the driver as a module at boot time, place the following line in <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>:</p><div class="Bd Pp Bd-indent"><pre>
if_ti_load="YES"
</pre></div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>ti</code> driver provides support for PCI Gigabit Ethernet adapters based on the Alteon Networks Tigon Gigabit Ethernet controller chip. The Tigon contains an embedded R4000 CPU, gigabit MAC, dual DMA channels and a PCI interface unit. The Tigon II contains two R4000 CPUs and other refinements. Either chip can be used in either a 32-bit or 64-bit PCI slot. Communication with the chip is achieved via PCI shared memory and bus master DMA. The Tigon I and II support hardware multicast address filtering, VLAN tag extraction and insertion, and jumbo Ethernet frames sizes up to 9000 bytes. Note that the Tigon I chipset is no longer in active production: all new adapters should come equipped with Tigon II chipsets. <p class=Pp>While the Tigon chipset supports 10, 100 and 1000Mbps speeds, support for 10 and 100Mbps speeds is only available on boards with the proper transceivers. Most adapters are only designed to work at 1000Mbps, however the driver should support those NICs that work at lower speeds as well.</p><p class=Pp>Support for jumbo frames is provided via the interface MTU setting. Selecting an MTU larger than 1500 bytes with the <a class=Xr href=ifconfig.8.html>ifconfig(8)</a> utility configures the adapter to receive and transmit jumbo frames. Using jumbo frames can greatly improve performance for certain tasks, such as file transfers and data streaming.</p><p class=Pp>Header splitting support for Tigon 2 boards (this option has no effect for the Tigon 1) can be turned on with the <code class=Dv>TI_JUMBO_HDRSPLIT</code> option. See <a class=Xr href=zero_copy.9.html>zero_copy(9)</a> for more discussion on zero copy receive and header splitting.</p><p class=Pp>The <code class=Nm>ti</code> driver uses UMA backed jumbo receive buffers, but can be configured to use <a class=Xr href=sendfile.2.html>sendfile(2)</a> buffer allocator. To turn on <a class=Xr href=sendfile.2.html>sendfile(2)</a> buffer allocator, use the <code class=Dv>TI_SF_BUF_JUMBO</code> option.</p><p class=Pp>Support for vlans is also available using the <a class=Xr href=vlan.4.html>vlan(4)</a> mechanism. See the <a class=Xr href=vlan.4.html>vlan(4)</a> man page for more details.</p><p class=Pp>The <code class=Nm>ti</code> driver supports the following media types:</p><dl class=Bl-tag><dt>autoselect</dt><dd>Enable autoselection of the media type and options. The user can manually override the autoselected mode by adding media options to the <span class=Pa>/etc/rc.conf</span> file.</dd><dt>10baseT/UTP</dt><dd>Set 10Mbps operation. The <var class=Ar>mediaopt</var> option can also be used to select either <var class=Ar>full-duplex</var> or <var class=Ar>half-duplex</var> modes.</dd><dt>100baseTX</dt><dd>Set 100Mbps (Fast Ethernet) operation. The <var class=Ar>mediaopt</var> option can also be used to select either <var class=Ar>full-duplex</var> or <var class=Ar>half-duplex</var> modes.</dd><dt>1000baseSX</dt><dd>Set 1000Mbps (Gigabit Ethernet) operation. Only <var class=Ar>full-duplex</var> mode is supported at this speed.</dd></dl><p class=Pp>The <code class=Nm>ti</code> driver supports the following media options:</p><dl class=Bl-tag><dt>full-duplex</dt><dd>Force full-duplex operation.</dd><dt>half-duplex</dt><dd>Force half duplex operation.</dd></dl><p class=Pp>For more information on configuring this device, see <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>.</p></section><section class=Sh><h2 class=Sh id=HARDWARE><a class=permalink href=#HARDWARE>HARDWARE</a></h2> The <code class=Nm>ti</code> driver supports Gigabit Ethernet adapters based on the Alteon Tigon I and II chips. The <code class=Nm>ti</code> driver has been tested with the following adapters: <p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>3Com 3c985-SX Gigabit Ethernet adapter (Tigon 1)</li><li>3Com 3c985B-SX Gigabit Ethernet adapter (Tigon 2)</li><li>Alteon AceNIC V Gigabit Ethernet adapter (1000baseSX)</li><li>Alteon AceNIC V Gigabit Ethernet adapter (1000baseT)</li><li>Digital EtherWORKS 1000SX PCI Gigabit adapter</li><li>Netgear GA620 Gigabit Ethernet adapter (1000baseSX)</li><li>Netgear GA620T Gigabit Ethernet adapter (1000baseT)</li></ul><p class=Pp>The following adapters should also be supported but have not yet been tested:</p><p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>Asante GigaNIX1000T Gigabit Ethernet adapter</li><li>Asante PCI 1000BASE-SX Gigabit Ethernet adapter</li><li>Farallon PN9000SX Gigabit Ethernet adapter</li><li>NEC Gigabit Ethernet</li><li>Silicon Graphics PCI Gigabit Ethernet adapter</li></ul></section><section class=Sh><h2 class=Sh id=LOADER_TUNABLES><a class=permalink href=#LOADER_TUNABLES>LOADER TUNABLES</a></h2> Tunables can be set at the <a class=Xr href=loader.8.html>loader(8)</a> prompt before booting the kernel or stored in <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>. <dl class=Bl-tag><dt><var class=Va>hw.ti.%d.dac</var></dt><dd>If this tunable is set to 0 it will disable DAC (Dual Address Cycle). The default value is 1 which means driver will use full 64bit DMA addressing.</dd></dl></section><section class=Sh><h2 class=Sh id=SYSCTL_VARIABLES><a class=permalink href=#SYSCTL_VARIABLES>SYSCTL VARIABLES</a></h2> The following variables are available as both <a class=Xr href=sysctl.8.html>sysctl(8)</a> variables and <a class=Xr href=loader.8.html>loader(8)</a> tunables. The interface has to be brought down and up again before a change takes effect when any of the following tunables are changed. The one microsecond clock tick referenced below is a nominal time and the actual hardware may not provide granularity to this level. For example, on Tigon 2 (revision 6) cards with release 12.0 the clock granularity is 5 microseconds. <dl class=Bl-tag><dt><var class=Va>dev.ti.%d.rx_coal_ticks</var></dt><dd>This value, receive coalesced ticks, controls the number of clock ticks (of 1 microseconds each) that must elapse before the NIC DMAs the receive return producer pointer to the Host and generates an interrupt. This parameter works in conjunction with the rx_max_coal_bds, receive max coalesced BDs, tunable parameter. The NIC will return the receive return producer pointer to the Host when either of the thresholds is exceeded. A value of 0 means that this parameter is ignored and receive BDs will only be returned when the receive max coalesced BDs value is reached. The default value is 170.</dd><dt><var class=Va>dev.ti.%d.rx_max_coal_bds</var></dt><dd>This value, receive max coalesced BDs, controls the number of receive buffer descriptors that will be coalesced before the NIC updates the receive return ring producer index. If this value is set to 0 it will disable receive buffer descriptor coalescing. The default value is 64.</dd><dt><var class=Va>dev.ti.%d.ti_tx_coal_ticks</var></dt><dd>This value, send coalesced ticks, controls the number of clock ticks (of 1 microseconds each) that must elapse before the NIC DMAs the send consumer pointer to the Host and generates an interrupt. This parameter works in conjunction with the tx_max_coal_bds, send max coalesced BDs, tunable parameter. The NIC will return the send consumer pointer to the Host when either of the thresholds is exceeded. A value of 0 means that this parameter is ignored and send BDs will only be returned when the send max coalesced BDs value is reached. The default value is 2000.</dd><dt><var class=Va>dev.ti.%d.tx_max_coal_bds</var></dt><dd>This value, send max coalesced BDs, controls the number of send buffer descriptors that will be coalesced before the NIC updates the send consumer index. If this value is set to 0 it will disable send buffer descriptor coalescing. The default value is 32.</dd><dt><var class=Va>dev.ti.%d.tx_buf_ratio</var></dt><dd>This value controls the ratio of the remaining memory in the NIC that should be devoted to transmit buffer vs. receive buffer. The lower 7 bits are used to indicate the ratio in 1/64th increments. For example, setting this value to 16 will set the transmit buffer to 1/4 of the remaining buffer space. In no cases will the transmit or receive buffer be reduced below 68 KB. For a 1 MB NIC the approximate total space for data buffers is 800 KB. For a 512 KB NIC that number is 300 KB. The default value is 21.</dd><dt><var class=Va>dev.ti.%d.stat_ticks</var></dt><dd>The value, stat ticks, controls the number of clock ticks (of 1 microseconds each) that must elapse before the NIC DMAs the statistics block to the Host and generates a STATS_UPDATED event. If set to zero then statistics are never DMAed to the Host. It is recommended that this value be set to a high enough frequency to not mislead someone reading statistics refreshes. Several times a second is enough. The default value is 2000000 (2 seconds).</dd></dl></section><section class=Sh><h2 class=Sh id=IOCTLS><a class=permalink href=#IOCTLS>IOCTLS</a></h2> In addition to the standard <a class=Xr href=socket.2.html>socket(2)</a><a class=Xr href=ioctl.2.html>ioctl(2)</a> calls implemented by most network drivers, the <code class=Nm>ti</code> driver also includes a character device interface that can be used for additional diagnostics, configuration and debugging. With this character device interface, and a specially patched version of <a class=Xr href=gdb.1.html>gdb(1)</a>, the user can debug firmware running on the Tigon board. <p class=Pp>These ioctls and their arguments are defined in the <code class=In>&lt;<a class=In href=../src/sys/tiio.h.html>sys/tiio.h</a>&gt;</code> header file.</p><dl class=Bl-tag><dt><a class=permalink href=#TIIOCGETSTATS><code class=Dv id=TIIOCGETSTATS>TIIOCGETSTATS</code></a></dt><dd>Return card statistics DMAed from the card into kernel memory approximately every 2 seconds. (That time interval can be changed via the <code class=Dv>TIIOCSETPARAMS</code> ioctl.) The argument is <var class=Vt>struct ti_stats</var>.</dd><dt><a class=permalink href=#TIIOCGETPARAMS><code class=Dv id=TIIOCGETPARAMS>TIIOCGETPARAMS</code></a></dt><dd>Get various performance-related firmware parameters that largely affect how interrupts are coalesced. The argument is <var class=Vt>struct ti_params</var>.</dd><dt><a class=permalink href=#TIIOCSETPARAMS><code class=Dv id=TIIOCSETPARAMS>TIIOCSETPARAMS</code></a></dt><dd>Set various performance-related firmware parameters that largely affect how interrupts are coalesced. The argument is <var class=Vt>struct ti_params</var>.</dd><dt><a class=permalink href=#TIIOCSETTRACE><code class=Dv id=TIIOCSETTRACE>TIIOCSETTRACE</code></a></dt><dd>Tell the NIC to trace the requested types of information. The argument is <var class=Vt>ti_trace_type</var>.</dd><dt><a class=permalink href=#TIIOCGETTRACE><code class=Dv id=TIIOCGETTRACE>TIIOCGETTRACE</code></a></dt><dd>Dump the trace buffer from the card. The argument is <var class=Vt>struct ti_trace_buf</var>.</dd><dt><a class=permalink href=#ALT_ATTACH><code class=Dv id=ALT_ATTACH>ALT_ATTACH</code></a></dt><dd>This ioctl is used for compatibility with Alteon's Solaris driver. They apparently only have one character interface for debugging, so they have to tell it which Tigon instance they want to debug. This ioctl is a noop for <span class=Ux>FreeBSD</span>.</dd><dt><a class=permalink href=#ALT_READ_TG_MEM><code class=Dv id=ALT_READ_TG_MEM>ALT_READ_TG_MEM</code></a></dt><dd>Read the requested memory region from the Tigon board. The argument is <var class=Vt>struct tg_mem</var>.</dd><dt><a class=permalink href=#ALT_WRITE_TG_MEM><code class=Dv id=ALT_WRITE_TG_MEM>ALT_WRITE_TG_MEM</code></a></dt><dd>Write to the requested memory region on the Tigon board. The argument is <var class=Vt>struct tg_mem</var>.</dd><dt><a class=permalink href=#ALT_READ_TG_REG><code class=Dv id=ALT_READ_TG_REG>ALT_READ_TG_REG</code></a></dt><dd>Read the requested register from the Tigon board. The argument is <var class=Vt>struct tg_reg</var>.</dd><dt><a class=permalink href=#ALT_WRITE_TG_REG><code class=Dv id=ALT_WRITE_TG_REG>ALT_WRITE_TG_REG</code></a></dt><dd>Write to the requested register on the Tigon board. The argument is <var class=Vt>struct tg_reg</var>.</dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/ti[0-255]</span></dt><dd>Tigon driver character interface.</dd></dl></section><section class=Sh><h2 class=Sh id=DIAGNOSTICS><a class=permalink href=#DIAGNOSTICS>DIAGNOSTICS</a></h2><dl class=Bl-diag><dt>ti%d: couldn't map memory</dt><dd>A fatal initialization error has occurred.</dd><dt>ti%d: couldn't map interrupt</dt><dd>A fatal initialization error has occurred.</dd><dt>ti%d: no memory for softc struct!</dt><dd>The driver failed to allocate memory for per-device instance information during initialization.</dd><dt>ti%d: failed to enable memory mapping!</dt><dd>The driver failed to initialize PCI shared memory mapping. This might happen if the card is not in a bus-master slot.</dd><dt>ti%d: no memory for jumbo buffers!</dt><dd>The driver failed to allocate memory for jumbo frames during initialization.</dd><dt>ti%d: bios thinks we're in a 64 bit slot, but we aren't</dt><dd>The BIOS has programmed the NIC as though it had been installed in a 64-bit PCI slot, but in fact the NIC is in a 32-bit slot. This happens as a result of a bug in some BIOSes. This can be worked around on the Tigon II, but on the Tigon I initialization will fail.</dd><dt>ti%d: board self-diagnostics failed!</dt><dd>The ROMFAIL bit in the CPU state register was set after system startup, indicating that the on-board NIC diagnostics failed.</dd><dt>ti%d: unknown hwrev</dt><dd>The driver detected a board with an unsupported hardware revision. The <code class=Nm>ti</code> driver supports revision 4 (Tigon 1) and revision 6 (Tigon 2) chips and has firmware only for those devices.</dd><dt>ti%d: watchdog timeout</dt><dd>The device has stopped responding to the network, or there is a problem with the network connection (cable).</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=sendfile.2.html>sendfile(2)</a>, <a class=Xr href=altq.4.html>altq(4)</a>, <a class=Xr href=arp.4.html>arp(4)</a>, <a class=Xr href=netintro.4.html>netintro(4)</a>, <a class=Xr href=ng_ether.4.html>ng_ether(4)</a>, <a class=Xr href=vlan.4.html>vlan(4)</a>, <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>, <a class=Xr href=zero_copy.9.html>zero_copy(9)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>ti</code> device driver first appeared in <span class=Ux>FreeBSD 3.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The <code class=Nm>ti</code> driver was written by <span class=An>Bill Paul</span> &lt;<a class=Mt href=mailto:wpaul@bsdi.com>wpaul@bsdi.com</a>&gt;. The header splitting firmware modifications, character <a class=Xr href=ioctl.2.html>ioctl(2)</a> interface and debugging support were written by <span class=An>Kenneth Merry</span> &lt;<a class=Mt href=mailto:ken@FreeBSD.org>ken@FreeBSD.org</a>&gt;. Initial zero copy support was written by <span class=An>Andrew Gallatin</span> &lt;<a class=Mt href=mailto:gallatin@FreeBSD.org>gallatin@FreeBSD.org</a>&gt;. </section></div><table class=foot><tr><td class=foot-date>November 14, 2011</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>