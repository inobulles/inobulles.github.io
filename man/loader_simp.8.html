<!DOCTYPE html>
<html><head><meta charset=utf-8><title>loader_simp(8)</title><keywords content=man,loader_simp></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>loader_simp(8)</h1><table class=head><tr><td class=head-ltitle>LOADER_SIMP(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>LOADER_SIMP(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>loader_simp</code> — <div class=Nd>kernel bootstrapping final stage</div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The program called <code class=Nm>loader_simp</code> is the final stage of <span class=Ux>FreeBSD</span>'s kernel bootstrapping process. On IA32 (i386) architectures, it is a <span class=Pa>BTX</span> client. It is linked statically to <a class=Xr href=libsa.3.html>libsa(3)</a> and usually located in the directory <span class=Pa>/boot</span>. <p class=Pp>It provides a scripting language that can be used to automate tasks, do pre-configuration or assist in recovery procedures. This scripting language is roughly divided in two main components. The smaller one is a set of commands designed for direct use by the casual user, called "builtin commands" for historical reasons. The main drive behind these commands is user-friendliness.</p><p class=Pp>During initialization, <code class=Nm>loader_simp</code> will probe for a console and set the <var class=Va>console</var> variable, or set it to serial console (“<code class=Li>comconsole</code>”) if the previous boot stage used that. If multiple consoles are selected, they will be listed separated by spaces. Then, devices are probed, <var class=Va>currdev</var> and <var class=Va>loaddev</var> are set, and <var class=Va>LINES</var> is set to 24. After that, <span class=Pa>/boot/loader.rc</span> is processed if available. These files are processed through the <code class=Ic>include</code> command, which reads all of them into memory before processing them, making disk changes possible.</p><p class=Pp>At this point, if an <code class=Ic>autoboot</code> has not been tried, and if <var class=Va>autoboot_delay</var> is not set to “<code class=Li>NO</code>” (not case sensitive), then an <code class=Ic>autoboot</code> will be tried. If the system gets past this point, <var class=Va>prompt</var> will be set and <code class=Nm>loader_simp</code> will engage interactive mode. Please note that historically even when <var class=Va>autoboot_delay</var> is set to “<code class=Li>0</code>” user will be able to interrupt autoboot process by pressing some key on the console while kernel and modules are being loaded. In some cases such behaviour may be undesirable, to prevent it set <var class=Va>autoboot_delay</var> to “<code class=Li>-1</code>”, in this case <code class=Nm>loader_simp</code> will engage interactive mode only if <code class=Ic>autoboot</code> has failed.</p></section><section class=Sh><h2 class=Sh id=BUILTIN_COMMANDS><a class=permalink href=#BUILTIN_COMMANDS>BUILTIN COMMANDS</a></h2> In <code class=Nm>loader_simp</code>, builtin commands take parameters from the command line. Presently, the only way to call them from a script is by using <span class=Pa>evaluate</span> on a string. In the case of an error, an error message will be displayed and the interpreter's state will be reset, emptying the stack and restoring interpreting mode. <p class=Pp>The builtin commands available are:</p><p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#autoboot><code class=Ic id=autoboot>autoboot</code></a> [<var class=Ar>seconds</var> [<var class=Ar>prompt</var>]]</dt><dd>Proceeds to bootstrap the system after a number of seconds, if not interrupted by the user. Displays a countdown prompt warning the user the system is about to be booted, unless interrupted by a key press. The kernel will be loaded first if necessary. Defaults to 10 seconds. <p class=Pp></p></dd><dt><a class=permalink href=#bcachestat><code class=Ic id=bcachestat>bcachestat</code></a></dt><dd>Displays statistics about disk cache usage. For debugging only. <p class=Pp></p></dd><dt><a class=permalink href=#boot><code class=Ic id=boot>boot</code></a></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#boot_2><code class=Ic id=boot_2>boot</code></a><var class=Ar>kernelname</var> [<code class=Cm>...</code>]</dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#boot_3><code class=Ic id=boot_3>boot</code></a><code class=Fl>-flag</code><code class=Cm>...</code></dt><dd>Immediately proceeds to bootstrap the system, loading the kernel if necessary. Any flags or arguments are passed to the kernel, but they must precede the kernel name, if a kernel name is provided. <p class=Pp></p></dd><dt><a class=permalink href=#echo><code class=Ic id=echo>echo</code></a> [<code class=Fl>-n</code>] [⟨message⟩]</dt><dd>Displays text on the screen. A new line will be printed unless <code class=Fl>-n</code> is specified. <p class=Pp></p></dd><dt><a class=permalink href=#heap><code class=Ic id=heap>heap</code></a></dt><dd>Displays memory usage statistics. For debugging purposes only. <p class=Pp></p></dd><dt><a class=permalink href=#help><code class=Ic id=help>help</code></a> [topic [subtopic]]</dt><dd>Shows help messages read from <span class=Pa>/boot/loader.help</span>. The special topic <i class=Em>index</i> will list the topics available. <p class=Pp></p></dd><dt><a class=permalink href=#include><code class=Ic id=include>include</code></a><var class=Ar>file</var> [<var class=Ar>file ...</var>]</dt><dd>Process script files. Each file, in turn, is completely read into memory, and then each of its lines is passed to the command line interpreter. If any error is returned by the interpreter, the include command aborts immediately, without reading any other files, and returns an error itself (see <a class=Sx href=#ERRORS>ERRORS</a>). <p class=Pp></p></dd><dt><a class=permalink href=#load><code class=Ic id=load>load</code></a> [<code class=Fl>-t</code><var class=Ar>type</var>] <var class=Ar>file</var><code class=Cm>...</code></dt><dd>Loads a kernel, kernel loadable module (kld), disk image, or file of opaque contents tagged as being of the type <var class=Ar>type</var>. Kernel and modules can be either in a.out or ELF format. Any arguments passed after the name of the file to be loaded will be passed as arguments to that file. Use the <code class=Li>md_image</code> type to make the kernel create a file-backed <a class=Xr href=md.4.html>md(4)</a> disk. This is useful for booting from a temporary rootfs. Currently, argument passing does not work for the kernel. <p class=Pp></p></dd><dt><a class=permalink href=#load_geli><code class=Ic id=load_geli>load_geli</code></a> [<code class=Fl>-n</code><var class=Ar>keyno</var>] <var class=Ar>prov</var><var class=Ar>file</var></dt><dd>Loads a <a class=Xr href=geli.8.html>geli(8)</a> encryption keyfile for the given provider name. The key index can be specified via <var class=Ar>keyno</var> or will default to zero. <p class=Pp></p></dd><dt><a class=permalink href=#ls><code class=Ic id=ls>ls</code></a> [<code class=Fl>-l</code>] [<var class=Ar>path</var>]</dt><dd>Displays a listing of files in the directory <var class=Ar>path</var>, or the root directory if <var class=Ar>path</var> is not specified. If <code class=Fl>-l</code> is specified, file sizes will be shown too. <p class=Pp></p></dd><dt><a class=permalink href=#lsdev><code class=Ic id=lsdev>lsdev</code></a> [<code class=Fl>-v</code>]</dt><dd>Lists all of the devices from which it may be possible to load modules, as well as ZFS pools. If <code class=Fl>-v</code> is specified, more details are printed, including ZFS pool information in a format that resembles <code class=Nm>zpool</code><code class=Cm>status</code> output. <p class=Pp></p></dd><dt><a class=permalink href=#lsmod><code class=Ic id=lsmod>lsmod</code></a> [<code class=Fl>-v</code>]</dt><dd>Displays loaded modules. If <code class=Fl>-v</code> is specified, more details are shown. <p class=Pp></p></dd><dt><a class=permalink href=#lszfs><code class=Ic id=lszfs>lszfs</code></a><var class=Ar>filesystem</var></dt><dd>A ZFS extended command that can be used to explore the ZFS filesystem hierarchy in a pool. Lists the immediate children of the <var class=Ar>filesystem</var>. The filesystem hierarchy is rooted at a filesystem with the same name as the pool. <p class=Pp></p></dd><dt><a class=permalink href=#more><code class=Ic id=more>more</code></a><var class=Ar>file</var> [<var class=Ar>file ...</var>]</dt><dd>Display the files specified, with a pause at each <var class=Va>LINES</var> displayed. <p class=Pp></p></dd><dt><a class=permalink href=#pnpscan><code class=Ic id=pnpscan>pnpscan</code></a> [<code class=Fl>-v</code>]</dt><dd>Scans for Plug-and-Play devices. This is not functional at present. <p class=Pp></p></dd><dt><a class=permalink href=#read><code class=Ic id=read>read</code></a> [<code class=Fl>-t</code><var class=Ar>seconds</var>] [<code class=Fl>-p</code><var class=Ar>prompt</var>] [<var class=Va>variable</var>]</dt><dd>Reads a line of input from the terminal, storing it in <var class=Va>variable</var> if specified. A timeout can be specified with <code class=Fl>-t</code>, though it will be canceled at the first key pressed. A prompt may also be displayed through the <code class=Fl>-p</code> flag. <p class=Pp></p></dd><dt><a class=permalink href=#reboot><code class=Ic id=reboot>reboot</code></a></dt><dd>Immediately reboots the system. <p class=Pp></p></dd><dt><a class=permalink href=#set><code class=Ic id=set>set</code></a><var class=Ar>variable</var></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#set_2><code class=Ic id=set_2>set</code></a><var class=Ar>variable</var>=<var class=Ar>value</var></dt><dd>Set loader's environment variables. <p class=Pp></p></dd><dt><a class=permalink href=#show><code class=Ic id=show>show</code></a> [<var class=Va>variable</var>]</dt><dd>Displays the specified variable's value, or all variables and their values if <var class=Va>variable</var> is not specified. <p class=Pp></p></dd><dt><a class=permalink href=#unload><code class=Ic id=unload>unload</code></a></dt><dd>Remove all modules from memory. <p class=Pp></p></dd><dt><a class=permalink href=#unset><code class=Ic id=unset>unset</code></a><var class=Va>variable</var></dt><dd>Removes <var class=Va>variable</var> from the environment. <p class=Pp></p></dd><dt><a class=permalink href=#?><code class=Ic id=?>?</code></a></dt><dd>Lists available commands.</dd></dl><section class=Ss><h2 class=Ss id=BUILTIN_ENVIRONMENT_VARIABLES><a class=permalink href=#BUILTIN_ENVIRONMENT_VARIABLES>BUILTIN ENVIRONMENT VARIABLES</a></h2> Environment variables can be set and unset through the <code class=Ic>set</code> and <code class=Ic>unset</code> builtins, and can have their values interactively examined through the use of the <code class=Ic>show</code> builtin. Their values can also be accessed as described in <a class=Sx href=#BUILTIN_PARSER>BUILTIN PARSER</a>. <p class=Pp>Notice that these environment variables are not inherited by any shell after the system has been booted.</p><p class=Pp>A few variables are set automatically by <code class=Nm>loader_simp</code>. Others can affect the behavior of either <code class=Nm>loader_simp</code> or the kernel at boot. Some options may require a value, while others define behavior just by being set. Both types of builtin variables are described below.</p><dl class=Bl-tag><dt><var class=Va>autoboot_delay</var></dt><dd>Number of seconds <code class=Ic>autoboot</code> will wait before booting. Configuration options are described in <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>.</dd><dt><var class=Va>boot_askname</var></dt><dd>Instructs the kernel to prompt the user for the name of the root device when the kernel is booted.</dd><dt><var class=Va>boot_cdrom</var></dt><dd>Instructs the kernel to try to mount the root file system from CD-ROM.</dd><dt><var class=Va>boot_ddb</var></dt><dd>Instructs the kernel to start in the DDB debugger, rather than proceeding to initialize when booted.</dd><dt><var class=Va>boot_dfltroot</var></dt><dd>Instructs the kernel to mount the statically compiled-in root file system.</dd><dt><var class=Va>boot_gdb</var></dt><dd>Selects gdb-remote mode for the kernel debugger by default.</dd><dt><var class=Va>boot_multicons</var></dt><dd>Enables multiple console support in the kernel early on boot. In a running system, console configuration can be manipulated by the <a class=Xr href=conscontrol.8.html>conscontrol(8)</a> utility.</dd><dt><var class=Va>boot_mute</var></dt><dd>All kernel console output is suppressed when console is muted. In a running system, the state of console muting can be manipulated by the <a class=Xr href=conscontrol.8.html>conscontrol(8)</a> utility.</dd><dt><var class=Va>boot_pause</var></dt><dd>During the device probe, pause after each line is printed.</dd><dt><var class=Va>boot_serial</var></dt><dd>Force the use of a serial console even when an internal console is present.</dd><dt><var class=Va>boot_single</var></dt><dd>Prevents the kernel from initiating a multi-user startup; instead, a single-user mode will be entered when the kernel has finished device probing.</dd><dt><var class=Va>boot_verbose</var></dt><dd>Setting this variable causes extra debugging information to be printed by the kernel during the boot phase.</dd><dt><var class=Va>bootfile</var></dt><dd>List of semicolon-separated search path for bootable kernels. The default is “<code class=Li>kernel</code>”.</dd><dt><var class=Va>comconsole_speed</var></dt><dd>Defines the speed of the serial console (i386 and amd64 only). If the previous boot stage indicated that a serial console is in use then this variable is initialized to the current speed of the console serial port. Otherwise it is set to 9600 unless this was overridden using the <var class=Va>BOOT_COMCONSOLE_SPEED</var> variable when <code class=Nm>loader_simp</code> was compiled. Changes to the <var class=Va>comconsole_speed</var> variable take effect immediately.</dd><dt><var class=Va>comconsole_port</var></dt><dd>Defines the base i/o port used to access console UART (i386 and amd64 only). If the variable is not set, its assumed value is 0x3F8, which corresponds to PC port COM1, unless overridden by <var class=Va>BOOT_COMCONSOLE_PORT</var> variable during the compilation of <code class=Nm>loader_simp</code>. Setting the <var class=Va>comconsole_port</var> variable automatically set <var class=Va>hw.uart.console</var> environment variable to provide a hint to kernel for location of the console. Loader console is changed immediately after variable <var class=Va>comconsole_port</var> is set.</dd><dt><var class=Va>comconsole_pcidev</var></dt><dd>Defines the location of a PCI device of the 'simple communication' class to be used as the serial console UART (i386 and amd64 only). The syntax of the variable is <code class=Li>'bus:device:function[:bar]'</code>, where all members must be numeric, with possible <code class=Li>0x</code> prefix to indicate a hexadecimal value. The <var class=Va>bar</var> member is optional and assumed to be 0x10 if omitted. The bar must decode i/o space. Setting the variable <var class=Va>comconsole_pcidev</var> automatically sets the variable <var class=Va>comconsole_port</var> to the base of the selected bar, and hint <var class=Va>hw.uart.console</var>. Loader console is changed immediately after variable <var class=Va>comconsole_pcidev</var> is set.</dd><dt><var class=Va>console</var></dt><dd>Defines the current console or consoles. Multiple consoles may be specified. In that case, the first listed console will become the default console for userland output (e.g. from <a class=Xr href=init.8.html>init(8)</a>).</dd><dt><var class=Va>currdev</var></dt><dd>Selects the default device to loader the kernel from. The syntax is: <div class="Bd Bd-indent"><code class=Li><code class=Ic>loader_device:</code></code></div> or <div class="Bd Bd-indent"><code class=Li><code class=Ic>zfs:dataset:</code></code></div> Examples: <div class="Bd Bd-indent"><code class=Li><code class=Ic>disk0p2:</code></code></div><div class="Bd Bd-indent"><code class=Li><code class=Ic>zfs:zroot/ROOT/default:</code></code></div></dd><dt><var class=Va>dumpdev</var></dt><dd>Sets the device for kernel dumps. This can be used to ensure that a device is configured before the corresponding <var class=Va>dumpdev</var> directive from <a class=Xr href=rc.conf.5.html>rc.conf(5)</a> has been processed, allowing kernel panics that happen during the early stages of boot to be captured.</dd><dt><var class=Va>init_chroot</var></dt><dd>See <a class=Xr href=init.8.html>init(8)</a>.</dd><dt><var class=Va>init_exec</var></dt><dd>See <a class=Xr href=init.8.html>init(8)</a>.</dd><dt><var class=Va>init_path</var></dt><dd>Sets the list of binaries which the kernel will try to run as the initial process. The first matching binary is used. The default list is “<code class=Li>/sbin/init:/sbin/oinit:/sbin/init.bak:/rescue/init</code>”.</dd><dt><var class=Va>init_script</var></dt><dd>See <a class=Xr href=init.8.html>init(8)</a>.</dd><dt><var class=Va>init_shell</var></dt><dd>See <a class=Xr href=init.8.html>init(8)</a>.</dd><dt><var class=Va>interpret</var></dt><dd>Has the value “<code class=Li>OK</code>” if the Forth's current state is interpreting.</dd><dt><var class=Va>LINES</var></dt><dd>Define the number of lines on the screen, to be used by the pager.</dd><dt><var class=Va>module_path</var></dt><dd>Sets the list of directories which will be searched for modules named in a load command or implicitly required by a dependency. The default value for this variable is “<code class=Li>/boot/kernel;/boot/modules</code>”.</dd><dt><var class=Va>num_ide_disks</var></dt><dd>Sets the number of IDE disks as a workaround for some problems in finding the root disk at boot. This has been deprecated in favor of <var class=Va>root_disk_unit</var>.</dd><dt><var class=Va>prompt</var></dt><dd>Value of <code class=Nm>loader_simp</code>'s prompt. Defaults to “<code class=Li>${interpret}</code>”. If variable <var class=Va>prompt</var> is unset, the default prompt is ‘<code class=Li>&gt;</code>’.</dd><dt><var class=Va>root_disk_unit</var></dt><dd>If the code which detects the disk unit number for the root disk is confused, e.g. by a mix of SCSI and IDE disks, or IDE disks with gaps in the sequence (e.g. no primary slave), the unit number can be forced by setting this variable.</dd><dt><var class=Va>rootdev</var></dt><dd>By default the value of <var class=Va>currdev</var> is used to set the root file system when the kernel is booted. This can be overridden by setting <var class=Va>rootdev</var> explicitly.</dd></dl><p class=Pp>Other variables are used to override kernel tunable parameters. The following tunables are available:</p><dl class=Bl-tag><dt><var class=Va>efi.rt.disabled</var></dt><dd>Disable UEFI runtime services in the kernel, if applicable. Runtime services are only available and used if the kernel is booted in a UEFI environment.</dd><dt><var class=Va>hw.physmem</var></dt><dd>Limit the amount of physical memory the system will use. By default the size is in bytes, but the <code class=Cm>k</code>, <code class=Cm>K</code>, <code class=Cm>m</code>, <code class=Cm>M</code>, <code class=Cm>g</code> and <code class=Cm>G</code> suffixes are also accepted and indicate kilobytes, megabytes and gigabytes respectively. An invalid suffix will result in the variable being ignored by the kernel.</dd><dt><var class=Va>hw.pci.host_start_mem</var>, <var class=Va>hw.acpi.host_start_mem</var></dt><dd>When not otherwise constrained, this limits the memory start address. The default is 0x80000000 and should be set to at least size of the memory and not conflict with other resources. Typically, only systems without PCI bridges need to set this variable since PCI bridges typically constrain the memory starting address (and the variable is only used when bridges do not constrain this address).</dd><dt><var class=Va>hw.pci.enable_io_modes</var></dt><dd>Enable PCI resources which are left off by some BIOSes or are not enabled correctly by the device driver. Tunable value set to ON (1) by default, but this may cause problems with some peripherals.</dd><dt><var class=Va>kern.maxusers</var></dt><dd>Set the size of a number of statically allocated system tables; see <a class=Xr href=tuning.7.html>tuning(7)</a> for a description of how to select an appropriate value for this tunable. When set, this tunable replaces the value declared in the kernel compile-time configuration file.</dd><dt><var class=Va>kern.ipc.nmbclusters</var></dt><dd>Set the number of mbuf clusters to be allocated. The value cannot be set below the default determined when the kernel was compiled.</dd><dt><var class=Va>kern.ipc.nsfbufs</var></dt><dd>Set the number of <a class=Xr href=sendfile.2.html>sendfile(2)</a> buffers to be allocated. Overrides <code class=Dv>NSFBUFS</code>. Not all architectures use such buffers; see <a class=Xr href=sendfile.2.html>sendfile(2)</a> for details.</dd><dt><var class=Va>kern.maxswzone</var></dt><dd>Limits the amount of KVM to be used to hold swap metadata, which directly governs the maximum amount of swap the system can support, at the rate of approximately 200 MB of swap space per 1 MB of metadata. This value is specified in bytes of KVA space. If no value is provided, the system allocates enough memory to handle an amount of swap that corresponds to eight times the amount of physical memory present in the system. <p class=Pp>Note that swap metadata can be fragmented, which means that the system can run out of space before it reaches the theoretical limit. Therefore, care should be taken to not configure more swap than approximately half of the theoretical maximum.</p><p class=Pp>Running out of space for swap metadata can leave the system in an unrecoverable state. Therefore, you should only change this parameter if you need to greatly extend the KVM reservation for other resources such as the buffer cache or <var class=Va>kern.ipc.nmbclusters</var>. Modifies kernel option <code class=Dv>VM_SWZONE_SIZE_MAX</code>.</p></dd><dt><var class=Va>kern.maxbcache</var></dt><dd>Limits the amount of KVM reserved for use by the buffer cache, specified in bytes. The default maximum is 200MB on i386, and 400MB on amd64. This parameter is used to prevent the buffer cache from eating too much KVM in large-memory machine configurations. Only mess around with this parameter if you need to greatly extend the KVM reservation for other resources such as the swap zone or <var class=Va>kern.ipc.nmbclusters</var>. Note that the NBUF parameter will override this limit. Modifies <code class=Dv>VM_BCACHE_SIZE_MAX</code>.</dd><dt><var class=Va>kern.msgbufsize</var></dt><dd>Sets the size of the kernel message buffer. The default limit of 96KB is usually sufficient unless large amounts of trace data need to be collected between opportunities to examine the buffer or dump it to a file. Overrides kernel option <code class=Dv>MSGBUF_SIZE</code>.</dd><dt><var class=Va>machdep.disable_mtrrs</var></dt><dd>Disable the use of i686 MTRRs (x86 only).</dd><dt><var class=Va>net.inet.tcp.tcbhashsize</var></dt><dd>Overrides the compile-time set value of <code class=Dv>TCBHASHSIZE</code> or the preset default of 512. Must be a power of 2.</dd><dt><var class=Va>twiddle_divisor</var></dt><dd>Throttles the output of the ‘twiddle’ I/O progress indicator displayed while loading the kernel and modules. This is useful on slow serial consoles where the time spent waiting for these characters to be written can add up to many seconds. The default is 16; a value of 32 spins half as fast, while a value of 8 spins twice as fast.</dd><dt><var class=Va>vm.kmem_size</var></dt><dd>Sets the size of kernel memory (bytes). This overrides the value determined when the kernel was compiled. Modifies <code class=Dv>VM_KMEM_SIZE</code>.</dd><dt><var class=Va>vm.kmem_size_min</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>vm.kmem_size_max</var></dt><dd>Sets the minimum and maximum (respectively) amount of kernel memory that will be automatically allocated by the kernel. These override the values determined when the kernel was compiled. Modifies <code class=Dv>VM_KMEM_SIZE_MIN</code> and <code class=Dv>VM_KMEM_SIZE_MAX</code>.</dd></dl></section><section class=Ss><h2 class=Ss id=ZFS_FEATURES><a class=permalink href=#ZFS_FEATURES>ZFS FEATURES</a></h2><code class=Nm>loader_simp</code> supports the following format for specifying ZFS filesystems which can be used wherever <a class=Xr href=loader.8.html>loader(8)</a> refers to a device specification: <p class=Pp><var class=Ar>zfs:pool/filesystem:</var></p><p class=Pp>where <span class=Pa>pool/filesystem</span> is a ZFS filesystem name as described in <a class=Xr href=zfs.8.html>zfs(8)</a>.</p><p class=Pp>If <span class=Pa>/etc/fstab</span> does not have an entry for the root filesystem and <var class=Va>vfs.root.mountfrom</var> is not set, but <var class=Va>currdev</var> refers to a ZFS filesystem, then <code class=Nm>loader_simp</code> will instruct kernel to use that filesystem as the root filesystem.</p></section></section><section class=Sh><h2 class=Sh id=SECURITY><a class=permalink href=#SECURITY>SECURITY</a></h2> Access to the <code class=Nm>loader_simp</code> command line provides several ways of compromising system security, including, but not limited to: <ul class=Bl-bullet><li>Booting from removable storage. <p class=Pp>One can prevent unauthorized access to the <code class=Nm>loader_simp</code> command line by booting unconditionally in <span class=Pa>loader.rc</span>. In order for this to be effective, one should also configure the firmware (BIOS or UEFI) to prevent booting from unauthorized devices.</p></li></ul></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/boot/loader_simp</span></dt><dd><code class=Nm>loader_simp</code> itself.</dd><dt><span class=Pa>/boot/loader.rc</span></dt><dd>The script run by <code class=Nm>loader_simp</code> on startup.</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Boot in single user mode: <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>boot -s</code></div><p class=Pp>Load the kernel, a splash screen, and then autoboot in five seconds. Notice that a kernel must be loaded before any other <code class=Ic>load</code> command is attempted.</p><div class="Bd Pp Bd-indent"><pre>
load kernel
load splash_bmp
load -t splash_image_data /boot/chuckrulez.bmp
autoboot 5
</pre></div><p class=Pp>Set the disk unit of the root device to 2, and then boot. This would be needed in a system with two IDE disks, with the second IDE disk hardwired to ada2 instead of ada1.</p><div class="Bd Pp Bd-indent"><pre>
set root_disk_unit=2
boot /boot/kernel/kernel
</pre></div><p class=Pp>Set the default device used for loading a kernel from a ZFS filesystem:</p><div class="Bd Pp Bd-indent"><pre>
set currdev=zfs:tank/ROOT/knowngood:
</pre></div></section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The following values are thrown by <code class=Nm>loader_simp</code>: <div class=Bd-indent><dl class=Bl-tag><dt>100</dt><dd>Any type of error in the processing of a builtin.</dd><dt>-1</dt><dd><a class=permalink href=#Abort><code class=Ic id=Abort>Abort</code></a> executed.</dd><dt>-2</dt><dd><a class=permalink href=#Abort_><code class=Ic id=Abort_>Abort"</code></a> executed.</dd><dt>-56</dt><dd><a class=permalink href=#Quit><code class=Ic id=Quit>Quit</code></a> executed.</dd><dt>-256</dt><dd>Out of interpreting text.</dd><dt>-257</dt><dd>Need more text to succeed -- will finish on next run.</dd><dt>-258</dt><dd><a class=permalink href=#Bye><code class=Ic id=Bye>Bye</code></a> executed.</dd><dt>-259</dt><dd>Unspecified error.</dd></dl></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=libsa.3.html>libsa(3)</a>, <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>, <a class=Xr href=tuning.7.html>tuning(7)</a>, <a class=Xr href=boot.8.html>boot(8)</a>, <a class=Xr href=btxld.8.html>btxld(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>loader_simp</code> first appeared in <span class=Ux>FreeBSD 3.1</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The <code class=Nm>loader_simp</code> was written by <span class=An>Michael Smith</span> ⟨msmith@FreeBSD.org⟩. </section></div><table class=foot><tr><td class=foot-date>September 29, 2021</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>