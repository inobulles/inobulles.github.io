<!DOCTYPE html>
<html><head><meta charset=utf-8><title>nis(8)</title><keywords content=man,nis></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>nis(8)</h1><table class=head><tr><td class=head-ltitle>YP(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>YP(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>yp</code> — <div class=Nd>description of the YP/NIS system</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>yp</code></td><td></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>YP</code> subsystem allows network management of passwd, group, netgroup, hosts, services, rpc, bootparams and ethers file entries through the functions <a class=Xr href=getpwent.3.html>getpwent(3)</a>, <a class=Xr href=getgrent.3.html>getgrent(3)</a>, <a class=Xr href=getnetgrent.3.html>getnetgrent(3)</a>, <a class=Xr href=gethostent.3.html>gethostent(3)</a>, <a class=Xr href=getnetent.3.html>getnetent(3)</a>, <a class=Xr href=getrpcent.3.html>getrpcent(3)</a>, and <a class=Xr href=ethers.3.html>ethers(3)</a>. The <a class=Xr href=bootparamd.8.html>bootparamd(8)</a> daemon makes direct NIS library calls since there are no functions in the standard C library for reading bootparams. NIS support is enabled in <a class=Xr href=nsswitch.conf.5.html>nsswitch.conf(5)</a>. <p class=Pp>The <code class=Nm>YP</code> subsystem is started automatically in <span class=Pa>/etc/rc</span> if it has been initialized in <span class=Pa>/etc/rc.conf</span> and if the directory <span class=Pa>/var/yp</span> exists (which it does in the default distribution). The default NIS domain must also be set with the <a class=Xr href=domainname.1.html>domainname(1)</a> command, which will happen automatically at system startup if it is specified in <span class=Pa>/etc/rc.conf</span>.</p><p class=Pp>NIS is an RPC-based client/server system that allows a group of machines within an NIS domain to share a common set of configuration files. This permits a system administrator to set up NIS client systems with only minimal configuration data and add, remove or modify configuration data from a single location.</p><p class=Pp>The canonical copies of all NIS information are stored on a single machine called the NIS <i class=Em>master server</i>. The databases used to store the information are called NIS <i class=Em>maps</i>. In <span class=Ux>FreeBSD</span>, these maps are stored in <span class=Pa>/var/yp/</span>⟨<var class=Ar>domainname</var>⟩ where ⟨<var class=Ar>domainname</var>⟩ is the name of the NIS domain being served. A single NIS server can support several domains at once, therefore it is possible to have several such directories, one for each supported domain. Each domain will have its own independent set of maps.</p><p class=Pp>In <span class=Ux>FreeBSD</span>, the NIS maps are Berkeley DB hashed database files (the same format used for the <a class=Xr href=passwd.5.html>passwd(5)</a> database files). Other operating systems that support NIS use old-style <code class=Nm>ndbm</code> databases instead (largely because Sun Microsystems originally based their NIS implementation on <code class=Nm>ndbm</code>, and other vendors have simply licensed Sun's code rather than design their own implementation with a different database format). On these systems, the databases are generally split into <span class=Pa>.dir</span> and <span class=Pa>.pag</span> files which the <code class=Nm>ndbm</code> code uses to hold separate parts of the hash database. The Berkeley DB hash method instead uses a single file for both pieces of information. This means that while you may have <span class=Pa>passwd.byname.dir</span> and <span class=Pa>passwd.byname.pag</span> files on other operating systems (both of which are really parts of the same map), <span class=Ux>FreeBSD</span> will have only one file called <span class=Pa>passwd.byname</span>. The difference in format is not significant: only the NIS server, <a class=Xr href=ypserv.8.html>ypserv(8)</a>, and related tools need to know the database format of the NIS maps. Client NIS systems receive all NIS data in ASCII form.</p><p class=Pp>There are three main types of NIS systems:</p><ol class=Bl-enum><li>NIS clients, which query NIS servers for information.</li><li>NIS master servers, which maintain the canonical copies of all NIS maps.</li><li>NIS slave servers, which maintain backup copies of NIS maps that are periodically updated by the master.</li></ol><p class=Pp>A NIS client establishes what is called a <i class=Em>binding</i> to a particular NIS server using the <a class=Xr href=ypbind.8.html>ypbind(8)</a> daemon. The <a class=Xr href=ypbind.8.html>ypbind(8)</a> utility checks the system's default domain (as set by the <a class=Xr href=domainname.1.html>domainname(1)</a> command) and begins broadcasting RPC requests on the local network. These requests specify the name of the domain for which <a class=Xr href=ypbind.8.html>ypbind(8)</a> is attempting to establish a binding. If a server that has been configured to serve the requested domain receives one of the broadcasts, it will respond to <a class=Xr href=ypbind.8.html>ypbind(8)</a>, which will record the server's address. If there are several servers available (a master and several slaves, for example), <a class=Xr href=ypbind.8.html>ypbind(8)</a> will use the address of the first one to respond. From that point on, the client system will direct all of its NIS requests to that server. The <a class=Xr href=ypbind.8.html>ypbind(8)</a> utility will occasionally “ping” the server to make sure it is still up and running. If it fails to receive a reply to one of its pings within a reasonable amount of time, <a class=Xr href=ypbind.8.html>ypbind(8)</a> will mark the domain as unbound and begin broadcasting again in the hopes of locating another server.</p><p class=Pp>NIS master and slave servers handle all NIS requests with the <a class=Xr href=ypserv.8.html>ypserv(8)</a> daemon. The <a class=Xr href=ypserv.8.html>ypserv(8)</a> utility is responsible for receiving incoming requests from NIS clients, translating the requested domain and map name to a path to the corresponding database file and transmitting data from the database back to the client. There is a specific set of requests that <a class=Xr href=ypserv.8.html>ypserv(8)</a> is designed to handle, most of which are implemented as functions within the standard C library:</p><dl class=Bl-tag><dt><code class=Fn>yp_order</code>()</dt><dd>check the creation date of a particular map</dd><dt><code class=Fn>yp_master</code>()</dt><dd>obtain the name of the NIS master server for a given map/domain</dd><dt><code class=Fn>yp_match</code>()</dt><dd>lookup the data corresponding to a given in key in a particular map/domain</dd><dt><code class=Fn>yp_first</code>()</dt><dd>obtain the first key/data pair in a particular map/domain</dd><dt><code class=Fn>yp_next</code>()</dt><dd>pass <a class=Xr href=ypserv.8.html>ypserv(8)</a> a key in a particular map/domain and have it return the key/data pair immediately following it (the functions <code class=Fn>yp_first</code>() and <code class=Fn>yp_next</code>() can be used to do a sequential search of an NIS map)</dd><dt><code class=Fn>yp_all</code>()</dt><dd>retrieve the entire contents of a map</dd></dl><p class=Pp>There are a few other requests which <a class=Xr href=ypserv.8.html>ypserv(8)</a> is capable of handling (i.e., acknowledge whether or not you can handle a particular domain (<code class=Dv>YPPROC_DOMAIN</code>), or acknowledge only if you can handle the domain and be silent otherwise (<code class=Dv>YPPROC_DOMAIN_NONACK</code>)) but these requests are usually generated only by <a class=Xr href=ypbind.8.html>ypbind(8)</a> and are not meant to be used by standard utilities.</p><p class=Pp>On networks with a large number of hosts, it is often a good idea to use a master server and several slaves rather than just a single master server. A slave server provides the exact same information as a master server: whenever the maps on the master server are updated, the new data should be propagated to the slave systems using the <a class=Xr href=yppush.8.html>yppush(8)</a> command. The NIS <span class=Pa>Makefile</span> (<span class=Pa>/var/yp/Makefile</span>) will do this automatically if the administrator creates <span class=Pa>/var/yp/Makefile.local</span> and empties the <var class=Va>NOPUSH</var> variable:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>NOPUSH=
</code>
</pre></div><p class=Pp>(<var class=Va>NOPUSH</var> is set to true by default because the default configuration is for a small network with only one NIS server). The <a class=Xr href=yppush.8.html>yppush(8)</a> command will initiate a transaction between the master and slave during which the slave will transfer the specified maps from the master server using <a class=Xr href=ypxfr.8.html>ypxfr(8)</a>. (The slave server calls <a class=Xr href=ypxfr.8.html>ypxfr(8)</a> automatically from within <a class=Xr href=ypserv.8.html>ypserv(8)</a>; therefore it is not usually necessary for the administrator to use it directly. It can be run manually if desired, however.) Maintaining slave servers helps improve NIS performance on large networks by:</p><ul class=Bl-bullet><li>Providing backup services in the event that the NIS master crashes or becomes unreachable</li><li>Spreading the client load out over several machines instead of causing the master to become overloaded</li><li>Allowing a single NIS domain to extend beyond a local network (the <a class=Xr href=ypbind.8.html>ypbind(8)</a> daemon might not be able to locate a server automatically if it resides on a network outside the reach of its broadcasts. It is possible to force <a class=Xr href=ypbind.8.html>ypbind(8)</a> to bind to a particular server with <a class=Xr href=ypset.8.html>ypset(8)</a> but this is sometimes inconvenient. This problem can be avoided simply by placing a slave server on the local network.)</li></ul><p class=Pp>The <span class=Ux>FreeBSD</span><a class=Xr href=ypserv.8.html>ypserv(8)</a> is specially designed to provide enhanced security (compared to other NIS implementations) when used exclusively with <span class=Ux>FreeBSD</span> client systems. The <span class=Ux>FreeBSD</span> password database system (which is derived directly from <span class=Ux>4.4BSD</span>) includes support for <i class=Em>shadow passwords</i>. The standard password database does not contain users' encrypted passwords: these are instead stored (along with other information) in a separate database which is accessible only by the super-user. If the encrypted password database were made available as an NIS map, this security feature would be totally disabled, since any user is allowed to retrieve NIS data.</p><p class=Pp>To help prevent this, <span class=Ux>FreeBSD</span>'s NIS server handles the shadow password maps (<span class=Pa>master.passwd.byname</span>, <span class=Pa>master.passwd.byuid</span>, <span class=Pa>shadow.byname</span> and <span class=Pa>shadow.byuid</span>) in a special way: the server will only provide access to these maps in response to requests that originate on privileged ports. Since only the super-user is allowed to bind to a privileged port, the server assumes that all such requests come from privileged users. All other requests are denied: requests from non-privileged ports will receive only an error code from the server. Additionally, <span class=Ux>FreeBSD</span>'s <a class=Xr href=ypserv.8.html>ypserv(8)</a> includes support for <span class=An>Wietse Venema</span>'s tcp wrapper package; with tcp wrapper support enabled, the administrator can configure <a class=Xr href=ypserv.8.html>ypserv(8)</a> to respond only to selected client machines.</p><p class=Pp>While these enhancements provide better security than stock NIS, they are by no means 100% effective. It is still possible for someone with access to your network to spoof the server into disclosing the shadow password maps.</p><p class=Pp>On the client side, <span class=Ux>FreeBSD</span>'s <a class=Xr href=getpwent.3.html>getpwent(3)</a> functions will automatically search for the <span class=Pa>master.passwd</span> maps and use them if they exist. If they do, they will be used, and all fields in these special maps (class, password age and account expiration) will be decoded. If they are not found, the standard <span class=Pa>passwd</span> maps will be used instead.</p></section><section class=Sh><h2 class=Sh id=COMPATIBILITY><a class=permalink href=#COMPATIBILITY>COMPATIBILITY</a></h2> When using a <span class=No>non-</span><span class=Ux>FreeBSD</span> NIS server for <a class=Xr href=passwd.5.html>passwd(5)</a> files, it is unlikely that the default MD5-based format that <span class=Ux>FreeBSD</span> uses for passwords will be accepted by it. If this is the case, the value of the <var class=Va>passwd_format</var> setting in <a class=Xr href=login.conf.5.html>login.conf(5)</a> should be changed to “<code class=Li>des</code>” for compatibility. <p class=Pp>Some systems, such as SunOS 4.x, need NIS to be running in order for their hostname resolution functions (<code class=Fn>gethostbyname</code>(), <code class=Fn>gethostbyaddr</code>(), etc.) to work properly. On these systems, <a class=Xr href=ypserv.8.html>ypserv(8)</a> performs DNS lookups when asked to return information about a host that does not exist in its <span class=Pa>hosts.byname</span> or <span class=Pa>hosts.byaddr</span> maps. <span class=Ux>FreeBSD</span>'s resolver uses DNS by default (it can be made to use NIS, if desired), therefore its NIS server does not do DNS lookups by default. However, <a class=Xr href=ypserv.8.html>ypserv(8)</a> can be made to perform DNS lookups if it is started with a special flag. It can also be made to register itself as an NIS v1 server in order to placate certain systems that insist on the presence of a v1 server (<span class=Ux>FreeBSD</span> uses only NIS v2, but many other systems, including SunOS 4.x, search for both a v1 and v2 server when binding). <span class=Ux>FreeBSD</span>'s <a class=Xr href=ypserv.8.html>ypserv(8)</a> does not actually handle NIS v1 requests, but this “kludge mode” is useful for silencing stubborn systems that search for both a v1 and v2 server.</p><p class=Pp>(Please see the <a class=Xr href=ypserv.8.html>ypserv(8)</a> manual page for a detailed description of these special features and flags.)</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=domainname.1.html>domainname(1)</a>, <a class=Xr href=ypcat.1.html>ypcat(1)</a>, <a class=Xr href=ypmatch.1.html>ypmatch(1)</a>, <a class=Xr href=ypwhich.1.html>ypwhich(1)</a>, <a class=Xr href=nsswitch.conf.5.html>nsswitch.conf(5)</a>, <a class=Xr href=yp_mkdb.8.html>yp_mkdb(8)</a>, <a class=Xr href=ypbind.8.html>ypbind(8)</a>, <a class=Xr href=ypinit.8.html>ypinit(8)</a>, <a class=Xr href=yppoll.8.html>yppoll(8)</a>, <a class=Xr href=yppush.8.html>yppush(8)</a>, <a class=Xr href=ypserv.8.html>ypserv(8)</a>, <a class=Xr href=ypset.8.html>ypset(8)</a>, <a class=Xr href=ypxfr.8.html>ypxfr(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>YP</code> subsystem was written from the ground up by <span class=An>Theo de Raadt</span> to be compatible to Sun's implementation. Bug fixes, improvements and NIS server support were later added by <span class=An>Bill Paul</span>. The server-side code was originally written by <span class=An>Peter Eriksson</span> and <span class=An>Tobias Reber</span> and is subject to the GNU Public License. No Sun code was referenced. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> While <span class=Ux>FreeBSD</span> now has both NIS client and server capabilities, it does not yet have support for <a class=Xr href=ypupdated.8.html>ypupdated(8)</a> or the <code class=Fn>yp_update</code>() function. Both of these require secure RPC, which <span class=Ux>FreeBSD</span> does not support yet either. <p class=Pp>The <a class=Xr href=getservent.3.html>getservent(3)</a> and <a class=Xr href=getprotoent.3.html>getprotoent(3)</a> functions do not yet have NIS support. Fortunately, these files do not need to be updated that often.</p><p class=Pp>Many more manual pages should be written, especially <a class=Xr href=ypclnt.3.html>ypclnt(3)</a>. For the time being, seek out a local Sun machine and read the manuals for there.</p><p class=Pp>Neither Sun nor this author have found a clean way to handle the problems that occur when ypbind cannot find its server upon bootup.</p></section></div><table class=foot><tr><td class=foot-date>December 14, 2011</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>