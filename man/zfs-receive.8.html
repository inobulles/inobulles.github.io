<!DOCTYPE html>
<html><head><meta charset=utf-8><title>zfs-receive(8)</title><keywords content=man,zfs-receive></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>zfs-receive(8)</h1><table class=head><tr><td class=head-ltitle>ZFS-RECEIVE(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>ZFS-RECEIVE(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>zfs-receive</code> — <div class=Nd>create snapshot from backup stream</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code> [<code class=Fl>-FhMnsuv</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] [<code class=Fl>-x</code><var class=Ar>property</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code> [<code class=Fl>-FhMnsuv</code>] [<code class=Fl>-d</code>|<code class=Fl>-e</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] [<code class=Fl>-x</code><var class=Ar>property</var>] <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code><code class=Fl>-A</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs-receive</code></td><td><code class=Cm>receive</code><code class=Fl>-c</code> [<code class=Fl>-vn</code>] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2><dl class=Bl-tag><dt><code class=Nm>zfs</code><code class=Cm>receive</code> [<code class=Fl>-FhMnsuv</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] [<code class=Fl>-x</code><var class=Ar>property</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code> [<code class=Fl>-FhMnsuv</code>] [<code class=Fl>-d</code>|<code class=Fl>-e</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] [<code class=Fl>-x</code><var class=Ar>property</var>] <var class=Ar>filesystem</var></dt><dd>Creates a snapshot whose contents are as specified in the stream provided on standard input. If a full stream is received, then a new file system is created as well. Streams are created using the <code class=Nm>zfs</code><code class=Cm>send</code> subcommand, which by default creates a full stream. <code class=Nm>zfs</code><code class=Cm>recv</code> can be used as an alias for <code class=Nm>zfs</code><code class=Cm>receive</code>. <p class=Pp>If an incremental stream is received, then the destination file system must already exist, and its most recent snapshot must match the incremental stream's source. For <b class=Sy>zvols</b>, the destination device link is destroyed and recreated, which means the <b class=Sy>zvol</b> cannot be accessed during the <code class=Cm>receive</code> operation.</p><p class=Pp>When a snapshot replication package stream that is generated by using the <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-R</code> command is received, any snapshots that do not exist on the sending location are destroyed by using the <code class=Nm>zfs</code><code class=Cm>destroy</code><code class=Fl>-d</code> command.</p><p class=Pp>The ability to send and receive deduplicated send streams has been removed. However, a deduplicated send stream created with older software can be converted to a regular (non-deduplicated) stream by using the <code class=Nm>zstream</code><code class=Cm>redup</code> command.</p><p class=Pp>If <code class=Fl>-o</code><i class=Em>property</i>=<var class=Ar>value</var> or <code class=Fl>-x</code><i class=Em>property</i> is specified, it applies to the effective value of the property throughout the entire subtree of replicated datasets. Effective property values will be set (<code class=Fl>-o</code>) or inherited (<code class=Fl>-x</code>) on the topmost in the replicated subtree. In descendant datasets, if the property is set by the send stream, it will be overridden by forcing the property to be inherited from the top‐most file system. Received properties are retained in spite of being overridden and may be restored with <code class=Nm>zfs</code><code class=Cm>inherit</code><code class=Fl>-S</code>. Specifying <code class=Fl>-o</code><b class=Sy>origin</b>=<i class=Em>snapshot</i> is a special case because, even if <b class=Sy>origin</b> is a read-only property and cannot be set, it's allowed to receive the send stream as a clone of the given snapshot.</p><p class=Pp>Raw encrypted send streams (created with <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-w</code>) may only be received as is, and cannot be re-encrypted, decrypted, or recompressed by the receive process. Unencrypted streams can be received as encrypted datasets, either through inheritance or by specifying encryption parameters with the <code class=Fl>-o</code> options. Note that the <b class=Sy>keylocation</b> property cannot be overridden to <b class=Sy>prompt</b> during a receive. This is because the receive process itself is already using the standard input for the send stream. Instead, the property can be overridden after the receive completes.</p><p class=Pp>The added security provided by raw sends adds some restrictions to the send and receive process. ZFS will not allow a mix of raw receives and non-raw receives. Specifically, any raw incremental receives that are attempted after a non-raw receive will fail. Non-raw receives do not have this restriction and, therefore, are always possible. Because of this, it is best practice to always use either raw sends for their security benefits or non-raw sends for their flexibility when working with encrypted datasets, but not a combination.</p><p class=Pp>The reason for this restriction stems from the inherent restrictions of the AEAD ciphers that ZFS uses to encrypt data. When using ZFS native encryption, each block of data is encrypted against a randomly generated number known as the "initialization vector" (IV), which is stored in the filesystem metadata. This number is required by the encryption algorithms whenever the data is to be decrypted. Together, all of the IVs provided for all of the blocks in a given snapshot are collectively called an "IV set". When ZFS performs a raw send, the IV set is transferred from the source to the destination in the send stream. When ZFS performs a non-raw send, the data is decrypted by the source system and re-encrypted by the destination system, creating a snapshot with effectively the same data, but a different IV set. In order for decryption to work after a raw send, ZFS must ensure that the IV set used on both the source and destination side match. When an incremental raw receive is performed on top of an existing snapshot, ZFS will check to confirm that the "from" snapshot on both the source and destination were using the same IV set, ensuring the new IV set is consistent.</p><p class=Pp>The name of the snapshot (and file system, if a full stream is received) that this subcommand creates depends on the argument type and the use of the <code class=Fl>-d</code> or <code class=Fl>-e</code> options.</p><p class=Pp>If the argument is a snapshot name, the specified <var class=Ar>snapshot</var> is created. If the argument is a file system or volume name, a snapshot with the same name as the sent snapshot is created within the specified <var class=Ar>filesystem</var> or <var class=Ar>volume</var>. If neither of the <code class=Fl>-d</code> or <code class=Fl>-e</code> options are specified, the provided target snapshot name is used exactly as provided.</p><p class=Pp>The <code class=Fl>-d</code> and <code class=Fl>-e</code> options cause the file system name of the target snapshot to be determined by appending a portion of the sent snapshot's name to the specified target <var class=Ar>filesystem</var>. If the <code class=Fl>-d</code> option is specified, all but the first element of the sent snapshot's file system path (usually the pool name) is used and any required intermediate file systems within the specified one are created. If the <code class=Fl>-e</code> option is specified, then only the last element of the sent snapshot's file system name (i.e. the name of the source file system itself) is used as the target file system name.</p><dl class=Bl-tag><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a></dt><dd>Force a rollback of the file system to the most recent snapshot before performing the receive operation. If receiving an incremental replication stream (for example, one generated by <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-R</code> [<code class=Fl>-i</code>|<code class=Fl>-I</code>]), destroy snapshots and file systems that do not exist on the sending side.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Discard the first element of the sent snapshot's file system name, using the remaining elements to determine the name of the target file system for the new snapshot as described in the paragraph above.</dd><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a></dt><dd>Discard all but the last element of the sent snapshot's file system name, using that element to determine the name of the target file system for the new snapshot as described in the paragraph above.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Skip the receive of holds. There is no effect if holds are not sent.</dd><dt><a class=permalink href=#M><code class=Fl id=M>-M</code></a></dt><dd>Force an unmount of the file system while receiving a snapshot. This option is not supported on Linux.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Do not actually receive the stream. This can be useful in conjunction with the <code class=Fl>-v</code> option to verify the name the receive operation would use.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><b class=Sy>origin</b>=<var class=Ar>snapshot</var></dt><dd>Forces the stream to be received as a clone of the given snapshot. If the stream is a full send stream, this will create the filesystem described by the stream as a clone of the specified snapshot. Which snapshot was specified will not affect the success or failure of the receive, as long as the snapshot does exist. If the stream is an incremental send stream, all the normal verification will be performed.</dd><dt><a class=permalink href=#o_2><code class=Fl id=o_2>-o</code></a><i class=Em>property</i>=<var class=Ar>value</var></dt><dd>Sets the specified property as if the command <code class=Nm>zfs</code><code class=Cm>set</code><i class=Em>property</i>=<var class=Ar>value</var> was invoked immediately before the receive. When receiving a stream from <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-R</code>, causes the property to be inherited by all descendant datasets, as through <code class=Nm>zfs</code><code class=Cm>inherit</code><i class=Em>property</i> was run on any descendant datasets that have this property set on the sending system. <p class=Pp>If the send stream was sent with <code class=Fl>-c</code> then overriding the <b class=Sy>compression</b> property will have no effect on received data but the <b class=Sy>compression</b> property will be set. To have the data recompressed on receive remove the <code class=Fl>-c</code> flag from the send stream.</p><p class=Pp>Any editable property can be set at receive time. Set-once properties bound to the received data, such as <b class=Sy>normalization</b> and <b class=Sy>casesensitivity</b>, cannot be set at receive time even when the datasets are newly created by <code class=Nm>zfs</code><code class=Cm>receive</code>. Additionally both settable properties <b class=Sy>version</b> and <b class=Sy>volsize</b> cannot be set at receive time.</p><p class=Pp>The <code class=Fl>-o</code> option may be specified multiple times, for different properties. An error results if the same property is specified in multiple <code class=Fl>-o</code> or <code class=Fl>-x</code> options.</p><p class=Pp>The <code class=Fl>-o</code> option may also be used to override encryption properties upon initial receive. This allows unencrypted streams to be received as encrypted datasets. To cause the received dataset (or root dataset of a recursive stream) to be received as an encryption root, specify encryption properties in the same manner as is required for <code class=Nm>zfs</code><code class=Cm>create</code>. For instance:</p><div class="Bd Bd-indent"><code class=Li># <code class=Nm>zfs</code><code class=Cm>send</code><span class=Pa>tank/test@snap1</span> | <code class=Nm>zfs</code><code class=Cm>recv</code><code class=Fl>-o</code><b class=Sy>encryption</b>=<b class=Sy>on</b><code class=Fl>-o</code><b class=Sy>keyformat</b>=<b class=Sy>passphrase</b><code class=Fl>-o</code><b class=Sy>keylocation</b>=<span class=Pa>file:///path/to/keyfile</span></code></div><p class=Pp>Note that <code class=Fl>-o</code><b class=Sy>keylocation</b>=<b class=Sy>prompt</b> may not be specified here, since the standard input is already being utilized for the send stream. Once the receive has completed, you can use <code class=Nm>zfs</code><code class=Cm>set</code> to change this setting after the fact. Similarly, you can receive a dataset as an encrypted child by specifying <code class=Fl>-x</code><b class=Sy>encryption</b> to force the property to be inherited. Overriding encryption properties (except for <b class=Sy>keylocation</b>) is not possible with raw send streams.</p></dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>If the receive is interrupted, save the partially received state, rather than deleting it. Interruption may be due to premature termination of the stream (e.g. due to network failure or failure of the remote system if the stream is being read over a network connection), a checksum error in the stream, termination of the <code class=Nm>zfs</code><code class=Cm>receive</code> process, or unclean shutdown of the system. <p class=Pp>The receive can be resumed with a stream generated by <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-t</code><var class=Ar>token</var>, where the <var class=Ar>token</var> is the value of the <b class=Sy>receive_resume_token</b> property of the filesystem or volume which is received into.</p><p class=Pp>To use this flag, the storage pool must have the <b class=Sy>extensible_dataset</b> feature enabled. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags.</p></dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>File system that is associated with the received stream is not mounted.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Print verbose information about the stream and the time required to perform the receive operation.</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a><i class=Em>property</i></dt><dd>Ensures that the effective value of the specified property after the receive is unaffected by the value of that property in the send stream (if any), as if the property had been excluded from the send stream. <p class=Pp>If the specified property is not present in the send stream, this option does nothing.</p><p class=Pp>If a received property needs to be overridden, the effective value will be set or inherited, depending on whether the property is inheritable or not.</p><p class=Pp>In the case of an incremental update, <code class=Fl>-x</code> leaves any existing local setting or explicit inheritance unchanged.</p><p class=Pp>All <code class=Fl>-o</code> restrictions (e.g. set-once) apply equally to <code class=Fl>-x</code>.</p></dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code><code class=Fl>-A</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd>Abort an interrupted <code class=Nm>zfs</code><code class=Cm>receive</code><code class=Fl>-s</code>, deleting its saved partially received state.</dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code><code class=Fl>-c</code> [<code class=Fl>-vn</code>] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></dt><dd>Attempt to correct data corruption in the specified dataset, by using the provided stream as the source of healthy data. This method of healing can only heal data blocks present in the stream. Metadata can not be healed by corrective receive. Running a scrub is recommended post-healing to ensure all corruption was healed. <p class=Pp>It's important to consider why corruption has happened in the first place since if you have slowly failing hardware periodically healing the data is not going to save you from data loss later on when the hardware fails completely.</p></dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2><section class=Ss><h2 class=Ss>Example 1: <span class=No>Remotely Replicating ZFS Data</span></h2> The following commands send a full stream and then an incremental stream to a remote machine, restoring them into <i class=Em>poolB/received/fs@a</i> and <i class=Em>poolB/received/fs@b</i>, respectively. <i class=Em>poolB</i> must contain the file system <i class=Em>poolB/received</i>, and must not initially contain <i class=Em>poolB/received/fs</i>. <div class="Bd Bd-indent"><pre>
<span class=No>#
</span> <code class=Nm>zfs
</code> <code class=Cm>send
</code> <var class=Ar>pool/fs@a
</var> |
<span class=No>   
</span> <code class=Nm>ssh
</code> <var class=Ar>host
</var> <code class=Nm>zfs
</code> <code class=Cm>receive
</code> <var class=Ar>poolB/received/fs
</var>@<var class=Ar>a
</var>
<span class=No>#
</span> <code class=Nm>zfs
</code> <code class=Cm>send
</code> <code class=Fl>-i
</code> <var class=Ar>a pool/fs@b
</var> |
<span class=No>   
</span> <code class=Nm>ssh
</code> <var class=Ar>host
</var> <code class=Nm>zfs
</code> <code class=Cm>receive
</code> <var class=Ar>poolB/received/fs
</var>
</pre></div></section><section class=Ss><h2 class=Ss>Example 2: <span class=No>Using the</span><code class=Nm>zfs</code><code class=Cm>receive</code><code class=Fl>-d</code><span class=No>Option</span></h2> The following command sends a full stream of <var class=Ar>poolA/fsA/fsB@snap</var> to a remote machine, receiving it into <var class=Ar>poolB/received/fsA/fsB@snap</var>. The <var class=Ar>fsA/fsB@snap</var> portion of the received snapshot's name is determined from the name of the sent snapshot. <var class=Ar>poolB</var> must contain the file system <var class=Ar>poolB/received</var>. If <var class=Ar>poolB/received/fsA</var> does not exist, it is created as an empty file system. <div class="Bd Bd-indent"><pre>
<span class=No>#
</span> <code class=Nm>zfs
</code> <code class=Cm>send
</code> <var class=Ar>poolA/fsA/fsB@snap
</var> |
<span class=No>   
</span> <code class=Nm>ssh
</code> <var class=Ar>host
</var> <code class=Nm>zfs
</code> <code class=Cm>receive
</code> <code class=Fl>-d
</code> <var class=Ar>poolB/received
</var>
</pre></div></section></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=zfs-send.8.html>zfs-send(8)</a>, <a class=Xr href=zstream.8.html>zstream(8)</a></section></div><table class=foot><tr><td class=foot-date>April 26, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>