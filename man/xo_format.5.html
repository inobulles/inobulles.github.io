<!DOCTYPE html>
<html><head><meta charset=utf-8><title>xo_format(5)</title><keywords content=man,xo_format></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>xo_format(5)</h1><table class=head><tr><td class=head-ltitle>LIBXO(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>LIBXO(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>xo_format</code> — <div class=Nd>content of format descriptors for xo_emit</div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2><code class=Nm>libxo</code> uses format strings to control the rendering of data into various output styles, including <i class=Em>text</i>, <i class=Em>XML</i>, <i class=Em>JSON</i>, and <i class=Em>HTML</i>. Each format string contains a set of zero or more “field descriptions”, which describe independent data fields. Each field description contains a set of “modifiers”, a “content string”, and zero, one, or two “format descriptors”. The modifiers tell <code class=Nm>libxo</code> what the field is and how to treat it, while the format descriptors are formatting instructions using <a class=Xr href=printf.3.html>printf(3)</a>-style format strings, telling <code class=Nm>libxo</code> how to format the field. The field description is placed inside a set of braces, with a colon (‘<code class=Li>:</code>’) after the modifiers and a slash (‘<code class=Li>/</code>’) before each format descriptors. Text may be intermixed with field descriptions within the format string. <p class=Pp>The field description is given as follows:</p><div class="Bd Pp Bd-indent"><pre>
    '{' [ role | modifier ]* [',' long-names ]* ':' [ content ]
            [ '/' field-format [ '/' encoding-format ]] '}'
</pre></div><p class=Pp>The role describes the function of the field, while the modifiers enable optional behaviors. The contents, field-format, and encoding-format are used in varying ways, based on the role. These are described in the following sections.</p><p class=Pp>Braces can be escaped by using double braces, similar to "%%" in <a class=Xr href=printf.3.html>printf(3)</a>. The format string "{{braces}}" would emit "{braces}".</p><p class=Pp>In the following example, three field descriptors appear. The first is a padding field containing three spaces of padding, the second is a label ("In stock"), and the third is a value field ("in-stock"). The in-stock field has a "%u" format that will parse the next argument passed to the <a class=Xr href=xo_emit.3.html>xo_emit(3)</a>, function as an unsigned integer.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{P:   }{Lwc:In stock}{:in-stock/%u}\n", 65);
</pre></div><p class=Pp>This single line of code can generate text ("In stock: 65\n"), XML ("&lt;in-stock&gt;65&lt;/in-stock&gt;"), JSON ('"in-stock": 65'), or HTML (too lengthy to be listed here).</p><p class=Pp>While roles and modifiers typically use single character for brevity, there are alternative names for each which allow more verbose formatting strings. These names must be preceded by a comma, and may follow any single-character values:</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{L,white,colon:In stock}{,key:in-stock/%u}\n", 65);
</pre></div><section class=Ss><h2 class=Ss id=Field_Roles><a class=permalink href=#Field_Roles>Field Roles</a></h2> Field roles are optional, and indicate the role and formatting of the content. The roles are listed below; only one role is permitted: <table class=Bl-column><tr><td><b class=Sy>M Name Description</b></td></tr><tr><td>C color Field is a color or effect</td></tr><tr><td>D decoration Field is non-text (e.g. colon, comma)</td></tr><tr><td>E error Field is an error message</td></tr><tr><td>L label Field is text that prefixes a value</td></tr><tr><td>N note Field is text that follows a value</td></tr><tr><td>P padding Field is spaces needed for vertical alignment</td></tr><tr><td>T title Field is a title value for headings</td></tr><tr><td>U units Field is the units for the previous value field</td></tr><tr><td>V value Field is the name of field (the default)</td></tr><tr><td>W warning Field is a warning message</td></tr><tr><td>[ start-anchor Begin a section of anchored variable-width text</td></tr><tr><td>] stop-anchor End a section of anchored variable-width text</td></tr></table><div class="Bd Pp Bd-indent"><pre>
   EXAMPLE:
       xo_emit("{L:Free}{D::}{P:   }{:free/%u} {U:Blocks}\n",
               free_blocks);
</pre></div><p class=Pp>When a role is not provided, the "value" role is used as the default.</p><p class=Pp>Roles and modifiers can also use more verbose names, when preceded by a comma:</p><div class="Bd Pp Bd-indent"><pre>
   EXAMPLE:
        xo_emit("{,label:Free}{,decoration::}{,padding:   }"
               "{,value:free/%u} {,units:Blocks}\n",
               free_blocks);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Color_Role_(_C:_)><a class=permalink href=#The_Color_Role_(_C:_)>The Color Role ({C:})</a></h2> Colors and effects control how text values are displayed; they are used for display styles (TEXT and HTML). <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{C:bold}{:value}{C:no-bold}\n", value);
</pre></div><p class=Pp>Colors and effects remain in effect until modified by other "C"-role fields.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{C:bold}{C:inverse}both{C:no-bold}only inverse\n");
</pre></div><p class=Pp>If the content is empty, the "reset" action is performed.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{C:both,underline}{:value}{C:}\n", value);
</pre></div><p class=Pp>The content should be a comma-separated list of zero or more colors or display effects.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{C:bold,underline,inverse}All three{C:no-bold,no-inverse}\n");
</pre></div><p class=Pp>The color content can be either static, when placed directly within the field descriptor, or a printf-style format descriptor can be used, if preceded by a slash ("/"):</p><div class="Bd Pp Bd-indent"><pre>
   xo_emit("{C:/%s%s}{:value}{C:}", need_bold ? "bold" : "",
           need_underline ? "underline" : "", value);
</pre></div><p class=Pp>Color names are prefixed with either "fg-" or "bg-" to change the foreground and background colors, respectively.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{C:/fg-%s,bg-%s}{Lwc:Cost}{:cost/%u}{C:reset}\n",
            fg_color, bg_color, cost);
</pre></div><p class=Pp>The following table lists the supported effects:</p><table class=Bl-column><tr><td><b class=Sy>Name Description</b></td></tr><tr><td>bg-xxxxx Change background color</td></tr><tr><td>bold Start bold text effect</td></tr><tr><td>fg-xxxxx Change foreground color</td></tr><tr><td>inverse Start inverse (aka reverse) text effect</td></tr><tr><td>no-bold Stop bold text effect</td></tr><tr><td>no-inverse Stop inverse (aka reverse) text effect</td></tr><tr><td>no-underline Stop underline text effect</td></tr><tr><td>normal Reset effects (only)</td></tr><tr><td>reset Reset colors and effects (restore defaults)</td></tr><tr><td>underline Start underline text effect</td></tr></table><p class=Pp>The following color names are supported:</p><table class=Bl-column><tr><td><b class=Sy>Name</b></td></tr><tr><td>black</td></tr><tr><td>blue</td></tr><tr><td>cyan</td></tr><tr><td>default</td></tr><tr><td>green</td></tr><tr><td>magenta</td></tr><tr><td>red</td></tr><tr><td>white</td></tr><tr><td>yellow</td></tr></table></section><section class=Ss><h2 class=Ss id=The_Decoration_Role_(_D:_)><a class=permalink href=#The_Decoration_Role_(_D:_)>The Decoration Role ({D:})</a></h2> Decorations are typically punctuation marks such as colons, semi-colons, and commas used to decorate the text and make it simpler for human readers. By marking these distinctly, HTML usage scenarios can use CSS to direct their display parameters. <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{D:((}{:name}{D:))}\n", name);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Gettext_Role_(_G:_)><a class=permalink href=#The_Gettext_Role_(_G:_)>The Gettext Role ({G:})</a></h2><code class=Nm>libxo</code> supports internationalization (i18n) through its use of <a class=Xr href=gettext.3.html>gettext(3)</a>. Use the "{G:}" role to request that the remaining part of the format string, following the "{G:}" field, be handled using <code class=Fn>gettext</code>(). Since <code class=Fn>gettext</code>() uses the string as the key into the message catalog, <code class=Nm>libxo</code> uses a simplified version of the format string that removes unimportant field formatting and modifiers, stopping minor formatting changes from impacting the expensive translation process. A developer change such as changing "/%06d" to "/%08d" should not force hand inspection of all .po files. <p class=Pp>The simplified version can be generated for a single message using the "xopo -s &lt;text&gt;" command, or an entire .pot can be translated using the "xopo -f &lt;input&gt; -o &lt;output&gt;" command.</p><div class="Bd Pp Bd-indent"><pre>
   xo_emit("{G:}Invalid token\n");
</pre></div><p class=Pp>The {G:} role allows a domain name to be set. <code class=Fn>gettext</code>() calls will continue to use that domain name until the current format string processing is complete, enabling a library function to emit strings using it's own catalog. The domain name can be either static as the content of the field, or a format can be used to get the domain name from the arguments.</p><div class="Bd Pp Bd-indent"><pre>
   xo_emit("{G:libc}Service unavailable in restricted mode\n");
</pre></div></section><section class=Ss><h2 class=Ss id=The_Label_Role_(_L:_)><a class=permalink href=#The_Label_Role_(_L:_)>The Label Role ({L:})</a></h2> Labels are text that appears before a value. <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{Lwc:Cost}{:cost/%u}\n", cost);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Note_Role_(_N:_)><a class=permalink href=#The_Note_Role_(_N:_)>The Note Role ({N:})</a></h2> Notes are text that appears after a value. <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{:cost/%u} {N:per year}\n", cost);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Padding_Role_(_P:_)><a class=permalink href=#The_Padding_Role_(_P:_)>The Padding Role ({P:})</a></h2> Padding represents whitespace used before and between fields. The padding content can be either static, when placed directly within the field descriptor, or a printf-style format descriptor can be used, if preceded by a slash ("/"): <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{P:        }{Lwc:Cost}{:cost/%u}\n", cost);
    xo_emit("{P:/30s}{Lwc:Cost}{:cost/%u}\n", "", cost);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Title_Role_(_T:_)><a class=permalink href=#The_Title_Role_(_T:_)>The Title Role ({T:})</a></h2> Titles are heading or column headers that are meant to be displayed to the user. The title can be either static, when placed directly within the field descriptor, or a printf-style format descriptor can be used, if preceded by a slash ("/"): <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{T:Interface Statistics}\n");
    xo_emit("{T:/%20.20s}{T:/%6.6s}\n", "Item Name", "Cost");
</pre></div></section><section class=Ss><h2 class=Ss id=The_Units_Role_(_U:_)><a class=permalink href=#The_Units_Role_(_U:_)>The Units Role ({U:})</a></h2> Units are the dimension by which values are measured, such as degrees, miles, bytes, and decibels. The units field carries this information for the previous value field. <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{Lwc:Distance}{:distance/%u}{Uw:miles}\n", miles);
</pre></div><p class=Pp>Note that the sense of the 'w' modifier is reversed for units; a blank is added before the contents, rather than after it.</p><p class=Pp>When the <code class=Dv>XOF_UNITS</code> flag is set, units are rendered in XML as the “units” attribute:</p><div class="Bd Pp Bd-indent"><pre>
    &lt;distance units="miles"&gt;50&lt;/distance&gt;
</pre></div><p class=Pp>Units can also be rendered in HTML as the "data-units" attribute:</p><div class="Bd Pp Bd-indent"><pre>
    &lt;div class="data" data-tag="distance" data-units="miles"
         data-xpath="/top/data/distance"&gt;50&lt;/div&gt;
</pre></div></section><section class=Ss><h2 class=Ss id=The_Value_Role_(_V:__and__:_)><a class=permalink href=#The_Value_Role_(_V:__and__:_)>The Value Role ({V:} and {:})</a></h2> The value role is used to represent the a data value that is interesting for the non-display output styles (XML and JSON). Value is the default role; if no other role designation is given, the field is a value. The field name must appear within the field descriptor, followed by one or two format descriptors. The first format descriptor is used for display styles (TEXT and HTML), while the second one is used for encoding styles (XML and JSON). If no second format is given, the encoding format defaults to the first format, with any minimum width removed. If no first format is given, both format descriptors default to "%s". <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{:length/%02u}x{:width/%02u}x{:height/%02u}\n",
            length, width, height);
    xo_emit("{:author} wrote
            author, poem, year);
</pre></div></section><section class=Ss><h2 class=Ss id=The_Anchor_Roles_(__:__and___:_)><a class=permalink href=#The_Anchor_Roles_(__:__and___:_)>The Anchor Roles ({[:} and {]:})</a></h2> The anchor roles allow a set of strings by be padded as a group, but still be visible to <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> as distinct fields. Either the start or stop anchor can give a field width and it can be either directly in the descriptor or passed as an argument. Any fields between the start and stop anchor are padded to meet the minimum width given. <p class=Pp>To give a width directly, encode it as the content of the anchor tag:</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("({[:10}{:min/%d}/{:max/%d}{]:})\n", min, max);
</pre></div><p class=Pp>To pass a width as an argument, use "%d" as the format, which must appear after the "/". Note that only "%d" is supported for widths. Using any other value could ruin your day.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("({[:/%d}{:min/%d}/{:max/%d}{]:})\n", width, min, max);
</pre></div><p class=Pp>If the width is negative, padding will be added on the right, suitable for left justification. Otherwise the padding will be added to the left of the fields between the start and stop anchors, suitable for right justification. If the width is zero, nothing happens. If the number of columns of output between the start and stop anchors is less than the absolute value of the given width, nothing happens.</p><p class=Pp>Widths over 8k are considered probable errors and not supported. If <code class=Dv>XOF_WARN</code> is set, a warning will be generated.</p></section><section class=Ss><h2 class=Ss id=Field_Modifiers><a class=permalink href=#Field_Modifiers>Field Modifiers</a></h2> Field modifiers are flags which modify the way content emitted for particular output styles: <table class=Bl-column><tr><td><b class=Sy>M Name Description</b></td></tr><tr><td>a argument The content appears as a "const char *" argument</td></tr><tr><td>c colon A colon (":") is appended after the label</td></tr><tr><td>d display Only emit field for display styles (text/HTML)</td></tr><tr><td>e encoding Only emit for encoding styles (XML/JSON)</td></tr><tr><td>h humanize (hn) Format large numbers in human-readable style</td></tr><tr><td> hn-space Humanize: Place space between numeric and unit</td></tr><tr><td> hn-decimal Humanize: Add a decimal digit, if number &lt; 10</td></tr><tr><td> hn-1000 Humanize: Use 1000 as divisor instead of 1024</td></tr><tr><td>k key Field is a key, suitable for XPath predicates</td></tr><tr><td>l leaf-list Field is a leaf-list, a list of leaf values</td></tr><tr><td>n no-quotes Do not quote the field when using JSON style</td></tr><tr><td>q quotes Quote the field when using JSON style</td></tr><tr><td>t trim Trim leading and trailing whitespace</td></tr><tr><td>w white space A blank (" ") is appended after the label</td></tr></table><p class=Pp>For example, the modifier string "Lwc" means the field has a label role (text that describes the next field) and should be followed by a colon ('c') and a space ('w'). The modifier string "Vkq" means the field has a value role, that it is a key for the current instance, and that the value should be quoted when encoded for JSON.</p><p class=Pp>Roles and modifiers can also use more verbose names, when preceded by a comma. For example, the modifier string "Lwc" (or "L,white,colon") means the field has a label role (text that describes the next field) and should be followed by a colon ('c') and a space ('w'). The modifier string "Vkq" (or ":key,quote") means the field has a value role (the default role), that it is a key for the current instance, and that the value should be quoted when encoded for JSON.</p></section><section class=Ss><h2 class=Ss id=The_Argument_Modifier_(_a:_)><a class=permalink href=#The_Argument_Modifier_(_a:_)>The Argument Modifier ({a:})</a></h2> The argument modifier indicates that the content of the field descriptor will be placed as a UTF-8 string (const char *) argument within the xo_emit parameters. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{La:} {a:}\n", "Label text", "label", "value");
    TEXT:
      Label text value
    JSON:
      "label": "value"
    XML:
      &lt;label&gt;value&lt;/label&gt;
</pre></div><p class=Pp>The argument modifier allows field names for value fields to be passed on the stack, avoiding the need to build a field descriptor using <a class=Xr href=snprintf.1.html>snprintf(1)</a>. For many field roles, the argument modifier is not needed, since those roles have specific mechanisms for arguments, such as "{C:fg-%s}".</p></section><section class=Ss><h2 class=Ss id=The_Colon_Modifier_(_c:_)><a class=permalink href=#The_Colon_Modifier_(_c:_)>The Colon Modifier ({c:})</a></h2> The colon modifier appends a single colon to the data value: <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{Lc:Name}{:name}\n", "phil");
    TEXT:
      Name:phil
</pre></div><p class=Pp>The colon modifier is only used for the TEXT and HTML output styles. It is commonly combined with the space modifier ('{w:}'). It is purely a convenience feature.</p></section><section class=Ss><h2 class=Ss id=The_Display_Modifier_(_d:_)><a class=permalink href=#The_Display_Modifier_(_d:_)>The Display Modifier ({d:})</a></h2> The display modifier indicated the field should only be generated for the display output styles, TEXT and HTML. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{Lcw:Name}{d:name} {:id/%d}\n", "phil", 1);
    TEXT:
      Name: phil 1
    XML:
      &lt;id&gt;1&lt;/id&gt;
</pre></div><p class=Pp>The display modifier is the opposite of the encoding modifier, and they are often used to give to distinct views of the underlying data.</p></section><section class=Ss><h2 class=Ss id=The_Encoding_Modifier_(_e:_)><a class=permalink href=#The_Encoding_Modifier_(_e:_)>The Encoding Modifier ({e:})</a></h2> The encoding modifier indicated the field should only be generated for the encoding output styles, such as JSON and XML. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{Lcw:Name}{:name} {e:id/%d}\n", "phil", 1);
    TEXT:
      Name: phil
    XML:
      &lt;name&gt;phil&lt;/name&gt;&lt;id&gt;1&lt;/id&gt;
</pre></div><p class=Pp>The encoding modifier is the opposite of the display modifier, and they are often used to give to distinct views of the underlying data.</p></section><section class=Ss><h2 class=Ss id=The_Humanize_Modifier_(_h:_)><a class=permalink href=#The_Humanize_Modifier_(_h:_)>The Humanize Modifier ({h:})</a></h2> The humanize modifier is used to render large numbers as in a human-readable format. While numbers like "44470272" are completely readable to computers and savants, humans will generally find "44M" more meaningful. <p class=Pp>"hn" can be used as an alias for "humanize".</p><p class=Pp>The humanize modifier only affects display styles (TEXT and HMTL). The "no-humanize" option will block the function of the humanize modifier.</p><p class=Pp>There are a number of modifiers that affect details of humanization. These are only available in as full names, not single characters. The "hn-space" modifier places a space between the number and any multiplier symbol, such as "M" or "K" (ex: "44 K"). The "hn-decimal" modifier will add a decimal point and a single tenths digit when the number is less than 10 (ex: "4.4K"). The "hn-1000" modifier will use 1000 as divisor instead of 1024, following the JEDEC-standard instead of the more natural binary powers-of-two tradition.</p><div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
        xo_emit("{h:input/%u}, {h,hn-space:output/%u}, "
           "{h,hn-decimal:errors/%u}, {h,hn-1000:capacity/%u}, "
           "{h,hn-decimal:remaining/%u}\n",
            input, output, errors, capacity, remaining);
    TEXT:
        21, 57 K, 96M, 44M, 1.2G
</pre></div><p class=Pp>In the HTML style, the original numeric value is rendered in the "data-number" attribute on the &lt;div&gt; element:</p><div class="Bd Pp Bd-indent"><pre>
    &lt;div class="data" data-tag="errors"
         data-number="100663296"&gt;96M&lt;/div&gt;
</pre></div></section><section class=Ss><h2 class=Ss id=The_Gettext_Modifier_(_g:_)><a class=permalink href=#The_Gettext_Modifier_(_g:_)>The Gettext Modifier ({g:})</a></h2> The gettext modifier is used to translate individual fields using the gettext domain (typically set using the "{G:}" role) and current language settings. Once libxo renders the field value, it is passed to <a class=Xr href=gettext.3.html>gettext(3)</a>, where it is used as a key to find the native language translation. <p class=Pp>In the following example, the strings "State" and "full" are passed to <code class=Fn>gettext</code>() to find locale-based translated strings.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{Lgwc:State}{g:state}\n", "full");
</pre></div></section><section class=Ss><h2 class=Ss id=The_Key_Modifier_(_k:_)><a class=permalink href=#The_Key_Modifier_(_k:_)>The Key Modifier ({k:})</a></h2> The key modifier is used to indicate that a particular field helps uniquely identify an instance of list data. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
        xo_open_list("user");
        for (i = 0; i &lt; num_users; i++) {
	    xo_open_instance("user");
            xo_emit("User {k:name} has {:count} tickets\n",
               user[i].u_name, user[i].u_tickets);
            xo_close_instance("user");
        }
        xo_close_list("user");
</pre></div><p class=Pp>Currently the key modifier is only used when generating XPath values for the HTML output style when <code class=Dv>XOF_XPATH</code> is set, but other uses are likely in the near future.</p></section><section class=Ss><h2 class=Ss id=The_Leaf_-List_Modifier_(_l:_)><a class=permalink href=#The_Leaf_-List_Modifier_(_l:_)>The Leaf-List Modifier ({l:})</a></h2> The leaf-list modifier is used to distinguish lists where each instance consists of only a single value. In XML, these are rendered as single elements, where JSON renders them as arrays. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
        xo_open_list("user");
        for (i = 0; i &lt; num_users; i++) {
            xo_emit("Member {l:name}\n", user[i].u_name);
        }
        xo_close_list("user");
    XML:
        &lt;user&gt;phil&lt;/user&gt;
        &lt;user&gt;pallavi&lt;/user&gt;
    JSON:
        "user": [ "phil", "pallavi" ]
</pre></div></section><section class=Ss><h2 class=Ss id=The_No_-Quotes_Modifier_(_n:_)><a class=permalink href=#The_No_-Quotes_Modifier_(_n:_)>The No-Quotes Modifier ({n:})</a></h2> The no-quotes modifier (and its twin, the 'quotes' modifier) affect the quoting of values in the JSON output style. JSON uses quotes for string values, but no quotes for numeric, boolean, and null data. <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> applies a simple heuristic to determine whether quotes are needed, but often this needs to be controlled by the caller. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      const char *bool = is_true ? "true" : "false";
      xo_emit("{n:fancy/%s}", bool);
    JSON:
      "fancy": true
</pre></div></section><section class=Ss><h2 class=Ss id=The_Plural_Modifier_(_p:_)><a class=permalink href=#The_Plural_Modifier_(_p:_)>The Plural Modifier ({p:})</a></h2> The plural modifier selects the appropriate plural form of an expression based on the most recent number emitted and the current language settings. The contents of the field should be the singular and plural English values, separated by a comma: <div class="Bd Pp Bd-indent"><pre>
    xo_emit("{:bytes} {Ngp:byte,bytes}\n", bytes);
</pre></div><p class=Pp>The plural modifier is meant to work with the gettext modifier ({g:}) but can work independently.</p><p class=Pp>When used without the gettext modifier or when the message does not appear in the message catalog, the first token is chosen when the last numeric value is equal to 1; otherwise the second value is used, mimicking the simple pluralization rules of English.</p><p class=Pp>When used with the gettext modifier, the <a class=Xr href=ngettext.3.html>ngettext(3)</a> function is called to handle the heavy lifting, using the message catalog to convert the singular and plural forms into the native language.</p></section><section class=Ss><h2 class=Ss id=The_Quotes_Modifier_(_q:_)><a class=permalink href=#The_Quotes_Modifier_(_q:_)>The Quotes Modifier ({q:})</a></h2> The quotes modifier (and its twin, the 'no-quotes' modifier) affect the quoting of values in the JSON output style. JSON uses quotes for string values, but no quotes for numeric, boolean, and null data. <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> applies a simple heuristic to determine whether quotes are needed, but often this needs to be controlled by the caller. <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{q:time/%d}", 2014);
    JSON:
      "year": "2014"
</pre></div></section><section class=Ss><h2 class=Ss id=The_White_Space_Modifier_(_w:_)><a class=permalink href=#The_White_Space_Modifier_(_w:_)>The White Space Modifier ({w:})</a></h2> The white space modifier appends a single space to the data value: <div class="Bd Pp Bd-indent"><pre>
    EXAMPLE:
      xo_emit("{Lw:Name}{:name}\n", "phil");
    TEXT:
      Name phil
</pre></div><p class=Pp>The white space modifier is only used for the TEXT and HTML output styles. It is commonly combined with the colon modifier ('{c:}'). It is purely a convenience feature.</p><p class=Pp>Note that the sense of the 'w' modifier is reversed for the units role ({Uw:}); a blank is added before the contents, rather than after it.</p></section><section class=Ss><h2 class=Ss id=Field_Formatting><a class=permalink href=#Field_Formatting>Field Formatting</a></h2> The field format is similar to the format string for <a class=Xr href=printf.3.html>printf(3)</a>. Its use varies based on the role of the field, but generally is used to format the field's contents. <p class=Pp>If the format string is not provided for a value field, it defaults to "%s".</p><p class=Pp>Note a field definition can contain zero or more printf-style “directives”, which are sequences that start with a '%' and end with one of following characters: "diouxXDOUeEfFgGaAcCsSp". Each directive is matched by one of more arguments to the <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> function.</p><p class=Pp>The format string has the form:</p><div class="Bd Pp Bd-indent"><pre>
  '%' format-modifier * format-character
</pre></div><p class=Pp>The format-modifier can be:</p><ul class=Bl-bullet><li>a '#' character, indicating the output value should be prefixed with "0x", typically to indicate a base 16 (hex) value.</li><li>a minus sign ('-'), indicating the output value should be padded on the right instead of the left.</li><li>a leading zero ('0') indicating the output value should be padded on the left with zeroes instead of spaces (' ').</li><li>one or more digits ('0' - '9') indicating the minimum width of the argument. If the width in columns of the output value is less than the minimum width, the value will be padded to reach the minimum.</li><li>a period followed by one or more digits indicating the maximum number of bytes which will be examined for a string argument, or the maximum width for a non-string argument. When handling ASCII strings this functions as the field width but for multi-byte characters, a single character may be composed of multiple bytes. <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> will never dereference memory beyond the given number of bytes.</li><li>a second period followed by one or more digits indicating the maximum width for a string argument. This modifier cannot be given for non-string arguments.</li><li>one or more 'h' characters, indicating shorter input data.</li><li>one or more 'l' characters, indicating longer input data.</li><li>a 'z' character, indicating a 'size_t' argument.</li><li>a 't' character, indicating a 'ptrdiff_t' argument.</li><li>a ' ' character, indicating a space should be emitted before positive numbers.</li><li>a '+' character, indicating sign should emitted before any number.</li></ul><p class=Pp>Note that 'q', 'D', 'O', and 'U' are considered deprecated and will be removed eventually.</p><p class=Pp>The format character is described in the following table:</p><table class=Bl-column><tr><td><b class=Sy>C Argument Type Format</b></td></tr><tr><td>d int base 10 (decimal)</td></tr><tr><td>i int base 10 (decimal)</td></tr><tr><td>o int base 8 (octal)</td></tr><tr><td>u unsigned base 10 (decimal)</td></tr><tr><td>x unsigned base 16 (hex)</td></tr><tr><td>X unsigned long base 16 (hex)</td></tr><tr><td>D long base 10 (decimal)</td></tr><tr><td>O unsigned long base 8 (octal)</td></tr><tr><td>U unsigned long base 10 (decimal)</td></tr><tr><td>e double [-]d.ddde+-dd</td></tr><tr><td>E double [-]d.dddE+-dd</td></tr><tr><td>f double [-]ddd.ddd</td></tr><tr><td>F double [-]ddd.ddd</td></tr><tr><td>g double as 'e' or 'f'</td></tr><tr><td>G double as 'E' or 'F'</td></tr><tr><td>a double [-]0xh.hhhp[+-]d</td></tr><tr><td>A double [-]0Xh.hhhp[+-]d</td></tr><tr><td>c unsigned char a character</td></tr><tr><td>C wint_t a character</td></tr><tr><td>s char * a UTF-8 string</td></tr><tr><td>S wchar_t * a unicode/WCS string</td></tr><tr><td>p void * '%#lx'</td></tr></table><p class=Pp>The 'h' and 'l' modifiers affect the size and treatment of the argument:</p><table class=Bl-column><tr><td><b class=Sy>Mod d, i o, u, x, X</b></td></tr><tr><td>hh signed char unsigned char</td></tr><tr><td>h short unsigned short</td></tr><tr><td>l long unsigned long</td></tr><tr><td>ll long long unsigned long long</td></tr><tr><td>j intmax_t uintmax_t</td></tr><tr><td>t ptrdiff_t ptrdiff_t</td></tr><tr><td>z size_t size_t</td></tr><tr><td>q quad_t u_quad_t</td></tr></table></section><section class=Ss><h2 class=Ss id=UTF_-8_and_Locale_Strings><a class=permalink href=#UTF_-8_and_Locale_Strings>UTF-8 and Locale Strings</a></h2> All strings for <code class=Nm>libxo</code> must be UTF-8. <code class=Nm>libxo</code> will handle turning them into locale-based strings for display to the user. <p class=Pp>For strings, the 'h' and 'l' modifiers affect the interpretation of the bytes pointed to argument. The default '%s' string is a 'char *' pointer to a string encoded as UTF-8. Since UTF-8 is compatible with <i class=Em>ASCII</i> data, a normal 7-bit <i class=Em>ASCII</i> string can be used. "%ls" expects a "wchar_t *" pointer to a wide-character string, encoded as 32-bit Unicode values. "%hs" expects a "char *" pointer to a multi-byte string encoded with the current locale, as given by the <code class=Ev>LC_CTYPE</code>, <code class=Ev>LANG</code>, or <code class=Ev>LC_ALL</code> environment variables. The first of this list of variables is used and if none of the variables are set, the locale defaults to <i class=Em>UTF-8</i>.</p><p class=Pp><code class=Nm>libxo</code> will convert these arguments as needed to either UTF-8 (for XML, JSON, and HTML styles) or locale-based strings for display in text style.</p><div class="Bd Pp Bd-indent"><pre>
   xo_emit("All strings are utf-8 content {:tag/%ls}",
           L"except for wide strings");
</pre></div><p class=Pp>"%S" is equivalent to "%ls".</p><p class=Pp>For example, a function is passed a locale-base name, a hat size, and a time value. The hat size is formatted in a UTF-8 (ASCII) string, and the time value is formatted into a wchar_t string.</p><div class="Bd Pp Bd-indent"><pre>
    void print_order (const char *name, int size,
                      struct tm *timep) {
        char buf[32];
        const char *size_val = "unknown";

	if (size &gt; 0)
            snprintf(buf, sizeof(buf), "%d", size);
            size_val = buf;
        }

        wchar_t when[32];
        wcsftime(when, sizeof(when), L"%d%b%y", timep);

        xo_emit("The hat for {:name/%hs} is {:size/%s}.\n",
                name, size_val);
        xo_emit("It was ordered on {:order-time/%ls}.\n",
                when);
    }
</pre></div><p class=Pp>It is important to note that <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> will perform the conversion required to make appropriate output. Text style output uses the current locale (as described above), while XML, JSON, and HTML use UTF-8.</p><p class=Pp>UTF-8 and locale-encoded strings can use multiple bytes to encode one column of data. The traditional "precision" (aka "max-width") value for "%s" printf formatting becomes overloaded since it specifies both the number of bytes that can be safely referenced and the maximum number of columns to emit. <a class=Xr href=xo_emit.3.html>xo_emit(3)</a> uses the precision as the former, and adds a third value for specifying the maximum number of columns.</p><p class=Pp>In this example, the name field is printed with a minimum of 3 columns and a maximum of 6. Up to ten bytes are in used in filling those columns.</p><div class="Bd Pp Bd-indent"><pre>
    xo_emit("{:name/%3.10.6s}", name);
</pre></div></section><section class=Ss><h2 class=Ss id=Characters_Outside_of_Field_Definitions><a class=permalink href=#Characters_Outside_of_Field_Definitions>Characters Outside of Field Definitions</a></h2> Characters in the format string that are not part of a field definition are copied to the output for the TEXT style, and are ignored for the JSON and XML styles. For HTML, these characters are placed in a &lt;div&gt; with class "text". <div class="Bd Pp Bd-indent"><pre>
  EXAMPLE:
      xo_emit("The hat is {:size/%s}.\n", size_val);
  TEXT:
      The hat is extra small.
  XML:
      &lt;size&gt;extra small&lt;/size&gt;
  JSON:
      "size": "extra small"
  HTML:
      &lt;div class="text"&gt;The hat is &lt;/div&gt;
      &lt;div class="data" data-tag="size"&gt;extra small&lt;/div&gt;
      &lt;div class="text"&gt;.&lt;/div&gt;
</pre></div></section><section class=Ss><h2 class=Ss id=_(aq_n_(aq_is_Not_Supported><a class=permalink href=#_(aq_n_(aq_is_Not_Supported>'%n' is Not Supported</a></h2><code class=Nm>libxo</code> does not support the '%n' directive. It is a bad idea and we just do not do it. </section><section class=Ss><h2 class=Ss id=The_Encoding_Format_(eformat)><a class=permalink href=#The_Encoding_Format_(eformat)>The Encoding Format (eformat)</a></h2> The "eformat" string is the format string used when encoding the field for JSON and XML. If not provided, it defaults to the primary format with any minimum width removed. If the primary is not given, both default to "%s". </section></section><section class=Sh><h2 class=Sh id=EXAMPLE><a class=permalink href=#EXAMPLE>EXAMPLE</a></h2> In this example, the value for the number of items in stock is emitted: <div class="Bd Pp Bd-indent"><pre>
        xo_emit("{P:   }{Lwc:In stock}{:in-stock/%u}\n",
                instock);
</pre></div><p class=Pp>This call will generate the following output:</p><div class="Bd Pp Bd-indent"><pre>
  TEXT:
       In stock: 144
  XML:
      &lt;in-stock&gt;144&lt;/in-stock&gt;
  JSON:
      "in-stock": 144,
  HTML:
      &lt;div class="line"&gt;
        &lt;div class="padding"&gt;   &lt;/div&gt;
        &lt;div class="label"&gt;In stock&lt;/div&gt;
        &lt;div class="decoration"&gt;:&lt;/div&gt;
        &lt;div class="padding"&gt; &lt;/div&gt;
        &lt;div class="data" data-tag="in-stock"&gt;144&lt;/div&gt;
      &lt;/div&gt;
</pre></div><p class=Pp>Clearly HTML wins the verbosity award, and this output does not include <code class=Dv>XOF_XPATH</code> or <code class=Dv>XOF_INFO</code> data, which would expand the penultimate line to:</p><div class="Bd Pp Bd-indent"><pre>
       &lt;div class="data" data-tag="in-stock"
          data-xpath="/top/data/item/in-stock"
          data-type="number"
          data-help="Number of items in stock"&gt;144&lt;/div&gt;
</pre></div></section><section class=Sh><h2 class=Sh id=WHAT_MAKES_A_GOOD_FIELD_NAME?><a class=permalink href=#WHAT_MAKES_A_GOOD_FIELD_NAME?>WHAT MAKES A GOOD FIELD NAME?</a></h2> To make useful, consistent field names, follow these guidelines: <section class=Ss><h2 class=Ss id=Use_lower_case,_even_for_TLAs><a class=permalink href=#Use_lower_case,_even_for_TLAs>Use lower case, even for TLAs</a></h2> Lower case is more civilized. Even TLAs should be lower case to avoid scenarios where the differences between "XPath" and "Xpath" drive your users crazy. Using "xpath" is simpler and better. </section><section class=Ss><h2 class=Ss id=Use_hyphens,_not_underscores><a class=permalink href=#Use_hyphens,_not_underscores>Use hyphens, not underscores</a></h2> Use of hyphens is traditional in XML, and the <code class=Dv>XOF_UNDERSCORES</code> flag can be used to generate underscores in JSON, if desired. But the raw field name should use hyphens. </section><section class=Ss><h2 class=Ss id=Use_full_words><a class=permalink href=#Use_full_words>Use full words</a></h2> Do not abbreviate especially when the abbreviation is not obvious or not widely used. Use "data-size", not "dsz" or "dsize". Use "interface" instead of "ifname", "if-name", "iface", "if", or "intf". </section><section class=Ss><h2 class=Ss id=Use__verb__-_units_><a class=permalink href=#Use__verb__-_units_>Use &lt;verb&gt;-&lt;units&gt;</a></h2> Using the form &lt;verb&gt;-&lt;units&gt; or &lt;verb&gt;-&lt;classifier&gt;-&lt;units&gt; helps in making consistent, useful names, avoiding the situation where one app uses "sent-packet" and another "packets-sent" and another "packets-we-have-sent". The &lt;units&gt; can be dropped when it is obvious, as can obvious words in the classification. Use "receive-after-window-packets" instead of "received-packets-of-data-after-window". </section><section class=Ss><h2 class=Ss id=Reuse_existing_field_names><a class=permalink href=#Reuse_existing_field_names>Reuse existing field names</a></h2> Nothing is worse than writing expressions like: <div class="Bd Pp Bd-indent"><pre>
    if ($src1/process[pid == $pid]/name ==
        $src2/proc-table/proc/p[process-id == $pid]/proc-name) {
        ...
    }
</pre></div><p class=Pp>Find someone else who is expressing similar data and follow their fields and hierarchy. Remember the quote is not “Consistency is the hobgoblin of little minds” but “A foolish consistency is the hobgoblin of little minds”.</p></section><section class=Ss><h2 class=Ss id=Think_about_your_users><a class=permalink href=#Think_about_your_users>Think about your users</a></h2> Have empathy for your users, choosing clear and useful fields that contain clear and useful data. You may need to augment the display content with <a class=Xr href=xo_attr.3.html>xo_attr(3)</a> calls or "{e:}" fields to make the data useful. </section><section class=Ss><h2 class=Ss id=Do_not_use_an_arbitrary_number_postfix><a class=permalink href=#Do_not_use_an_arbitrary_number_postfix>Do not use an arbitrary number postfix</a></h2> What does "errors2" mean? No one will know. "errors-after-restart" would be a better choice. Think of your users, and think of the future. If you make "errors2", the next guy will happily make "errors3" and before you know it, someone will be asking what is the difference between errors37 and errors63. </section><section class=Ss><h2 class=Ss id=Be_consistent,_uniform,_unsurprising,_and_predictable><a class=permalink href=#Be_consistent,_uniform,_unsurprising,_and_predictable>Be consistent, uniform, unsurprising, and predictable</a></h2> Think of your field vocabulary as an API. You want it useful, expressive, meaningful, direct, and obvious. You want the client application's programmer to move between without the need to understand a variety of opinions on how fields are named. They should see the system as a single cohesive whole, not a sack of cats. <p class=Pp>Field names constitute the means by which client programmers interact with our system. By choosing wise names now, you are making their lives better.</p><p class=Pp>After using <a class=Xr href=xolint.1.html>xolint(1)</a> to find errors in your field descriptors, use “xolint -V” to spell check your field names and to detect different names for the same data. “dropped-short” and “dropped-too-short” are both reasonable names, but using them both will lead users to ask the difference between the two fields. If there is no difference, use only one of the field names. If there is a difference, change the names to make that difference more obvious.</p></section></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=libxo.3.html>libxo(3)</a>, <a class=Xr href=xolint.1.html>xolint(1)</a>, <a class=Xr href=xo_emit.3.html>xo_emit(3)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>libxo</code> library first appeared in <span class=Ux>FreeBSD 11.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><code class=Nm>libxo</code> was written by <span class=An>Phil Shafer</span> &lt;<a class=Mt href=mailto:phil@freebsd.org>phil@freebsd.org</a>&gt;. <p class=Pp></p></section></div><table class=foot><tr><td class=foot-date>December 4, 2014</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>