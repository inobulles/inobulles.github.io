<!DOCTYPE html>
<html><head><meta charset=utf-8><title>scr_dump(5)</title><keywords content=man,scr_dump></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>scr_dump(5)</h1><table class=head><tr><td class=head-ltitle>scr_dump(5)</td><td class=head-vol>FreeBSD File Formats Manual</td><td class=head-rtitle>scr_dump(5)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2> scr_dump - format of curses screen-dumps. </section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><b>scr_dump</b></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The curses library provides applications with the ability to write the contents of a window to an external file using <b>scr_dump</b> or <b>putwin</b>, and read it back using <b>scr_restore</b> or <b>getwin</b>. <p class=Pp>The <b>putwin</b> and <b>getwin</b> functions do the work; while <b>scr_dump</b> and <b>scr_restore</b> conveniently save and restore the whole screen, i.e., <b>stdscr</b>.</p><section class=Ss><h2 class=Ss id=ncurses6><a class=permalink href=#ncurses6>ncurses6</a></h2> A longstanding implementation of screen-dump was revised with ncurses6 to remedy problems with the earlier approach: <dl class=Bl-tag><dt>•</dt><dd>A “magic number” is written to the beginning of the dump file, allowing applications (such as <b>file</b>(1)) to recognize curses dump files.</dd></dl><dl class=Bl-tag><dt></dt><dd>Because ncurses6 uses a new format, that requires a new magic number was unused by other applications. This 16-bit number was unused: <p class=Pp><br></p><pre>
0x8888 (octal “\210\210”)
    </pre><br></dd><dt></dt><dd>but to be more certain, this 32-bit number was chosen: <p class=Pp><br></p><pre>
0x88888888 (octal “\210\210\210\210”)
    </pre><br></dd><dt></dt><dd>This is the pattern submitted to the maintainers of the <b>file</b> program: <p class=Pp><br></p><pre>
#
# ncurses5 (and before) did not use a magic number,
# making screen dumps "data".
#
# ncurses6 (2015) uses this format, ignoring byte-order
0    string    \210\210\210\210ncurses    ncurses6 screen image
#
    </pre><br></dd></dl><dl class=Bl-tag><dt>•</dt><dd>The screen dumps are written in textual form, so that internal data sizes are not directly related to the dump-format, and enabling the library to read dumps from either narrow- or wide-character- configurations.</dd></dl><dl class=Bl-tag><dt></dt><dd>The <i>narrow</i> library configuration holds characters and video attributes in a 32-bit <b>chtype</b>, while the <i>wide-character</i> library stores this information in the <b>cchar_t</b> structure, which is much larger than 32-bits.</dd></dl><ul class=Bl-bullet><li>It is possible to read a screen dump into a terminal with a different screen-size, because the library truncates or fills the screen as necessary.</li><li>The ncurses6 <b>getwin</b> reads the legacy screen dumps from ncurses5.</li></ul></section><section class=Ss><h2 class=Ss id=ncurses5_(legacy)><a class=permalink href=#ncurses5_(legacy)>ncurses5 (legacy)</a></h2> The screen-dump feature was added to ncurses in June 1995. While there were fixes and improvements in succeeding years, the basic scheme was unchanged: <ul class=Bl-bullet><li>The <b>WINDOW</b> structure was written in binary form.</li><li>The <b>WINDOW</b> structure refers to lines of data, which were written as an array of binary data following the <b>WINDOW</b>.</li><li>When <b>getwin</b> restored the window, it would keep track of offsets into the array of line-data and adjust the <b>WINDOW</b> structure which was read back into memory.</li></ul><p class=Pp>This is similar to Unix SystemV, but does not write a “magic number” to identify the file format.</p></section></section><section class=Sh><h2 class=Sh id=PORTABILITY><a class=permalink href=#PORTABILITY>PORTABILITY</a></h2> There is no standard format for <b>putwin</b>. This section gives a brief description of the existing formats. <section class=Ss><h2 class=Ss id=X/Open_Curses><a class=permalink href=#X/Open_Curses>X/Open Curses</a></h2> Refer to <i>X/Open Curses, Issue 7</i> (2009). <p class=Pp>X/Open's documentation for <i>enhanced curses</i> says only:</p><div class=Bd-indent><p class=Pp>The <i>getwin( ) </i>function reads window-related data stored in the file by <i>putwin( )</i>. The function then creates and initializes a new window using that data.</p><p class=Pp>The <i>putwin( )</i> function writes all data associated with <i>win</i> into the <i>stdio</i> stream to which <i>filep</i> points, using an <b>unspecified format</b>. This information can be retrieved later using <i>getwin( )</i>.</p></div><p class=Pp>In the mid-1990s when the X/Open Curses document was written, there were still systems using older, less capable curses libraries (aside from the BSD curses library which was not relevant to X/Open because it did not meet the criteria for <i>base curses</i>). The document explained the term “enhanced” as follows:</p><div class=Bd-indent><dl class=Bl-tag><dt>•</dt><dd>Shading is used to identify <i>X/Open Enhanced Curses</i> material, relating to interfaces included to provide enhanced capabilities for applications originally written to be compiled on systems based on the UNIX operating system. Therefore, the features described may not be present on systems that conform to <b>XPG4 or to earlier XPG releases</b>. The relevant reference pages may provide additional or more specific portability warnings about use of the material.</dd></dl></div><p class=Pp>In the foregoing, emphasis was added to <b>unspecified format</b> and to <b>XPG4 or to earlier XPG releases</b>, for clarity.</p></section><section class=Ss><h2 class=Ss id=Unix_SystemV><a class=permalink href=#Unix_SystemV>Unix SystemV</a></h2> Unix SystemV curses identified the file format by writing a “magic number” at the beginning of the dump. The <b>WINDOW</b> data and the lines of text follow, all in binary form. <p class=Pp>The Solaris curses source has these definitions:</p><p class=Pp><br></p><pre>
/* terminfo magic number */
#define MAGNUM  0432
/* curses screen dump magic number */
#define SVR2_DUMP_MAGIC_NUMBER  0433
#define SVR3_DUMP_MAGIC_NUMBER  0434
</pre><br><p class=Pp>That is, the feature was likely introduced in SVr2 (1984), and improved in SVr3 (1987). The Solaris curses source has no magic number for SVr4 (1989). Other operating systems (AIX and HPUX) use a magic number which would correspond to this definition:</p><p class=Pp><br></p><pre>
/* curses screen dump magic number */
#define SVR4_DUMP_MAGIC_NUMBER  0435
</pre><br><p class=Pp>That octal number in bytes is 001, 035. Because most Unix vendors use big-endian hardware, the magic number is written with the high-order byte first, e.g.,</p><p class=Pp><br></p><pre>
 01 35
</pre><br><p class=Pp>After the magic number, the <b>WINDOW</b> structure and line-data are written in binary format. While the magic number used by the Unix systems can be seen using <b>od</b>(1), none of the Unix systems documents the format used for screen-dumps.</p><p class=Pp>The Unix systems do not use identical formats. While collecting information for for this manual page, the <i>savescreen</i> test-program produced dumps of different size (all on 64-bit hardware, on 40x80 screens):</p><ul class=Bl-bullet><li>AIX (51817 bytes)</li><li>HPUX (90093 bytes)</li><li>Solaris 10 (13273 bytes)</li><li>ncurses5 (12888 bytes)</li></ul></section><section class=Ss><h2 class=Ss id=Solaris><a class=permalink href=#Solaris>Solaris</a></h2> As noted above, Solaris curses has no magic number corresponding to SVr4 curses. This is odd since Solaris was the first operating system to pass the SVr4 guidelines. Solaris has two versions of curses: <ul class=Bl-bullet><li>The default curses library uses the SVr3 magic number.</li><li>There is an alternate curses library in <b>/usr/xpg4</b>. This uses a textual format with no magic number.</li></ul><dl class=Bl-tag><dt></dt><dd>According to the copyright notice, the <i>xpg4</i> Solaris curses library was developed by MKS (Mortice Kern Systems) from 1990 to 1995.</dd><dt></dt><dd>Like ncurses6, there is a file-header with parameters. Unlike ncurses6, the contents of the window are written piecemeal, with coordinates and attributes for each chunk of text rather than writing the whole window from top to bottom.</dd></dl></section><section class=Ss><h2 class=Ss id=PDCurses><a class=permalink href=#PDCurses>PDCurses</a></h2> PDCurses added support for screen dumps in version 2.7 (2005). Like Unix SystemV and ncurses5, it writes the <b>WINDOW</b> structure in binary, but begins the file with its three-byte identifier “PDC”, followed by a one-byte version, e.g., <p class=Pp><br></p><pre>
	“PDC\001”
</pre><br></section><section class=Ss><h2 class=Ss id=NetBSD><a class=permalink href=#NetBSD>NetBSD</a></h2> As of April 2017, NetBSD curses does not support <b>scr_dump</b> and <b>scr_restore</b> (or <b>scr_init</b>, <b>scr_set</b>), although it has <b>putwin</b> and <b>getwin</b>. <p class=Pp>Like ncurses5, NetBSD <b>putwin</b> does not identify its dumps with a useful magic number. It writes</p><ul class=Bl-bullet><li>the curses shared library major and minor versions as the first two bytes (e.g., 7 and 1),</li><li>followed by a binary dump of the <b>WINDOW</b>,</li><li>some data for wide-characters referenced by the <b>WINDOW</b> structure, and</li><li>finally, lines as done by other implementations.</li></ul></section></section><section class=Sh><h2 class=Sh id=EXAMPLE><a class=permalink href=#EXAMPLE>EXAMPLE</a></h2> Given a simple program which writes text to the screen (and for the sake of example, limiting the screen-size to 10x20): <p class=Pp><br></p><pre>
#include &lt;curses.h&gt;
int
main(void)
{
    putenv("LINES=10");
    putenv("COLUMNS=20");
    initscr();
    start_color();
    init_pair(1, COLOR_WHITE, COLOR_BLUE);
    init_pair(2, COLOR_RED, COLOR_BLACK);
    bkgd(COLOR_PAIR(1));
    move(4, 5);
    attron(A_BOLD);
    addstr("Hello");
    move(5, 5);
    attroff(A_BOLD);
    attrset(A_REVERSE | COLOR_PAIR(2));
    addstr("World!");
    refresh();
    scr_dump("foo.out");
    endwin();
    return 0;
}
</pre><br><p class=Pp>When run using ncurses6, the output looks like this:</p><p class=Pp><br></p><pre>
\210\210\210\210ncurses 6.0.20170415
_cury=5
_curx=11
_maxy=9
_maxx=19
_flags=14
_attrs=\{REVERSE|C2}
flag=_idcok
_delay=-1
_regbottom=9
_bkgrnd=\{NORMAL|C1}\s
rows:
1:\{NORMAL|C1}\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
2:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
3:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
4:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
5:\s\s\s\s\s\{BOLD}Hello\{NORMAL}\s\s\s\s\s\s\s\s\s\s
6:\s\s\s\s\s\{REVERSE|C2}World!\{NORMAL|C1}\s\s\s\s\s\s\s\s\s
7:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
8:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
9:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
10:\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s\s
</pre><br><p class=Pp>The first four octal escapes are actually nonprinting characters, while the remainder of the file is printable text. You may notice:</p><ul class=Bl-bullet><li>The actual color pair values are not written to the file.</li><li>All characters are shown in printable form; spaces are “\s” to ensure they are not overlooked.</li><li>Attributes are written in escaped curly braces, e.g., “\{BOLD}”, and may include a color-pair (C1 or C2 in this example).</li><li>The parameters in the header are written out only if they are nonzero. When reading back, order does not matter.</li></ul><p class=Pp>Running the same program with Solaris <i>xpg4</i> curses gives this dump:</p><p class=Pp><br></p><pre>
MAX=10,20
BEG=0,0
SCROLL=0,10
VMIN=1
VTIME=0
FLAGS=0x1000
FG=0,0
BG=0,0, 
0,0,0,1,
0,19,0,0, 
1,0,0,1,
1,19,0,0, 
2,0,0,1,
2,19,0,0, 
3,0,0,1,
3,19,0,0, 
4,0,0,1,
4,5,0x20,0,Hello
4,10,0,1,
4,19,0,0, 
5,0,0,1,
5,5,0x4,2,World!
5,11,0,1,
5,19,0,0, 
6,0,0,1,
6,19,0,0, 
7,0,0,1,
7,19,0,0, 
8,0,0,1,
8,19,0,0, 
9,0,0,1,
9,19,0,0, 
CUR=11,5
</pre><br><p class=Pp>Solaris <b>getwin</b> requires that all parameters are present, and in the same order. The <i>xpg4</i> curses library does not know about the <b>bce</b> (back color erase) capability, and does not color the window background.</p><p class=Pp>On the other hand, the SVr4 curses library does know about the background color. However, its screen dumps are in binary. Here is the corresponding dump (using “od -t x1”):</p><p class=Pp><br></p><pre>
0000000 1c 01 c3 d6 f3 58 05 00 0b 00 0a 00 14 00 00 00
0000020 00 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00
0000040 00 00 b8 1a 06 08 cc 1a 06 08 00 00 09 00 10 00
0000060 00 00 00 80 00 00 20 00 00 00 ff ff ff ff 00 00
0000100 ff ff ff ff 00 00 00 00 20 80 00 00 20 80 00 00
0000120 20 80 00 00 20 80 00 00 20 80 00 00 20 80 00 00
*
0000620 20 80 00 00 20 80 00 00 20 80 00 00 48 80 00 04
0000640 65 80 00 04 6c 80 00 04 6c 80 00 04 6f 80 00 04
0000660 20 80 00 00 20 80 00 00 20 80 00 00 20 80 00 00
*
0000740 20 80 00 00 20 80 00 00 20 80 00 00 57 00 81 00
0000760 6f 00 81 00 72 00 81 00 6c 00 81 00 64 00 81 00
0001000 21 00 81 00 20 80 00 00 20 80 00 00 20 80 00 00
0001020 20 80 00 00 20 80 00 00 20 80 00 00 20 80 00 00
*
0001540 20 80 00 00 20 80 00 00 00 00 f6 d1 01 00 f6 d1
0001560 08 00 00 00 40 00 00 00 00 00 00 00 00 00 00 07
0001600 00 04 00 01 00 01 00 00 00 01 00 00 00 00 00 00
0001620 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
*
0002371
</pre><br></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><b>curs_scr_dump</b>(3X), <b>curs_util</b>(3X). </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> Thomas E. Dickey <br> extended screen-dump format for ncurses 6.0 (2015) <p class=Pp>Eric S. Raymond <br> screen dump feature in ncurses 1.9.2d (1995)</p></section></div><table class=foot><tr><td class=foot-date></td><td class=foot-os></td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>