<!DOCTYPE html>
<html><head><meta charset=utf-8><title>ypserv(8)</title><keywords content=man,ypserv></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>ypserv(8)</h1><table class=head><tr><td class=head-ltitle>YPSERV(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>YPSERV(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>ypserv</code> — <div class=Nd>NIS database server</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>ypserv</code></td><td>[<code class=Fl>-n</code>] [<code class=Fl>-d</code>] [<code class=Fl>-P</code><var class=Ar>port</var>] [<code class=Fl>-p</code><var class=Ar>path</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> NIS is an RPC-based service designed to allow a number of UNIX-based machines to share a common set of configuration files. Rather than requiring a system administrator to update several copies of files such as <span class=Pa>/etc/hosts</span>, <span class=Pa>/etc/passwd</span> and <span class=Pa>/etc/group</span>, which tend to require frequent changes in most environments, NIS allows groups of computers to share one set of data which can be updated from a single location. <p class=Pp>The <code class=Nm>ypserv</code> utility is the server that distributes NIS databases to client systems within an NIS <i class=Em>domain</i>. Each client in an NIS domain must have its domainname set to one of the domains served by <code class=Nm>ypserv</code> using the <a class=Xr href=domainname.1.html>domainname(1)</a> command. The clients must also run <a class=Xr href=ypbind.8.html>ypbind(8)</a> in order to attach to a particular server, since it is possible to have several servers within a single NIS domain.</p><p class=Pp>The databases distributed by <code class=Nm>ypserv</code> are stored in <span class=Pa>/var/yp/[domainname]</span> where <span class=Pa>domainname</span> is the name of the domain being served. There can be several such directories with different domainnames, and you need only one <code class=Nm>ypserv</code> daemon to handle them all.</p><p class=Pp>The databases, or <span class=Pa>maps</span> as they are often called, are created by <span class=Pa>/var/yp/Makefile</span> using several system files as source. The database files are in <a class=Xr href=db.3.html>db(3)</a> format to help speed retrieval when there are many records involved. In <span class=Ux>FreeBSD</span>, the maps are always readable and writable only by root for security reasons. Technically this is only necessary for the password maps, but since the data in the other maps can be found in other world-readable files anyway, it does not hurt and it is considered good general practice.</p><p class=Pp>The <code class=Nm>ypserv</code> utility is started by <span class=Pa>/etc/rc.d/ypserv</span> if it has been enabled in <span class=Pa>/etc/rc.conf</span>.</p></section><section class=Sh><h2 class=Sh id=SPECIAL_FEATURES><a class=permalink href=#SPECIAL_FEATURES>SPECIAL FEATURES</a></h2> There are some problems associated with distributing a <span class=Ux>FreeBSD</span> password database via NIS: <span class=Ux>FreeBSD</span> normally only stores encrypted passwords in <span class=Pa>/etc/master.passwd</span>, which is readable and writable only by root. By turning this file into an NIS map, this security feature would be completely defeated. <p class=Pp>To make up for this, the <span class=Ux>FreeBSD</span> version of <code class=Nm>ypserv</code> handles the <span class=Pa>master.passwd.byname</span> and <span class=Pa>master.passwd.byuid</span> maps in a special way. When the server receives a request to access either of these two maps (or in fact either of the <span class=Pa>shadow.byname</span> or <span class=Pa>shadow.byuid</span> maps), it will check the TCP port from which the request originated and return an error if the port number is greater than 1023. Since only the superuser is allowed to bind to TCP ports with values less than 1024, the server can use this test to determine whether or not the access request came from a privileged user. Any requests made by non-privileged users are therefore rejected.</p><p class=Pp>Furthermore, the <a class=Xr href=getpwent.3.html>getpwent(3)</a> routines in the <span class=Ux>FreeBSD</span> standard C library will only attempt to retrieve data from the <span class=Pa>master.passwd.byname</span> and <span class=Pa>master.passwd.byuid</span> maps for the superuser: if a normal user calls any of these functions, the standard <span class=Pa>passwd.byname</span> and <span class=Pa>passwd.byuid</span> maps will be accessed instead. The latter two maps are constructed by <span class=Pa>/var/yp/Makefile</span> by parsing the <span class=Pa>master.passwd</span> file and stripping out the password fields, and are therefore safe to pass on to unprivileged users. In this way, the shadow password aspect of the protected <span class=Pa>master.passwd</span> database is maintained through NIS.</p></section><section class=Sh><h2 class=Sh id=NOTES><a class=permalink href=#NOTES>NOTES</a></h2><section class=Ss><h2 class=Ss id=Setting_Up_Master_and_Slave_Servers><a class=permalink href=#Setting_Up_Master_and_Slave_Servers>Setting Up Master and Slave Servers</a></h2><a class=Xr href=ypinit.8.html>ypinit(8)</a> is a convenient script that will help setup master and slave NIS servers. </section><section class=Ss><h2 class=Ss id=Limitations><a class=permalink href=#Limitations>Limitations</a></h2> There are two problems inherent with password shadowing in NIS that users should be aware of: <ol class="Bl-enum Bd-indent"><li>The ‘TCP port less than 1024’ test is trivial to defeat for users with unrestricted access to machines on your network (even those machines which do not run UNIX-based operating systems).</li><li>If you plan to use a <span class=Ux>FreeBSD</span> system to serve <span class=No>non-</span><span class=Ux>FreeBSD</span> clients that have no support for password shadowing (which is most of them), you will have to disable the password shadowing entirely by uncommenting the <i class=Em>UNSECURE=True</i> entry in <span class=Pa>/var/yp/Makefile</span>. This will cause the standard <span class=Pa>passwd.byname</span> and <span class=Pa>passwd.byuid</span> maps to be generated with valid encrypted password fields, which is necessary in order for <span class=No>non-</span><span class=Ux>FreeBSD</span> clients to perform user authentication through NIS.</li></ol></section><section class=Ss><h2 class=Ss id=Security><a class=permalink href=#Security>Security</a></h2> In general, any remote user can issue an RPC to <code class=Nm>ypserv</code> and retrieve the contents of your NIS maps, provided the remote user knows your domain name. To prevent such unauthorized transactions, <code class=Nm>ypserv</code> supports a feature called <span class=Pa>securenets</span> which can be used to restrict access to a given set of hosts. At startup, <code class=Nm>ypserv</code> will attempt to load the securenets information from a file called <span class=Pa>/var/yp/securenets</span>. (Note that this path varies depending on the path specified with the <code class=Fl>-p</code> option, which is explained below.) This file contains entries that consist of a network specification and a network mask separated by white space. Lines starting with “#” are considered to be comments. A sample securenets file might look like this: <div class="Bd Pp Bd-indent"><pre>
# allow connections from local host -- mandatory
127.0.0.1     255.255.255.255
# allow connections from any host
# on the 192.168.128.0 network
192.168.128.0 255.255.255.0
# allow connections from any host
# between 10.0.0.0 to 10.0.15.255
10.0.0.0      255.255.240.0
</pre></div><p class=Pp>If <code class=Nm>ypserv</code> receives a request from an address that matches one of these rules, it will process the request normally. If the address fails to match a rule, the request will be ignored and a warning message will be logged. If the <span class=Pa>/var/yp/securenets</span> file does not exist, <code class=Nm>ypserv</code> will allow connections from any host.</p><p class=Pp>The <code class=Nm>ypserv</code> utility also has support for Wietse Venema's <i class=Em>tcpwrapper</i> package. This allows the administrator to use the tcpwrapper configuration files (<span class=Pa>/etc/hosts.allow</span> and <span class=Pa>/etc/hosts.deny</span>) for access control instead of <span class=Pa>/var/yp/securenets</span>.</p><p class=Pp>Note: while both of these access control mechanisms provide some security, they, like the privileged port test, are both vulnerable to “IP spoofing” attacks.</p></section><section class=Ss><h2 class=Ss id=NIS_v1_compatibility><a class=permalink href=#NIS_v1_compatibility>NIS v1 compatibility</a></h2> This version of <code class=Nm>ypserv</code> has some support for serving NIS v1 clients. The <span class=Ux>FreeBSD</span> NIS implementation only uses the NIS v2 protocol, however other implementations include support for the v1 protocol for backwards compatibility with older systems. The <a class=Xr href=ypbind.8.html>ypbind(8)</a> daemons supplied with these systems will try to establish a binding to an NIS v1 server even though they may never actually need it (and they may persist in broadcasting in search of one even after they receive a response from a v2 server). Note that while support for normal client calls is provided, this version of <code class=Nm>ypserv</code> does not handle v1 map transfer requests; consequently, it cannot be used as a master or slave in conjunction with older NIS servers that only support the v1 protocol. Fortunately, there probably are not any such servers still in use today. </section><section class=Ss><h2 class=Ss id=NIS_servers_that_are_also_NIS_clients><a class=permalink href=#NIS_servers_that_are_also_NIS_clients>NIS servers that are also NIS clients</a></h2> Care must be taken when running <code class=Nm>ypserv</code> in a multi-server domain where the server machines are also NIS clients. It is generally a good idea to force the servers to bind to themselves rather than allowing them to broadcast bind requests and possibly become bound to each other: strange failure modes can result if one server goes down and others are dependent upon on it. (Eventually all the clients will time out and attempt to bind to other servers, but the delay involved can be considerable and the failure mode is still present since the servers might bind to each other all over again). <p class=Pp>Refer to the <a class=Xr href=ypbind.8.html>ypbind(8)</a> man page for details on how to force it to bind to a particular server.</p></section></section><section class=Sh><h2 class=Sh id=OPTIONS><a class=permalink href=#OPTIONS>OPTIONS</a></h2> The following options are supported by <code class=Nm>ypserv</code>: <dl class=Bl-tag><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>This option affects the way <code class=Nm>ypserv</code> handles yp_match requests for the <span class=Pa>hosts.byname</span> and <span class=Pa>hosts.byaddress</span> maps. By default, if <code class=Nm>ypserv</code> cannot find an entry for a given host in its hosts maps, it will return an error and perform no further processing. With the <code class=Fl>-n</code> flag, <code class=Nm>ypserv</code> will go one step further: rather than giving up immediately, it will try to resolve the hostname or address using a DNS nameserver query. If the query is successful, <code class=Nm>ypserv</code> will construct a fake database record and return it to the client, thereby making it seem as though the client's yp_match request succeeded. <p class=Pp>This feature is provided for compatibility with SunOS 4.1.x, which has brain-damaged resolver functions in its standard C library that depend on NIS for hostname and address resolution. The <span class=Ux>FreeBSD</span> resolver can be configured to do DNS queries directly, therefore it is not necessary to enable this option when serving only <span class=Ux>FreeBSD</span> NIS clients.</p></dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Cause the server to run in debugging mode. Normally, <code class=Nm>ypserv</code> reports only unusual errors (access violations, file access failures) using the <a class=Xr href=syslog.3.html>syslog(3)</a> facility. In debug mode, the server does not background itself and prints extra status messages to stderr for each request that it receives. Also, while running in debug mode, <code class=Nm>ypserv</code> will not spawn any additional subprocesses as it normally does when handling yp_all requests or doing DNS lookups. (These actions often take a fair amount of time to complete and are therefore handled in subprocesses, allowing the parent server process to go on handling other requests.) This makes it easier to trace the server with a debugging tool.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a><var class=Ar>addr</var></dt><dd>Specify a specific address to bind to for requests. This option may be specified multiple times. If no <code class=Fl>-h</code> option is specified, <code class=Nm>ypserv</code> will bind to default passive address (e.g. INADDR_ANY for IPv4) for each transport.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>port</var></dt><dd>Force ypserv to bind to a specific TCP/UDP port, rather than selecting its own.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>path</var></dt><dd>Normally, <code class=Nm>ypserv</code> assumes that all NIS maps are stored under <span class=Pa>/var/yp</span>. The <code class=Fl>-p</code> flag may be used to specify an alternate NIS root path, allowing the system administrator to move the map files to a different place within the file system.</dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/var/yp/[domainname]/[maps]</span></dt><dd>the NIS maps</dd><dt><span class=Pa>/etc/nsswitch.conf</span></dt><dd>name switch configuration file</dd><dt><span class=Pa>/var/yp/securenets</span></dt><dd>host access control file</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=ypcat.1.html>ypcat(1)</a>, <a class=Xr href=db.3.html>db(3)</a>, <a class=Xr href=hosts_access.5.html>hosts_access(5)</a>, <a class=Xr href=rpc.yppasswdd.8.html>rpc.yppasswdd(8)</a>, <a class=Xr href=yp.8.html>yp(8)</a>, <a class=Xr href=ypbind.8.html>ypbind(8)</a>, <a class=Xr href=ypinit.8.html>ypinit(8)</a>, <a class=Xr href=yppush.8.html>yppush(8)</a>, <a class=Xr href=ypxfr.8.html>ypxfr(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> This version of <code class=Nm>ypserv</code> first appeared in <span class=Ux>FreeBSD 2.2</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Bill Paul</span> &lt;<a class=Mt href=mailto:wpaul@ctr.columbia.edu>wpaul@ctr.columbia.edu</a>&gt; </section></div><table class=foot><tr><td class=foot-date>December 13, 2009</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>