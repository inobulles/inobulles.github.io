<!DOCTYPE html>
<html><head><meta charset=utf-8><title>zpool(8)</title><keywords content=man,zpool></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>zpool(8)</h1><table class=head><tr><td class=head-ltitle>ZPOOL(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>ZPOOL(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>zpool</code> — <div class=Nd>configures ZFS storage pools</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>zpool</code></td><td>[<code class=Fl>-?</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>add</code> [<code class=Fl>-fgLnP</code>] <var class=Ar>pool vdev ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>attach</code> [<code class=Fl>-f</code>] <var class=Ar>pool device new_device</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>checkpoint</code> [<code class=Fl>-d,</code><code class=Fl>--discard</code>] <var class=Ar>pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>clear</code> [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <var class=Ar>pool</var> [<var class=Ar>device</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>create</code> [<code class=Fl>-fnd</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-O</code><var class=Ar>file-system-property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-m</code><var class=Ar>mountpoint</var>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-t</code><var class=Ar>tempname</var>] <var class=Ar>pool vdev ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>destroy</code> [<code class=Fl>-f</code>] <var class=Ar>pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>detach</code><var class=Ar>pool device</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>export</code> [<code class=Fl>-f</code>] <var class=Ar>pool ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>get</code> [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,<var class=Ar>...</var>]] <var class=Ar>all</var> | <var class=Ar>property</var>[,<var class=Ar>...</var>] <var class=Ar>pool ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>history</code> [<code class=Fl>-il</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>import</code> [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>import</code> [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>--rewind-to-checkpoint</code>] [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>] [<code class=Fl>-f</code>] [<code class=Fl>-m</code>] [<code class=Fl>-N</code>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <code class=Fl>-a</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>import</code> [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>--rewind-to-checkpoint</code>] [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>] [<code class=Fl>-f</code>] [<code class=Fl>-m</code>] [<code class=Fl>-N</code>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-t</code>] [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <var class=Ar>pool</var> | <var class=Ar>id</var> [<var class=Ar>newpool</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>initialize</code> [<code class=Fl>-cs</code>] <var class=Ar>pool</var> [<var class=Ar>device</var>...]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>iostat</code> [<code class=Fl>-v</code>] [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<code class=Fl>-gLP</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>inverval</var> [<var class=Ar>count</var>]]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>labelclear</code> [<code class=Fl>-f</code>] <var class=Ar>device</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>list</code> [<code class=Fl>-HgLpPv</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,<var class=Ar>...</var>]] [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>inverval</var> [<var class=Ar>count</var>]]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>offline</code> [<code class=Fl>-t</code>] <var class=Ar>pool device ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>online</code> [<code class=Fl>-e</code>] <var class=Ar>pool device ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>reguid</code><var class=Ar>pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>remove</code> [<code class=Fl>-np</code>] <var class=Ar>pool device ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>remove</code><code class=Fl>-s</code><var class=Ar>pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>reopen</code><var class=Ar>pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>replace</code> [<code class=Fl>-f</code>] <var class=Ar>pool device</var> [<var class=Ar>new_device</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>scrub</code> [<code class=Fl>-s</code> | <code class=Fl>-p</code>] <var class=Ar>pool ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value pool</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>split</code> [<code class=Fl>-gLnP</code>] [<code class=Fl>-R</code><var class=Ar>altroot</var>] [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>pool newpool</var> [<var class=Ar>device ...</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>status</code> [<code class=Fl>-DgLPvx</code>] [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>interval</var> [<var class=Ar>count</var>]]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>sync</code> [<var class=Ar>pool</var>]...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>upgrade</code> [<code class=Fl>-v</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zpool</code></td><td><code class=Cm>upgrade</code> [<code class=Fl>-V</code><var class=Ar>version</var>] <code class=Fl>-a</code> | <var class=Ar>pool ...</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>zpool</code> command configures ZFS storage pools. A storage pool is a collection of devices that provides physical storage and data replication for ZFS datasets. <p class=Pp>All datasets within a storage pool share the same space. See <a class=Xr href=zfs.8.html>zfs(8)</a> for information on managing datasets.</p><section class=Ss><h2 class=Ss id=Virtual_Devices_(vdevs)><a class=permalink href=#Virtual_Devices_(vdevs)>Virtual Devices (vdevs)</a></h2> A “virtual device” (<span class=No>vdev</span>) describes a single device or a collection of devices organized according to certain performance and fault characteristics. The following virtual devices are supported: <dl class=Bl-tag><dt><b class=Sy>disk</b></dt><dd>A block device, typically located under <span class=Pa>/dev</span>. ZFS can use individual slices or partitions, though the recommended mode of operation is to use whole disks. A disk can be specified by a full path to the device or the <a class=Xr href=geom.4.html>geom(4)</a> provider name. When given a whole disk, ZFS automatically labels the disk, if necessary.</dd><dt><b class=Sy>file</b></dt><dd>A regular file. The use of files as a backing store is strongly discouraged. It is designed primarily for experimental purposes, as the fault tolerance of a file is only as good the file system of which it is a part. A file must be specified by a full path.</dd><dt><b class=Sy>mirror</b></dt><dd>A mirror of two or more devices. Data is replicated in an identical fashion across all components of a mirror. A mirror with <i class=Em>N</i> disks of size <i class=Em>X</i> can hold <i class=Em>X</i> bytes and can withstand (<i class=Em>N-1</i>) devices failing before data integrity is compromised.</dd><dt><b class=Sy>raidz</b></dt><dd>(or <b class=Sy>raidz1 raidz2 raidz3</b>). A variation on <b class=Sy>RAID-5</b> that allows for better distribution of parity and eliminates the “<b class=Sy>RAID-5</b>” write hole (in which data and parity become inconsistent after a power loss). Data and parity is striped across all disks within a <span class=No>raidz</span> group. <p class=Pp>A <span class=No>raidz</span> group can have single-, double- , or triple parity, meaning that the <span class=No>raidz</span> group can sustain one, two, or three failures, respectively, without losing any data. The <b class=Sy>raidz1</b><span class=No>vdev</span> type specifies a single-parity <span class=No>raidz</span> group; the <b class=Sy>raidz2</b><span class=No>vdev</span> type specifies a double-parity <span class=No>raidz</span> group; and the <b class=Sy>raidz3</b><span class=No>vdev</span> type specifies a triple-parity <span class=No>raidz</span> group. The <b class=Sy>raidz</b><span class=No>vdev</span> type is an alias for <b class=Sy>raidz1</b>.</p><p class=Pp>A <span class=No>raidz</span> group with <i class=Em>N</i> disks of size <i class=Em>X</i> with <i class=Em>P</i> parity disks can hold approximately (<i class=Em>N-P</i>)*X bytes and can withstand <i class=Em>P</i> device(s) failing before data integrity is compromised. The minimum number of devices in a <span class=No>raidz</span> group is one more than the number of parity disks. The recommended number is between 3 and 9 to help increase performance.</p></dd><dt><b class=Sy>spare</b></dt><dd>A special <span class=No>pseudo-</span><span class=No>vdev</span> which keeps track of available hot spares for a pool. For more information, see the “<a class=Sx href=#Hot_Spares>Hot Spares</a>” section.</dd><dt><b class=Sy>log</b></dt><dd>A separate-intent log device. If more than one log device is specified, then writes are load-balanced between devices. Log devices can be mirrored. However, <span class=No>raidz</span><span class=No>vdev</span> types are not supported for the intent log. For more information, see the “<a class=Sx href=#Intent_Log>Intent Log</a>” section.</dd><dt><b class=Sy>dedup</b></dt><dd>A device dedicated solely for allocating dedup data. The redundancy of this device should match the redundancy of the other normal devices in the pool. If more than one dedup device is specified, then allocations are load-balanced between devices.</dd><dt><b class=Sy>special</b></dt><dd>A device dedicated solely for allocating various kinds of internal metadata, and optionally small file data. The redundancy of this device should match the redundancy of the other normal devices in the pool. If more than one special device is specified, then allocations are load-balanced between devices. <p class=Pp>For more information on special allocations, see the <a class=Sx href=#Special_Allocation_Class>Special Allocation Class</a> section.</p></dd><dt><b class=Sy>cache</b></dt><dd>A device used to cache storage pool data. A cache device cannot be configured as a mirror or raidz group. For more information, see the “<a class=Sx href=#Cache_Devices>Cache Devices</a>” section.</dd></dl><p class=Pp>Virtual devices cannot be nested, so a mirror or <span class=No>raidz</span> virtual device can only contain files or disks. Mirrors of mirrors (or other combinations) are not allowed.</p><p class=Pp>A pool can have any number of virtual devices at the top of the configuration (known as “root” <span class=No>vdev</span>s). Data is dynamically distributed across all top-level devices to balance data among devices. As new virtual devices are added, ZFS automatically places data on the newly available devices.</p><p class=Pp>Virtual devices are specified one at a time on the command line, separated by whitespace. The keywords “mirror” and “raidz” are used to distinguish where a group ends and another begins. For example, the following creates two root <span class=No>vdev</span>s, each a mirror of two disks:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create mypool mirror da0 da1 mirror da2 da3
</code>
</pre></div></section><section class=Ss><h2 class=Ss id=Device_Failure_and_Recovery><a class=permalink href=#Device_Failure_and_Recovery>Device Failure and Recovery</a></h2> ZFS supports a rich set of mechanisms for handling device failure and data corruption. All metadata and data is checksummed, and ZFS automatically repairs bad data from a good copy when corruption is detected. <p class=Pp>In order to take advantage of these features, a pool must make use of some form of redundancy, using either mirrored or <span class=No>raidz</span> groups. While ZFS supports running in a non-redundant configuration, where each root <span class=No>vdev</span> is simply a disk or file, this is strongly discouraged. A single case of bit corruption can render some or all of your data unavailable.</p><p class=Pp>A pool's health status is described by one of three states: online, degraded, or faulted. An online pool has all devices operating normally. A degraded pool is one in which one or more devices have failed, but the data is still available due to a redundant configuration. A faulted pool has corrupted metadata, or one or more faulted devices, and insufficient replicas to continue functioning.</p><p class=Pp>The health of the top-level <span class=No>vdev</span>, such as mirror or <span class=No>raidz</span> device, is potentially impacted by the state of its associated <span class=No>vdev</span>s, or component devices. A top-level <span class=No>vdev</span> or component device is in one of the following states:</p><dl class=Bl-tag><dt><b class=Sy>DEGRADED</b></dt><dd>One or more top-level <span class=No>vdev</span>s is in the degraded state because one or more component devices are offline. Sufficient replicas exist to continue functioning. <p class=Pp>One or more component devices is in the degraded or faulted state, but sufficient replicas exist to continue functioning. The underlying conditions are as follows:</p><ul class="Bl-bullet Bd-indent"><li>The number of checksum errors exceeds acceptable levels and the device is degraded as an indication that something may be wrong. ZFS continues to use the device as necessary.</li><li>The number of I/O errors exceeds acceptable levels. The device could not be marked as faulted because there are insufficient replicas to continue functioning.</li></ul></dd><dt><b class=Sy>FAULTED</b></dt><dd>One or more top-level <span class=No>vdev</span>s is in the faulted state because one or more component devices are offline. Insufficient replicas exist to continue functioning. <p class=Pp>One or more component devices is in the faulted state, and insufficient replicas exist to continue functioning. The underlying conditions are as follows:</p><ul class="Bl-bullet Bd-indent"><li>The device could be opened, but the contents did not match expected values.</li><li>The number of I/O errors exceeds acceptable levels and the device is faulted to prevent further use of the device.</li></ul></dd><dt><b class=Sy>OFFLINE</b></dt><dd>The device was explicitly taken offline by the “<code class=Nm>zpool</code><code class=Cm>offline</code>” command.</dd><dt><b class=Sy>ONLINE</b></dt><dd>The device is online and functioning.</dd><dt><b class=Sy>REMOVED</b></dt><dd>The device was physically removed while the system was running. Device removal detection is hardware-dependent and may not be supported on all platforms.</dd><dt><b class=Sy>UNAVAIL</b></dt><dd>The device could not be opened. If a pool is imported when a device was unavailable, then the device will be identified by a unique identifier instead of its path since the path was never correct in the first place.</dd></dl><p class=Pp>If a device is removed and later reattached to the system, ZFS attempts to put the device online automatically. Device attach detection is hardware-dependent and might not be supported on all platforms.</p></section><section class=Ss><h2 class=Ss id=Hot_Spares><a class=permalink href=#Hot_Spares>Hot Spares</a></h2> ZFS allows devices to be associated with pools as “hot spares”. These devices are not actively used in the pool, but when an active device fails, it is automatically replaced by a hot spare. To create a pool with hot spares, specify a “spare” <span class=No>vdev</span> with any number of devices. For example, <div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create pool mirror da0 da1 spare da2 da3
</code>
</pre></div><p class=Pp>Spares can be shared across multiple pools, and can be added with the “<code class=Nm>zpool</code><code class=Cm>add</code>” command and removed with the “<code class=Nm>zpool</code><code class=Cm>remove</code>” command. Once a spare replacement is initiated, a new "spare" <span class=No>vdev</span> is created within the configuration that will remain there until the original device is replaced. At this point, the hot spare becomes available again if another device fails.</p><p class=Pp>If a pool has a shared spare that is currently being used, the pool can not be exported since other pools may use this shared spare, which may lead to potential data corruption.</p><p class=Pp>Shared spares add some risk. If the pools are imported on different hosts, and both pools suffer a device failure at the same time, both could attempt to use the spare at the same time. This may not be detected, resulting in data corruption.</p><p class=Pp>An in-progress spare replacement can be cancelled by detaching the hot spare. If the original faulted device is detached, then the hot spare assumes its place in the configuration, and is removed from the spare list of all active pools.</p><p class=Pp>Spares cannot replace log devices.</p><p class=Pp>This feature requires a userland helper. FreeBSD provides <a class=Xr href=zfsd.8.html>zfsd(8)</a> for this purpose. It must be manually enabled by adding <var class=Va>zfsd_enable="YES"</var> to <span class=Pa>/etc/rc.conf</span>.</p></section><section class=Ss><h2 class=Ss id=Intent_Log><a class=permalink href=#Intent_Log>Intent Log</a></h2> The ZFS Intent Log (ZIL) satisfies POSIX requirements for synchronous transactions. For instance, databases often require their transactions to be on stable storage devices when returning from a system call. NFS and other applications can also use <a class=Xr href=fsync.2.html>fsync(2)</a> to ensure data stability. By default, the intent log is allocated from blocks within the main pool. However, it might be possible to get better performance using separate intent log devices such as NVRAM or a dedicated disk. For example: <div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create pool da0 da1 log da2
</code>
</pre></div><p class=Pp>Multiple log devices can also be specified, and they can be mirrored. See the <a class=Sx href=#EXAMPLES>EXAMPLES</a> section for an example of mirroring multiple log devices.</p><p class=Pp>Log devices can be added, replaced, attached, detached, imported and exported as part of the larger pool. Mirrored devices can be removed by specifying the top-level mirror vdev.</p></section><section class=Ss><h2 class=Ss id=Cache_devices><a class=permalink href=#Cache_devices>Cache devices</a></h2> Devices can be added to a storage pool as "cache devices." These devices provide an additional layer of caching between main memory and disk. For read-heavy workloads, where the working set size is much larger than what can be cached in main memory, using cache devices allow much more of this working set to be served from low latency media. Using cache devices provides the greatest performance improvement for random read-workloads of mostly static content. <p class=Pp>To create a pool with cache devices, specify a "cache" <span class=No>vdev</span> with any number of devices. For example:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create pool da0 da1 cache da2 da3
</code>
</pre></div><p class=Pp>Cache devices cannot be mirrored or part of a <span class=No>raidz</span> configuration. If a read error is encountered on a cache device, that read I/O is reissued to the original storage pool device, which might be part of a mirrored or <span class=No>raidz</span> configuration.</p><p class=Pp>The content of the cache devices is considered volatile, as is the case with other system caches.</p></section><section class=Ss><h2 class=Ss id=Pool_checkpoint><a class=permalink href=#Pool_checkpoint>Pool checkpoint</a></h2> Before starting critical procedures that include destructive actions (e.g <code class=Nm>zfs</code><code class=Cm>destroy</code> ), an administrator can checkpoint the pool's state and in the case of a mistake or failure, rewind the entire pool back to the checkpoint. Otherwise, the checkpoint can be discarded when the procedure has completed successfully. <p class=Pp>A pool checkpoint can be thought of as a pool-wide snapshot and should be used with care as it contains every part of the pool's state, from properties to vdev configuration. Thus, while a pool has a checkpoint certain operations are not allowed. Specifically, vdev removal/attach/detach, mirror splitting, and changing the pool's guid. Adding a new vdev is supported but in the case of a rewind it will have to be added again. Finally, users of this feature should keep in mind that scrubs in a pool that has a checkpoint do not repair checkpointed data.</p><p class=Pp>To create a checkpoint for a pool:</p><div class="Bd Pp"><pre>
# zpool checkpoint pool
</pre></div><p class=Pp>To later rewind to its checkpointed state, you need to first export it and then rewind it during import:</p><div class="Bd Pp"><pre>
# zpool export pool
# zpool import --rewind-to-checkpoint pool
</pre></div><p class=Pp>To discard the checkpoint from a pool:</p><div class="Bd Pp"><pre>
# zpool checkpoint -d pool
</pre></div><p class=Pp>Dataset reservations (controlled by the <code class=Nm>reservation</code> or <code class=Nm>refreservation</code> zfs properties) may be unenforceable while a checkpoint exists, because the checkpoint is allowed to consume the dataset's reservation. Finally, data that is part of the checkpoint but has been freed in the current state of the pool won't be scanned during a scrub.</p></section><section class=Ss><h2 class=Ss id=Special_Allocation_Class><a class=permalink href=#Special_Allocation_Class>Special Allocation Class</a></h2> The allocations in the special class are dedicated to specific block types. By default this includes all metadata, the indirect blocks of user data, and any dedup data. The class can also be provisioned to accept a limited percentage of small file data blocks. <p class=Pp>A pool must always have at least one general (non-specified) vdev before other devices can be assigned to the special class. If the special class becomes full, then allocations intended for it will spill back into the normal class.</p><p class=Pp>Dedup data can be excluded from the special class by setting the <b class=Sy>vfs.zfs.ddt_data_is_special</b> sysctl to false (0).</p><p class=Pp>Inclusion of small file blocks in the special class is opt-in. Each dataset can control the size of small file blocks allowed in the special class by setting the <b class=Sy>special_small_blocks</b> dataset property. It defaults to zero so you must opt-in by setting it to a non-zero value. See <a class=Xr href=zfs.1M.html>zfs(1M)</a> for more info on setting this property.</p></section><section class=Ss><h2 class=Ss id=Properties><a class=permalink href=#Properties>Properties</a></h2> Each pool has several properties associated with it. Some properties are read-only statistics while others are configurable and change the behavior of the pool. The following are read-only properties: <dl class=Bl-tag><dt><b class=Sy>allocated</b></dt><dd>Amount of storage space used within the pool.</dd><dt><b class=Sy>capacity</b></dt><dd>Percentage of pool space used. This property can also be referred to by its shortened column name, "cap".</dd><dt><b class=Sy>dedupratio</b></dt><dd>The deduplication ratio specified for a pool, expressed as a multiplier. For example, a <b class=Sy>dedupratio</b> value of 1.76 indicates that 1.76 units of data were stored but only 1 unit of disk space was actually consumed. See <a class=Xr href=zfs.8.html>zfs(8)</a> for a description of the deduplication feature.</dd><dt><b class=Sy>expandsize</b></dt><dd>Amount of uninitialized space within the pool or device that can be used to increase the total capacity of the pool. Uninitialized space consists of any space on an EFI labeled vdev which has not been brought online (i.e. zpool online -e). This space occurs when a LUN is dynamically expanded.</dd><dt><b class=Sy>fragmentation</b></dt><dd>The amount of fragmentation in the pool.</dd><dt><b class=Sy>free</b></dt><dd>Number of blocks within the pool that are not allocated.</dd><dt><b class=Sy>freeing</b></dt><dd>After a file system or snapshot is destroyed, the space it was using is returned to the pool asynchronously. <b class=Sy>freeing</b> is the amount of space remaining to be reclaimed. Over time <b class=Sy>freeing</b> will decrease while <b class=Sy>free</b> increases.</dd><dt><b class=Sy>guid</b></dt><dd>A unique identifier for the pool.</dd><dt><b class=Sy>load_guid</b></dt><dd>A unique identifier for the pool. Unlike the <b class=Sy>guid</b> property, this identifier is generated every time we load the pool (e.g. does not persist across imports/exports) and never changes while the pool is loaded (even if a <b class=Sy>reguid</b> operation takes place).</dd><dt><b class=Sy>health</b></dt><dd>The current health of the pool. Health can be “<b class=Sy>ONLINE</b>”, “<b class=Sy>DEGRADED</b>”, “<b class=Sy>FAULTED</b>”, “<b class=Sy>OFFLINE</b>”, “<b class=Sy>REMOVED</b>”, or “<b class=Sy>UNAVAIL</b>”.</dd><dt><b class=Sy>size</b></dt><dd>Total size of the storage pool.</dd><dt><b class=Sy>unsupported@</b><var class=Ar>feature_guid</var></dt><dd>Information about unsupported features that are enabled on the pool. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details.</dd></dl><p class=Pp>The space usage properties report actual physical space available to the storage pool. The physical space can be different from the total amount of space that any contained datasets can actually use. The amount of space used in a <span class=No>raidz</span> configuration depends on the characteristics of the data being written. In addition, ZFS reserves some space for internal accounting that the <a class=Xr href=zfs.8.html>zfs(8)</a> command takes into account, but the <a class=Xr href=zpool.8.html>zpool(8)</a> command does not. For non-full pools of a reasonable size, these effects should be invisible. For small pools, or pools that are close to being completely full, these discrepancies may become more noticeable.</p><p class=Pp>The following property can be set at creation time and import time:</p><dl class=Bl-tag><dt><b class=Sy>altroot</b></dt><dd>Alternate root directory. If set, this directory is prepended to any mount points within the pool. This can be used when examining an unknown pool where the mount points cannot be trusted, or in an alternate boot environment, where the typical paths are not valid. <b class=Sy>altroot</b> is not a persistent property. It is valid only while the system is up. Setting <b class=Sy>altroot</b> defaults to using <code class=Cm>cachefile=none</code>, though this may be overridden using an explicit setting.</dd></dl><p class=Pp>The following property can only be set at import time:</p><dl class=Bl-tag><dt><b class=Sy>readonly</b>=<code class=Cm>on</code> | <a class=permalink href=#off><code class=Cm id=off>off</code></a></dt><dd>If set to <code class=Cm>on</code>, pool will be imported in read-only mode with the following restrictions: <ul class="Bl-bullet Bd-indent"><li>Synchronous data in the intent log will not be accessible</li><li>Properties of the pool can not be changed</li><li>Datasets of this pool can only be mounted read-only</li><li>To write to a read-only pool, a export and import of the pool is required.</li></ul><p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>rdonly</b>.</p></dd></dl><p class=Pp>The following properties can be set at creation time and import time, and later changed with the <code class=Ic>zpool set</code> command:</p><dl class=Bl-tag><dt><b class=Sy>autoexpand</b>=<code class=Cm>on</code> | <a class=permalink href=#off_2><code class=Cm id=off_2>off</code></a></dt><dd>Controls automatic pool expansion when the underlying LUN is grown. If set to “<code class=Cm>on</code>”, the pool will be resized according to the size of the expanded device. If the device is part of a mirror or <span class=No>raidz</span> then all devices within that <span class=No>mirror/</span><span class=No>raidz</span> group must be expanded before the new space is made available to the pool. The default behavior is “off”. This property can also be referred to by its shortened column name, <b class=Sy>expand</b>.</dd><dt><b class=Sy>autoreplace</b>=<code class=Cm>on</code> | <a class=permalink href=#off_3><code class=Cm id=off_3>off</code></a></dt><dd>Controls automatic device replacement. If set to “<code class=Cm>off</code>”, device replacement must be initiated by the administrator by using the “<code class=Nm>zpool</code><code class=Cm>replace</code>” command. If set to “<code class=Cm>on</code>”, any new device, found in the same physical location as a device that previously belonged to the pool, is automatically formatted and replaced. The default behavior is “<code class=Cm>off</code>”. This property can also be referred to by its shortened column name, "replace".</dd><dt><b class=Sy>bootfs</b>=<var class=Ar>pool</var>/<var class=Ar>dataset</var></dt><dd>Identifies the default bootable dataset for the root pool. This property is expected to be set mainly by the installation and upgrade programs.</dd><dt><b class=Sy>cachefile</b>=<var class=Ar>path</var> | <a class=permalink href=#none><code class=Cm id=none>none</code></a></dt><dd>Controls the location of where the pool configuration is cached. Discovering all pools on system startup requires a cached copy of the configuration data that is stored on the root file system. All pools in this cache are automatically imported when the system boots. Some environments, such as install and clustering, need to cache this information in a different location so that pools are not automatically imported. Setting this property caches the pool configuration in a different location that can later be imported with “<code class=Nm>zpool</code><code class=Cm>import</code><code class=Fl>-c</code>”. Setting it to the special value “<code class=Cm>none</code>” creates a temporary pool that is never cached, and the special value <code class=Cm>''</code> (empty string) uses the default location.</dd><dt><b class=Sy>comment</b>=<var class=Ar>text</var></dt><dd>A text string consisting of printable ASCII characters that will be stored such that it is available even if the pool becomes faulted. An administrator can provide additional information about a pool using this property.</dd><dt><b class=Sy>dedupditto</b>=<var class=Ar>number</var></dt><dd>Threshold for the number of block ditto copies. If the reference count for a deduplicated block increases above this number, a new ditto copy of this block is automatically stored. Default setting is <code class=Cm>0</code> which causes no ditto copies to be created for deduplicated blocks. The miniumum legal nonzero setting is 100.</dd><dt><b class=Sy>delegation</b>=<code class=Cm>on</code> | <a class=permalink href=#off_4><code class=Cm id=off_4>off</code></a></dt><dd>Controls whether a non-privileged user is granted access based on the dataset permissions defined on the dataset. See <a class=Xr href=zfs.8.html>zfs(8)</a> for more information on ZFS delegated administration.</dd><dt><b class=Sy>failmode</b>=<code class=Cm>wait</code> | <a class=permalink href=#continue><code class=Cm id=continue>continue</code></a> | <a class=permalink href=#panic><code class=Cm id=panic>panic</code></a></dt><dd>Controls the system behavior in the event of catastrophic pool failure. This condition is typically a result of a loss of connectivity to the underlying storage device(s) or a failure of all devices within the pool. The behavior of such an event is determined as follows: <dl class=Bl-tag><dt><b class=Sy>wait</b></dt><dd>Blocks all I/O access until the device connectivity is recovered and the errors are cleared. This is the default behavior.</dd><dt><b class=Sy>continue</b></dt><dd>Returns <i class=Em>EIO</i> to any new write I/O requests but allows reads to any of the remaining healthy devices. Any write requests that have yet to be committed to disk would be blocked.</dd><dt><b class=Sy>panic</b></dt><dd>Prints out a message to the console and generates a system crash dump.</dd></dl></dd><dt><b class=Sy>feature@</b><var class=Ar>feature_name</var>=<b class=Sy>enabled</b></dt><dd>The value of this property is the current state of <var class=Ar>feature_name</var>. The only valid value when setting this property is <b class=Sy>enabled</b> which moves <var class=Ar>feature_name</var> to the enabled state. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on feature states.</dd><dt><b class=Sy>listsnapshots</b>=<code class=Cm>on</code> | <a class=permalink href=#off_5><code class=Cm id=off_5>off</code></a></dt><dd>Controls whether information about snapshots associated with this pool is output when “<code class=Nm>zfs</code><code class=Cm>list</code>” is run without the <code class=Fl>-t</code> option. The default value is <code class=Cm>off</code>. This property can also be referred to by its shortened name, <b class=Sy>listsnaps</b>.</dd><dt><b class=Sy>multihost</b>=<b class=Sy>on</b> | <b class=Sy>off</b></dt><dd>Controls whether a pool activity check should be performed during <code class=Nm>zpool</code><code class=Cm>import</code>. When a pool is determined to be active it cannot be imported, even with the <code class=Fl>-f</code> option. This property is intended to be used in failover configurations where multiple hosts have access to a pool on shared storage. <p class=Pp>Multihost provides protection on import only. It does not protect against an individual device being used in multiple pools, regardless of the type of vdev. See the discussion under <b class=Sy>zpool create.</b></p><p class=Pp>When this property is on, periodic writes to storage occur to show the pool is in use. See <b class=Sy>vfs.zfs.multihost_interval</b> sysctl. In order to enable this property each host must set a unique hostid. The default value is <b class=Sy>off</b>.</p></dd><dt><b class=Sy>version</b>=<var class=Ar>version</var></dt><dd>The current on-disk version of the pool. This can be increased, but never decreased. The preferred method of updating pools is with the “<code class=Nm>zpool</code><code class=Cm>upgrade</code>” command, though this property can be used when a specific version is needed for backwards compatibility. Once feature flags is enabled on a pool this property will no longer have a value.</dd></dl></section></section><section class=Sh><h2 class=Sh id=SUBCOMMANDS><a class=permalink href=#SUBCOMMANDS>SUBCOMMANDS</a></h2> All subcommands that modify state are logged persistently to the pool in their original form. <p class=Pp>The <code class=Nm>zpool</code> command provides subcommands to create and destroy storage pools, add capacity to storage pools, and provide information about the storage pools. The following subcommands are supported:</p><dl class=Bl-tag><dt><code class=Nm>zpool</code> [<code class=Fl>-?</code>]</dt><dd><p class=Pp>Displays a help message.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>add</code> [<code class=Fl>-fgLnP</code>] <var class=Ar>pool vdev ...</var></dt><dd><p class=Pp>Adds the specified virtual devices to the given pool. The <span class=No>vdev</span> specification is described in the “<a class=Sx href=#Virtual_Devices>Virtual Devices</a>” section. The behavior of the <code class=Fl>-f</code> option, and the device checks performed are described in the “<code class=Nm>zpool</code><code class=Cm>create</code>” subcommand.</p><dl class=Bl-tag><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a></dt><dd>Forces use of <var class=Ar>vdev</var>, even if they appear in use or specify a conflicting replication level. Not all devices can be overridden in this manner.</dd><dt><a class=permalink href=#g><code class=Fl id=g>-g</code></a></dt><dd>Display <var class=Ar>vdev</var>, GUIDs instead of the normal device names. These GUIDs can be used in place of device names for the zpool detach/offline/remove/replace commands.</dd><dt><a class=permalink href=#L><code class=Fl id=L>-L</code></a></dt><dd>Display real paths for <var class=Ar>vdev</var>s resolving all symbolic links. This can be used to look up the current block device name regardless of the /dev/disk/ path used to open it.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Displays the configuration that would be used without actually adding the <var class=Ar>vdev</var>s. The actual pool creation can still fail due to insufficient privileges or device sharing.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a></dt><dd>Display real paths for <var class=Ar>vdev</var>s instead of only the last component of the path. This can be used in conjunction with the <code class=Fl>-L</code> flag.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>attach</code> [<code class=Fl>-f</code>] <var class=Ar>pool device new_device</var></dt><dd><p class=Pp>Attaches <var class=Ar>new_device</var> to an existing <b class=Sy>zpool</b> device. The existing device cannot be part of a <span class=No>raidz</span> configuration. If <var class=Ar>device</var> is not currently part of a mirrored configuration, <var class=Ar>device</var> automatically transforms into a two-way mirror of <var class=Ar>device</var><span class=No>and</span><var class=Ar>new_device</var>. If <var class=Ar>device</var> is part of a two-way mirror, attaching <var class=Ar>new_device</var> creates a three-way mirror, and so on. In either case, <var class=Ar>new_device</var> begins to resilver immediately.</p><dl class=Bl-tag><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a></dt><dd>Forces use of <var class=Ar>new_device</var>, even if its appears to be in use. Not all devices can be overridden in this manner.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>checkpoint</code> [<code class=Fl>-d,</code><code class=Fl>--discard</code>] <var class=Ar>pool</var></dt><dd>Checkpoints the current state of <var class=Ar>pool</var> , which can be later restored by <code class=Nm>zpool</code><code class=Cm>import --rewind-to-checkpoint</code>. The existence of a checkpoint in a pool prohibits the following <code class=Nm>zpool</code> commands: <code class=Cm>remove</code>, <code class=Cm>attach</code>, <code class=Cm>detach</code>, <code class=Cm>split</code>, and <code class=Cm>reguid</code>. In addition, it may break reservation boundaries if the pool lacks free space. The <code class=Nm>zpool</code><code class=Cm>status</code> command indicates the existence of a checkpoint or the progress of discarding a checkpoint from a pool. The <code class=Nm>zpool</code><code class=Cm>list</code> command reports how much space the checkpoint takes from the pool. <dl class=Bl-tag><dt><a class=permalink href=#d,><code class=Fl id=d,>-d,</code></a><code class=Fl>--discard</code></dt><dd>Discards an existing checkpoint from <var class=Ar>pool</var>.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>clear</code> [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <var class=Ar>pool</var> [<var class=Ar>device</var>]</dt><dd><p class=Pp>Clears device errors in a pool. If no arguments are specified, all device errors within the pool are cleared. If one or more devices is specified, only those errors associated with the specified device or devices are cleared. If multihost is enabled, and the pool has been suspended, this will not resume I/O. While the pool was suspended, it may have been imported on another host, and resuming I/O could result in pool damage.</p><dl class=Bl-tag><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a></dt><dd>Initiates recovery mode for an unopenable pool. Attempts to discard the last few transactions in the pool to return it to an openable state. Not all damaged pools can be recovered by using this option. If successful, the data from the discarded transactions is irretrievably lost.</dd><dt><a class=permalink href=#n_2><code class=Fl id=n_2>-n</code></a></dt><dd>Used in combination with the <code class=Fl>-F</code> flag. Check whether discarding transactions would make the pool openable, but do not actually discard any transactions.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>create</code> [<code class=Fl>-fnd</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-O</code><var class=Ar>file-system-property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-m</code><var class=Ar>mountpoint</var>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-t</code><var class=Ar>tempname</var>] <var class=Ar>pool vdev ...</var></dt><dd><p class=Pp>Creates a new storage pool containing the virtual devices specified on the command line. The pool name must begin with a letter, and can only contain alphanumeric characters as well as underscore ("_"), dash ("-"), and period ("."). The pool names "mirror", "raidz", "spare" and "log" are reserved, as are names beginning with the pattern "c[0-9]". The <span class=No>vdev</span> specification is described in the “<a class=Sx href=#Virtual_Devices>Virtual Devices</a>” section.</p><p class=Pp>The command attempts to verify that each device specified is accessible and not currently in use by another subsystem. However this check is not robust enough to detect simultaneous attempts to use a new device in different pools, even if <b class=Sy>multihost</b> is <b class=Sy>enabled.</b> The administrator must ensure that simultaneous invocations of any combination of <b class=Sy>zpool replace</b>, <b class=Sy>zpool create</b>, <b class=Sy>zpool add</b>, or <b class=Sy>zpool labelclear</b>, do not refer to the same device. Using the same device in two pools will result in pool corruption.</p><p class=Pp>There are some uses, such as being currently mounted, or specified as the dedicated dump device, that prevents a device from ever being used by ZFS. Other uses, such as having a preexisting UFS file system, can be overridden with the <code class=Fl>-f</code> option.</p><p class=Pp>The command also checks that the replication strategy for the pool is consistent. An attempt to combine redundant and non-redundant storage in a single pool, or to mix disks and files, results in an error unless <code class=Fl>-f</code> is specified. The use of differently sized devices within a single <span class=No>raidz</span> or mirror group is also flagged as an error unless <code class=Fl>-f</code> is specified.</p><p class=Pp>Unless the <code class=Fl>-R</code> option is specified, the default mount point is “<span class=Pa>/pool</span>”. The mount point must not exist or must be empty, or else the root dataset cannot be mounted. This can be overridden with the <code class=Fl>-m</code> option.</p><p class=Pp>By default all supported features are enabled on the new pool unless the <code class=Fl>-d</code> option is specified.</p><dl class=Bl-tag><dt><a class=permalink href=#f_3><code class=Fl id=f_3>-f</code></a></dt><dd>Forces use of <var class=Ar>vdev</var>s, even if they appear in use or specify a conflicting replication level. Not all devices can be overridden in this manner.</dd><dt><a class=permalink href=#n_3><code class=Fl id=n_3>-n</code></a></dt><dd>Displays the configuration that would be used without actually creating the pool. The actual pool creation can still fail due to insufficient privileges or device sharing.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Do not enable any features on the new pool. Individual features can be enabled by setting their corresponding properties to <b class=Sy>enabled</b> with the <code class=Fl>-o</code> option. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details about feature properties.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var> [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var></dt><dd>Sets the given pool properties. See the “<a class=Sx href=#Properties>Properties</a>” section for a list of valid properties that can be set.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>file-system-property</var>=<var class=Ar>value</var> [<code class=Fl>-O</code><var class=Ar>file-system-property</var>=<var class=Ar>value</var>] <var class=Ar>...</var></dt><dd>Sets the given file system properties in the root file system of the pool. See <a class=Xr href=zfs.8.html>zfs(8)</a> Properties for a list of valid properties that can be set.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a><var class=Ar>root</var></dt><dd>Equivalent to “<code class=Fl>-o</code><code class=Cm>cachefile=none,altroot=</code><span class=Pa>root</span>”</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>mountpoint</var></dt><dd>Sets the mount point for the root dataset. The default mount point is “<span class=Pa>/pool</span>” or “<code class=Cm>altroot</code><span class=Pa>/pool</span>” if <b class=Sy>altroot</b> is specified. The mount point must be an absolute path, “<code class=Cm>legacy</code>”, or “<code class=Cm>none</code>”. For more information on dataset mount points, see <a class=Xr href=zfs.8.html>zfs(8)</a>.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>tempname</var></dt><dd>Sets the in-core pool name to <span class=Pa>tempname</span> while the on-disk name will be the name specified as the pool name <span class=Pa>pool</span>. This will set the default <b class=Sy>cachefile</b> property to <b class=Sy>none</b>. This is intended to handle name space collisions when creating pools for other systems, such as virtual machines or physical machines whose pools live on network block devices.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>destroy</code> [<code class=Fl>-f</code>] <var class=Ar>pool</var></dt><dd><p class=Pp>Destroys the given pool, freeing up any devices for other use. This command tries to unmount any active datasets before destroying the pool.</p><dl class=Bl-tag><dt><a class=permalink href=#f_4><code class=Fl id=f_4>-f</code></a></dt><dd>Forces any active datasets contained within the pool to be unmounted.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>detach</code><var class=Ar>pool device</var></dt><dd><p class=Pp>Detaches <var class=Ar>device</var> from a mirror. The operation is refused if there are no other valid replicas of the data.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>export</code> [<code class=Fl>-f</code>] <var class=Ar>pool ...</var></dt><dd><p class=Pp>Exports the given pools from the system. All devices are marked as exported, but are still considered in use by other subsystems. The devices can be moved between systems (even those of different endianness) and imported as long as a sufficient number of devices are present.</p><p class=Pp>Before exporting the pool, all datasets within the pool are unmounted. A pool can not be exported if it has a shared spare that is currently being used.</p><p class=Pp>For pools to be portable, you must give the <code class=Nm>zpool</code> command whole disks, not just slices, so that ZFS can label the disks with portable <b class=Sy>EFI</b> labels. Otherwise, disk drivers on platforms of different endianness will not recognize the disks.</p><dl class=Bl-tag><dt><a class=permalink href=#f_5><code class=Fl id=f_5>-f</code></a></dt><dd>Forcefully unmount all datasets, using the “<code class=Nm>unmount</code><code class=Fl>-f</code>” command. <p class=Pp>This command will forcefully export the pool even if it has a shared spare that is currently being used. This may lead to potential data corruption.</p></dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>get</code> [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,<var class=Ar>...</var>]] <var class=Ar>all</var> | <var class=Ar>property</var>[,<var class=Ar>...</var>] <var class=Ar>pool ...</var></dt><dd><p class=Pp>Retrieves the given list of properties (or all properties if “<code class=Cm>all</code>” is used) for the specified storage pool(s). These properties are displayed with the following fields:</p><table class="Bl-column Bd-indent"><tr><td>name</td><td>Name of storage pool</td></tr><tr><td>property</td><td>Property name</td></tr><tr><td>value</td><td>Property value</td></tr><tr><td>source</td><td>Property source, either 'default' or 'local'.</td></tr></table><p class=Pp>See the “<a class=Sx href=#Properties>Properties</a>” section for more information on the available pool properties.</p></dd><dt><a class=permalink href=#H><code class=Fl id=H>-H</code></a></dt><dd>Scripted mode. Do not display headers, and separate fields by a single tab instead of arbitrary space.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>Display numbers in parsable (exact) values.</dd><dt><a class=permalink href=#o_2><code class=Fl id=o_2>-o</code></a><var class=Ar>field</var></dt><dd>A comma-separated list of columns to display. <b class=Sy>name</b>,<b class=Sy>property</b>,<b class=Sy>value</b>,<b class=Sy>source</b> is the default value.</dd><dt><code class=Nm>zpool</code><code class=Cm>history</code> [<code class=Fl>-il</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var></dt><dd><p class=Pp>Displays the command history of the specified pools or all pools if no pool is specified.</p><dl class=Bl-tag><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>Displays internally logged ZFS events in addition to user initiated events.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a></dt><dd>Displays log records in long format, which in addition to standard format includes, the user name, the hostname, and the zone in which the operation was performed.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>import</code> [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>]</dt><dd><p class=Pp>Lists pools available to import. If the <code class=Fl>-d</code> option is not specified, this command searches for devices in “<span class=Pa>/dev</span>”. The <code class=Fl>-d</code> option can be specified multiple times, and all directories are searched. If the device appears to be part of an exported pool, this command displays a summary of the pool with the name of the pool, a numeric identifier, as well as the <span class=No>vdev</span> layout and current health of the device for each device or file. Destroyed pools, pools that were previously destroyed with the “<code class=Nm>zpool</code><code class=Cm>destroy</code>” command, are not listed unless the <code class=Fl>-D</code> option is specified.</p><p class=Pp>The numeric identifier is unique, and can be used instead of the pool name when multiple exported pools of the same name are available.</p><dl class=Bl-tag><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a><var class=Ar>cachefile</var></dt><dd>Reads configuration from the given <var class=Ar>cachefile</var> that was created with the “<b class=Sy>cachefile</b>” pool property. This <var class=Ar>cachefile</var> is used instead of searching for devices.</dd><dt><a class=permalink href=#d_2><code class=Fl id=d_2>-d</code></a><var class=Ar>dir</var></dt><dd>Searches for devices or files in <var class=Ar>dir</var>. The <code class=Fl>-d</code> option can be specified multiple times.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>Lists destroyed pools only.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>import</code> [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>] [<code class=Fl>-f</code>] [<code class=Fl>-m</code>] [<code class=Fl>-N</code>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <code class=Fl>-a</code></dt><dd><p class=Pp>Imports all pools found in the search directories. Identical to the previous command, except that all pools with a sufficient number of devices available are imported. Destroyed pools, pools that were previously destroyed with the “<code class=Nm>zpool</code><code class=Cm>destroy</code>” command, will not be imported unless the <code class=Fl>-D</code> option is specified.</p><dl class=Bl-tag><dt><a class=permalink href=#o_3><code class=Fl id=o_3>-o</code></a><var class=Ar>mntopts</var></dt><dd>Comma-separated list of mount options to use when mounting datasets within the pool. See <a class=Xr href=zfs.8.html>zfs(8)</a> for a description of dataset properties and mount options.</dd><dt><a class=permalink href=#o_4><code class=Fl id=o_4>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property on the imported pool. See the “<a class=Sx href=#Properties>Properties</a>” section for more information on the available pool properties.</dd><dt><a class=permalink href=#c_2><code class=Fl id=c_2>-c</code></a><var class=Ar>cachefile</var></dt><dd>Reads configuration from the given <var class=Ar>cachefile</var> that was created with the “<b class=Sy>cachefile</b>” pool property. This <var class=Ar>cachefile</var> is used instead of searching for devices.</dd><dt><a class=permalink href=#d_3><code class=Fl id=d_3>-d</code></a><var class=Ar>dir</var></dt><dd>Searches for devices or files in <var class=Ar>dir</var>. The <code class=Fl>-d</code> option can be specified multiple times. This option is incompatible with the <code class=Fl>-c</code> option.</dd><dt><a class=permalink href=#D_2><code class=Fl id=D_2>-D</code></a></dt><dd>Imports destroyed pools only. The <code class=Fl>-f</code> option is also required.</dd><dt><a class=permalink href=#f_6><code class=Fl id=f_6>-f</code></a></dt><dd>Forces import, even if the pool appears to be potentially active.</dd><dt><a class=permalink href=#m_2><code class=Fl id=m_2>-m</code></a></dt><dd>Allows a pool to import when there is a missing log device. Recent transactions can be lost because the log device will be discarded.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a></dt><dd>Import the pool without mounting any file systems.</dd><dt><a class=permalink href=#R_2><code class=Fl id=R_2>-R</code></a><var class=Ar>root</var></dt><dd>Sets the “<b class=Sy>cachefile</b>” property to “<code class=Cm>none</code>” and the “<b class=Sy>altroot</b>” property to “<var class=Ar>root</var>”</dd><dt><a class=permalink href=#F_2><code class=Fl id=F_2>-F</code></a></dt><dd>Recovery mode for a non-importable pool. Attempt to return the pool to an importable state by discarding the last few transactions. Not all damaged pools can be recovered by using this option. If successful, the data from the discarded transactions is irretrievably lost. This option is ignored if the pool is importable or already imported.</dd><dt><a class=permalink href=#n_4><code class=Fl id=n_4>-n</code></a></dt><dd>Used with the <code class=Fl>-F</code> recovery option. Determines whether a non-importable pool can be made importable again, but does not actually perform the pool recovery. For more details about pool recovery mode, see the <code class=Fl>-F</code> option, above.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>Searches for and imports all pools found.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>import</code> [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>...</var> [<code class=Fl>-d</code><var class=Ar>dir</var> | <code class=Fl>-c</code><var class=Ar>cachefile</var>] [<code class=Fl>-D</code>] [<code class=Fl>-f</code>] [<code class=Fl>-m</code>] [<code class=Fl>-N</code>] [<code class=Fl>-R</code><var class=Ar>root</var>] [<code class=Fl>-t</code>] [<code class=Fl>-F</code> [<code class=Fl>-n</code>]] <var class=Ar>pool</var> | <var class=Ar>id</var> [<var class=Ar>newpool</var>]</dt><dd><p class=Pp>Imports a specific pool. A pool can be identified by its name or the numeric identifier. If <var class=Ar>newpool</var> is specified, the pool is imported using the name <var class=Ar>newpool</var>. Otherwise, it is imported with the same name as its exported name.</p><p class=Pp>If a device is removed from a system without running “<code class=Nm>zpool</code><code class=Cm>export</code>” first, the device appears as potentially active. It cannot be determined if this was a failed export, or whether the device is really in use from another host. To import a pool in this state, the <code class=Fl>-f</code> option is required.</p><dl class=Bl-tag><dt><a class=permalink href=#o_5><code class=Fl id=o_5>-o</code></a><var class=Ar>mntopts</var></dt><dd>Comma-separated list of mount options to use when mounting datasets within the pool. See <a class=Xr href=zfs.8.html>zfs(8)</a> for a description of dataset properties and mount options.</dd><dt><a class=permalink href=#o_6><code class=Fl id=o_6>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property on the imported pool. See the “<a class=Sx href=#Properties>Properties</a>” section for more information on the available pool properties.</dd><dt><a class=permalink href=#c_3><code class=Fl id=c_3>-c</code></a><var class=Ar>cachefile</var></dt><dd>Reads configuration from the given <var class=Ar>cachefile</var> that was created with the “<b class=Sy>cachefile</b>” pool property. This <var class=Ar>cachefile</var> is used instead of searching for devices.</dd><dt><a class=permalink href=#d_4><code class=Fl id=d_4>-d</code></a><var class=Ar>dir</var></dt><dd>Searches for devices or files in <var class=Ar>dir</var>. The <code class=Fl>-d</code> option can be specified multiple times. This option is incompatible with the <code class=Fl>-c</code> option.</dd><dt><a class=permalink href=#D_3><code class=Fl id=D_3>-D</code></a></dt><dd>Imports destroyed pools only. The <code class=Fl>-f</code> option is also required.</dd><dt><a class=permalink href=#f_7><code class=Fl id=f_7>-f</code></a></dt><dd>Forces import, even if the pool appears to be potentially active.</dd><dt><a class=permalink href=#m_3><code class=Fl id=m_3>-m</code></a></dt><dd>Allows a pool to import when there is a missing log device. Recent transactions can be lost because the log device will be discarded.</dd><dt><a class=permalink href=#N_2><code class=Fl id=N_2>-N</code></a></dt><dd>Import the pool without mounting any file systems.</dd><dt><a class=permalink href=#R_3><code class=Fl id=R_3>-R</code></a><var class=Ar>root</var></dt><dd>Equivalent to “<code class=Fl>-o</code><code class=Cm>cachefile=none,altroot=</code><span class=Pa>root</span>”</dd><dt><a class=permalink href=#t_2><code class=Fl id=t_2>-t</code></a></dt><dd>Used with <var class=Ar>newpool</var>. Specifies that <var class=Ar>newpool</var> is temporary. Temporary pool names last until export. Ensures that the original pool name will be used in all label updates and therefore is retained upon export. Will also set <b class=Sy>cachefile</b> property to <b class=Sy>none</b> when not explicitly specified.</dd><dt><a class=permalink href=#F_3><code class=Fl id=F_3>-F</code></a></dt><dd>Recovery mode for a non-importable pool. Attempt to return the pool to an importable state by discarding the last few transactions. Not all damaged pools can be recovered by using this option. If successful, the data from the discarded transactions is irretrievably lost. This option is ignored if the pool is importable or already imported.</dd><dt><a class=permalink href=#n_5><code class=Fl id=n_5>-n</code></a></dt><dd>Used with the <code class=Fl>-F</code> recovery option. Determines whether a non-importable pool can be made importable again, but does not actually perform the pool recovery. For more details about pool recovery mode, see the <code class=Fl>-F</code> option, above.</dd><dt><a class=permalink href=#-rewind-to-checkpoint><code class=Fl id=-rewind-to-checkpoint>--rewind-to-checkpoint</code></a></dt><dd>Rewinds pool to the checkpointed state. Once the pool is imported with this flag there is no way to undo the rewind. All changes and data that were written after the checkpoint are lost! The only exception is when the <b class=Sy>readonly</b> mounting option is enabled. In this case, the checkpointed state of the pool is opened and an administrator can see how the pool would look like if they were to fully rewind.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>initialize</code> [<code class=Fl>-cs</code>] <var class=Ar>pool</var> [<var class=Ar>device</var>...]</dt><dd>Begins initializing by writing to all unallocated regions on the specified devices, or all eligible devices in the pool if no individual devices are specified. Only leaf data or log devices may be initialized. <dl class=Bl-tag><dt><a class=permalink href=#c,><code class=Fl id=c,>-c,</code></a><code class=Fl>--cancel</code></dt><dd>Cancel initializing on the specified devices, or all eligible devices if none are specified. If one or more target devices are invalid or are not currently being initialized, the command will fail and no cancellation will occur on any device.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><code class=Fl>--suspend</code></dt><dd>Suspend initializing on the specified devices, or all eligible devices if none are specified. If one or more target devices are invalid or are not currently being initialized, the command will fail and no suspension will occur on any device. Initializing can then be resumed by running <code class=Nm>zpool</code><code class=Cm>initialize</code> with no flags on the relevant target devices.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>iostat</code> [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<code class=Fl>-gLPv</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>interval</var> [<var class=Ar>count</var>]]</dt><dd><p class=Pp>Displays I/O statistics for the given pools. When given an interval, the statistics are printed every <var class=Ar>interval</var> seconds until <b class=Sy>Ctrl-C</b> is pressed. If no <var class=Ar>pools</var> are specified, statistics for every pool in the system is shown. If <var class=Ar>count</var> is specified, the command exits after <var class=Ar>count</var> reports are printed.</p><dl class=Bl-tag><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><code class=Cm>d</code>|<code class=Cm>u</code></dt><dd>Print a timestamp. <p class=Pp>Use modifier <code class=Cm>d</code> for standard date format. See <a class=Xr href=date.1.html>date(1)</a>. Use modifier <code class=Cm>u</code> for unixtime (equals “<code class=Ic>date +%s</code>”).</p></dd><dt><a class=permalink href=#g_2><code class=Fl id=g_2>-g</code></a></dt><dd>Display vdev GUIDs instead of the normal device names. These GUIDs can be used in place of device names for the zpool detach/offline/remove/replace commands.</dd><dt><a class=permalink href=#L_2><code class=Fl id=L_2>-L</code></a></dt><dd>Display real paths for vdevs resolving all symbolic links. This can be used to look up the current block device name regardless of the <span class=Pa>/dev/disk/</span> path used to open it.</dd><dt><a class=permalink href=#P_2><code class=Fl id=P_2>-P</code></a></dt><dd>Display full paths for vdevs instead of only the last component of the path. This can be used in conjunction with the <code class=Fl>-L</code> flag.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Verbose statistics. Reports usage statistics for individual vdevs within the pool, in addition to the pool-wide statistics.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>labelclear</code> [<code class=Fl>-f</code>] <var class=Ar>device</var></dt><dd><p class=Pp>Removes ZFS label information from the specified <var class=Ar>device</var>. The <var class=Ar>device</var> must not be part of an active pool configuration.</p><dl class=Bl-tag><dt><a class=permalink href=#f_8><code class=Fl id=f_8>-f</code></a></dt><dd>Treat exported or foreign devices as inactive.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>list</code> [<code class=Fl>-HgLpPv</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,<var class=Ar>...</var>]] [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>inverval</var> [<var class=Ar>count</var>]]</dt><dd><p class=Pp>Lists the given pools along with a health status and space usage. If no <var class=Ar>pools</var> are specified, all pools in the system are listed.</p><p class=Pp>When given an interval, the output is printed every <var class=Ar>interval</var> seconds until <b class=Sy>Ctrl-C</b> is pressed. If <var class=Ar>count</var> is specified, the command exits after <var class=Ar>count</var> reports are printed.</p><dl class=Bl-tag><dt><a class=permalink href=#T_2><code class=Fl id=T_2>-T</code></a><code class=Cm>d</code>|<code class=Cm>u</code></dt><dd>Print a timestamp. <p class=Pp>Use modifier <code class=Cm>d</code> for standard date format. See <a class=Xr href=date.1.html>date(1)</a>. Use modifier <code class=Cm>u</code> for unixtime (equals “<code class=Ic>date +%s</code>”).</p></dd><dt><a class=permalink href=#g_3><code class=Fl id=g_3>-g</code></a></dt><dd>Display vdev GUIDs instead of the normal device names. These GUIDs can be used in place of device names for the zpool detach/offline/remove/replace commands.</dd><dt><a class=permalink href=#H_2><code class=Fl id=H_2>-H</code></a></dt><dd>Scripted mode. Do not display headers, and separate fields by a single tab instead of arbitrary space.</dd><dt><a class=permalink href=#L_3><code class=Fl id=L_3>-L</code></a></dt><dd>Display real paths for vdevs resolving all symbolic links. This can be used to look up the current block device name regardless of the /dev/disk/ path used to open it.</dd><dt><a class=permalink href=#p_2><code class=Fl id=p_2>-p</code></a></dt><dd>Display numbers in parsable (exact) values.</dd><dt><a class=permalink href=#P_3><code class=Fl id=P_3>-P</code></a></dt><dd>Display full paths for vdevs instead of only the last component of the path. This can be used in conjunction with the <code class=Fl>-L</code> flag.</dd><dt><a class=permalink href=#v_2><code class=Fl id=v_2>-v</code></a></dt><dd>Verbose statistics. Reports usage statistics for individual <i class=Em>vdevs</i> within the pool, in addition to the pool-wide statistics.</dd><dt><a class=permalink href=#o_7><code class=Fl id=o_7>-o</code></a><var class=Ar>property</var>[,<var class=Ar>...</var>]</dt><dd>Comma-separated list of properties to display. See the “<a class=Sx href=#Properties>Properties</a>” section for a list of valid properties. The default list is <b class=Sy>name</b>, <b class=Sy>size</b>, <b class=Sy>allocated</b>, <b class=Sy>free</b>, <b class=Sy>checkpoint</b>, <b class=Sy>expandsize</b>, <b class=Sy>fragmentation</b>, <b class=Sy>capacity</b>, <b class=Sy>dedupratio</b>, <b class=Sy>health</b>, <b class=Sy>altroot</b>.</dd><dt><a class=permalink href=#T_3><code class=Fl id=T_3>-T</code></a><code class=Cm>d</code>|<code class=Cm>u</code></dt><dd>Print a timestamp. <p class=Pp>Use modifier <code class=Cm>d</code> for standard date format. See <a class=Xr href=date.1.html>date(1)</a>. Use modifier <code class=Cm>u</code> for unixtime (equals “<code class=Ic>date +%s</code>”).</p></dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>offline</code> [<code class=Fl>-t</code>] <var class=Ar>pool device ...</var></dt><dd><p class=Pp>Takes the specified physical device offline. While the <var class=Ar>device</var> is offline, no attempt is made to read or write to the device.</p><dl class=Bl-tag><dt><a class=permalink href=#t_3><code class=Fl id=t_3>-t</code></a></dt><dd>Temporary. Upon reboot, the specified physical device reverts to its previous state.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>online</code> [<code class=Fl>-e</code>] <var class=Ar>pool device ...</var></dt><dd><p class=Pp>Brings the specified physical device online.</p><p class=Pp>This command is not applicable to spares or cache devices.</p><dl class=Bl-tag><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a></dt><dd>Expand the device to use all available space. If the device is part of a mirror or <span class=No>raidz</span> then all devices must be expanded before the new space will become available to the pool.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>reguid</code><var class=Ar>pool</var></dt><dd><p class=Pp>Generates a new unique identifier for the pool. You must ensure that all devices in this pool are online and healthy before performing this action.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>remove</code> [<code class=Fl>-np</code>] <var class=Ar>pool device ...</var></dt><dd><p class=Pp>Removes the specified device from the pool. This command currently only supports removing hot spares, cache, log devices and mirrored top-level vdevs (mirror of leaf devices); but not raidz.</p><p class=Pp>Removing a top-level vdev reduces the total amount of space in the storage pool. The specified device will be evacuated by copying all allocated space from it to the other devices in the pool. In this case, the <code class=Nm>zpool</code><code class=Cm>remove</code> command initiates the removal and returns, while the evacuation continues in the background. The removal progress can be monitored with <code class=Nm>zpool</code><code class=Cm>status.</code> This feature must be enabled to be used, see <a class=Xr href=zpool-features.7.html>zpool-features(7)</a></p><p class=Pp>A mirrored top-level device (log or data) can be removed by specifying the top-level mirror for the same. Non-log devices or data devices that are part of a mirrored configuration can be removed using the “<code class=Nm>zpool</code><code class=Cm>detach</code>” command.</p><dl class=Bl-tag><dt><a class=permalink href=#n_6><code class=Fl id=n_6>-n</code></a></dt><dd>Do not actually perform the removal ("no-op"). Instead, print the estimated amount of memory that will be used by the mapping table after the removal completes. This is nonzero only for top-level vdevs.</dd></dl><dl class=Bl-tag><dt><a class=permalink href=#p_3><code class=Fl id=p_3>-p</code></a></dt><dd>Used in conjunction with the <code class=Fl>-n</code> flag, displays numbers as parsable (exact) values.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>remove</code><code class=Fl>-s</code><var class=Ar>pool</var></dt><dd><p class=Pp>Stops and cancels an in-progress removal of a top-level vdev.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>reopen</code><var class=Ar>pool</var></dt><dd><p class=Pp>Reopen all the vdevs associated with the pool.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>replace</code> [<code class=Fl>-f</code>] <var class=Ar>pool device</var> [<var class=Ar>new_device</var>]</dt><dd><p class=Pp>Replaces <var class=Ar>old_device</var> with <var class=Ar>new_device</var>. This is equivalent to attaching <var class=Ar>new_device</var>, waiting for it to resilver, and then detaching <var class=Ar>old_device</var>.</p><p class=Pp>The size of <var class=Ar>new_device</var> must be greater than or equal to the minimum size of all the devices in a mirror or <span class=No>raidz</span> configuration.</p><p class=Pp><var class=Ar>new_device</var> is required if the pool is not redundant. If <var class=Ar>new_device</var> is not specified, it defaults to <var class=Ar>old_device</var>. This form of replacement is useful after an existing disk has failed and has been physically replaced. In this case, the new disk may have the same <span class=Pa>/dev</span> path as the old device, even though it is actually a different disk. ZFS recognizes this.</p><dl class=Bl-tag><dt><a class=permalink href=#f_9><code class=Fl id=f_9>-f</code></a></dt><dd>Forces use of <var class=Ar>new_device</var>, even if its appears to be in use. Not all devices can be overridden in this manner.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>scrub</code> [<code class=Fl>-s</code> | <code class=Fl>-p</code>] <var class=Ar>pool ...</var></dt><dd><p class=Pp>Begins a scrub or resumes a paused scrub. The scrub examines all data in the specified pools to verify that it checksums correctly. For replicated (mirror or raidz) devices, ZFS automatically repairs any damage discovered during the scrub. The <code class=Nm>zpool</code><code class=Cm>status</code> command reports the progress of the scrub and summarizes the results of the scrub upon completion.</p><p class=Pp>Scrubbing and resilvering are very similar operations. The difference is that resilvering only examines data that ZFS knows to be out of date (for example, when attaching a new device to a mirror or replacing an existing device), whereas scrubbing examines all data to discover silent errors due to hardware faults or disk failure.</p><p class=Pp>Because scrubbing and resilvering are I/O-intensive operations, ZFS only allows one at a time. If a scrub is paused, the <code class=Nm>zpool</code><code class=Cm>scrub</code> resumes it. If a resilver is in progress, ZFS does not allow a scrub to be started until the resilver completes.</p><dl class=Bl-tag><dt><a class=permalink href=#s_2><code class=Fl id=s_2>-s</code></a></dt><dd>Stop scrubbing.</dd></dl><dl class=Bl-tag><dt><a class=permalink href=#p_4><code class=Fl id=p_4>-p</code></a></dt><dd>Pause scrubbing. Scrub pause state and progress are periodically synced to disk. If the system is restarted or pool is exported during a paused scrub, even after import, scrub will remain paused until it is resumed. Once resumed the scrub will pick up from the place where it was last checkpointed to disk. To resume a paused scrub issue <code class=Nm>zpool</code><code class=Cm>scrub</code> again.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value pool</var></dt><dd><p class=Pp>Sets the given property on the specified pool. See the “<a class=Sx href=#Properties>Properties</a>” section for more information on what properties can be set and acceptable values.</p></dd><dt><code class=Nm>zpool</code><code class=Cm>split</code> [<code class=Fl>-gLnP</code>] [<code class=Fl>-R</code><var class=Ar>altroot</var>] [<code class=Fl>-o</code><var class=Ar>mntopts</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>] <var class=Ar>pool newpool</var> [<var class=Ar>device ...</var>]</dt><dd><p class=Pp>Splits off one disk from each mirrored top-level <span class=No>vdev</span> in a pool and creates a new pool from the split-off disks. The original pool must be made up of one or more mirrors and must not be in the process of resilvering. The <code class=Cm>split</code> subcommand chooses the last device in each mirror <span class=No>vdev</span> unless overridden by a device specification on the command line.</p><p class=Pp>When using a <var class=Ar>device</var> argument, <code class=Cm>split</code> includes the specified device(s) in a new pool and, should any devices remain unspecified, assigns the last device in each mirror <span class=No>vdev</span> to that pool, as it does normally. If you are uncertain about the outcome of a <code class=Cm>split</code> command, use the <code class=Fl>-n</code> ("dry-run") option to ensure your command will have the effect you intend.</p><dl class=Bl-tag><dt><a class=permalink href=#R_4><code class=Fl id=R_4>-R</code></a><var class=Ar>altroot</var></dt><dd>Automatically import the newly created pool after splitting, using the specified <var class=Ar>altroot</var> parameter for the new pool's alternate root. See the <b class=Sy>altroot</b> description in the “<a class=Sx href=#Properties>Properties</a>” section, above.</dd><dt><a class=permalink href=#g_4><code class=Fl id=g_4>-g</code></a></dt><dd>Display vdev GUIDs instead of the normal device names. These GUIDs can be used in place of device names for the zpool detach/offline/remove/replace commands.</dd><dt><a class=permalink href=#L_4><code class=Fl id=L_4>-L</code></a></dt><dd>Display real paths for vdevs resolving all symbolic links. This can be used to look up the current block device name regardless of the <span class=Pa>/dev/disk/</span> path used to open it.</dd><dt><a class=permalink href=#n_7><code class=Fl id=n_7>-n</code></a></dt><dd>Displays the configuration that would be created without actually splitting the pool. The actual pool split could still fail due to insufficient privileges or device status.</dd><dt><a class=permalink href=#o_8><code class=Fl id=o_8>-o</code></a><var class=Ar>mntopts</var></dt><dd>Comma-separated list of mount options to use when mounting datasets within the pool. See <a class=Xr href=zfs.8.html>zfs(8)</a> for a description of dataset properties and mount options. Valid only in conjunction with the <code class=Fl>-R</code> option.</dd><dt><a class=permalink href=#o_9><code class=Fl id=o_9>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property on the new pool. See the “<a class=Sx href=#Properties>Properties</a>” section, above, for more information on the available pool properties.</dd><dt><a class=permalink href=#P_4><code class=Fl id=P_4>-P</code></a></dt><dd>Display full paths for vdevs instead of only the last component of the path. This can be used in conjunction with the <code class=Fl>-L</code> flag.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>status</code> [<code class=Fl>-DgLPvx</code>] [<code class=Fl>-T</code><code class=Cm>d</code>|<code class=Cm>u</code>] [<var class=Ar>pool</var>] <var class=Ar>...</var> [<var class=Ar>interval</var> [<var class=Ar>count</var>]]</dt><dd><p class=Pp>Displays the detailed health status for the given pools. If no <var class=Ar>pool</var> is specified, then the status of each pool in the system is displayed. For more information on pool and device health, see the “<a class=Sx href=#Device_Failure_and_Recovery>Device Failure and Recovery</a>” section.</p><p class=Pp>When given an interval, the output is printed every <var class=Ar>interval</var> seconds until <b class=Sy>Ctrl-C</b> is pressed. If <var class=Ar>count</var> is specified, the command exits after <var class=Ar>count</var> reports are printed.</p><p class=Pp>If a scrub or resilver is in progress, this command reports the percentage done and the estimated time to completion. Both of these are only approximate, because the amount of data in the pool and the other workloads on the system can change.</p><dl class=Bl-tag><dt><a class=permalink href=#D_4><code class=Fl id=D_4>-D</code></a></dt><dd>Display a histogram of deduplication statistics, showing the allocated (physically present on disk) and referenced (logically referenced in the pool) block counts and sizes by reference count.</dd><dt><a class=permalink href=#g_5><code class=Fl id=g_5>-g</code></a></dt><dd>Display vdev GUIDs instead of the normal device names. These GUIDs can be used in place of device names for the zpool detach/offline/remove/replace commands.</dd><dt><a class=permalink href=#L_5><code class=Fl id=L_5>-L</code></a></dt><dd>Display real paths for vdevs resolving all symbolic links. This can be used to look up the current block device name regardless of the <span class=Pa>/dev/disk/</span> path used to open it.</dd><dt><a class=permalink href=#P_5><code class=Fl id=P_5>-P</code></a></dt><dd>Display full paths for vdevs instead of only the last component of the path. This can be used in conjunction with the <code class=Fl>-L</code> flag.</dd><dt><a class=permalink href=#T_4><code class=Fl id=T_4>-T</code></a><code class=Cm>d</code>|<code class=Cm>u</code></dt><dd>Print a timestamp. <p class=Pp>Use modifier <code class=Cm>d</code> for standard date format. See <a class=Xr href=date.1.html>date(1)</a>. Use modifier <code class=Cm>u</code> for unixtime (equals “<code class=Ic>date +%s</code>”).</p></dd><dt><a class=permalink href=#v_3><code class=Fl id=v_3>-v</code></a></dt><dd>Displays verbose data error information, printing out a complete list of all data errors since the last complete pool scrub.</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>Only display status for pools that are exhibiting errors or are otherwise unavailable. Warnings about pools not using the latest on-disk format, having non-native block size or disabled features will not be included.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>sync</code> [<var class=Ar>pool</var>]...</dt><dd>Forces all in-core dirty data to be written to the primary pool storage and not the ZIL. It will also update administrative information including quota reporting. Without arguments, <code class=Nm>zpool</code><code class=Cm>sync</code> will sync all pools on the system. Otherwise, it will only sync the specified <var class=Ar>pool</var>.</dd><dt><code class=Nm>zpool</code><code class=Cm>upgrade</code> [<code class=Fl>-v</code>]</dt><dd><p class=Pp>Displays pools which do not have all supported features enabled and pools formatted using a legacy ZFS version number. These pools can continue to be used, but some features may not be available. Use <code class=Nm>zpool</code><code class=Cm>upgrade</code><code class=Fl>-a</code> to enable all features on all pools.</p><dl class=Bl-tag><dt><a class=permalink href=#v_4><code class=Fl id=v_4>-v</code></a></dt><dd>Displays legacy ZFS versions supported by the current software. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for a description of feature flags features supported by the current software.</dd></dl></dd><dt><code class=Nm>zpool</code><code class=Cm>upgrade</code> [<code class=Fl>-V</code><var class=Ar>version</var>] <code class=Fl>-a</code> | <var class=Ar>pool ...</var></dt><dd><p class=Pp>Enables all supported features on the given pool. Once this is done, the pool will no longer be accessible on systems that do not support feature flags. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on compatibility with systems that support feature flags, but do not support all features enabled on the pool.</p><dl class=Bl-tag><dt><a class=permalink href=#a_2><code class=Fl id=a_2>-a</code></a></dt><dd>Enables all supported features on all pools.</dd><dt><a class=permalink href=#V><code class=Fl id=V>-V</code></a><var class=Ar>version</var></dt><dd>Upgrade to the specified legacy version. If the <code class=Fl>-V</code> flag is specified, no features will be enabled on the pool. This option can only be used to increase version number up to the last supported legacy version number.</dd></dl></dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> The following exit values are returned: <div class=Bd-indent><dl class=Bl-tag><dt>0</dt><dd>Successful completion.</dd><dt>1</dt><dd>An error occurred.</dd><dt>2</dt><dd>Invalid command line options were specified.</dd></dl></div></section><section class=Sh><h2 class=Sh id=ENVIRONMENT_VARIABLES><a class=permalink href=#ENVIRONMENT_VARIABLES>ENVIRONMENT VARIABLES</a></h2><dl class=Bl-tag><dt><a class=permalink href=#ZPOOL_VDEV_NAME_GUID><code class=Ev id=ZPOOL_VDEV_NAME_GUID>ZPOOL_VDEV_NAME_GUID</code></a></dt><dd>Cause <code class=Nm>zpool</code> subcommands to output vdev guids by default. This behavior is identical to the <code class=Nm>zpool status -g</code> command line option.</dd><dt><a class=permalink href=#ZPOOL_VDEV_NAME_FOLLOW_LINKS><code class=Ev id=ZPOOL_VDEV_NAME_FOLLOW_LINKS>ZPOOL_VDEV_NAME_FOLLOW_LINKS</code></a></dt><dd>Cause <code class=Nm>zpool</code> subcommands to follow links for vdev names by default. This behavior is identical to the <code class=Nm>zpool status -L</code> command line option.</dd><dt><a class=permalink href=#ZPOOL_VDEV_NAME_PATH><code class=Ev id=ZPOOL_VDEV_NAME_PATH>ZPOOL_VDEV_NAME_PATH</code></a></dt><dd>Cause <code class=Nm>zpool</code> subcommands to output full vdev path names by default. This behavior is identical to the <code class=Nm>zpool status -P</code> command line option.</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2><dl class=Bl-tag><dt><b class=Sy>Example 1</b><span class=No>Creating a RAID-Z Storage Pool</span></dt><dd><p class=Pp>The following command creates a pool with a single <span class=No>raidz</span> root <span class=No>vdev</span> that consists of six disks.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create tank raidz da0 da1 da2 da3 da4 da5
</code>
    </pre></div></dd><dt><b class=Sy>Example 2</b><span class=No>Creating a Mirrored Storage Pool</span></dt><dd><p class=Pp>The following command creates a pool with two mirrors, where each mirror contains two disks.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create tank mirror da0 da1 mirror da2 da3
</code>
    </pre></div></dd><dt><b class=Sy>Example 3</b><span class=No>Creating a</span> ZFS <span class=No>Storage Pool by Using Partitions</span></dt><dd><p class=Pp>The following command creates an unmirrored pool using two GPT partitions.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create tank da0p3 da1p3
</code>
    </pre></div></dd><dt><b class=Sy>Example 4</b><span class=No>Creating a</span> ZFS <span class=No>Storage Pool by Using Files</span></dt><dd><p class=Pp>The following command creates an unmirrored pool using files. While not recommended, a pool based on files can be useful for experimental purposes.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create tank /path/to/file/a /path/to/file/b
</code>
    </pre></div></dd><dt><b class=Sy>Example 5</b><span class=No>Adding a Mirror to a</span> ZFS <span class=No>Storage Pool</span></dt><dd><p class=Pp>The following command adds two mirrored disks to the pool <i class=Em>tank</i>, assuming the pool is already made up of two-way mirrors. The additional space is immediately available to any datasets within the pool.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool add tank mirror da2 da3
</code>
    </pre></div></dd><dt><b class=Sy>Example 6</b><span class=No>Listing Available</span> ZFS <span class=No>Storage Pools</span></dt><dd><p class=Pp>The following command lists all available pools on the system.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool list
</code>
NAME   SIZE  ALLOC   FREE   FRAG  EXPANDSZ    CAP  DEDUP  HEALTH  ALTROOT
pool  2.70T   473G  2.24T    33%         -    17%  1.00x  ONLINE  -
test  1.98G  89.5K  1.98G    48%         -     0%  1.00x  ONLINE  -
    </pre></div></dd><dt><b class=Sy>Example 7</b><span class=No>Listing All Properties for a Pool</span></dt><dd><p class=Pp>The following command lists all the properties for a pool.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool get all pool
</code>
pool  size           2.70T       -
pool  capacity       17%         -
pool  altroot        -           default
pool  health         ONLINE      -
pool  guid           2501120270416322443  default
pool  version        28          default
pool  bootfs         pool/root   local
pool  delegation     on          default
pool  autoreplace    off         default
pool  cachefile      -           default
pool  failmode       wait        default
pool  listsnapshots  off         default
pool  autoexpand     off         default
pool  dedupditto     0           default
pool  dedupratio     1.00x       -
pool  free           2.24T       -
pool  allocated      473G        -
pool  readonly       off         -
    </pre></div></dd><dt><b class=Sy>Example 8</b><span class=No>Destroying a</span> ZFS <span class=No>Storage Pool</span></dt><dd><p class=Pp>The following command destroys the pool “<i class=Em>tank</i>” and any datasets contained within.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool destroy -f tank
</code>
    </pre></div></dd><dt><b class=Sy>Example 9</b><span class=No>Exporting a</span> ZFS <span class=No>Storage Pool</span></dt><dd><p class=Pp>The following command exports the devices in pool <i class=Em>tank</i> so that they can be relocated or later imported.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool export tank
</code>
    </pre></div></dd><dt><b class=Sy>Example 10</b><span class=No>Importing a</span> ZFS <span class=No>Storage Pool</span></dt><dd><p class=Pp>The following command displays available pools, and then imports the pool “<i class=Em>tank</i>” for use on the system.</p><p class=Pp>The results from this command are similar to the following:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool import
</code>

  pool: tank
    id: 15451357997522795478
 state: ONLINE
action: The pool can be imported using its name or numeric identifier.
config:

        tank        ONLINE
          mirror    ONLINE
               da0  ONLINE
               da1  ONLINE
    </pre></div></dd><dt><b class=Sy>Example 11</b> Upgrading All ZFS Storage Pools to the Current Version</dt><dd><p class=Pp>The following command upgrades all ZFS Storage pools to the current version of the software.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool upgrade -a
</code>
This system is currently running ZFS pool version 28.
    </pre></div></dd><dt><b class=Sy>Example 12</b><span class=No>Managing Hot Spares</span></dt><dd><p class=Pp>The following command creates a new pool with an available hot spare:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create tank mirror da0 da1 spare da2
</code>
    </pre></div><p class=Pp>If one of the disks were to fail, the pool would be reduced to the degraded state. The failed device can be replaced using the following command:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool replace tank da0 da2
</code>
    </pre></div><p class=Pp>Once the data has been resilvered, the spare is automatically removed and is made available should another device fails. The hot spare can be permanently removed from the pool using the following command:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool remove tank da2
</code>
    </pre></div></dd><dt><b class=Sy>Example 13</b> Creating a ZFS Pool with Mirrored Separate Intent Logs</dt><dd><p class=Pp>The following command creates a ZFS storage pool consisting of two, two-way mirrors and mirrored log devices:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool create pool mirror da0 da1 mirror da2 da3 log mirror da4 da5
</code>
    </pre></div></dd><dt><b class=Sy>Example 14</b><span class=No>Adding Cache Devices to a</span> ZFS <span class=No>Pool</span></dt><dd><p class=Pp>The following command adds two disks for use as cache devices to a ZFS storage pool:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool add pool cache da2 da3
</code>
    </pre></div><p class=Pp>Once added, the cache devices gradually fill with content from main memory. Depending on the size of your cache devices, it could take over an hour for them to fill. Capacity and reads can be monitored using the <code class=Cm>iostat</code> subcommand as follows:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool iostat -v pool 5
</code>
    </pre></div></dd><dt><b class=Sy>Example 15</b> Displaying expanded space on a device</dt><dd><p class=Pp>The following command dipslays the detailed information for the <i class=Em>data</i> pool. This pool is comprised of a single <i class=Em>raidz</i> vdev where one of its devices increased its capacity by 10GB. In this example, the pool will not be able to utilized this extra capacity until all the devices under the <i class=Em>raidz</i> vdev have been expanded.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool list -v data
</code>
NAME       SIZE  ALLOC   FREE   FRAG  EXPANDSZ    CAP  DEDUP  HEALTH  ALTROOT
data      23.9G  14.6G  9.30G    48%         -    61%  1.00x  ONLINE  -
  raidz1  23.9G  14.6G  9.30G    48%         -
    ada0      -      -      -      -         -
    ada1      -      -      -      -       10G
    ada2      -      -      -      -         -
    </pre></div></dd><dt><b class=Sy>Example 16</b> Removing a Mirrored top-level (Log or Data) Device</dt><dd><p class=Pp>The following commands remove the mirrored log device <b class=Sy>mirror-2</b> and mirrored top-level data device <b class=Sy>mirror-1</b>.</p><p class=Pp>Given this configuration:</p><div class="Bd Pp Bd-indent"><pre>
   pool: tank
  state: ONLINE
  scrub: none requested
 config:

         NAME        STATE     READ WRITE CKSUM
         tank        ONLINE       0     0     0
           mirror-0  ONLINE       0     0     0
                da0  ONLINE       0     0     0
                da1  ONLINE       0     0     0
           mirror-1  ONLINE       0     0     0
                da2  ONLINE       0     0     0
                da3  ONLINE       0     0     0
         logs
           mirror-2  ONLINE       0     0     0
                da4  ONLINE       0     0     0
                da5  ONLINE       0     0     0
    </pre></div><p class=Pp>The command to remove the mirrored log <i class=Em>mirror-2</i> is:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool remove tank mirror-2
</code>
    </pre></div><p class=Pp>The command to remove the mirrored data <i class=Em>mirror-1</i> is:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool remove tank mirror-1
</code>
    </pre></div></dd><dt><b class=Sy>Example 17</b> Recovering a Faulted ZFS Pool</dt><dd><p class=Pp>If a pool is faulted but recoverable, a message indicating this state is provided by “<code class=Nm>zpool</code><code class=Cm>status</code>” if the pool was cached (see the <code class=Fl>-c</code><var class=Ar>cachefile</var> argument above), or as part of the error output from a failed “<code class=Nm>zpool</code><code class=Cm>import</code>” of the pool.</p><p class=Pp>Recover a cached pool with the “<code class=Nm>zpool</code><code class=Cm>clear</code>” command:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool clear -F data
</code>
Pool data returned to its state as of Tue Sep 08 13:23:35 2009.
Discarded approximately 29 seconds of transactions.
    </pre></div><p class=Pp>If the pool configuration was not cached, use “<code class=Nm>zpool</code><code class=Cm>import</code>” with the recovery mode flag:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zpool import -F data
</code>
Pool data returned to its state as of Tue Sep 08 13:23:35 2009.
Discarded approximately 29 seconds of transactions.
    </pre></div></dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=zpool-features.7.html>zpool-features(7)</a>, <a class=Xr href=zfs.8.html>zfs(8)</a>, <a class=Xr href=zfsd.8.html>zfsd(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>zpool</code> utility first appeared in <span class=Ux>FreeBSD 7.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This manual page is a <a class=Xr href=mdoc.7.html>mdoc(7)</a> reimplementation of the OpenSolaris manual page <i class=Em>zpool(1M)</i>, modified and customized for <span class=Ux>FreeBSD</span> and licensed under the Common Development and Distribution License (CDDL). <p class=Pp>The <a class=Xr href=mdoc.7.html>mdoc(7)</a> implementation of this manual page was initially written by <span class=An>Martin Matuska</span> ⟨mm@FreeBSD.org⟩.</p></section></div><table class=foot><tr><td class=foot-date>February 25, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>