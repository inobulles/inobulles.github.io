<!DOCTYPE html>
<html><head><meta charset=utf-8><title>gpart(8)</title><keywords content=man,gpart></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>gpart(8)</h1><table class=head><tr><td class=head-ltitle>GPART(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>GPART(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>gpart</code> — <div class=Nd>control utility for the disk partitioning GEOM class</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>add</code><code class=Fl>-t</code><var class=Ar>type</var> [<code class=Fl>-a</code><var class=Ar>alignment</var>] [<code class=Fl>-b</code><var class=Ar>start</var>] [<code class=Fl>-s</code><var class=Ar>size</var>] [<code class=Fl>-i</code><var class=Ar>index</var>] [<code class=Fl>-l</code><var class=Ar>label</var>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>backup</code><var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>bootcode</code> [<code class=Fl>-N</code>] [<code class=Fl>-b</code><var class=Ar>bootcode</var>] [<code class=Fl>-p</code><var class=Ar>partcode</var><code class=Fl>-i</code><var class=Ar>index</var>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>commit</code><var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>create</code><code class=Fl>-s</code><var class=Ar>scheme</var> [<code class=Fl>-n</code><var class=Ar>entries</var>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>provider</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>delete</code><code class=Fl>-i</code><var class=Ar>index</var> [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>destroy</code> [<code class=Fl>-F</code>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>modify</code><code class=Fl>-i</code><var class=Ar>index</var> [<code class=Fl>-l</code><var class=Ar>label</var>] [<code class=Fl>-t</code><var class=Ar>type</var>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>recover</code> [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>resize</code><code class=Fl>-i</code><var class=Ar>index</var> [<code class=Fl>-a</code><var class=Ar>alignment</var>] [<code class=Fl>-s</code><var class=Ar>size</var>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>restore</code> [<code class=Fl>-lF</code>] [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>provider</var> [<var class=Ar>...</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>set</code><code class=Fl>-a</code><var class=Ar>attrib</var><code class=Fl>-i</code><var class=Ar>index</var> [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>show</code> [<code class=Fl>-l</code> | <code class=Fl>-r</code>] [<code class=Fl>-p</code>] [<var class=Ar>geom ...</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>undo</code><var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>unset</code><code class=Fl>-a</code><var class=Ar>attrib</var><code class=Fl>-i</code><var class=Ar>index</var> [<code class=Fl>-f</code><var class=Ar>flags</var>] <var class=Ar>geom</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>list</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>status</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>load</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gpart</code></td><td><code class=Cm>unload</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>gpart</code> utility is used to partition GEOM providers, normally disks. The first argument is the action to be taken: <dl class=Bl-tag><dt><a class=permalink href=#add><code class=Cm id=add>add</code></a></dt><dd>Add a new partition to the partitioning scheme given by <var class=Ar>geom</var>. The partition type must be specified with <code class=Fl>-t</code><var class=Ar>type</var>. The partition's location, size, and other attributes will be calculated automatically if the corresponding options are not specified. <p class=Pp>The <code class=Cm>add</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a><var class=Ar>alignment</var></dt><dd>If specified, then the <code class=Nm>gpart</code> utility tries to align <var class=Ar>start</var> offset and partition <var class=Ar>size</var> to be multiple of <var class=Ar>alignment</var> value.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>start</var></dt><dd>The logical block address where the partition will begin. An SI unit suffix is allowed.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a><var class=Ar>index</var></dt><dd>The index in the partition table at which the new partition is to be placed. The index determines the name of the device special file used to represent the partition.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a><var class=Ar>label</var></dt><dd>The label attached to the partition. This option is only valid when used on partitioning schemes that support partition labels.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>size</var></dt><dd>Create a partition of size <var class=Ar>size</var>. An SI unit suffix is allowed.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>type</var></dt><dd>Create a partition of type <var class=Ar>type</var>. Partition types are discussed below in the section entitled <a class=Sx href=#PARTITION_TYPES>PARTITION TYPES</a>.</dd></dl></dd><dt><a class=permalink href=#backup><code class=Cm id=backup>backup</code></a></dt><dd>Dump a partition table to standard output in a special format used by the <code class=Cm>restore</code> action.</dd><dt><a class=permalink href=#bootcode><code class=Cm id=bootcode>bootcode</code></a></dt><dd>Embed bootstrap code into the partitioning scheme's metadata on the <var class=Ar>geom</var> (using <code class=Fl>-b</code><var class=Ar>bootcode</var>) or write bootstrap code into a partition (using <code class=Fl>-p</code><var class=Ar>partcode</var> and <code class=Fl>-i</code><var class=Ar>index</var>). <p class=Pp>The <code class=Cm>bootcode</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a></dt><dd>Do not preserve the Volume Serial Number for MBR. MBR bootcode contains Volume Serial Number by default, and <code class=Nm>gpart</code> tries to preserve it when installing new bootstrap code. This option skips preservation to help with some versions of <a class=Xr href=boot0.8.html>boot0(8)</a> that do not support Volume Serial Number.</dd><dt><a class=permalink href=#b_2><code class=Fl id=b_2>-b</code></a><var class=Ar>bootcode</var></dt><dd>Embed bootstrap code from the file <var class=Ar>bootcode</var> into the partitioning scheme's metadata for <var class=Ar>geom</var>. Not all partitioning schemes have embedded bootstrap code, so the <code class=Fl>-b</code><var class=Ar>bootcode</var> option is scheme-specific in nature (see the section entitled <a class=Sx href=#BOOTSTRAPPING>BOOTSTRAPPING</a> below). The <var class=Ar>bootcode</var> file must match the partitioning scheme's requirements for file content and size.</dd><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_2><code class=Fl id=i_2>-i</code></a><var class=Ar>index</var></dt><dd>Specify the target partition for <code class=Fl>-p</code><var class=Ar>partcode</var>.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>partcode</var></dt><dd>Write the bootstrap code from the file <var class=Ar>partcode</var> into the <var class=Ar>geom</var> partition specified by <code class=Fl>-i</code><var class=Ar>index</var>. The size of the file must be smaller than the size of the partition.</dd></dl></dd><dt><a class=permalink href=#commit><code class=Cm id=commit>commit</code></a></dt><dd>Commit any pending changes for geom <var class=Ar>geom</var>. All actions are committed by default and will not result in pending changes. Actions can be modified with the <code class=Fl>-f</code><var class=Ar>flags</var> option so that they are not committed, but become pending. Pending changes are reflected by the geom and the <code class=Nm>gpart</code> utility, but they are not actually written to disk. The <code class=Cm>commit</code> action will write all pending changes to disk.</dd><dt><a class=permalink href=#create><code class=Cm id=create>create</code></a></dt><dd>Create a new partitioning scheme on a provider given by <var class=Ar>provider</var>. The scheme to use must be specified with the <code class=Fl>-s</code><var class=Ar>scheme</var> option. <p class=Pp>The <code class=Cm>create</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#f_3><code class=Fl id=f_3>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a><var class=Ar>entries</var></dt><dd>The number of entries in the partition table. Every partitioning scheme has a minimum and maximum number of entries. This option allows tables to be created with a number of entries that is within the limits. Some schemes have a maximum equal to the minimum and some schemes have a maximum large enough to be considered unlimited. By default, partition tables are created with the minimum number of entries.</dd><dt><a class=permalink href=#s_2><code class=Fl id=s_2>-s</code></a><var class=Ar>scheme</var></dt><dd>Specify the partitioning scheme to use. The kernel must have support for a particular scheme before that scheme can be used to partition a disk.</dd></dl></dd><dt><a class=permalink href=#delete><code class=Cm id=delete>delete</code></a></dt><dd>Delete a partition from geom <var class=Ar>geom</var> and further identified by the <code class=Fl>-i</code><var class=Ar>index</var> option. The partition cannot be actively used by the kernel. <p class=Pp>The <code class=Cm>delete</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#f_4><code class=Fl id=f_4>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_3><code class=Fl id=i_3>-i</code></a><var class=Ar>index</var></dt><dd>Specifies the index of the partition to be deleted.</dd></dl></dd><dt><a class=permalink href=#destroy><code class=Cm id=destroy>destroy</code></a></dt><dd>Destroy the partitioning scheme as implemented by geom <var class=Ar>geom</var>. <p class=Pp>The <code class=Cm>destroy</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a></dt><dd>Forced destroying of the partition table even if it is not empty.</dd><dt><a class=permalink href=#f_5><code class=Fl id=f_5>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd></dl></dd><dt><a class=permalink href=#modify><code class=Cm id=modify>modify</code></a></dt><dd>Modify a partition from geom <var class=Ar>geom</var> and further identified by the <code class=Fl>-i</code><var class=Ar>index</var> option. Only the type and/or label of the partition can be modified. Not all partitioning schemes support labels and it is invalid to try to change a partition label in such cases. <p class=Pp>The <code class=Cm>modify</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#f_6><code class=Fl id=f_6>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_4><code class=Fl id=i_4>-i</code></a><var class=Ar>index</var></dt><dd>Specifies the index of the partition to be modified.</dd><dt><a class=permalink href=#l_2><code class=Fl id=l_2>-l</code></a><var class=Ar>label</var></dt><dd>Change the partition label to <var class=Ar>label</var>.</dd><dt><a class=permalink href=#t_2><code class=Fl id=t_2>-t</code></a><var class=Ar>type</var></dt><dd>Change the partition type to <var class=Ar>type</var>.</dd></dl></dd><dt><a class=permalink href=#recover><code class=Cm id=recover>recover</code></a></dt><dd>Recover a corrupt partition's scheme metadata on the geom <var class=Ar>geom</var>. See the section entitled <a class=Sx href=#RECOVERING>RECOVERING</a> below for the additional information. <p class=Pp>The <code class=Cm>recover</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#f_7><code class=Fl id=f_7>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd></dl></dd><dt><a class=permalink href=#resize><code class=Cm id=resize>resize</code></a></dt><dd>Resize a partition from geom <var class=Ar>geom</var> and further identified by the <code class=Fl>-i</code><var class=Ar>index</var> option. If the new size is not specified it is automatically calculated to be the maximum available from <var class=Ar>geom</var>. <p class=Pp>The <code class=Cm>resize</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#a_2><code class=Fl id=a_2>-a</code></a><var class=Ar>alignment</var></dt><dd>If specified, then the <code class=Nm>gpart</code> utility tries to align partition <var class=Ar>size</var> to be a multiple of the <var class=Ar>alignment</var> value.</dd><dt><a class=permalink href=#f_8><code class=Fl id=f_8>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_5><code class=Fl id=i_5>-i</code></a><var class=Ar>index</var></dt><dd>Specifies the index of the partition to be resized.</dd><dt><a class=permalink href=#s_3><code class=Fl id=s_3>-s</code></a><var class=Ar>size</var></dt><dd>Specifies the new size of the partition, in logical blocks. An SI unit suffix is allowed.</dd></dl></dd><dt><a class=permalink href=#restore><code class=Cm id=restore>restore</code></a></dt><dd>Restore the partition table from a backup previously created by the <code class=Cm>backup</code> action and read from standard input. Only the partition table is restored. This action does not affect the content of partitions. After restoring the partition table and writing bootcode if needed, user data must be restored from backup. <p class=Pp>The <code class=Cm>restore</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#F_2><code class=Fl id=F_2>-F</code></a></dt><dd>Destroy partition table on the given <var class=Ar>provider</var> before doing restore.</dd><dt><a class=permalink href=#f_9><code class=Fl id=f_9>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#l_3><code class=Fl id=l_3>-l</code></a></dt><dd>Restore partition labels for partitioning schemes that support them.</dd></dl></dd><dt><a class=permalink href=#set><code class=Cm id=set>set</code></a></dt><dd>Set the named attribute on the partition entry. See the section entitled <a class=Sx href=#ATTRIBUTES>ATTRIBUTES</a> below for a list of available attributes. <p class=Pp>The <code class=Cm>set</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#a_3><code class=Fl id=a_3>-a</code></a><var class=Ar>attrib</var></dt><dd>Specifies the attribute to set.</dd><dt><a class=permalink href=#f_10><code class=Fl id=f_10>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_6><code class=Fl id=i_6>-i</code></a><var class=Ar>index</var></dt><dd>Specifies the index of the partition on which the attribute will be set.</dd></dl></dd><dt><a class=permalink href=#show><code class=Cm id=show>show</code></a></dt><dd>Show current partition information for the specified geoms, or all geoms if none are specified. The default output includes the logical starting block of each partition, the partition size in blocks, the partition index number, the partition type, and a human readable partition size. Block sizes and locations are based on the device's Sectorsize as shown by <code class=Cm>gpart list</code>. <p class=Pp>The <code class=Cm>show</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#l_4><code class=Fl id=l_4>-l</code></a></dt><dd>For partitioning schemes that support partition labels, print them instead of partition type.</dd><dt><a class=permalink href=#p_2><code class=Fl id=p_2>-p</code></a></dt><dd>Show provider names instead of partition indexes.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Show raw partition type instead of symbolic name.</dd></dl></dd><dt><a class=permalink href=#undo><code class=Cm id=undo>undo</code></a></dt><dd>Revert any pending changes for geom <var class=Ar>geom</var>. This action is the opposite of the <code class=Cm>commit</code> action and can be used to undo any changes that have not been committed.</dd><dt><a class=permalink href=#unset><code class=Cm id=unset>unset</code></a></dt><dd>Clear the named attribute on the partition entry. See the section entitled <a class=Sx href=#ATTRIBUTES>ATTRIBUTES</a> below for a list of available attributes. <p class=Pp>The <code class=Cm>unset</code> command accepts these options:</p><dl class=Bl-tag><dt><a class=permalink href=#a_4><code class=Fl id=a_4>-a</code></a><var class=Ar>attrib</var></dt><dd>Specifies the attribute to clear.</dd><dt><a class=permalink href=#f_11><code class=Fl id=f_11>-f</code></a><var class=Ar>flags</var></dt><dd>Additional operational flags. See the section entitled <a class=Sx href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a> below for a discussion about its use.</dd><dt><a class=permalink href=#i_7><code class=Fl id=i_7>-i</code></a><var class=Ar>index</var></dt><dd>Specifies the index of the partition on which the attribute will be cleared.</dd></dl></dd><dt><a class=permalink href=#list><code class=Cm id=list>list</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#status><code class=Cm id=status>status</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#load><code class=Cm id=load>load</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#unload><code class=Cm id=unload>unload</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd></dl></section><section class=Sh><h2 class=Sh id=PARTITIONING_SCHEMES><a class=permalink href=#PARTITIONING_SCHEMES>PARTITIONING SCHEMES</a></h2> Several partitioning schemes are supported by the <code class=Nm>gpart</code> utility: <dl class=Bl-tag><dt><a class=permalink href=#APM><code class=Cm id=APM>APM</code></a></dt><dd>Apple Partition Map, used by PowerPC(R) Macintosh(R) computers. Requires the <code class=Cd>GEOM_PART_APM</code> kernel option.</dd><dt><a class=permalink href=#BSD><code class=Cm id=BSD>BSD</code></a></dt><dd>Traditional BSD disklabel, usually used to subdivide MBR partitions. (This scheme can also be used as the sole partitioning method, without an MBR. Partition editing tools from other operating systems often do not understand the bare disklabel partition layout, so this is sometimes called “dangerously dedicated”.) Requires the <code class=Cm>GEOM_PART_BSD</code> kernel option.</dd><dt><a class=permalink href=#BSD64><code class=Cm id=BSD64>BSD64</code></a></dt><dd>64-bit implementation of BSD disklabel used in DragonFlyBSD to subdivide MBR or GPT partitions. Requires the <code class=Cm>GEOM_PART_BSD64</code> kernel option.</dd><dt><a class=permalink href=#LDM><code class=Cm id=LDM>LDM</code></a></dt><dd>The Logical Disk Manager is an implementation of volume manager for Microsoft Windows NT. Requires the <code class=Cd>GEOM_PART_LDM</code> kernel option.</dd><dt><a class=permalink href=#GPT><code class=Cm id=GPT>GPT</code></a></dt><dd>GUID Partition Table is used on Intel-based Macintosh computers and gradually replacing MBR on most PCs and other systems. Requires the <code class=Cm>GEOM_PART_GPT</code> kernel option.</dd><dt><a class=permalink href=#MBR><code class=Cm id=MBR>MBR</code></a></dt><dd>Master Boot Record is used on PCs and removable media. Requires the <code class=Cm>GEOM_PART_MBR</code> kernel option. The <code class=Cm>GEOM_PART_EBR</code> option adds support for the Extended Boot Record (EBR), which is used to define a logical partition. The <code class=Cm>GEOM_PART_EBR_COMPAT</code> option enables backward compatibility for partition names in the EBR scheme. It also prevents any type of actions on such partitions.</dd><dt><a class=permalink href=#VTOC8><code class=Cm id=VTOC8>VTOC8</code></a></dt><dd>Sun's SMI Volume Table Of Contents, used by SPARC64 and UltraSPARC computers. Requires the <code class=Cm>GEOM_PART_VTOC8</code> kernel option.</dd></dl><p class=Pp>See <a class=Xr href=glabel.8.html>glabel(8)</a> for additional information on labelization of devices and partitions.</p></section><section class=Sh><h2 class=Sh id=PARTITION_TYPES><a class=permalink href=#PARTITION_TYPES>PARTITION TYPES</a></h2> Partition types are identified on disk by particular strings or magic values. The <code class=Nm>gpart</code> utility uses symbolic names for common partition types so the user does not need to know these values or other details of the partitioning scheme in question. The <code class=Nm>gpart</code> utility also allows the user to specify scheme-specific partition types for partition types that do not have symbolic names. Symbolic names currently understood and used by <span class=Ux>FreeBSD</span> are: <dl class=Bl-tag><dt><a class=permalink href=#apple-boot><code class=Cm id=apple-boot>apple-boot</code></a></dt><dd>The system partition dedicated to storing boot loaders on some Apple systems. The scheme-specific types are “<code class=Li>!171</code>” for MBR, “<code class=Li>!Apple_Bootstrap</code>” for APM, and “<code class=Li>!426f6f74-0000-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#bios-boot><code class=Cm id=bios-boot>bios-boot</code></a></dt><dd>The system partition dedicated to second stage of the boot loader program. Usually it is used by the GRUB 2 loader for GPT partitioning schemes. The scheme-specific type is “<code class=Li>!21686148-6449-6E6F-744E-656564454649</code>”.</dd><dt><a class=permalink href=#efi><code class=Cm id=efi>efi</code></a></dt><dd>The system partition for computers that use the Extensible Firmware Interface (EFI). The scheme-specific types are “<code class=Li>!239</code>” for MBR, and “<code class=Li>!c12a7328-f81f-11d2-ba4b-00a0c93ec93b</code>” for GPT.</dd><dt><a class=permalink href=#freebsd><code class=Cm id=freebsd>freebsd</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition subdivided into filesystems with a <span class=Ux>BSD</span> disklabel. This is a legacy partition type and should not be used for the APM or GPT schemes. The scheme-specific types are “<code class=Li>!165</code>” for MBR, “<code class=Li>!FreeBSD</code>” for APM, and “<code class=Li>!516e7cb4-6ecf-11d6-8ff8-00022d09712b</code>” for GPT.</dd><dt><a class=permalink href=#freebsd-boot><code class=Cm id=freebsd-boot>freebsd-boot</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition dedicated to bootstrap code. The scheme-specific type is “<code class=Li>!83bd6b9d-7f41-11dc-be0b-001560b84f0f</code>” for GPT.</dd><dt><a class=permalink href=#freebsd-swap><code class=Cm id=freebsd-swap>freebsd-swap</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition dedicated to swap space. The scheme-specific types are “<code class=Li>!FreeBSD-swap</code>” for APM, “<code class=Li>!516e7cb5-6ecf-11d6-8ff8-00022d09712b</code>” for GPT, and tag 0x0901 for VTOC8.</dd><dt><a class=permalink href=#freebsd-ufs><code class=Cm id=freebsd-ufs>freebsd-ufs</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition that contains a UFS or UFS2 filesystem. The scheme-specific types are “<code class=Li>!FreeBSD-UFS</code>” for APM, “<code class=Li>!516e7cb6-6ecf-11d6-8ff8-00022d09712b</code>” for GPT, and tag 0x0902 for VTOC8.</dd><dt><a class=permalink href=#freebsd-vinum><code class=Cm id=freebsd-vinum>freebsd-vinum</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition that contains a Vinum volume. The scheme-specific types are “<code class=Li>!FreeBSD-Vinum</code>” for APM, “<code class=Li>!516e7cb8-6ecf-11d6-8ff8-00022d09712b</code>” for GPT, and tag 0x0903 for VTOC8.</dd><dt><a class=permalink href=#freebsd-zfs><code class=Cm id=freebsd-zfs>freebsd-zfs</code></a></dt><dd>A <span class=Ux>FreeBSD</span> partition that contains a ZFS volume. The scheme-specific types are “<code class=Li>!FreeBSD-ZFS</code>” for APM, “<code class=Li>!516e7cba-6ecf-11d6-8ff8-00022d09712b</code>” for GPT, and 0x0904 for VTOC8.</dd></dl><p class=Pp>Other symbolic names that can be used with the <code class=Nm>gpart</code> utility are:</p><dl class=Bl-tag><dt><a class=permalink href=#apple-apfs><code class=Cm id=apple-apfs>apple-apfs</code></a></dt><dd>An Apple macOS partition used for the Apple file system, APFS.</dd><dt><a class=permalink href=#apple-core-storage><code class=Cm id=apple-core-storage>apple-core-storage</code></a></dt><dd>An Apple Mac OS X partition used by logical volume manager known as Core Storage. The scheme-specific type is “<code class=Li>!53746f72-6167-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-hfs><code class=Cm id=apple-hfs>apple-hfs</code></a></dt><dd>An Apple Mac OS X partition that contains a HFS or HFS+ filesystem. The scheme-specific types are “<code class=Li>!175</code>” for MBR, “<code class=Li>!Apple_HFS</code>” for APM and “<code class=Li>!48465300-0000-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-label><code class=Cm id=apple-label>apple-label</code></a></dt><dd>An Apple Mac OS X partition dedicated to partition metadata that descibes disk device. The scheme-specific type is “<code class=Li>!4c616265-6c00-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-raid><code class=Cm id=apple-raid>apple-raid</code></a></dt><dd>An Apple Mac OS X partition used in a software RAID configuration. The scheme-specific type is “<code class=Li>!52414944-0000-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-raid-offline><code class=Cm id=apple-raid-offline>apple-raid-offline</code></a></dt><dd>An Apple Mac OS X partition used in a software RAID configuration. The scheme-specific type is “<code class=Li>!52414944-5f4f-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-tv-recovery><code class=Cm id=apple-tv-recovery>apple-tv-recovery</code></a></dt><dd>An Apple Mac OS X partition used by Apple TV. The scheme-specific type is “<code class=Li>!5265636f-7665-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-ufs><code class=Cm id=apple-ufs>apple-ufs</code></a></dt><dd>An Apple Mac OS X partition that contains a UFS filesystem. The scheme-specific types are “<code class=Li>!168</code>” for MBR, “<code class=Li>!Apple_UNIX_SVR2</code>” for APM and “<code class=Li>!55465300-0000-11aa-aa11-00306543ecac</code>” for GPT.</dd><dt><a class=permalink href=#apple-zfs><code class=Cm id=apple-zfs>apple-zfs</code></a></dt><dd>An Apple Mac OS X partition that contains a ZFS volume. The scheme-specific type is “<code class=Li>!6a898cc3-1dd2-11b2-99a6-080020736631</code>” for GPT. The same GUID is being used also for <b class=Sy>illumos/Solaris /usr partition</b>. See <a class=Sx href=#CAVEATS>CAVEATS</a> section below.</dd><dt><a class=permalink href=#dragonfly-label32><code class=Cm id=dragonfly-label32>dragonfly-label32</code></a></dt><dd>A DragonFlyBSD partition subdivided into filesystems with a <span class=Ux>BSD</span> disklabel. The scheme-specific type is “<code class=Li>!9d087404-1ca5-11dc-8817-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-label64><code class=Cm id=dragonfly-label64>dragonfly-label64</code></a></dt><dd>A DragonFlyBSD partition subdivided into filesystems with a disklabel64. The scheme-specific type is “<code class=Li>!3d48ce54-1d16-11dc-8696-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-legacy><code class=Cm id=dragonfly-legacy>dragonfly-legacy</code></a></dt><dd>A legacy partition type used in DragonFlyBSD. The scheme-specific type is “<code class=Li>!bd215ab2-1d16-11dc-8696-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-ccd><code class=Cm id=dragonfly-ccd>dragonfly-ccd</code></a></dt><dd>A DragonFlyBSD partition used with Concatenated Disk driver. The scheme-specific type is “<code class=Li>!dbd5211b-1ca5-11dc-8817-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-hammer><code class=Cm id=dragonfly-hammer>dragonfly-hammer</code></a></dt><dd>A DragonFlyBSD partition that contains a Hammer filesystem. The scheme-specific type is “<code class=Li>!61dc63ac-6e38-11dc-8513-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-hammer2><code class=Cm id=dragonfly-hammer2>dragonfly-hammer2</code></a></dt><dd>A DragonFlyBSD partition that contains a Hammer2 filesystem. The scheme-specific type is “<code class=Li>!5cbb9ad1-862d-11dc-a94d-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-swap><code class=Cm id=dragonfly-swap>dragonfly-swap</code></a></dt><dd>A DragonFlyBSD partition dedicated to swap space. The scheme-specific type is “<code class=Li>!9d58fdbd-1ca5-11dc-8817-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-ufs><code class=Cm id=dragonfly-ufs>dragonfly-ufs</code></a></dt><dd>A DragonFlyBSD partition that contains an UFS1 filesystem. The scheme-specific type is “<code class=Li>!9d94ce7c-1ca5-11dc-8817-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#dragonfly-vinum><code class=Cm id=dragonfly-vinum>dragonfly-vinum</code></a></dt><dd>A DragonFlyBSD partition used with Logical Volume Manager. The scheme-specific type is “<code class=Li>!9dd4478f-1ca5-11dc-8817-01301bb8a9f5</code>” for GPT.</dd><dt><a class=permalink href=#ebr><code class=Cm id=ebr>ebr</code></a></dt><dd>A partition subdivided into filesystems with a EBR. The scheme-specific type is “<code class=Li>!5</code>” for MBR.</dd><dt><a class=permalink href=#fat16><code class=Cm id=fat16>fat16</code></a></dt><dd>A partition that contains a FAT16 filesystem. The scheme-specific type is “<code class=Li>!6</code>” for MBR.</dd><dt><a class=permalink href=#fat32><code class=Cm id=fat32>fat32</code></a></dt><dd>A partition that contains a FAT32 filesystem. The scheme-specific type is “<code class=Li>!11</code>” for MBR.</dd><dt><a class=permalink href=#fat32lba><code class=Cm id=fat32lba>fat32lba</code></a></dt><dd>A partition that contains a FAT32 (LBA) filesystem. The scheme-specific type is “<code class=Li>!12</code>” for MBR.</dd><dt><a class=permalink href=#hifive-fsbl><code class=Cm id=hifive-fsbl>hifive-fsbl</code></a></dt><dd>A raw partition containing a HiFive first stage bootloader. The scheme-specific type is “<code class=Li>!5b193300-fc78-40cd-8002-e86c45580b47</code>” for GPT.</dd><dt><a class=permalink href=#hifive-bbl><code class=Cm id=hifive-bbl>hifive-bbl</code></a></dt><dd>A raw partition containing a HiFive second stage bootloader. The scheme-specific type is “<code class=Li>!2e54b353-1271-4842-806f-e436d6af6985</code>” for GPT.</dd><dt><a class=permalink href=#linux-data><code class=Cm id=linux-data>linux-data</code></a></dt><dd>A Linux partition that contains some filesystem with data. The scheme-specific types are “<code class=Li>!131</code>” for MBR and “<code class=Li>!0fc63daf-8483-4772-8e79-3d69d8477de4</code>” for GPT.</dd><dt><a class=permalink href=#linux-lvm><code class=Cm id=linux-lvm>linux-lvm</code></a></dt><dd>A Linux partition dedicated to Logical Volume Manager. The scheme-specific types are “<code class=Li>!142</code>” for MBR and “<code class=Li>!e6d6d379-f507-44c2-a23c-238f2a3df928</code>” for GPT.</dd><dt><a class=permalink href=#linux-raid><code class=Cm id=linux-raid>linux-raid</code></a></dt><dd>A Linux partition used in a software RAID configuration. The scheme-specific types are “<code class=Li>!253</code>” for MBR and “<code class=Li>!a19d880f-05fc-4d3b-a006-743f0f84911e</code>” for GPT.</dd><dt><a class=permalink href=#linux-swap><code class=Cm id=linux-swap>linux-swap</code></a></dt><dd>A Linux partition dedicated to swap space. The scheme-specific types are “<code class=Li>!130</code>” for MBR and “<code class=Li>!0657fd6d-a4ab-43c4-84e5-0933c84b4f4f</code>” for GPT.</dd><dt><a class=permalink href=#mbr><code class=Cm id=mbr>mbr</code></a></dt><dd>A partition that is sub-partitioned by a Master Boot Record (MBR). This type is known as “<code class=Li>!024dee41-33e7-11d3-9d69-0008c781f39f</code>” by GPT.</dd><dt><a class=permalink href=#ms-basic-data><code class=Cm id=ms-basic-data>ms-basic-data</code></a></dt><dd>A basic data partition (BDP) for Microsoft operating systems. In the GPT this type is the equivalent to partition types <code class=Cm>fat16</code>, <code class=Cm>fat32</code> and <code class=Cm>ntfs</code> in MBR. This type is used for GPT exFAT partitions. The scheme-specific type is “<code class=Li>!ebd0a0a2-b9e5-4433-87c0-68b6b72699c7</code>” for GPT.</dd><dt><a class=permalink href=#ms-ldm-data><code class=Cm id=ms-ldm-data>ms-ldm-data</code></a></dt><dd>A partition that contains Logical Disk Manager (LDM) volumes. The scheme-specific types are “<code class=Li>!66</code>” for MBR, “<code class=Li>!af9b60a0-1431-4f62-bc68-3311714a69ad</code>” for GPT.</dd><dt><a class=permalink href=#ms-ldm-metadata><code class=Cm id=ms-ldm-metadata>ms-ldm-metadata</code></a></dt><dd>A partition that contains Logical Disk Manager (LDM) database. The scheme-specific type is “<code class=Li>!5808c8aa-7e8f-42e0-85d2-e1e90434cfb3</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-ccd><code class=Cm id=netbsd-ccd>netbsd-ccd</code></a></dt><dd>A NetBSD partition used with Concatenated Disk driver. The scheme-specific type is “<code class=Li>!2db519c4-b10f-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-cgd><code class=Cm id=netbsd-cgd>netbsd-cgd</code></a></dt><dd>An encrypted NetBSD partition. The scheme-specific type is “<code class=Li>!2db519ec-b10f-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-ffs><code class=Cm id=netbsd-ffs>netbsd-ffs</code></a></dt><dd>A NetBSD partition that contains an UFS filesystem. The scheme-specific type is “<code class=Li>!49f48d5a-b10e-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-lfs><code class=Cm id=netbsd-lfs>netbsd-lfs</code></a></dt><dd>A NetBSD partition that contains an LFS filesystem. The scheme-specific type is “<code class=Li>!49f48d82-b10e-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-raid><code class=Cm id=netbsd-raid>netbsd-raid</code></a></dt><dd>A NetBSD partition used in a software RAID configuration. The scheme-specific type is “<code class=Li>!49f48daa-b10e-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#netbsd-swap><code class=Cm id=netbsd-swap>netbsd-swap</code></a></dt><dd>A NetBSD partition dedicated to swap space. The scheme-specific type is “<code class=Li>!49f48d32-b10e-11dc-b99b-0019d1879648</code>” for GPT.</dd><dt><a class=permalink href=#ntfs><code class=Cm id=ntfs>ntfs</code></a></dt><dd>A partition that contains a NTFS or exFAT filesystem. The scheme-specific type is “<code class=Li>!7</code>” for MBR.</dd><dt><a class=permalink href=#prep-boot><code class=Cm id=prep-boot>prep-boot</code></a></dt><dd>The system partition dedicated to storing boot loaders on some PowerPC systems, notably those made by IBM. The scheme-specific types are “<code class=Li>!65</code>” for MBR and “<code class=Li>!9e1a2d38-c612-4316-aa26-8b49521e5a8b</code>” for GPT.</dd><dt><a class=permalink href=#solaris-boot><code class=Cm id=solaris-boot>solaris-boot</code></a></dt><dd>A illumos/Solaris partition dedicated to boot loader. The scheme-specific type is “<code class=Li>!6a82cb45-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-root><code class=Cm id=solaris-root>solaris-root</code></a></dt><dd>A illumos/Solaris partition dedicated to root filesystem. The scheme-specific type is “<code class=Li>!6a85cf4d-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-swap><code class=Cm id=solaris-swap>solaris-swap</code></a></dt><dd>A illumos/Solaris partition dedicated to swap. The scheme-specific type is “<code class=Li>!6a87c46f-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-backup><code class=Cm id=solaris-backup>solaris-backup</code></a></dt><dd>A illumos/Solaris partition dedicated to backup. The scheme-specific type is “<code class=Li>!6a8b642b-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-var><code class=Cm id=solaris-var>solaris-var</code></a></dt><dd>A illumos/Solaris partition dedicated to /var filesystem. The scheme-specific type is “<code class=Li>!6a8ef2e9-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-home><code class=Cm id=solaris-home>solaris-home</code></a></dt><dd>A illumos/Solaris partition dedicated to /home filesystem. The scheme-specific type is “<code class=Li>!6a90ba39-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-altsec><code class=Cm id=solaris-altsec>solaris-altsec</code></a></dt><dd>A illumos/Solaris partition dedicated to alternate sector. The scheme-specific type is “<code class=Li>!6a9283a5-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#solaris-reserved><code class=Cm id=solaris-reserved>solaris-reserved</code></a></dt><dd>A illumos/Solaris partition dedicated to reserved space. The scheme-specific type is “<code class=Li>!6a945a3b-1dd2-11b2-99a6-080020736631</code>” for GPT.</dd><dt><a class=permalink href=#vmware-vmfs><code class=Cm id=vmware-vmfs>vmware-vmfs</code></a></dt><dd>A partition that contains a VMware File System (VMFS). The scheme-specific types are “<code class=Li>!251</code>” for MBR and “<code class=Li>!aa31e02a-400f-11db-9590-000c2911d1b8</code>” for GPT.</dd><dt><a class=permalink href=#vmware-vmkdiag><code class=Cm id=vmware-vmkdiag>vmware-vmkdiag</code></a></dt><dd>A partition that contains a VMware diagostic filesystem. The scheme-specific types are “<code class=Li>!252</code>” for MBR and “<code class=Li>!9d275380-40ad-11db-bf97-000c2911d1b8</code>” for GPT.</dd><dt><a class=permalink href=#vmware-reserved><code class=Cm id=vmware-reserved>vmware-reserved</code></a></dt><dd>A VMware reserved partition. The scheme-specific type is “<code class=Li>!9198effc-31c0-11db-8f-78-000c2911d1b8</code>” for GPT.</dd><dt><a class=permalink href=#vmware-vsanhdr><code class=Cm id=vmware-vsanhdr>vmware-vsanhdr</code></a></dt><dd>A partition claimed by VMware VSAN. The scheme-specific type is “<code class=Li>!381cfccc-7288-11e0-92ee-000c2911d0b2</code>” for GPT.</dd></dl></section><section class=Sh><h2 class=Sh id=ATTRIBUTES><a class=permalink href=#ATTRIBUTES>ATTRIBUTES</a></h2> The scheme-specific attributes for EBR: <dl class=Bl-tag><dt><a class=permalink href=#active><code class=Cm id=active>active</code></a></dt><dd style="width: auto;"> </dd></dl><p class=Pp>The scheme-specific attributes for GPT:</p><dl class=Bl-tag><dt><a class=permalink href=#bootme><code class=Cm id=bootme>bootme</code></a></dt><dd>When set, the <code class=Nm>gptboot</code> stage 1 boot loader will try to boot the system from this partition. Multiple partitions can be marked with the <code class=Cm>bootme</code> attribute. See <a class=Xr href=gptboot.8.html>gptboot(8)</a> for more details.</dd><dt><a class=permalink href=#bootonce><code class=Cm id=bootonce>bootonce</code></a></dt><dd>Setting this attribute automatically sets the <code class=Cm>bootme</code> attribute. When set, the <code class=Nm>gptboot</code> stage 1 boot loader will try to boot the system from this partition only once. Multiple partitions can be marked with the <code class=Cm>bootonce</code> and <code class=Cm>bootme</code> attribute pairs. See <a class=Xr href=gptboot.8.html>gptboot(8)</a> for more details.</dd><dt><a class=permalink href=#bootfailed><code class=Cm id=bootfailed>bootfailed</code></a></dt><dd>This attribute should not be manually managed. It is managed by the <code class=Nm>gptboot</code> stage 1 boot loader and the <span class=Pa>/etc/rc.d/gptboot</span> start-up script. See <a class=Xr href=gptboot.8.html>gptboot(8)</a> for more details.</dd><dt><a class=permalink href=#lenovofix><code class=Cm id=lenovofix>lenovofix</code></a></dt><dd>Setting this attribute overwrites the Protective MBR with a new one where the 0xee partition is the second, rather than the first record. This resolves a BIOS compatibility issue with some Lenovo models including the X220, T420, and T520, allowing them to boot from GPT partitioned disks without using EFI.</dd></dl><p class=Pp>The scheme-specific attributes for MBR:</p><dl class=Bl-tag><dt><a class=permalink href=#active_2><code class=Cm id=active_2>active</code></a></dt><dd style="width: auto;"> </dd></dl></section><section class=Sh><h2 class=Sh id=BOOTSTRAPPING><a class=permalink href=#BOOTSTRAPPING>BOOTSTRAPPING</a></h2><span class=Ux>FreeBSD</span> supports several partitioning schemes and each scheme uses different bootstrap code. The bootstrap code is located in a specific disk area for each partitioning scheme, and may vary in size for different schemes. <p class=Pp>Bootstrap code can be separated into two types. The first type is embedded in the partitioning scheme's metadata, while the second type is located on a specific partition. Embedding bootstrap code should only be done with the <code class=Cm>gpart bootcode</code> command with the <code class=Fl>-b</code><var class=Ar>bootcode</var> option. The GEOM PART class knows how to safely embed bootstrap code into specific partitioning scheme metadata without causing any damage.</p><p class=Pp>The Master Boot Record (MBR) uses a 512-byte bootstrap code image, embedded into the partition table's metadata area. There are two variants of this bootstrap code: <span class=Pa>/boot/mbr</span> and <span class=Pa>/boot/boot0</span>. <span class=Pa>/boot/mbr</span> searches for a partition with the <code class=Cm>active</code> attribute (see the <a class=Sx href=#ATTRIBUTES>ATTRIBUTES</a> section) in the partition table. Then it runs next bootstrap stage. The <span class=Pa>/boot/boot0</span> image contains a boot manager with some additional interactive functions for multi-booting from a user-selected partition.</p><p class=Pp>A BSD disklabel is usually created inside an MBR partition (slice) with type <code class=Cm>freebsd</code> (see the <a class=Sx href=#PARTITION_TYPES>PARTITION TYPES</a> section). It uses 8 KB size bootstrap code image <span class=Pa>/boot/boot</span>, embedded into the partition table's metadata area.</p><p class=Pp>Both types of bootstrap code are used to boot from the GUID Partition Table. First, a protective MBR is embedded into the first disk sector from the <span class=Pa>/boot/pmbr</span> image. It searches through the GPT for a <code class=Cm>freebsd-boot</code> partition (see the <a class=Sx href=#PARTITION_TYPES>PARTITION TYPES</a> section) and runs the next bootstrap stage from it. The <code class=Cm>freebsd-boot</code> partition should be smaller than 545 KB. It can be located either before or after other <span class=Ux>FreeBSD</span> partitions on the disk. There are two variants of bootstrap code to write to this partition: <span class=Pa>/boot/gptboot</span> and <span class=Pa>/boot/gptzfsboot</span>.</p><p class=Pp><span class=Pa>/boot/gptboot</span> is used to boot from UFS partitions. <code class=Cm>gptboot</code> searches through <code class=Cm>freebsd-ufs</code> partitions in the GPT and selects one to boot based on the <code class=Cm>bootonce</code> and <code class=Cm>bootme</code> attributes. If neither attribute is found, <span class=Pa>/boot/gptboot</span> boots from the first <code class=Cm>freebsd-ufs</code> partition. <span class=Pa>/boot/loader</span> (the third bootstrap stage) is loaded from the first partition that matches these conditions. See <a class=Xr href=gptboot.8.html>gptboot(8)</a> for more information.</p><p class=Pp><span class=Pa>/boot/gptzfsboot</span> is used to boot from ZFS. It searches through the GPT for <code class=Cm>freebsd-zfs</code> partitions, trying to detect ZFS pools. After all pools are detected, <span class=Pa>/boot/loader</span> is started from the first one found set as bootable.</p><p class=Pp>The VTOC8 scheme does not support embedding bootstrap code. Instead, the 8 KBytes bootstrap code image <span class=Pa>/boot/boot1</span> should be written with the <code class=Cm>gpart bootcode</code> command with the <code class=Fl>-p</code><var class=Ar>bootcode</var> option to all sufficiently large VTOC8 partitions. To do this the <code class=Fl>-i</code><var class=Ar>index</var> option could be omitted.</p><p class=Pp>The APM scheme also does not support embedding bootstrap code. Instead, the 800 KBytes bootstrap code image <span class=Pa>/boot/boot1.hfs</span> should be written with the <code class=Cm>gpart bootcode</code> command to a partition of type <code class=Cm>apple-boot</code>, which should also be 800 KB in size.</p></section><section class=Sh><h2 class=Sh id=OPERATIONAL_FLAGS><a class=permalink href=#OPERATIONAL_FLAGS>OPERATIONAL FLAGS</a></h2> Actions other than the <code class=Cm>commit</code> and <code class=Cm>undo</code> actions take an optional <code class=Fl>-f</code><var class=Ar>flags</var> option. This option is used to specify action-specific operational flags. By default, the <code class=Nm>gpart</code> utility defines the ‘<code class=Li>C</code>’ flag so that the action is immediately committed. The user can specify “<code class=Fl>-f</code><code class=Cm>x</code>” to have the action result in a pending change that can later, with other pending changes, be committed as a single compound change with the <code class=Cm>commit</code> action or reverted with the <code class=Cm>undo</code> action. </section><section class=Sh><h2 class=Sh id=RECOVERING><a class=permalink href=#RECOVERING>RECOVERING</a></h2> The GEOM PART class supports recovering of partition tables only for GPT. The GPT primary metadata is stored at the beginning of the device. For redundancy, a secondary (backup) copy of the metadata is stored at the end of the device. As a result of having two copies, some corruption of metadata is not fatal to the working of GPT. When the kernel detects corrupt metadata, it marks this table as corrupt and reports the problem. <code class=Cm>destroy</code> and <code class=Cm>recover</code> are the only operations allowed on corrupt tables. <p class=Pp>If one GPT header appears to be corrupt but the other copy remains intact, the kernel will log the following:</p><div class="Bd Pp Bd-indent"><pre>
GEOM: provider: the primary GPT table is corrupt or invalid.
GEOM: provider: using the secondary instead -- recovery strongly advised.
</pre></div><p class=Pp>or</p><div class="Bd Pp Bd-indent"><pre>
GEOM: provider: the secondary GPT table is corrupt or invalid.
GEOM: provider: using the primary only -- recovery suggested.
</pre></div><p class=Pp>Also <code class=Nm>gpart</code> commands such as <code class=Cm>show</code>, <code class=Cm>status</code> and <code class=Cm>list</code> will report about corrupt tables.</p><p class=Pp>If the size of the device has changed (e.g., volume expansion) the secondary GPT header will no longer be located in the last sector. This is not a metadata corruption, but it is dangerous because any corruption of the primary GPT will lead to loss of the partition table. This problem is reported by the kernel with the message:</p><div class="Bd Pp Bd-indent"><pre>
GEOM: provider: the secondary GPT header is not in the last LBA.
</pre></div><p class=Pp>This situation can be recovered with the <code class=Cm>recover</code> command. This command reconstructs the corrupt metadata using known valid metadata and relocates the secondary GPT to the end of the device.</p><p class=Pp><i class=Em>NOTE</i>: The GEOM PART class can detect the same partition table visible through different GEOM providers, and some of them will be marked as corrupt. Be careful when choosing a provider for recovery. If you choose incorrectly you can destroy the metadata of another GEOM class, e.g., GEOM MIRROR or GEOM LABEL.</p></section><section class=Sh><h2 class=Sh id=SYSCTL_VARIABLES><a class=permalink href=#SYSCTL_VARIABLES>SYSCTL VARIABLES</a></h2> The following <a class=Xr href=sysctl.8.html>sysctl(8)</a> variables can be used to control the behavior of the <code class=Nm>PART</code> GEOM class. The default value is shown next to each variable. <dl class=Bl-tag><dt><var class=Va>kern.geom.part.allow_nesting</var>: <span class=No>0</span></dt><dd>By default, some schemes (currently BSD, BSD64 and VTOC8) do not permit further nested partitioning. This variable overrides this restriction and allows arbitrary nesting (except within partitions created at offset 0). Some schemes have their own separate checks, for which see below.</dd><dt><var class=Va>kern.geom.part.auto_resize</var>: <span class=No>1</span></dt><dd>This variable controls automatic resize behavior of the <code class=Nm>PART</code> GEOM class. When this variable is enable and new size of provider is detected, the schema metadata is resized but all changes are not saved to disk, until <code class=Cm>gpart commit</code> is run to confirm changes. This behavior is also reported with diagnostic message: <b class=Sy>GEOM_PART: (provider) was automatically resized.</b><b class=Sy>Use `gpart commit (provider)` to save changes or `gpart undo (provider)`</b><b class=Sy>to revert them.</b></dd><dt><var class=Va>kern.geom.part.check_integrity</var>: <span class=No>1</span></dt><dd>This variable controls the behaviour of metadata integrity checks. When integrity checks are enabled, the <code class=Nm>PART</code> GEOM class verifies all generic partition parameters obtained from the disk metadata. If some inconsistency is detected, the partition table will be rejected with a diagnostic message: <b class=Sy>GEOM_PART: Integrity check failed (provider, scheme)</b>.</dd><dt><var class=Va>kern.geom.part.gpt.allow_nesting</var>: <span class=No>0</span></dt><dd>By default the GPT scheme is allowed only at the outermost nesting level. This variable allows this restriction to be removed.</dd><dt><var class=Va>kern.geom.part.ldm.debug</var>: <span class=No>0</span></dt><dd>Debug level of the Logical Disk Manager (LDM) module. This can be set to a number between 0 and 2 inclusive. If set to 0 minimal debug information is printed, and if set to 2 the maximum amount of debug information is printed.</dd><dt><var class=Va>kern.geom.part.ldm.show_mirrors</var>: <span class=No>0</span></dt><dd>This variable controls how the Logical Disk Manager (LDM) module handles mirrored volumes. By default mirrored volumes are shown as partitions with type <code class=Cm>ms-ldm-data</code> (see the <a class=Sx href=#PARTITION_TYPES>PARTITION TYPES</a> section). If this variable set to 1 each component of the mirrored volume will be present as independent partition. <i class=Em>NOTE</i>: This may break a mirrored volume and lead to data damage.</dd><dt><var class=Va>kern.geom.part.mbr.enforce_chs</var>: <span class=No>0</span></dt><dd>Specify how the Master Boot Record (MBR) module does alignment. If this variable is set to a non-zero value, the module will automatically recalculate the user-specified offset and size for alignment with the CHS geometry. Otherwise the values will be left unchanged.</dd><dt><var class=Va>kern.geom.part.separator</var>: <span class=No></span></dt><dd>Specify an optional separator that will be inserted between the GEOM name and partition name. This variable is a <a class=Xr href=loader.8.html>loader(8)</a> tunable. Note that setting this variable may break software which assumes a particular naming scheme.</dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Exit status is 0 on success, and 1 if the command fails. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> The examples below assume that the disk's logical block size is 512 bytes, regardless of its physical block size. <section class=Ss><h2 class=Ss id=GPT_2><a class=permalink href=#GPT_2>GPT</a></h2> In this example, we will format <span class=Pa>ada0</span> with the GPT scheme and create boot, swap and root partitions. First, we need to create the partition table: <div class="Bd Pp Bd-indent"><pre>
/sbin/gpart create -s GPT ada0
</pre></div><p class=Pp>Next, we install a protective MBR with the first-stage bootstrap code. The protective MBR lists a single, bootable partition spanning the entire disk, thus allowing non-GPT-aware BIOSes to boot from the disk and preventing tools which do not understand the GPT scheme from considering the disk to be unformatted.</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart bootcode -b /boot/pmbr ada0
</pre></div><p class=Pp>We then create a dedicated <code class=Cm>freebsd-boot</code> partition to hold the second-stage boot loader, which will load the <span class=Ux>FreeBSD</span> kernel and modules from a UFS or ZFS filesystem. This partition must be larger than the bootstrap code (either <span class=Pa>/boot/gptboot</span> for UFS or <span class=Pa>/boot/gptzfsboot</span> for ZFS), but smaller than 545 kB since the first-stage loader will load the entire partition into memory during boot, regardless of how much data it actually contains. We create a 472-block (236 kB) boot partition at offset 40, which is the size of the partition table (34 blocks or 17 kB) rounded up to the nearest 4 kB boundary.</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -b 40 -s 472 -t freebsd-boot ada0
/sbin/gpart bootcode -p /boot/gptboot -i 1 ada0
</pre></div><p class=Pp>We now create a 4 GB swap partition at the first available offset, which is 40 + 472 = 512 blocks (256 kB).</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -s 4G -t freebsd-swap ada0
</pre></div><p class=Pp>Aligning the swap partition and all subsequent partitions on a 256 kB boundary ensures optimal performance on a wide range of media, from plain old disks with 512-byte blocks, through modern “advanced format” disks with 4096-byte physical blocks, to RAID volumes with stripe sizes of up to 256 kB.</p><p class=Pp>Finally, we create and format an 8 GB <code class=Cm>freebsd-ufs</code> partition for the root filesystem, leaving the rest of the slice free for additional filesystems:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -s 8G -t freebsd-ufs ada0
/sbin/newfs -Uj /dev/ada0p3
</pre></div></section><section class=Ss><h2 class=Ss id=MBR_2><a class=permalink href=#MBR_2>MBR</a></h2> In this example, we will format <span class=Pa>ada0</span> with the MBR scheme and create a single partition which we subdivide using a traditional <span class=Ux>BSD</span> disklabel. <p class=Pp>First, we create the partition table and a single 64 GB partition, then we mark that partition active (bootable) and install the first-stage boot loader:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart create -s MBR ada0
/sbin/gpart add -t freebsd -s 64G ada0
/sbin/gpart set -a active -i 1 ada0
/sbin/gpart bootcode -b /boot/boot0 ada0
</pre></div><p class=Pp>Next, we create a disklabel in that partition (“slice” in disklabel terminology) with room for up to 20 partitions:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart create -s BSD -n 20 ada0s1
</pre></div><p class=Pp>We then create an 8 GB root partition and a 4 GB swap partition:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -t freebsd-ufs -s 8G ada0s1
/sbin/gpart add -t freebsd-swap -s 4G ada0s1
</pre></div><p class=Pp>Finally, we install the appropriate boot loader for the <span class=Ux>BSD</span> label:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart bootcode -b /boot/boot ada0s1
</pre></div></section><section class=Ss><h2 class=Ss id=VTOC8_2><a class=permalink href=#VTOC8_2>VTOC8</a></h2> Create a VTOC8 scheme on <span class=Pa>da0</span>: <div class="Bd Pp Bd-indent"><pre>
/sbin/gpart create -s VTOC8 da0
</pre></div><p class=Pp>Create a 512MB-sized <code class=Cm>freebsd-ufs</code> partition to contain a UFS filesystem from which the system can boot.</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -s 512M -t freebsd-ufs da0
</pre></div><p class=Pp>Create a 15GB-sized <code class=Cm>freebsd-ufs</code> partition to contain a UFS filesystem and aligned on 4KB boundaries:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart add -s 15G -t freebsd-ufs -a 4k da0
</pre></div><p class=Pp>After creating all required partitions, embed bootstrap code into them:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart bootcode -p /boot/boot1 da0
</pre></div></section><section class=Ss><h2 class=Ss id=Deleting_Partitions_and_Destroying_the_Partitioning_Scheme><a class=permalink href=#Deleting_Partitions_and_Destroying_the_Partitioning_Scheme>Deleting Partitions and Destroying the Partitioning Scheme</a></h2> If a <i class=Em>Device busy</i> error is shown when trying to destroy a partition table, remember that all of the partitions must be deleted first with the <code class=Cm>delete</code> action. In this example, <span class=Pa>da0</span> has three partitions: <div class="Bd Pp Bd-indent"><pre>
/sbin/gpart delete -i 3 da0
/sbin/gpart delete -i 2 da0
/sbin/gpart delete -i 1 da0
/sbin/gpart destroy da0
</pre></div><p class=Pp>Rather than deleting each partition and then destroying the partitioning scheme, the <code class=Fl>-F</code> option can be given with <code class=Cm>destroy</code> to delete all of the partitions before destroying the partitioning scheme. This is equivalent to the previous example:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart destroy -F da0
</pre></div></section><section class=Ss><h2 class=Ss id=Backup_and_Restore><a class=permalink href=#Backup_and_Restore>Backup and Restore</a></h2> Create a backup of the partition table from <span class=Pa>da0</span>: <div class="Bd Pp Bd-indent"><pre>
/sbin/gpart backup da0 &gt; da0.backup
</pre></div><p class=Pp>Restore the partition table from the backup to <span class=Pa>da0</span>:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart restore -l da0 &lt; /mnt/da0.backup
</pre></div><p class=Pp>Clone the partition table from <span class=Pa>ada0</span> to <span class=Pa>ada1</span> and <span class=Pa>ada2</span>:</p><div class="Bd Pp Bd-indent"><pre>
/sbin/gpart backup ada0 | /sbin/gpart restore -F ada1 ada2
</pre></div></section></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=geom.4.html>geom(4)</a>, <a class=Xr href=boot0cfg.8.html>boot0cfg(8)</a>, <a class=Xr href=geom.8.html>geom(8)</a>, <a class=Xr href=glabel.8.html>glabel(8)</a>, <a class=Xr href=gptboot.8.html>gptboot(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>gpart</code> utility appeared in <span class=Ux>FreeBSD 7.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Marcel Moolenaar</span> &lt;<a class=Mt href=mailto:marcel@FreeBSD.org>marcel@FreeBSD.org</a>&gt; </section><section class=Sh><h2 class=Sh id=CAVEATS><a class=permalink href=#CAVEATS>CAVEATS</a></h2> Partition type <i class=Em>apple-zfs</i> (6a898cc3-1dd2-11b2-99a6-080020736631) is also being used on illumos/Solaris platforms for ZFS volumes. </section></div><table class=foot><tr><td class=foot-date>January 26, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>