<!DOCTYPE html>
<html><head><meta charset=utf-8><title>snd_hda(4)</title><keywords content=man,snd_hda></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>snd_hda(4)</h1><table class=head><tr><td class=head-ltitle>SND_HDA(4)</td><td class=head-vol>FreeBSD Kernel Interfaces Manual</td><td class=head-rtitle>SND_HDA(4)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>snd_hda</code> — <div class=Nd>Intel High Definition Audio bridge device driver</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2> To compile this driver into the kernel, place the following lines in your kernel configuration file: <div class="Bd Pp Bd-indent"><code class=Cd>device sound</code><br><code class=Cd>device snd_hda</code></div><p class=Pp>Alternatively, to load the driver as a module at boot time, place the following line in <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>:</p><div class="Bd Pp Bd-indent"><pre>
snd_hda_load="YES"
</pre></div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The High Definition (HD) Audio specification was developed by Intel as the logical successor of the old AC'97 specification and has several advantages, such as higher bandwidth which allows more channels and more detailed formats, support for several logical audio devices, and general purpose DMA channels. <p class=Pp>The <code class=Nm>snd_hda</code> driver includes HDA bus controller driver (hdac), HDA codec driver (hdacc) and HDA codecs audio functions bridge driver (hdaa) that allows the generic audio driver, <a class=Xr href=sound.4.html>sound(4)</a>, to be used with this hardware. Only audio functions are supported by <code class=Nm>snd_hda</code>. Modem and other possible functions are not implemented.</p><p class=Pp>The <code class=Nm>snd_hda</code> driver supports hardware that conforms with revision 1.0 of the Intel High Definition Audio specification and tries to behave much like the Microsoft Universal Audio Architecture (UAA) draft (revision 0.7b) for handling audio devices.</p><p class=Pp>According to HDA and UAA specifications, depending on the number of HDA buses and codecs present in system, their audio capabilities and BIOS provided configuration, the <code class=Nm>snd_hda</code> driver often provides several PCM audio devices. For example, one device for main rear 7.1 output and inputs, one device for independent headset connectors at front and one device for SPDIF or HDMI audio input/output. The assignment of audio inputs and outputs may be tuned with <a class=Xr href=device.hints.5.html>device.hints(5)</a> or <a class=Xr href=sysctl.8.html>sysctl(8)</a>. The driver's verbose boot messages provide a lot of information about the operation of the driver and present audio setup.</p><p class=Pp>The default audio device may be tuned by setting the <var class=Ar>hw.snd.default_unit</var> sysctl, as described in <a class=Xr href=sound.4.html>sound(4)</a>, or explicitly specified in application settings.</p><section class=Ss><h2 class=Ss id=Boot_time_Configuration><a class=permalink href=#Boot_time_Configuration>Boot-time Configuration</a></h2> The following variables are available at boot-time through the <a class=Xr href=device.hints.5.html>device.hints(5)</a> file: <div class=Bd-indent><dl class=Bl-tag><dt><var class=Va>hint.hdac.%d.config</var></dt><dd>Configures a range of possible controller options. Possible values are: “<code class=Li>64bit</code>”, “<code class=Li>dmapos</code>”, “<code class=Li>msi</code>”. An option prefixed with “<code class=Li>no</code>”, such as “<code class=Li>nomsi</code>”, will do the opposite and takes precedence. Options can be separated by whitespace and commas.</dd><dt><var class=Va>hint.hdac.%d.msi</var></dt><dd>Controls MSI (Message Signaled Interrupts) support.</dd><dt><var class=Va>hint.hdac.%d.cad%d.nid%d.config</var></dt><dd>Same as <var class=Va>hint.hdaa.%d.nid%d.config</var></dd><dt><var class=Va>hint.hdaa.%d.config</var></dt><dd>Configures a range of possible audio function options. Possible values are: “<code class=Li>eapdinv</code>”, “<code class=Li>ivref</code>”, “<code class=Li>ivref50</code>”, “<code class=Li>ivref80</code>”, “<code class=Li>ivref100</code>”, “<code class=Li>fixedrate</code>”, “<code class=Li>forcestereo</code>”, “<code class=Li>ovref</code>”, “<code class=Li>ovref50</code>”, “<code class=Li>ovref80</code>”, “<code class=Li>ovref100</code>”, “<code class=Li>senseinv</code>”, “<code class=Li>softpcmvol</code>”, and “<code class=Li>vref</code>”. An option prefixed with “<code class=Li>no</code>”, such as “<code class=Li>nofixedrate</code>”, will do the opposite and takes precedence. Options can be separated by whitespace and commas. <p class=Pp>The “<code class=Li>eapdinv</code>” option inverts External Amplifier Power Down signal. The “<code class=Li>fixedrate</code>” denies all sampling rates except 48KHz. The “<code class=Li>forcestereo</code>” denies mono playback/recording. The “<code class=Li>senseinv</code>” option inverts jack sensing logic. The “<code class=Li>ivref</code><var class=Ar>X</var>” and “<code class=Li>ovref</code><var class=Ar>X</var>” options control the voltage used to power external microphones.</p></dd><dt><var class=Va>dev.hdaa.%d.init_clear</var></dt><dd>Zero out the pin widget config setup by the system. Some systems seem to have unusable audio devices if the pin widget configuration is cleared. Set this value to 0 to accept the default configuration values setup by the BIOS.</dd><dt><var class=Va>hint.hdaa.%d.gpio_config</var></dt><dd>Overrides audio function GPIO pins configuration set by BIOS. May be specified as a set of space-separated “<var class=Ar>num</var>=<var class=Ar>value</var>” pairs, where <var class=Ar>num</var> is GPIO line number, and <var class=Ar>value</var> is one of: “<code class=Li>keep</code>”, “<code class=Li>set</code>”, “<code class=Li>clear</code>”, “<code class=Li>disable</code>” and “<code class=Li>input</code>”. <p class=Pp>“<code class=Li>GPIO</code>s” are a codec's General Purpose I/O pins which system integrators sometimes use to control external muters, amplifiers and so on. If you have no sound, or sound volume is not adequate, you may have to experiment a bit with the GPIO setup to find the optimal setup for your system.</p></dd><dt><var class=Va>hint.hdaa.%d.nid%d.config</var></dt><dd>Overrides audio function pin configuration set by BIOS. May be specified as a 32-bit hexadecimal value with a leading “0x”, or as a set of space-separated “<var class=Ar>option</var>=<var class=Ar>value</var>” pairs.</dd><dt><var class=Va>hint.pcm.%d.rec.autosrc</var></dt><dd>Controls automatic recording source feature: <dl class="Bl-tag Bl-compact"><dt>0</dt><dd>disabled,</dd><dt>1</dt><dd>once on attach,</dd><dt>2</dt><dd>enabled.</dd></dl> When enabled, driver will automatically set recording source of the mixer to connected input using jack presence detection statuses.</dd></dl></div><p class=Pp>Pin configuration is the UAA driver's main source of information about codec usage. This information is usually provided by the codec manufacturer and tuned by system integrators for specific system requirements. The <code class=Nm>snd_hda</code> driver allows users to override it to fix integrator mistakes or to use the available codec in alternative ways (for example to get stereo output and 2 inputs instead of a single 5.1 output).</p><p class=Pp>The following options are supported:</p><div class=Bd-indent><dl class=Bl-tag><dt><var class=Va>as</var></dt><dd>Association number. Associations are used to group individual pins to form a complex multi-pin device. For example, to group 4 connectors for 7.1 input/output, or to treat several input connectors as sources for the same input device. Association numbers can be specified as numeric values from 0 to 15. A value of 0 means disabled pin. A value of 15 is a set of independent unassociated pins. Each association includes only pins of the same direction (in/out) and is detected atomically (all pins or none). A separate PCM audio device is created for every pair of input and output associations.</dd><dt><var class=Va>seq</var></dt><dd>Sequence number. A unique, per-association number used to order pins inside the particular association. Sequence numbers can be specified as numeric values from 0 to 15. <p class=Pp>The sequence number 15 has a special meaning for output associations. Output pins with this number and device type “<var class=Ar>Headphones</var>” will duplicate (with automatic mute if jack detection is supported) the first pin in that association.</p><p class=Pp>The sequence numbers 14 and 15 has a special meaning for input associations. Their presence in association defines it as multiplexed or mixed respectively. If none of them are present and there are more than one pin in association, the association will provide multichannel input.</p><p class=Pp>For multichannel input/output associations sequence numbers encode channel pairs positions: 0 - Front, 1 - Center/LFE, 2 - Back, 3 - Front Wide Center, 4 - Side. Standard combinations are: (0) - Stereo; (0, 2), (0, 4) - Quadro; (0, 1, 2), (0, 1, 4) - 5.1; (0, 1, 2, 4) - 7.1.</p></dd><dt><var class=Va>device</var></dt><dd>Device type. Can be specified as a number from 0 to 15 or as a name: “<code class=Li>Line-out</code>”, “<code class=Li>Speaker</code>”, “<code class=Li>Headphones,</code>” “<code class=Li>CD</code>”, “<code class=Li>SPDIF-out</code>”, “<code class=Li>Digital-out</code>”, “<code class=Li>Modem-line</code>”, “<code class=Li>Modem-handset</code>”, “<code class=Li>Line-in</code>”, “<code class=Li>AUX</code>”, “<code class=Li>Mic</code>”, “<code class=Li>Telephony</code>”, “<code class=Li>SPDIF-in</code>”, “<code class=Li>Digital-in</code>”, “<code class=Li>Res.E</code>”, or “<code class=Li>Other</code>”. The device type also describes the pin direction (in/out). For example, “<code class=Li>CD</code>” always means an input pin, while “<code class=Li>Headphones</code>” always means an output.</dd><dt><var class=Va>conn</var></dt><dd>Connection type. Can be specified as a number from 0 to 3. The connection type can also be specified as one of the special names “<code class=Li>Jack</code>”, “<code class=Li>None</code>”, “<code class=Li>Fixed</code>”, or “<code class=Li>Both</code>”. Pins with a connection type of “<code class=Li>None</code>” are disabled.</dd><dt><var class=Va>ctype</var></dt><dd>Connector physical type. Can be specified as a number from 0 to 15. This is a reference only value. It is ignored by the <code class=Nm>snd_hda</code> driver.</dd><dt><var class=Va>color</var></dt><dd>Connector color. Can be specified as a number from 0 to 15 or as one of the names “<code class=Li>Unknown</code>”, “<code class=Li>Black</code>”, “<code class=Li>Grey</code>”, “<code class=Li>Blue</code>”, “<code class=Li>Green</code>”, “<code class=Li>Red</code>”, “<code class=Li>Orange</code>”, “<code class=Li>Yellow</code>”, “<code class=Li>Purple</code>”, “<code class=Li>Pink</code>”, “<code class=Li>Res.A</code>”, “<code class=Li>Res.B</code>”, “<code class=Li>Res.C</code>”, “<code class=Li>Res.D</code>”, “<code class=Li>White</code>”, or “<code class=Li>Other</code>”. This is a reference only value. It is ignored by the <code class=Nm>snd_hda</code> driver.</dd><dt><var class=Va>loc</var></dt><dd>Connector physical location. Can be specified as a number from 0 to 63. This is a reference only value. It is ignored by the <code class=Nm>snd_hda</code> driver.</dd><dt><var class=Va>misc</var></dt><dd>Misc bits. Can be specified as a number from 0 to 15. Bit 0 has a special meaning. When set it means that jack detection is not implemented in hardware.</dd></dl></div></section><section class=Ss><h2 class=Ss id=Runtime_Configuration><a class=permalink href=#Runtime_Configuration>Runtime Configuration</a></h2> The following <a class=Xr href=sysctl.8.html>sysctl(8)</a> variables are available in addition to those available to all <a class=Xr href=sound.4.html>sound(4)</a> devices: <div class=Bd-indent><dl class=Bl-tag><dt><var class=Va>dev.hdac.%d.pindump</var></dt><dd>Setting this to a non-zero value dumps the current pin configuration, main capabilities and jack sense status of all audio functions on the controller to console and syslog.</dd><dt><var class=Va>dev.hdac.%d.polling</var></dt><dd>Enables polling mode. In this mode the driver operates by querying the device state on timer ticks using <a class=Xr href=callout.9.html>callout(9)</a> instead of interrupts. Polling is disabled by default. Do not enable it unless you are facing weird interrupt problems or if the device cannot generate interrupts at all.</dd><dt><var class=Va>dev.hdaa.%d.config</var></dt><dd>Run-time equivalent of the <var class=Va>hint.hdaa.%d.config</var> tunable.</dd><dt><var class=Va>dev.hdaa.%d.gpi_state</var></dt><dd>Current state of GPI lines.</dd><dt><var class=Va>dev.hdaa.%d.gpio_state</var></dt><dd>Current state of GPIO lines.</dd><dt><var class=Va>dev.hdaa.%d.gpio_config</var></dt><dd>Run-time equivalent of the <var class=Va>hint.hdaa.%d.gpio.config</var> tunable.</dd><dt><var class=Va>dev.hdaa.%d.gpo_state</var></dt><dd>Current state of GPO lines.</dd><dt><var class=Va>dev.hdaa.%d.nid%d_config</var></dt><dd>Run-time equivalent of the <var class=Va>hint.hdaa.%d.nid%d.config</var> tunable.</dd><dt><var class=Va>dev.hdaa.%d.nid%d_original</var></dt><dd>Original pin configuration written by BIOS.</dd><dt><var class=Va>dev.hdaa.%d.reconfig</var></dt><dd>Setting this to a non-zero value makes driver to destroy existing pcm devices and process new pins configuration set via <var class=Va>dev.hdaa.%d.nid%d_config</var>.</dd><dt><var class=Va>dev.pcm.%d.play.32bit</var>, <var class=Va>dev.pcm.%d.rec.32bit</var></dt><dd>HDA controller uses 32bit representation for all samples of more then 16 bits. These variables allow to specify how many bits of these 32 should be used by CODEC. Depending on codec capabilities, possible values are 20, 24 and 32 bit. The default value is 24.</dd><dt><var class=Va>dev.pcm.%d.rec.autosrc</var></dt><dd>Run-time equivalent of the <var class=Va>hint.pcm.%d.rec.autosrc</var> tunable.</dd></dl></div></section></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Taking HP Compaq DX2300 with Realtek ALC888 HDA codec for example. This system has two audio connectors on a front side, three audio connectors on a rear side and one internal speaker. According to verbose driver output and the codec datasheet, this codec has five stereo DACs and two stereo ADCs, all of them are routable to any codec pin (external connector). All codec pins are reversible (could be configured either as input or output). <p class=Pp>So high codec uniformity and flexibility allow driver to configure it in many different ways, depending on requested pins usage described by pins configuration. The driver reports such default pin configuration when verbose messages enabled:</p><div class="Bd Pp"><pre>
hdaa0: nid   0x    as seq device       conn  jack    loc        color   misc
hdaa0: 20 01014020 2  0  Line-out      Jack  1/8     Rear       Green   0
hdaa0: 21 99130110 1  0  Speaker       Fixed ATAPI   Onboard    Unknown 1
hdaa0: 22 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
hdaa0: 23 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
hdaa0: 24 01a19830 3  0  Mic           Jack  1/8     Rear       Pink    8
hdaa0: 25 02a1983f 3  15 Mic           Jack  1/8     Front      Pink    8
hdaa0: 26 01813031 3  1  Line-in       Jack  1/8     Rear       Blue    0
hdaa0: 27 0221401f 1  15 Headphones    Jack  1/8     Front      Green   0
hdaa0: 28 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
hdaa0: 30 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
hdaa0: 31 411111f0 15 0  Speaker       None  1/8     Rear       Black   1 DISA
</pre></div><p class=Pp>Here we can see, that the nodes with ID (nid) 25 and 27 are front panel connectors (Jack, Front), nids 20, 24 and 26 are rear panel connectors (Jack, Rear) and nid 21 is a built-in speaker (Fixed, Onboard). Pins with nids 22, 23, 28, 30 and 31 will be disabled by driver due to "None" connectivity. So the pin count and description matches to connectors that we have.</p><p class=Pp>Using association (as) and sequence (seq) fields values pins are grouped into 3 associations:</p><div class="Bd Pp"><pre>
hdaa0: Association 0 (1) out:
hdaa0:   Pin nid=21 seq=0
hdaa0:   Pin nid=27 seq=15
hdaa0: Association 1 (2) out:
hdaa0:   Pin nid=20 seq=0
hdaa0: Association 2 (3) in:
hdaa0:   Pin nid=24 seq=0
hdaa0:   Pin nid=26 seq=1
hdaa0:   Pin nid=25 seq=15
</pre></div><p class=Pp>Each <a class=Xr href=pcm.4.html>pcm(4)</a> device uses two associations: one for playback and one for recording. Associations processed and assigned to <a class=Xr href=pcm.4.html>pcm(4)</a> devices in increasing numerical order. In this case association #0 (1) will become <code class=Li>pcm0</code> device playback, using the internal speakers and <var class=Ar>Headphones</var> jack with speaker automute on the headphones jack connection. Association #1 (2) will become <code class=Li>pcm1</code> playback, using the <var class=Ar>Line-out</var> jack. Association #2 (3) will become <code class=Li>pcm0</code> recording, using the external microphones and the <var class=Ar>Line-in</var> jack.</p><p class=Pp>The <code class=Nm>snd_hda</code> driver provides extensive verbose messages to diagnose its operation logic and describe its current codec configuration.</p><p class=Pp>Using <a class=Xr href=device.hints.5.html>device.hints(5)</a> it is possible to modify the configuration of the existing pins, allowing a broad range of different audio setups. Here are a few examples of some setups possible for this particular hardware:</p><section class=Ss><h2 class=Ss id=Example_1><a class=permalink href=#Example_1>Example 1</a></h2> Setting the <a class=Xr href=device.hints.5.html>device.hints(5)</a> options <div class="Bd Pp"><pre>
hint.hdac.0.cad0.nid20.config="as=1"
hint.hdac.0.cad0.nid21.config="as=2"
</pre></div><p class=Pp>will swap line-out and speaker functions. So the <code class=Li>pcm0</code> device will play to the line-out and headphones jacks. Line-out will be muted on the headphones jack connection. Recording on <code class=Li>pcm0</code> will go from two external microphones and line-in jacks. <code class=Li>pcm1</code> playback will go to the internal speaker.</p></section><section class=Ss><h2 class=Ss id=Example_2><a class=permalink href=#Example_2>Example 2</a></h2> Setting the <a class=Xr href=device.hints.5.html>device.hints(5)</a> options <div class="Bd Pp"><pre>
hint.hdac.0.cad0.nid20.config="as=1 seq=15 device=Headphones"
hint.hdac.0.cad0.nid27.config="as=2 seq=0"
hint.hdac.0.cad0.nid25.config="as=4 seq=0"
</pre></div><p class=Pp>will split the headphones and one of the microphones to a separate device. The <code class=Li>pcm0</code> device will play to the internal speaker and to the line-out jack, with speaker automute on the line-out jack connection. Recording on <code class=Li>pcm0</code> will use input from one external microphone and the line-in jacks. The <code class=Li>pcm1</code> device will be completely dedicated to a headset (headphones and mic) connected to the front connectors.</p></section><section class=Ss><h2 class=Ss id=Example_3><a class=permalink href=#Example_3>Example 3</a></h2> Setting the <a class=Xr href=device.hints.5.html>device.hints(5)</a> options <div class="Bd Pp"><pre>
hint.hdac.0.cad0.nid20.config="as=1 seq=0"
hint.hdac.0.cad0.nid26.config="as=2 seq=0"
hint.hdac.0.cad0.nid27.config="as=3 seq=0"
hint.hdac.0.cad0.nid25.config="as=4 seq=0"
hint.hdac.0.cad0.nid24.config="as=5 seq=0 device=Line-out"
hint.hdac.0.cad0.nid21.config="as=6 seq=0"
</pre></div><p class=Pp>will give 4 independent devices: <code class=Li>pcm0</code> (line-out and line-in), <code class=Li>pcm1</code> (headphones and mic), <code class=Li>pcm2</code> (additional line-out via retasked rear mic jack), and <code class=Li>pcm3</code> (internal speaker).</p></section><section class=Ss><h2 class=Ss id=Example_4><a class=permalink href=#Example_4>Example 4</a></h2> Setting the <a class=Xr href=device.hints.5.html>device.hints(5)</a> options <div class="Bd Pp"><pre>
hint.hdac.0.cad0.nid20.config="as=1 seq=0"
hint.hdac.0.cad0.nid24.config="as=1 seq=1 device=Line-out"
hint.hdac.0.cad0.nid26.config="as=1 seq=2 device=Line-out"
hint.hdac.0.cad0.nid21.config="as=2 seq=0"
</pre></div><p class=Pp>will give 2 devices: <code class=Li>pcm0</code> for 5.1 playback via 3 rear connectors (line-out and retasked mic and line-in) and headset (headphones and mic) at front connectors. <code class=Li>pcm1</code> for internal speaker playback. On headphones connection rear connectors will be muted.</p></section></section><section class=Sh><h2 class=Sh id=MIXER_CONTROLS><a class=permalink href=#MIXER_CONTROLS>MIXER CONTROLS</a></h2> Depending on codec configuration, these controls and signal sources could be reported to <a class=Xr href=sound.4.html>sound(4)</a>: <div class=Bd-indent><dl class=Bl-tag><dt><var class=Va>vol</var></dt><dd>overall output level (volume)</dd><dt><var class=Va>rec</var></dt><dd>overall recording level</dd><dt><var class=Va>igain</var></dt><dd>input-to-output monitoring loopback level</dd><dt><var class=Va>ogain</var></dt><dd>external amplifier control</dd><dt><var class=Va>pcm</var></dt><dd>PCM playback</dd><dt><var class=Va>mix</var></dt><dd>input mix</dd><dt><var class=Va>mic</var></dt><dd>first external or second internal microphone input</dd><dt><var class=Va>monitor</var></dt><dd>first internal or second external microphone input</dd><dt><var class=Va>line</var>, <var class=Va>line1</var>, <var class=Va>line2</var>, <var class=Va>line3</var></dt><dd>analog (line) inputs</dd><dt><var class=Va>dig1</var>, <var class=Va>dig2</var>, <var class=Va>dig3</var></dt><dd>digital (S/PDIF, HDMI or DisplayPort) inputs</dd><dt><var class=Va>cd</var></dt><dd>CD input</dd><dt><var class=Va>speaker</var></dt><dd>PC speaker input</dd><dt><var class=Va>phin</var>, <var class=Va>phout</var>, <var class=Va>radio</var>, <var class=Va>video</var></dt><dd>other random inputs</dd></dl></div><p class=Pp>Controls have different precision. Some could be just an on/off triggers. Most of controls use logarithmic scale.</p></section><section class=Sh><h2 class=Sh id=HARDWARE><a class=permalink href=#HARDWARE>HARDWARE</a></h2> The <code class=Nm>snd_hda</code> driver supports controllers having PCI class 4 (multimedia) and subclass 3 (HDA), compatible with Intel HDA specification. <p class=Pp>The <code class=Nm>snd_hda</code> driver supports more than two hundred different controllers and CODECs. There is no sense to list all of them here, as in most cases specific CODEC configuration and wiring are more important then type of the CODEC itself.</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=snd_ich.4.html>snd_ich(4)</a>, <a class=Xr href=sound.4.html>sound(4)</a>, <a class=Xr href=device.hints.5.html>device.hints(5)</a>, <a class=Xr href=loader.conf.5.html>loader.conf(5)</a>, <a class=Xr href=sysctl.8.html>sysctl(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>snd_hda</code> device driver first appeared in <span class=Ux>FreeBSD 6.3</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The <code class=Nm>snd_hda</code> driver was written by <span class=An>Stephane E. Potvin</span> &lt;<a class=Mt href=mailto:sepotvin@videotron.ca>sepotvin@videotron.ca</a>&gt;, <span class=An>Ariff Abdullah</span> &lt;<a class=Mt href=mailto:ariff@FreeBSD.org>ariff@FreeBSD.org</a>&gt; and <span class=An>Alexander Motin</span> &lt;<a class=Mt href=mailto:mav@FreeBSD.org>mav@FreeBSD.org</a>&gt;. This manual page was written by <span class=An>Joel Dahl</span> &lt;<a class=Mt href=mailto:joel@FreeBSD.org>joel@FreeBSD.org</a>&gt;, <span class=An>Alexander Motin</span> &lt;<a class=Mt href=mailto:mav@FreeBSD.org>mav@FreeBSD.org</a>&gt; and <span class=An>Giorgos Keramidas</span> &lt;<a class=Mt href=mailto:keramida@FreeBSD.org>keramida@FreeBSD.org</a>&gt;. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> Some Hardware/OEM vendors tend to screw up BIOS settings or use custom unusual CODEC wiring that create problems to the driver. This may result in missing pcm devices, or a state where the <code class=Nm>snd_hda</code> driver seems to attach and work, but no sound is played. Some cases can be solved by tuning <span class=Pa>loader.conf</span> variables. But before trying to fix problem that way, make sure that there really is a problem and that the PCM audio device in use really corresponds to the expected audio connector. <p class=Pp>Some vendors use non-standardized General Purpose I/O (GPIO) pins of the codec to control external amplifiers. In some cases setting a combination of GPIO bits may be needed to make sound work on a specific device.</p><p class=Pp>HDMI and DisplayPort audio may also require support from video driver.</p></section></div><table class=foot><tr><td class=foot-date>July 16, 2019</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>