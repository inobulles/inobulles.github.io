<!DOCTYPE html>
<html><head><meta charset=utf-8><title>bhyve(8)</title><keywords content=man,bhyve></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>bhyve(8)</h1><table class=head><tr><td class=head-ltitle>BHYVE(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>BHYVE(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>bhyve</code> — <div class=Nd>run a guest operating system inside a virtual machine</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>bhyve</code></td><td>[<code class=Fl>-AaCDeHhPSuWwxY</code>] [<code class=Fl>-c </code> [[<code class=Cm>cpus=</code>]<var class=Ar>numcpus</var>][<code class=Cm>,sockets=</code><var class=Ar>n</var>][<code class=Cm>,cores=</code><var class=Ar>n</var>][<code class=Cm>,threads=</code><var class=Ar>n</var>]] [<code class=Fl>-G </code>[<var class=Ar>w</var>][<var class=Ar>bind_address</var><code class=Cm>:</code>]<var class=Ar>port</var>] [<code class=Fl>-k</code><var class=Ar>config_file</var>] [<code class=Fl>-K</code><var class=Ar>layout</var>] [<code class=Fl>-l</code><var class=Ar>lpcdev</var>[<code class=Cm>,</code><var class=Ar>conf</var>]] [<code class=Fl>-m </code><var class=Ar>memsize</var>[<code class=Cm>K</code>|<code class=Cm>k</code>|<code class=Cm>M</code>|<code class=Cm>m</code>|<code class=Cm>G</code>|<code class=Cm>g</code>|<code class=Cm>T</code>|<code class=Cm>t</code>]] [<code class=Fl>-o</code><var class=Ar>var</var><code class=Cm>=</code><var class=Ar>value</var>] [<code class=Fl>-p</code><var class=Ar>vcpu</var><code class=Cm>:</code><var class=Ar>hostcpu</var>] [<code class=Fl>-r</code><var class=Ar>file</var>] [<code class=Fl>-s </code><var class=Ar>slot</var><code class=Cm>,</code><var class=Ar>emulation</var>[<code class=Cm>,</code><var class=Ar>conf</var>]] [<code class=Fl>-U</code><var class=Ar>uuid</var>] <var class=Ar>vmname</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>bhyve</code></td><td><code class=Fl>-l</code><code class=Cm>help</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>bhyve</code></td><td><code class=Fl>-s</code><code class=Cm>help</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2><code class=Nm>bhyve</code> is a hypervisor that runs guest operating systems inside a virtual machine. <p class=Pp>Parameters such as the number of virtual CPUs, amount of guest memory, and I/O connectivity can be specified with command-line parameters.</p><p class=Pp>If not using a boot ROM, the guest operating system must be loaded with <a class=Xr href=bhyveload.8.html>bhyveload(8)</a> or a similar boot loader before running <code class=Nm>bhyve</code>, otherwise, it is enough to run <code class=Nm>bhyve</code> with a boot ROM of choice.</p><p class=Pp><code class=Nm>bhyve</code> runs until the guest operating system reboots or an unhandled hypervisor exit is detected.</p></section><section class=Sh><h2 class=Sh id=OPTIONS><a class=permalink href=#OPTIONS>OPTIONS</a></h2><dl class=Bl-tag><dt><a class=permalink href=#A><code class=Fl id=A>-A</code></a></dt><dd>Generate ACPI tables. Required for <span class=Ux>FreeBSD</span>/amd64 guests.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>The guest's local APIC is configured in xAPIC mode. The xAPIC mode is the default setting so this option is redundant. It will be deprecated in a future version.</dd><dt><a class=permalink href=#C><code class=Fl id=C>-C</code></a></dt><dd>Include guest memory in core file.</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a> [<var class=Ar>setting ...</var>]</dt><dd>Number of guest virtual CPUs and/or the CPU topology. The default value for each of <var class=Ar>numcpus</var>, <var class=Ar>sockets</var>, <var class=Ar>cores</var>, and <var class=Ar>threads</var> is 1. The current maximum number of guest virtual CPUs is 16. If <var class=Ar>numcpus</var> is not specified then it will be calculated from the other arguments. The topology must be consistent in that the <var class=Ar>numcpus</var> must equal the product of <var class=Ar>sockets</var>, <var class=Ar>cores</var>, and <var class=Ar>threads</var>. If a <var class=Ar>setting</var> is specified more than once the last one has precedence.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>Destroy the VM on guest initiated power-off.</dd><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a></dt><dd>Force <code class=Nm>bhyve</code> to exit when a guest issues an access to an I/O port that is not emulated. This is intended for debug purposes.</dd><dt><a class=permalink href=#G><code class=Fl id=G>-G</code></a> [<var class=Ar>w</var>][<var class=Ar>bind_address</var><code class=Cm>:</code>]<var class=Ar>port</var></dt><dd>Start a debug server that uses the GDB protocol to export guest state to a debugger. An IPv4 TCP socket will be bound to the supplied <var class=Ar>bind_address</var> and <var class=Ar>port</var> to listen for debugger connections. Only a single debugger may be attached to the debug server at a time. If the option begins with ‘w’, <code class=Nm>bhyve</code> will pause execution at the first instruction waiting for a debugger to attach.</dd><dt><a class=permalink href=#H><code class=Fl id=H>-H</code></a></dt><dd>Yield the virtual CPU thread when a HLT instruction is detected. If this option is not specified, virtual CPUs will use 100% of a host CPU.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Print help message and exit.</dd><dt><a class=permalink href=#k><code class=Fl id=k>-k</code></a><var class=Ar>config_file</var></dt><dd>Set configuration variables from a simple, key-value config file. Each line of the config file is expected to consist of a config variable name, an equals sign</dd><dt><a class=permalink href=#K><code class=Fl id=K>-K</code></a><var class=Ar>layout</var></dt><dd>Specify the keyboard layout. The value that can be specified sets the file name in <var class=Ar>/usr/share/bhyve/kbdlayout</var>. This specification only works when loaded with UEFI mode for VNC. When using a VNC client that supports QEMU Extended Key Event Message (e.g. TigerVNC), this option isn't needed. When using a VNC client that doesn't support QEMU Extended Key Event Message (e.g. tightVNC), the layout defaults to the US keyboard unless specified otherwise. (‘=’), and a value. No spaces are permitted between the variable name, equals sign, or value. Blank lines and lines starting with ‘#’ are ignored. See <a class=Xr href=bhyve_config.5.html>bhyve_config(5)</a> for more details.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a><code class=Cm>help</code></dt><dd>Print a list of supported LPC devices.</dd><dt><a class=permalink href=#l_2><code class=Fl id=l_2>-l</code></a><var class=Ar>lpcdev</var>[<code class=Cm>,</code><var class=Ar>conf</var>]</dt><dd>Allow devices behind the LPC PCI-ISA bridge to be configured. The only supported devices are the TTY-class devices <code class=Cm>com1</code>, <code class=Cm>com2</code>, <code class=Cm>com3</code>, and <code class=Cm>com4</code>, the boot ROM device <code class=Cm>bootrom</code>, and the debug/test device <code class=Cm>pc-testdev</code>. <p class=Pp>The possible values for the <var class=Ar>conf</var> argument are listed in the <code class=Fl>-s</code> flag description.</p></dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>memsize</var>[<code class=Cm>K</code>|<code class=Cm>k</code>|<code class=Cm>M</code>|<code class=Cm>m</code>|<code class=Cm>G</code>|<code class=Cm>g</code>|<code class=Cm>T</code>|<code class=Cm>t</code>]</dt><dd>Set the guest physical memory size This must be the same size that was given to <a class=Xr href=bhyveload.8.html>bhyveload(8)</a>. <p class=Pp>The size argument may be suffixed with one of <code class=Cm>K</code>, <code class=Cm>M</code>, <code class=Cm>G</code> or <code class=Cm>T</code> (either upper or lower case) to indicate a multiple of kilobytes, megabytes, gigabytes, or terabytes. If no suffix is given, the value is assumed to be in megabytes.</p><p class=Pp>The default is 256M.</p></dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>var</var><code class=Cm>=</code><var class=Ar>value</var></dt><dd>Set the configuration variable <var class=Ar>var</var> to <var class=Ar>value</var>.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a></dt><dd>Force the guest virtual CPU to exit when a PAUSE instruction is detected.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>vcpu</var><code class=Cm></code>:<var class=Ar>hostcpu</var></dt><dd>Pin guest's virtual CPU <i class=Em>vcpu</i> to <i class=Em>hostcpu</i>.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a><var class=Ar>file</var></dt><dd>Resume a guest from a snapshot. The guest memory contents are restored from <var class=Ar>file</var>, and the guest device and vCPU state are restored from the file “<var class=Ar>file</var>.kern”. <p class=Pp>Note that the current snapshot file format requires that the configuration of devices in the new VM match the VM from which the snapshot was taken by specifying the same <code class=Fl>-s</code> and <code class=Fl>-l</code> options. The count of vCPUs and memory configuration are read from the snapshot.</p></dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a></dt><dd>Wire guest memory.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><code class=Cm>help</code></dt><dd>Print a list of supported PCI devices.</dd><dt><a class=permalink href=#s_2><code class=Fl id=s_2>-s</code></a><var class=Ar>slot</var><code class=Cm>,</code><var class=Ar>emulation</var>[<code class=Cm>,</code><var class=Ar>conf</var>]</dt><dd>Configure a virtual PCI slot and function. <p class=Pp><code class=Nm>bhyve</code> provides PCI bus emulation and virtual devices that can be attached to slots on the bus. There are 32 available slots, with the option of providing up to 8 functions per slot.</p><p class=Pp>The <var class=Ar>slot</var> can be specified in one of the following formats:</p><p class=Pp></p><ul class="Bl-bullet Bl-compact"><li><var class=Ar>pcislot</var></li><li><var class=Ar>pcislot</var><code class=Cm>:</code><var class=Ar>function</var></li><li><var class=Ar>bus</var><code class=Cm>:</code><var class=Ar>pcislot</var><code class=Cm>:</code><var class=Ar>function</var></li></ul><p class=Pp>The <var class=Ar>pcislot</var> value is 0 to 31. The optional <var class=Ar>function</var> value is 0 to 7. The optional <var class=Ar>bus</var> value is 0 to 255. If not specified, the <var class=Ar>function</var> value defaults to 0. If not specified, the <var class=Ar>bus</var> value defaults to 0.</p><p class=Pp>The <var class=Ar>emulation</var> argument can be one of the following:</p><dl class=Bl-tag><dt><a class=permalink href=#hostbridge><code class=Cm id=hostbridge>hostbridge</code></a></dt><dd>A simple host bridge. This is usually configured at slot 0, and is required by most guest operating systems.</dd><dt><a class=permalink href=#amd_hostbridge><code class=Cm id=amd_hostbridge>amd_hostbridge</code></a></dt><dd>Emulation identical to <code class=Cm>hostbridge</code> using a PCI vendor ID of AMD.</dd><dt><a class=permalink href=#passthru><code class=Cm id=passthru>passthru</code></a></dt><dd>PCI pass-through device.</dd><dt><a class=permalink href=#virtio-net><code class=Cm id=virtio-net>virtio-net</code></a></dt><dd>Virtio network interface.</dd><dt><a class=permalink href=#virtio-blk><code class=Cm id=virtio-blk>virtio-blk</code></a></dt><dd>Virtio block storage interface.</dd><dt><a class=permalink href=#virtio-scsi><code class=Cm id=virtio-scsi>virtio-scsi</code></a></dt><dd>Virtio SCSI interface.</dd><dt><a class=permalink href=#virtio-9p><code class=Cm id=virtio-9p>virtio-9p</code></a></dt><dd>Virtio 9p (VirtFS) interface.</dd><dt><a class=permalink href=#virtio-rnd><code class=Cm id=virtio-rnd>virtio-rnd</code></a></dt><dd>Virtio RNG interface.</dd><dt><a class=permalink href=#virtio-console><code class=Cm id=virtio-console>virtio-console</code></a></dt><dd>Virtio console interface, which exposes multiple ports to the guest in the form of simple char devices for simple IO between the guest and host userspaces.</dd><dt><a class=permalink href=#virtio-input><code class=Cm id=virtio-input>virtio-input</code></a></dt><dd>Virtio input interface.</dd><dt><a class=permalink href=#ahci><code class=Cm id=ahci>ahci</code></a></dt><dd>AHCI controller attached to arbitrary devices.</dd><dt><a class=permalink href=#ahci-cd><code class=Cm id=ahci-cd>ahci-cd</code></a></dt><dd>AHCI controller attached to an ATAPI CD/DVD.</dd><dt><a class=permalink href=#ahci-hd><code class=Cm id=ahci-hd>ahci-hd</code></a></dt><dd>AHCI controller attached to a SATA hard drive.</dd><dt><a class=permalink href=#e1000><code class=Cm id=e1000>e1000</code></a></dt><dd>Intel e82545 network interface.</dd><dt><a class=permalink href=#uart><code class=Cm id=uart>uart</code></a></dt><dd>PCI 16550 serial device.</dd><dt><a class=permalink href=#lpc><code class=Cm id=lpc>lpc</code></a></dt><dd>LPC PCI-ISA bridge with COM1, COM2, COM3, and COM4 16550 serial ports, a boot ROM, and, optionally, the debug/test device. The LPC bridge emulation can only be configured on bus 0.</dd><dt><a class=permalink href=#fbuf><code class=Cm id=fbuf>fbuf</code></a></dt><dd>Raw framebuffer device attached to VNC server.</dd><dt><a class=permalink href=#xhci><code class=Cm id=xhci>xhci</code></a></dt><dd>eXtensible Host Controller Interface (xHCI) USB controller.</dd><dt><a class=permalink href=#nvme><code class=Cm id=nvme>nvme</code></a></dt><dd>NVM Express (NVMe) controller.</dd><dt><a class=permalink href=#hda><code class=Cm id=hda>hda</code></a></dt><dd>High Definition Audio Controller.</dd></dl><p class=Pp>The optional parameter <var class=Ar>conf</var> describes the backend for device emulations. If <var class=Ar>conf</var> is not specified, the device emulation has no backend and can be considered unconnected.</p><p class=Pp>Network device backends:</p><ul class=Bl-bullet><li><a class=permalink href=#tap><code class=Cm id=tap>tap</code></a><var class=Ar>N</var>[<code class=Cm>,mac=</code><var class=Ar>xx:xx:xx:xx:xx:xx</var>][<code class=Cm>,mtu=</code><var class=Ar>N</var>]</li><li><a class=permalink href=#vmnet><code class=Cm id=vmnet>vmnet</code></a><var class=Ar>N</var>[<code class=Cm>,mac=</code><var class=Ar>xx:xx:xx:xx:xx:xx</var>][<code class=Cm>,mtu=</code><var class=Ar>N</var>]</li><li><a class=permalink href="#netgraph,path="><code class=Cm id="netgraph,path=">netgraph,path=</code></a><var class=Ar>ADDRESS</var><code class=Cm>,peerhook=</code><var class=Ar>HOOK</var>[<code class=Cm>,socket=</code><var class=Ar>NAME</var>][<code class=Cm>,hook=</code><var class=Ar>HOOK</var>][<code class=Cm>,mac=</code><var class=Ar>xx:xx:xx:xx:xx:xx</var>][<code class=Cm>,mtu=</code><var class=Ar>N</var>]</li></ul><p class=Pp>If <code class=Cm>mac</code> is not specified, the MAC address is derived from a fixed OUI and the remaining bytes from an MD5 hash of the slot and function numbers and the device name.</p><p class=Pp>The MAC address is an ASCII string in <a class=Xr href=ethers.5.html>ethers(5)</a> format.</p><p class=Pp>With <code class=Cm>virtio-net</code> devices, the <code class=Cm>mtu</code> parameter can be specified to inform the guest about the largest MTU that should be allowed, expressed in bytes.</p><p class=Pp>With <code class=Cm>netgraph</code> backend, the <code class=Cm>path</code> and <code class=Cm>peerhook</code> parameters must be specified to set the destination node and corresponding hook. The optional parameters <code class=Cm>socket</code> and <code class=Cm>hook</code> may be used to set the <a class=Xr href=ng_socket.4.html>ng_socket(4)</a> node name and source hook. The <var class=Ar>ADDRESS</var>, <var class=Ar>HOOK</var>, and <var class=Ar>NAME</var> must comply with <a class=Xr href=netgraph.4.html>netgraph(4)</a> addressing rules.</p><p class=Pp>Block storage device backends:</p><ul class=Bl-bullet><li><var class=Ar>/filename</var>[<code class=Cm>,</code><var class=Ar>block-device-options</var>]</li><li><var class=Ar>/dev/xxx</var>[<code class=Cm>,</code><var class=Ar>block-device-options</var>]</li></ul><p class=Pp>The <var class=Ar>block-device-options</var> are:</p><dl class=Bl-tag><dt><a class=permalink href=#nocache><code class=Cm id=nocache>nocache</code></a></dt><dd>Open the file with <code class=Dv>O_DIRECT</code>.</dd><dt><a class=permalink href=#direct><code class=Cm id=direct>direct</code></a></dt><dd>Open the file using <code class=Dv>O_SYNC</code>.</dd><dt><a class=permalink href=#ro><code class=Cm id=ro>ro</code></a></dt><dd>Force the file to be opened read-only.</dd><dt><a class=permalink href="#sectorsize="><code class=Cm id="sectorsize=">sectorsize=</code></a><var class=Ar>logical</var>[<code class=Cm>/</code><var class=Ar>physical</var>]</dt><dd>Specify the logical and physical sector sizes of the emulated disk. The physical sector size is optional and is equal to the logical sector size if not explicitly specified.</dd><dt><a class=permalink href=#nodelete><code class=Cm id=nodelete>nodelete</code></a></dt><dd>Disable emulation of guest trim requests via <code class=Dv>DIOCGDELETE</code> requests.</dd></dl><p class=Pp>SCSI device backends:</p><ul class=Bl-bullet><li><span class=Pa>/dev/cam/ctl</span>[<var class=Ar>pp</var><code class=Cm>.</code><var class=Ar>vp</var>][<code class=Cm>,</code><var class=Ar>scsi-device-options</var>]</li></ul><p class=Pp>The <var class=Ar>scsi-device-options</var> are:</p><dl class=Bl-tag><dt><a class=permalink href="#iid="><code class=Cm id="iid=">iid=</code></a><var class=Ar>IID</var></dt><dd>Initiator ID to use when sending requests to specified CTL port. The default value is 0.</dd></dl><p class=Pp>9P device backends:</p><ul class=Bl-bullet><li><var class=Ar>sharename</var><code class=Cm>=</code><var class=Ar>/path/to/share</var>[<code class=Cm>,</code><var class=Ar>9p-device-options</var>]</li></ul><p class=Pp>The <var class=Ar>9p-device-options</var> are:</p><dl class=Bl-tag><dt><a class=permalink href=#ro_2><code class=Cm id=ro_2>ro</code></a></dt><dd>Expose the share in read-only mode.</dd></dl><p class=Pp>TTY device backends:</p><dl class=Bl-tag><dt><a class=permalink href=#stdio><code class=Cm id=stdio>stdio</code></a></dt><dd>Connect the serial port to the standard input and output of the <code class=Nm>bhyve</code> process.</dd><dt><var class=Ar>/dev/xxx</var></dt><dd>Use the host TTY device for serial port I/O.</dd></dl><p class=Pp>Boot ROM device backends:</p><dl class=Bl-tag><dt><var class=Ar>romfile</var>[<code class=Cm>,</code><var class=Ar>varfile</var>]</dt><dd>Map <var class=Ar>romfile</var> in the guest address space reserved for boot firmware. If <var class=Ar>varfile</var> is provided, that file is also mapped in the boot firmware guest address space, and any modifications the guest makes will be saved to that file.</dd></dl><p class=Pp>Pass-through device backends:</p><ul class=Bl-bullet><li><a class=permalink href=#ppt><code class=Cm id=ppt>ppt</code></a><var class=Ar>N</var>[,<var class=Ar>passthru-device-options</var>]</li><li><var class=Ar>bus</var><code class=Cm>/</code><var class=Ar>slot</var><code class=Cm>/</code><var class=Ar>function</var>[,<var class=Ar>passthru-device-options</var>]</li><li><a class=permalink href=#pci><code class=Cm id=pci>pci</code></a><var class=Ar>bus</var>:<var class=Ar>slot</var>:<var class=Ar>function</var>[,<var class=Ar>passthru-device-options</var>]</li></ul><p class=Pp>Connect to a PCI device on the host either named ppt <var class=Ar>N</var> or at the selector described by <var class=Ar>slot</var>, <var class=Ar>bus</var>, and <var class=Ar>function</var> numbers.</p><p class=Pp>The <var class=Ar>passthru-device-options</var> are:</p><dl class=Bl-tag><dt><a class=permalink href="#rom="><code class=Cm id="rom=">rom=</code></a><var class=Ar>romfile</var></dt><dd>Add <var class=Ar>romfile</var> as option ROM to the PCI device. The ROM will be loaded by firmware and should be capable of initializing the device.</dd></dl><p class=Pp>Guest memory must be wired using the <code class=Fl>-S</code> option when a pass-through device is configured.</p><p class=Pp>The host device must have been reserved at boot-time using the <var class=Va>pptdevs</var> loader variable as described in <a class=Xr href=vmm.4.html>vmm(4)</a>.</p><p class=Pp>Virtio console device backends:</p><ul class=Bl-bullet><li><a class=permalink href="#port1="><code class=Cm id="port1=">port1=</code></a><var class=Ar>/path/to/port1.sock</var>[<code class=Cm>,port</code><var class=Ar>N</var><code class=Cm>=</code><var class=Ar>/path/to/port2.sock</var><span class=No> </span><var class=Ar>...</var>]</li></ul><p class=Pp>A maximum of 16 ports per device can be created. Every port is named and corresponds to a Unix domain socket created by <code class=Nm>bhyve</code>. <code class=Nm>bhyve</code> accepts at most one connection per port at a time.</p><p class=Pp>Limitations:</p><ul class=Bl-bullet><li>Due to lack of destructors in <code class=Nm>bhyve</code>, sockets on the filesystem must be cleaned up manually after <code class=Nm>bhyve</code> exits.</li><li>There is no way to use the “console port” feature, nor the console port resize at present.</li><li>Emergency write is advertised, but no-op at present.</li></ul><p class=Pp>Virtio input device backends:</p><dl class=Bl-tag><dt><var class=Ar>/dev/input/eventX</var></dt><dd>Send input events of <var class=Ar>/dev/input/eventX</var> to guest by VirtIO Input Interface.</dd></dl><p class=Pp>Framebuffer devices backends:</p><ul class=Bl-bullet><li>[<code class=Cm>rfb=</code><var class=Ar>ip-and-port</var>][<code class=Cm>,w=</code><var class=Ar>width</var>][<code class=Cm>,h=</code><var class=Ar>height</var>][<code class=Cm>,vga=</code><var class=Ar>vgaconf</var>][<code class=Cm>,wait</code>][<code class=Cm>,password=</code><var class=Ar>password</var>]</li></ul><p class=Pp>Configuration options are defined as follows:</p><dl class=Bl-tag><dt><a class=permalink href="#rfb="><code class=Cm id="rfb=">rfb=</code></a><var class=Ar>ip-and-port</var> (or <code class=Cm>tcp=</code><var class=Ar>ip-and-port</var>)</dt><dd>An IP address and a port VNC should listen on. There are two formats: <p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>[<var class=Ar>IPv4</var><code class=Cm>:</code>]<var class=Ar>port</var></li><li><code class=Cm>[</code><var class=Ar>IPv6%zone</var><code class=Cm>]</code><code class=Cm>:</code><var class=Ar>port</var></li></ul><p class=Pp>The default is to listen on localhost IPv4 address and default VNC port 5900. An IPv6 address must be enclosed in square brackets and may contain an optional zone identifier.</p></dd><dt><a class=permalink href="#w="><code class=Cm id="w=">w=</code></a><var class=Ar>width</var><span class=No>and</span><code class=Cm>h=</code><var class=Ar>height</var></dt><dd>A display resolution, width and height, respectively. If not specified, a default resolution of 1024x768 pixels will be used. Minimal supported resolution is 640x480 pixels, and maximum is 1920x1200 pixels.</dd><dt><a class=permalink href="#vga="><code class=Cm id="vga=">vga=</code></a><var class=Ar>vgaconf</var></dt><dd>Possible values for this option are <code class=Cm>io</code> (default), <code class=Cm>on</code> , and <code class=Cm>off</code>. PCI graphics cards have a dual personality in that they are standard PCI devices with BAR addressing, but may also implicitly decode legacy VGA I/O space (<span class=Ad>0x3c0-3df</span>) and memory space (64KB at <span class=Ad>0xA0000</span>). The default <code class=Cm>io</code> option should be used for guests that attempt to issue BIOS calls which result in I/O port queries, and fail to boot if I/O decode is disabled. <p class=Pp>The <code class=Cm>on</code> option should be used along with the CSM BIOS capability in UEFI to boot traditional BIOS guests that require the legacy VGA I/O and memory regions to be available.</p><p class=Pp>The <code class=Cm>off</code> option should be used for the UEFI guests that assume that VGA adapter is present if they detect the I/O ports. An example of such a guest is <span class=Ux>OpenBSD</span> in UEFI mode.</p><p class=Pp>Please refer to the <code class=Nm>bhyve</code><span class=Ux>FreeBSD</span> wiki page (<a class=Lk href=https://wiki.freebsd.org/bhyve>https://wiki.freebsd.org/bhyve</a>) for configuration notes of particular guests.</p></dd><dt><a class=permalink href=#wait><code class=Cm id=wait>wait</code></a></dt><dd>Instruct <code class=Nm>bhyve</code> to only boot upon the initiation of a VNC connection, simplifying the installation of operating systems that require immediate keyboard input. This can be removed for post-installation use.</dd><dt><a class=permalink href="#password="><code class=Cm id="password=">password=</code></a><var class=Ar>password</var></dt><dd>This type of authentication is known to be cryptographically weak and is not intended for use on untrusted networks. Many implementations will want to use stronger security, such as running the session over an encrypted channel provided by IPsec or SSH.</dd></dl><p class=Pp>xHCI USB device backends:</p><dl class=Bl-tag><dt><a class=permalink href=#tablet><code class=Cm id=tablet>tablet</code></a></dt><dd>A USB tablet device which provides precise cursor synchronization when using VNC.</dd></dl><p class=Pp>NVMe device backends:</p><ul class=Bl-bullet><li><var class=Ar>devpath</var>[<code class=Cm>,maxq=</code><var class=Ar>#</var>][<code class=Cm>,qsz=</code><var class=Ar>#</var>][<code class=Cm>,ioslots=</code><var class=Ar>#</var>][<code class=Cm>,sectsz=</code><var class=Ar>#</var>][<code class=Cm>,ser=</code><var class=Ar>#</var>][<code class=Cm>,eui64=</code><var class=Ar>#</var>][<code class=Cm>,dsm=</code><var class=Ar>opt</var>]</li></ul><p class=Pp>Configuration options are defined as follows:</p><dl class=Bl-tag><dt><var class=Ar>devpath</var></dt><dd>Accepted device paths are: <var class=Ar>/dev/blockdev</var> or <var class=Ar>/path/to/image</var> or <code class=Cm>ram=</code><var class=Ar>size_in_MiB</var>.</dd><dt><a class=permalink href=#maxq><code class=Cm id=maxq>maxq</code></a></dt><dd>Max number of queues.</dd><dt><a class=permalink href=#qsz><code class=Cm id=qsz>qsz</code></a></dt><dd>Max elements in each queue.</dd><dt><a class=permalink href=#ioslots><code class=Cm id=ioslots>ioslots</code></a></dt><dd>Max number of concurrent I/O requests.</dd><dt><a class=permalink href=#sectsz><code class=Cm id=sectsz>sectsz</code></a></dt><dd>Sector size (defaults to blockif sector size).</dd><dt><a class=permalink href=#ser><code class=Cm id=ser>ser</code></a></dt><dd>Serial number with maximum 20 characters.</dd><dt><a class=permalink href=#eui64><code class=Cm id=eui64>eui64</code></a></dt><dd>IEEE Extended Unique Identifier (8 byte value).</dd><dt><a class=permalink href=#dsm><code class=Cm id=dsm>dsm</code></a></dt><dd>DataSet Management support. Supported values are: <code class=Cm>auto</code>, <code class=Cm>enable</code>, and <code class=Cm>disable</code>.</dd></dl><p class=Pp>AHCI device backends:</p><ul class=Bl-bullet><li>[[<code class=Cm>hd:</code>|<code class=Cm>cd:</code>]<var class=Ar>path</var>][<code class=Cm>,nmrr=</code><var class=Ar>nmrr</var>][<code class=Cm>,ser=</code><var class=Ar>#</var>][<code class=Cm>,rev=</code><var class=Ar>#</var>][<code class=Cm>,model=</code><var class=Ar>#</var>]</li></ul><p class=Pp>Configuration options are defined as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#nmrr><code class=Cm id=nmrr>nmrr</code></a></dt><dd>Nominal Media Rotation Rate, known as RPM. Value 1 will indicate device as Solid State Disk. Default value is 0, not report.</dd><dt><a class=permalink href=#ser_2><code class=Cm id=ser_2>ser</code></a></dt><dd>Serial Number with maximum 20 characters.</dd><dt><a class=permalink href=#rev><code class=Cm id=rev>rev</code></a></dt><dd>Revision Number with maximum 8 characters.</dd><dt><a class=permalink href=#model><code class=Cm id=model>model</code></a></dt><dd>Model Number with maximum 40 characters.</dd></dl><p class=Pp>HD Audio device backends:</p><ul class=Bl-bullet><li>[<code class=Cm>play=</code><var class=Ar>playback</var>][<code class=Cm>,rec=</code><var class=Ar>recording</var>]</li></ul><p class=Pp>Configuration options are defined as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#play><code class=Cm id=play>play</code></a></dt><dd>Playback device, typically <var class=Ar>/dev/dsp0</var>.</dd><dt><a class=permalink href=#rec><code class=Cm id=rec>rec</code></a></dt><dd>Recording device, typically <var class=Ar>/dev/dsp0</var>.</dd></dl></dd><dt><a class=permalink href=#U><code class=Fl id=U>-U</code></a><var class=Ar>uuid</var></dt><dd>Set the universally unique identifier (UUID) in the guest's System Management BIOS System Information structure. By default a UUID is generated from the host's hostname and <var class=Ar>vmname</var>.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>RTC keeps UTC time.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a></dt><dd>Force virtio PCI device emulations to use MSI interrupts instead of MSI-X interrupts.</dd><dt><a class=permalink href=#w><code class=Fl id=w>-w</code></a></dt><dd>Ignore accesses to unimplemented Model Specific Registers (MSRs). This is intended for debug purposes.</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>The guest's local APIC is configured in x2APIC mode.</dd><dt><a class=permalink href=#Y><code class=Fl id=Y>-Y</code></a></dt><dd>Disable MPtable generation.</dd><dt><var class=Ar>vmname</var></dt><dd>Alphanumeric name of the guest. This should be the same as that created by <a class=Xr href=bhyveload.8.html>bhyveload(8)</a>.</dd></dl></section><section class=Sh><h2 class=Sh id=CONFIGURATION_VARIABLES><a class=permalink href=#CONFIGURATION_VARIABLES>CONFIGURATION VARIABLES</a></h2><code class=Nm>bhyve</code> uses an internal tree of configuration variables to describe global and per-device settings. When <code class=Nm>bhyve</code> starts, it parses command line options (including config files) in the order given on the command line. Each command line option sets one or more configuration variables. For example, the <code class=Fl>-s</code> option creates a new tree node for a PCI device and sets one or more variables under that node including the device model and device model-specific variables. Variables may be set multiple times during this parsing stage with the final value overriding previous values. <p class=Pp>Once all of the command line options have been processed, the configuration values are frozen. <code class=Nm>bhyve</code> then uses the value of configuration values to initialize device models and global settings.</p><p class=Pp>More details on configuration variables can be found in <a class=Xr href=bhyve_config.5.html>bhyve_config(5)</a>.</p></section><section class=Sh><h2 class=Sh id=DEBUG_SERVER><a class=permalink href=#DEBUG_SERVER>DEBUG SERVER</a></h2> The current debug server provides limited support for debuggers. <section class=Ss><h2 class=Ss id=Registers><a class=permalink href=#Registers>Registers</a></h2> Each virtual CPU is exposed to the debugger as a thread. <p class=Pp>General purpose registers can be queried for each virtual CPU, but other registers such as floating-point and system registers cannot be queried.</p></section><section class=Ss><h2 class=Ss id=Memory><a class=permalink href=#Memory>Memory</a></h2> Memory (including memory mapped I/O regions) can be read and written by the debugger. Memory operations use virtual addresses that are resolved to physical addresses via the current virtual CPU's active address translation. </section><section class=Ss><h2 class=Ss id=Control><a class=permalink href=#Control>Control</a></h2> The running guest can be interrupted by the debugger at any time (for example, by pressing Ctrl-C in the debugger). <p class=Pp>Single stepping is only supported on Intel CPUs supporting the MTRAP VM exit.</p><p class=Pp>Breakpoints are supported on Intel CPUs that support single stepping. Note that continuing from a breakpoint while interrupts are enabled in the guest may not work as expected due to timer interrupts firing while single stepping over the breakpoint.</p></section></section><section class=Sh><h2 class=Sh id=SIGNAL_HANDLING><a class=permalink href=#SIGNAL_HANDLING>SIGNAL HANDLING</a></h2><code class=Nm>bhyve</code> deals with the following signals: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt>SIGTERM</dt><dd>Trigger ACPI poweroff for a VM</dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Exit status indicates how the VM was terminated: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt>0</dt><dd>rebooted</dd><dt>1</dt><dd>powered off</dd><dt>2</dt><dd>halted</dd><dt>3</dt><dd>triple fault</dd><dt>4</dt><dd>exited due to an error</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> If not using a boot ROM, the guest operating system must have been loaded with <a class=Xr href=bhyveload.8.html>bhyveload(8)</a> or a similar boot loader before <a class=Xr href=bhyve.4.html>bhyve(4)</a> can be run. Otherwise, the boot loader is not needed. <p class=Pp>To run a virtual machine with 1GB of memory, two virtual CPUs, a virtio block device backed by the <span class=Pa>/my/image</span> filesystem image, and a serial port for the console:</p><div class="Bd Pp Bd-indent"><pre>
bhyve -c 2 -s 0,hostbridge -s 1,lpc -s 2,virtio-blk,/my/image \
  -l com1,stdio -A -H -P -m 1G vm1
</pre></div><p class=Pp>Run a 24GB single-CPU virtual machine with three network ports, one of which has a MAC address specified:</p><div class="Bd Pp Bd-indent"><pre>
bhyve -s 0,hostbridge -s 1,lpc -s 2:0,virtio-net,tap0 \
  -s 2:1,virtio-net,tap1 \
  -s 2:2,virtio-net,tap2,mac=00:be:fa:76:45:00 \
  -s 3,virtio-blk,/my/image -l com1,stdio \
  -A -H -P -m 24G bigvm
</pre></div><p class=Pp>Run an 8GB quad-CPU virtual machine with 8 AHCI SATA disks, an AHCI ATAPI CD-ROM, a single virtio network port, an AMD hostbridge, and the console port connected to an <a class=Xr href=nmdm.4.html>nmdm(4)</a> null-modem device.</p><div class="Bd Pp Bd-indent"><pre>
bhyve -c 4 \
  -s 0,amd_hostbridge -s 1,lpc \
  -s 1:0,ahci,hd:/images/disk.1,hd:/images/disk.2,\
hd:/images/disk.3,hd:/images/disk.4,\
hd:/images/disk.5,hd:/images/disk.6,\
hd:/images/disk.7,hd:/images/disk.8,\
cd:/images/install.iso \
  -s 3,virtio-net,tap0 \
  -l com1,/dev/nmdm0A \
  -A -H -P -m 8G
</pre></div><p class=Pp>Run a UEFI virtual machine with a display resolution of 800 by 600 pixels that can be accessed via VNC at: 0.0.0.0:5900.</p><div class="Bd Pp Bd-indent"><pre>
bhyve -c 2 -m 4G -w -H \
  -s 0,hostbridge \
  -s 3,ahci-cd,/path/to/uefi-OS-install.iso \
  -s 4,ahci-hd,disk.img \
  -s 5,virtio-net,tap0 \
  -s 29,fbuf,tcp=0.0.0.0:5900,w=800,h=600,wait \
  -s 30,xhci,tablet \
  -s 31,lpc -l com1,stdio \
  -l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \
   uefivm
</pre></div><p class=Pp>Run a UEFI virtual machine with a VNC display that is bound to all IPv6 addresses on port 5900.</p><div class="Bd Pp Bd-indent"><pre>
bhyve -c 2 -m 4G -w -H \
  -s 0,hostbridge \
  -s 4,ahci-hd,disk.img \
  -s 5,virtio-net,tap0 \
  -s 29,fbuf,tcp=[::]:5900,w=800,h=600 \
  -s 30,xhci,tablet \
  -s 31,lpc -l com1,stdio \
  -l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI.fd \
   uefivm
</pre></div><p class=Pp>Run a UEFI virtual machine with a VARS file to save EFI variables. Note that <code class=Nm>bhyve</code> will write guest modifications to the given VARS file. Be sure to create a per-guest copy of the template VARS file from <span class=Pa>/usr</span>.</p><div class="Bd Pp Bd-indent"><pre>
bhyve -c 2 -m 4g -w -H \
  -s 0,hostbridge \
  -s 31,lpc -p com1,stdio \
  -l bootrom,/usr/local/share/uefi-firmware/BHYVE_UEFI_CODE.fd,BHYVE_UEFI_VARS.fd
   uefivm
</pre></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=bhyve.4.html>bhyve(4)</a>, <a class=Xr href=netgraph.4.html>netgraph(4)</a>, <a class=Xr href=ng_socket.4.html>ng_socket(4)</a>, <a class=Xr href=nmdm.4.html>nmdm(4)</a>, <a class=Xr href=vmm.4.html>vmm(4)</a>, <a class=Xr href=bhyve_config.5.html>bhyve_config(5)</a>, <a class=Xr href=ethers.5.html>ethers(5)</a>, <a class=Xr href=bhyvectl.8.html>bhyvectl(8)</a>, <a class=Xr href=bhyveload.8.html>bhyveload(8)</a><p class=Pp></p><p class=Pp><cite class=Rs><span class=RsA>Intel</span>, <i class=RsB>64 and IA-32 Architectures Software Developer’s Manual</i>, <span class=RsV>Volume 3</span>.</cite></p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2><code class=Nm>bhyve</code> first appeared in <span class=Ux>FreeBSD 10.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Neel Natu</span> &lt;<a class=Mt href=mailto:neel@freebsd.org>neel@freebsd.org</a>&gt; <br><span class=An>Peter Grehan</span> &lt;<a class=Mt href=mailto:grehan@freebsd.org>grehan@freebsd.org</a>&gt; </section></div><table class=foot><tr><td class=foot-date>August 19, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>