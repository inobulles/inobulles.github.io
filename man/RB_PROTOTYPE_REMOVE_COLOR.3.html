<!DOCTYPE html>
<html><head><meta charset=utf-8><title>RB_PROTOTYPE_REMOVE_COLOR(3)</title><keywords content=man,RB_PROTOTYPE_REMOVE_COLOR></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>RB_PROTOTYPE_REMOVE_COLOR(3)</h1><table class=head><tr><td class=head-ltitle>TREE(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>TREE(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>SPLAY_PROTOTYPE</code>, <code class=Nm>SPLAY_GENERATE</code>, <code class=Nm>SPLAY_ENTRY</code>, <code class=Nm>SPLAY_HEAD</code>, <code class=Nm>SPLAY_INITIALIZER</code>, <code class=Nm>SPLAY_ROOT</code>, <code class=Nm>SPLAY_EMPTY</code>, <code class=Nm>SPLAY_NEXT</code>, <code class=Nm>SPLAY_MIN</code>, <code class=Nm>SPLAY_MAX</code>, <code class=Nm>SPLAY_FIND</code>, <code class=Nm>SPLAY_LEFT</code>, <code class=Nm>SPLAY_RIGHT</code>, <code class=Nm>SPLAY_FOREACH</code>, <code class=Nm>SPLAY_INIT</code>, <code class=Nm>SPLAY_INSERT</code>, <code class=Nm>SPLAY_REMOVE</code>, <code class=Nm>RB_PROTOTYPE</code>, <code class=Nm>RB_PROTOTYPE_STATIC</code>, <code class=Nm>RB_PROTOTYPE_INSERT</code>, <code class=Nm>RB_PROTOTYPE_INSERT_COLOR</code>, <code class=Nm>RB_PROTOTYPE_REMOVE</code>, <code class=Nm>RB_PROTOTYPE_REMOVE_COLOR</code>, <code class=Nm>RB_PROTOTYPE_FIND</code>, <code class=Nm>RB_PROTOTYPE_NFIND</code>, <code class=Nm>RB_PROTOTYPE_NEXT</code>, <code class=Nm>RB_PROTOTYPE_PREV</code>, <code class=Nm>RB_PROTOTYPE_MINMAX</code>, <code class=Nm>RB_GENERATE</code>, <code class=Nm>RB_GENERATE_STATIC</code>, <code class=Nm>RB_GENERATE_INSERT</code>, <code class=Nm>RB_GENERATE_INSERT_COLOR</code>, <code class=Nm>RB_GENERATE_REMOVE</code>, <code class=Nm>RB_GENERATE_REMOVE_COLOR</code>, <code class=Nm>RB_GENERATE_FIND</code>, <code class=Nm>RB_GENERATE_NFIND</code>, <code class=Nm>RB_GENERATE_NEXT</code>, <code class=Nm>RB_GENERATE_PREV</code>, <code class=Nm>RB_GENERATE_MINMAX</code>, <code class=Nm>RB_ENTRY</code>, <code class=Nm>RB_HEAD</code>, <code class=Nm>RB_INITIALIZER</code>, <code class=Nm>RB_ROOT</code>, <code class=Nm>RB_EMPTY</code>, <code class=Nm>RB_NEXT</code>, <code class=Nm>RB_PREV</code>, <code class=Nm>RB_MIN</code>, <code class=Nm>RB_MAX</code>, <code class=Nm>RB_FIND</code>, <code class=Nm>RB_NFIND</code>, <code class=Nm>RB_LEFT</code>, <code class=Nm>RB_RIGHT</code>, <code class=Nm>RB_PARENT</code>, <code class=Nm>RB_FOREACH</code>, <code class=Nm>RB_FOREACH_FROM</code>, <code class=Nm>RB_FOREACH_SAFE</code>, <code class=Nm>RB_FOREACH_REVERSE</code>, <code class=Nm>RB_FOREACH_REVERSE_FROM</code>, <code class=Nm>RB_FOREACH_REVERSE_SAFE</code>, <code class=Nm>RB_INIT</code>, <code class=Nm>RB_INSERT</code>, <code class=Nm>RB_REMOVE</code> — <div class=Nd>implementations of splay and red-black trees</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/tree.h.html>sys/tree.h</a>&gt;</code><p class=Pp><code class=Fn>SPLAY_PROTOTYPE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>SPLAY_GENERATE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>SPLAY_ENTRY</code>(<var class=Fa style="white-space: nowrap;">TYPE</var>);</p><p class=Pp><code class=Fn>SPLAY_HEAD</code>(<var class=Fa style="white-space: nowrap;">HEADNAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_INITIALIZER</code>(<var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><code class=Fn>SPLAY_ROOT</code>(<var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>bool</var><br><code class=Fn>SPLAY_EMPTY</code>(<var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_NEXT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_MIN</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_MAX</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_FIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_LEFT</code>(<var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>, <var class=Fa style="white-space: nowrap;">SPLAY_ENTRY NAME</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_RIGHT</code>(<var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>, <var class=Fa style="white-space: nowrap;">SPLAY_ENTRY NAME</var>);</p><p class=Pp><code class=Fn>SPLAY_FOREACH</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>SPLAY_INIT</code>(<var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_INSERT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>SPLAY_REMOVE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">SPLAY_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_STATIC</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_INSERT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_INSERT_COLOR</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_REMOVE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_REMOVE_COLOR</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_FIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_NFIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_NEXT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_PREV</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_PROTOTYPE_MINMAX</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_STATIC</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_INSERT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_INSERT_COLOR</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_REMOVE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_REMOVE_COLOR</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_FIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_NFIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">CMP</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_NEXT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_PREV</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_GENERATE_MINMAX</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>, <var class=Fa style="white-space: nowrap;">FIELD</var>, <var class=Fa style="white-space: nowrap;">ATTR</var>);</p><p class=Pp><code class=Fn>RB_ENTRY</code>(<var class=Fa style="white-space: nowrap;">TYPE</var>);</p><p class=Pp><code class=Fn>RB_HEAD</code>(<var class=Fa style="white-space: nowrap;">HEADNAME</var>, <var class=Fa style="white-space: nowrap;">TYPE</var>);</p><p class=Pp><code class=Fn>RB_INITIALIZER</code>(<var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_ROOT</code>(<var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>bool</var><br><code class=Fn>RB_EMPTY</code>(<var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_NEXT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_PREV</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_MIN</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_MAX</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_FIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_NFIND</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_LEFT</code>(<var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>, <var class=Fa style="white-space: nowrap;">RB_ENTRY NAME</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_RIGHT</code>(<var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>, <var class=Fa style="white-space: nowrap;">RB_ENTRY NAME</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_PARENT</code>(<var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>, <var class=Fa style="white-space: nowrap;">RB_ENTRY NAME</var>);</p><p class=Pp><code class=Fn>RB_FOREACH</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><code class=Fn>RB_FOREACH_FROM</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">POS_VARNAME</var>);</p><p class=Pp><code class=Fn>RB_FOREACH_SAFE</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">TEMP_VARNAME</var>);</p><p class=Pp><code class=Fn>RB_FOREACH_REVERSE</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><code class=Fn>RB_FOREACH_REVERSE_FROM</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">POS_VARNAME</var>);</p><p class=Pp><code class=Fn>RB_FOREACH_REVERSE_SAFE</code>(<var class=Fa style="white-space: nowrap;">VARNAME</var>, <var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">TEMP_VARNAME</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>RB_INIT</code>(<var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_INSERT</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p><p class=Pp><var class=Ft>struct TYPE *</var><br><code class=Fn>RB_REMOVE</code>(<var class=Fa style="white-space: nowrap;">NAME</var>, <var class=Fa style="white-space: nowrap;">RB_HEAD *head</var>, <var class=Fa style="white-space: nowrap;">struct TYPE *elm</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> These macros define data structures for different types of trees: splay trees and red-black trees. <p class=Pp>In the macro definitions, <var class=Fa>TYPE</var> is the name tag of a user defined structure that must contain a field of type <var class=Vt>SPLAY_ENTRY</var>, or <var class=Vt>RB_ENTRY</var>, named <var class=Fa>ENTRYNAME</var>. The argument <var class=Fa>HEADNAME</var> is the name tag of a user defined structure that must be declared using the macros <code class=Fn>SPLAY_HEAD</code>(), or <code class=Fn>RB_HEAD</code>(). The argument <var class=Fa>NAME</var> has to be a unique name prefix for every tree that is defined.</p><p class=Pp>The function prototypes are declared with <code class=Fn>SPLAY_PROTOTYPE</code>(), <code class=Fn>RB_PROTOTYPE</code>(), or <code class=Fn>RB_PROTOTYPE_STATIC</code>(). The function bodies are generated with <code class=Fn>SPLAY_GENERATE</code>(), <code class=Fn>RB_GENERATE</code>(), or <code class=Fn>RB_GENERATE_STATIC</code>(). See the examples below for further explanation of how these macros are used.</p></section><section class=Sh><h2 class=Sh id=SPLAY_TREES><a class=permalink href=#SPLAY_TREES>SPLAY TREES</a></h2> A splay tree is a self-organizing data structure. Every operation on the tree causes a splay to happen. The splay moves the requested node to the root of the tree and partly rebalances it. <p class=Pp>This has the benefit that request locality causes faster lookups as the requested nodes move to the top of the tree. On the other hand, every lookup causes memory writes.</p><p class=Pp>The Balance Theorem bounds the total access time for <var class=Ar>m</var> operations and <var class=Ar>n</var> inserts on an initially empty tree as <code class=Fn>O</code>(<var class=Fa>(m + n)lg n</var>). The amortized cost for a sequence of <var class=Ar>m</var> accesses to a splay tree is <code class=Fn>O</code>(<var class=Fa>lg n</var>).</p><p class=Pp>A splay tree is headed by a structure defined by the <code class=Fn>SPLAY_HEAD</code>() macro. A structure is declared as follows:</p><div class="Bd Pp Bd-indent"><code class=Fn>SPLAY_HEAD</code>(<var class=Fa>HEADNAME</var>, <var class=Fa>TYPE</var>) <var class=Va>head</var>;</div><p class=Pp>where <var class=Fa>HEADNAME</var> is the name of the structure to be defined, and struct <var class=Fa>TYPE</var> is the type of the elements to be inserted into the tree.</p><p class=Pp>The <code class=Fn>SPLAY_ENTRY</code>() macro declares a structure that allows elements to be connected in the tree.</p><p class=Pp>In order to use the functions that manipulate the tree structure, their prototypes need to be declared with the <code class=Fn>SPLAY_PROTOTYPE</code>() macro, where <var class=Fa>NAME</var> is a unique identifier for this particular tree. The <var class=Fa>TYPE</var> argument is the type of the structure that is being managed by the tree. The <var class=Fa>FIELD</var> argument is the name of the element defined by <code class=Fn>SPLAY_ENTRY</code>().</p><p class=Pp>The function bodies are generated with the <code class=Fn>SPLAY_GENERATE</code>() macro. It takes the same arguments as the <code class=Fn>SPLAY_PROTOTYPE</code>() macro, but should be used only once.</p><p class=Pp>Finally, the <var class=Fa>CMP</var> argument is the name of a function used to compare tree nodes with each other. The function takes two arguments of type <var class=Vt>struct TYPE *</var>. If the first argument is smaller than the second, the function returns a value smaller than zero. If they are equal, the function returns zero. Otherwise, it should return a value greater than zero. The compare function defines the order of the tree elements.</p><p class=Pp>The <code class=Fn>SPLAY_INIT</code>() macro initializes the tree referenced by <var class=Fa>head</var>.</p><p class=Pp>The splay tree can also be initialized statically by using the <code class=Fn>SPLAY_INITIALIZER</code>() macro like this:</p><div class="Bd Pp Bd-indent"><code class=Fn>SPLAY_HEAD</code>(<var class=Fa>HEADNAME</var>, <var class=Fa>TYPE</var>) <var class=Va>head</var> = <code class=Fn>SPLAY_INITIALIZER</code>(<var class=Fa>&amp;head</var>);</div><p class=Pp>The <code class=Fn>SPLAY_INSERT</code>() macro inserts the new element <var class=Fa>elm</var> into the tree.</p><p class=Pp>The <code class=Fn>SPLAY_REMOVE</code>() macro removes the element <var class=Fa>elm</var> from the tree pointed by <var class=Fa>head</var>.</p><p class=Pp>The <code class=Fn>SPLAY_FIND</code>() macro can be used to find a particular element in the tree.</p><div class="Bd Pp Bd-indent"><pre>
struct TYPE find, *res;
find.key = 30;
res = SPLAY_FIND(NAME, head, &amp;find);
</pre></div><p class=Pp>The <code class=Fn>SPLAY_ROOT</code>(), <code class=Fn>SPLAY_MIN</code>(), <code class=Fn>SPLAY_MAX</code>(), and <code class=Fn>SPLAY_NEXT</code>() macros can be used to traverse the tree:</p><div class="Bd Pp Bd-indent"><pre>
for (np = SPLAY_MIN(NAME, &amp;head); np != NULL; np = SPLAY_NEXT(NAME, &amp;head, np))
</pre></div><p class=Pp>Or, for simplicity, one can use the <code class=Fn>SPLAY_FOREACH</code>() macro:</p><div class="Bd Pp Bd-indent"><code class=Fn>SPLAY_FOREACH</code>(<var class=Fa>np</var>, <var class=Fa>NAME</var>, <var class=Fa>head</var>)</div><p class=Pp>The <code class=Fn>SPLAY_EMPTY</code>() macro should be used to check whether a splay tree is empty.</p></section><section class=Sh><h2 class=Sh id=RED_BLACK_TREES><a class=permalink href=#RED_BLACK_TREES>RED-BLACK TREES</a></h2> A red-black tree is a binary search tree with the node color as an extra attribute. It fulfills a set of conditions: <ol class="Bl-enum Bd-indent"><li>Every search path from the root to a leaf consists of the same number of black nodes.</li><li>Each red node (except for the root) has a black parent.</li><li>Each leaf node is black.</li></ol><p class=Pp>Every operation on a red-black tree is bounded as <code class=Fn>O</code>(<var class=Fa>lg n</var>). The maximum height of a red-black tree is <code class=Fn>2lg</code>(<var class=Fa>n + 1</var>).</p><p class=Pp>A red-black tree is headed by a structure defined by the <code class=Fn>RB_HEAD</code>() macro. A structure is declared as follows:</p><div class="Bd Pp Bd-indent"><code class=Fn>RB_HEAD</code>(<var class=Fa>HEADNAME</var>, <var class=Fa>TYPE</var>) <var class=Va>head</var>;</div><p class=Pp>where <var class=Fa>HEADNAME</var> is the name of the structure to be defined, and struct <var class=Fa>TYPE</var> is the type of the elements to be inserted into the tree.</p><p class=Pp>The <code class=Fn>RB_ENTRY</code>() macro declares a structure that allows elements to be connected in the tree.</p><p class=Pp>In order to use the functions that manipulate the tree structure, their prototypes need to be declared with the <code class=Fn>RB_PROTOTYPE</code>() or <code class=Fn>RB_PROTOTYPE_STATIC</code>() macro, where <var class=Fa>NAME</var> is a unique identifier for this particular tree. The <var class=Fa>TYPE</var> argument is the type of the structure that is being managed by the tree. The <var class=Fa>FIELD</var> argument is the name of the element defined by <code class=Fn>RB_ENTRY</code>(). Individual prototypes can be declared with <code class=Fn>RB_PROTOTYPE_INSERT</code>(), <code class=Fn>RB_PROTOTYPE_INSERT_COLOR</code>(), <code class=Fn>RB_PROTOTYPE_REMOVE</code>(), <code class=Fn>RB_PROTOTYPE_REMOVE_COLOR</code>(), <code class=Fn>RB_PROTOTYPE_FIND</code>(), <code class=Fn>RB_PROTOTYPE_NFIND</code>(), <code class=Fn>RB_PROTOTYPE_NEXT</code>(), <code class=Fn>RB_PROTOTYPE_PREV</code>(), and <code class=Fn>RB_PROTOTYPE_MINMAX</code>() in case not all functions are required. The individual prototype macros expect <var class=Fa>NAME</var>, <var class=Fa>TYPE</var>, and <var class=Fa>ATTR</var> arguments. The <var class=Fa>ATTR</var> argument must be empty for global functions or <var class=Fa>static</var> for static functions.</p><p class=Pp>The function bodies are generated with the <code class=Fn>RB_GENERATE</code>() or <code class=Fn>RB_GENERATE_STATIC</code>() macro. These macros take the same arguments as the <code class=Fn>RB_PROTOTYPE</code>() and <code class=Fn>RB_PROTOTYPE_STATIC</code>() macros, but should be used only once. As an alternative individual function bodies are generated with the <code class=Fn>RB_GENERATE_INSERT</code>(), <code class=Fn>RB_GENERATE_INSERT_COLOR</code>(), <code class=Fn>RB_GENERATE_REMOVE</code>(), <code class=Fn>RB_GENERATE_REMOVE_COLOR</code>(), <code class=Fn>RB_GENERATE_FIND</code>(), <code class=Fn>RB_GENERATE_NFIND</code>(), <code class=Fn>RB_GENERATE_NEXT</code>(), <code class=Fn>RB_GENERATE_PREV</code>(), and <code class=Fn>RB_GENERATE_MINMAX</code>() macros.</p><p class=Pp>Finally, the <var class=Fa>CMP</var> argument is the name of a function used to compare tree nodes with each other. The function takes two arguments of type <var class=Vt>struct TYPE *</var>. If the first argument is smaller than the second, the function returns a value smaller than zero. If they are equal, the function returns zero. Otherwise, it should return a value greater than zero. The compare function defines the order of the tree elements.</p><p class=Pp>The <code class=Fn>RB_INIT</code>() macro initializes the tree referenced by <var class=Fa>head</var>.</p><p class=Pp>The red-black tree can also be initialized statically by using the <code class=Fn>RB_INITIALIZER</code>() macro like this:</p><div class="Bd Pp Bd-indent"><code class=Fn>RB_HEAD</code>(<var class=Fa>HEADNAME</var>, <var class=Fa>TYPE</var>) <var class=Va>head</var> = <code class=Fn>RB_INITIALIZER</code>(<var class=Fa>&amp;head</var>);</div><p class=Pp>The <code class=Fn>RB_INSERT</code>() macro inserts the new element <var class=Fa>elm</var> into the tree.</p><p class=Pp>The <code class=Fn>RB_REMOVE</code>() macro removes the element <var class=Fa>elm</var> from the tree pointed by <var class=Fa>head</var>.</p><p class=Pp>The <code class=Fn>RB_FIND</code>() and <code class=Fn>RB_NFIND</code>() macros can be used to find a particular element in the tree.</p><div class="Bd Pp Bd-indent"><pre>
struct TYPE find, *res;
find.key = 30;
res = RB_FIND(NAME, head, &amp;find);
</pre></div><p class=Pp>The <code class=Fn>RB_ROOT</code>(), <code class=Fn>RB_MIN</code>(), <code class=Fn>RB_MAX</code>(), <code class=Fn>RB_NEXT</code>(), and <code class=Fn>RB_PREV</code>() macros can be used to traverse the tree:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>for (np = RB_MIN(NAME, &amp;head); np != NULL; np = RB_NEXT(NAME, &amp;head, np))</code></div><p class=Pp>Or, for simplicity, one can use the <code class=Fn>RB_FOREACH</code>() or <code class=Fn>RB_FOREACH_REVERSE</code>() macro:</p><div class="Bd Pp Bd-indent"><code class=Fn>RB_FOREACH</code>(<var class=Fa>np</var>, <var class=Fa>NAME</var>, <var class=Fa>head</var>)</div><p class=Pp>The macros <code class=Fn>RB_FOREACH_SAFE</code>() and <code class=Fn>RB_FOREACH_REVERSE_SAFE</code>() traverse the tree referenced by head in a forward or reverse direction respectively, assigning each element in turn to np. However, unlike their unsafe counterparts, they permit both the removal of np as well as freeing it from within the loop safely without interfering with the traversal.</p><p class=Pp>Both <code class=Fn>RB_FOREACH_FROM</code>() and <code class=Fn>RB_FOREACH_REVERSE_FROM</code>() may be used to continue an interrupted traversal in a forward or reverse direction respectively. The head pointer is not required. The pointer to the node from where to resume the traversal should be passed as their last argument, and will be overwritten to provide safe traversal.</p><p class=Pp>The <code class=Fn>RB_EMPTY</code>() macro should be used to check whether a red-black tree is empty.</p></section><section class=Sh><h2 class=Sh id=NOTES><a class=permalink href=#NOTES>NOTES</a></h2> Trying to free a tree in the following way is a common error: <div class="Bd Pp Bd-indent"><pre>
SPLAY_FOREACH(var, NAME, head) {
	SPLAY_REMOVE(NAME, head, var);
	free(var);
}
free(head);
</pre></div><p class=Pp>Since <var class=Va>var</var> is freed, the <code class=Fn>FOREACH</code>() macro refers to a pointer that may have been reallocated already. Proper code needs a second variable.</p><div class="Bd Pp Bd-indent"><pre>
for (var = SPLAY_MIN(NAME, head); var != NULL; var = nxt) {
	nxt = SPLAY_NEXT(NAME, head, var);
	SPLAY_REMOVE(NAME, head, var);
	free(var);
}
</pre></div><p class=Pp>Both <code class=Fn>RB_INSERT</code>() and <code class=Fn>SPLAY_INSERT</code>() return <code class=Dv>NULL</code> if the element was inserted in the tree successfully, otherwise they return a pointer to the element with the colliding key.</p><p class=Pp>Accordingly, <code class=Fn>RB_REMOVE</code>() and <code class=Fn>SPLAY_REMOVE</code>() return the pointer to the removed element otherwise they return <code class=Dv>NULL</code> to indicate an error.</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=queue.3.html>queue(3)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The tree macros first appeared in <span class=Ux>FreeBSD 4.6</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The author of the tree macros is <span class=An>Niels Provos</span>. </section></div><table class=foot><tr><td class=foot-date>February 25, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>