<!DOCTYPE html>
<html><head><meta charset=utf-8><title>nmtree(8)</title><keywords content=man,nmtree></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>nmtree(8)</h1><table class=head><tr><td class=head-ltitle>MTREE(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>MTREE(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>mtree</code> — <div class=Nd>map a directory hierarchy</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>mtree</code></td><td>[<code class=Fl>-bCcDdejLlMnPqrStUuWx</code>] [<code class=Fl>-i</code> | <code class=Fl>-m</code>] [<code class=Fl>-E</code><var class=Ar>tags</var>] [<code class=Fl>-F</code><var class=Ar>flavor</var>] [<code class=Fl>-f</code><var class=Ar>spec</var>] [<code class=Fl>-I</code><var class=Ar>tags</var>] [<code class=Fl>-K</code><var class=Ar>keywords</var>] [<code class=Fl>-k</code><var class=Ar>keywords</var>] [<code class=Fl>-N</code><var class=Ar>dbdir</var>] [<code class=Fl>-O</code><var class=Ar>onlyfile</var>] [<code class=Fl>-p</code><var class=Ar>path</var>] [<code class=Fl>-R</code><var class=Ar>keywords</var>] [<code class=Fl>-s</code><var class=Ar>seed</var>] [<code class=Fl>-X</code><var class=Ar>exclude-file</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>mtree</code> utility compares a file hierarchy against a specification, creates a specification for a file hierarchy, or modifies a specification. <p class=Pp>The default action, if not overridden by command line options, is to compare the file hierarchy rooted in the current directory against a specification read from the standard input. Messages are written to the standard output for any files whose characteristics do not match the specification, or which are missing from either the file hierarchy or the specification.</p><p class=Pp>The options are as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a></dt><dd>Suppress blank lines before entering and after exiting directories.</dd><dt><a class=permalink href=#C><code class=Fl id=C>-C</code></a></dt><dd>Convert a specification into a format that's easier to parse with various tools. The input specification is read from standard input or from the file given by <code class=Fl>-f</code><var class=Ar>spec</var>. In the output, each file or directory is represented using a single line (which might be very long). The full path name (beginning with “./”) is always printed as the first field; <code class=Fl>-K</code>, <code class=Fl>-k</code>, and <code class=Fl>-R</code> can be used to control which other keywords are printed; <code class=Fl>-E</code> and <code class=Fl>-I</code> can be used to control which files are printed; and the <code class=Fl>-S</code> option can be used to sort the output.</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a></dt><dd>Print a specification for the file hierarchy originating at the current working directory (or the directory provided by <code class=Fl>-p</code><var class=Ar>path</var>) to the standard output. The output is in a style using relative path names.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>As per <code class=Fl>-C</code>, except that the path name is always printed as the last field instead of the first.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Ignore everything except directory type files.</dd><dt><a class=permalink href=#E><code class=Fl id=E>-E</code></a><var class=Ar>tags</var></dt><dd>Add the comma separated tags to the “exclusion” list. Non-directories with tags which are in the exclusion list are not printed with <code class=Fl>-C</code> and <code class=Fl>-D</code>.</dd><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a></dt><dd>Don't complain about files that are in the file hierarchy, but not in the specification.</dd><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a><var class=Ar>flavor</var></dt><dd>Set the compatibility flavor of the <code class=Nm>mtree</code> utility. The <var class=Ar>flavor</var> can be one of <b class=Sy>mtree</b>, <b class=Sy>freebsd9</b>, or <b class=Sy>netbsd6</b>. The default is <b class=Sy>mtree</b>. The <b class=Sy>freebsd9</b> and <b class=Sy>netbsd6</b> flavors attempt to preserve output compatiblity and command line option backward compatibility with <span class=Ux>FreeBSD 9.0</span> and <span class=Ux>NetBSD 6.0</span> respectively.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>spec</var></dt><dd>Read the specification from <var class=Ar>file</var>, instead of from the standard input. <p class=Pp>If this option is specified twice, the two specifications are compared to each other rather than to the file hierarchy. The specifications will be sorted like output generated using <code class=Fl>-c</code>. The output format in this case is somewhat reminiscent of <a class=Xr href=comm.1.html>comm(1)</a>, having "in first spec only", "in second spec only", and "different" columns, prefixed by zero, one and two TAB characters respectively. Each entry in the "different" column occupies two lines, one from each specification.</p></dd><dt><a class=permalink href=#I><code class=Fl id=I>-I</code></a><var class=Ar>tags</var></dt><dd>Add the comma separated tags to the “inclusion” list. Non-directories with tags which are in the inclusion list are printed with <code class=Fl>-C</code> and <code class=Fl>-D</code>. If no inclusion list is provided, the default is to display all files.</dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>If specified, set the schg and/or sappnd flags.</dd><dt><a class=permalink href=#j><code class=Fl id=j>-j</code></a></dt><dd>Indent the output 4 spaces each time a directory level is descended when creating a specification with the <code class=Fl>-c</code> option. This does not affect either the /set statements or the comment before each directory. It does however affect the comment before the close of each directory. This is the equivalent of the <code class=Fl>-i</code> option in the <span class=Ux>FreeBSD</span> version of <code class=Nm>mtree</code>.</dd><dt><a class=permalink href=#K><code class=Fl id=K>-K</code></a><var class=Ar>keywords</var></dt><dd>Add the specified (whitespace or comma separated) keywords to the current set of keywords. If ‘<code class=Li>all</code>’ is specified, add all of the other keywords.</dd><dt><a class=permalink href=#k><code class=Fl id=k>-k</code></a><var class=Ar>keywords</var></dt><dd>Use the <b class=Sy>type</b> keyword plus the specified (whitespace or comma separated) keywords instead of the current set of keywords. If ‘<code class=Li>all</code>’ is specified, use all of the other keywords. If the <b class=Sy>type</b> keyword is not desired, suppress it with <code class=Fl>-R</code><var class=Ar>type</var>.</dd><dt><a class=permalink href=#L><code class=Fl id=L>-L</code></a></dt><dd>Follow all symbolic links in the file hierarchy.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a></dt><dd>Do “loose” permissions checks, in which more stringent permissions will match less stringent ones. For example, a file marked mode 0444 will pass a check for mode 0644. “Loose” checks apply only to read, write and execute permissions -- in particular, if other bits like the sticky bit or suid/sgid bits are set either in the specification or the file, exact checking will be performed. This option may not be set at the same time as the <code class=Fl>-U</code> or <code class=Fl>-u</code> option.</dd><dt><a class=permalink href=#M><code class=Fl id=M>-M</code></a></dt><dd>Permit merging of specification entries with different types, with the last entry taking precedence.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a></dt><dd>If the schg and/or sappnd flags are specified, reset these flags. Note that this is only possible with securelevel less than 1 (i.e., in single user mode or while the system is running in insecure mode). See <a class=Xr href=init.8.html>init(8)</a> for information on security levels.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Do not emit pathname comments when creating a specification. Normally a comment is emitted before each directory and before the close of that directory when using the <code class=Fl>-c</code> option.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a><var class=Ar>dbdir</var></dt><dd>Use the user database text file <span class=Pa>master.passwd</span> and group database text file <span class=Pa>group</span> from <var class=Ar>dbdir</var>, rather than using the results from the system's <a class=Xr href=getpwnam.3.html>getpwnam(3)</a> and <a class=Xr href=getgrnam.3.html>getgrnam(3)</a> (and related) library calls.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>onlypaths</var></dt><dd>Only include files included in this list of pathnames.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a></dt><dd>Don't follow symbolic links in the file hierarchy, instead consider the symbolic link itself in any comparisons. This is the default.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>path</var></dt><dd>Use the file hierarchy rooted in <var class=Ar>path</var>, instead of the current directory.</dd><dt><a class=permalink href=#q><code class=Fl id=q>-q</code></a></dt><dd>Quiet mode. Do not complain when a “missing” directory cannot be created because it already exists. This occurs when the directory is a symbolic link.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a><var class=Ar>keywords</var></dt><dd>Remove the specified (whitespace or comma separated) keywords from the current set of keywords. If ‘<code class=Li>all</code>’ is specified, remove all of the other keywords.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Remove any files in the file hierarchy that are not described in the specification.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a></dt><dd>When reading a specification into an internal data structure, sort the entries. Sorting will affect the order of the output produced by the <code class=Fl>-C</code> or <code class=Fl>-D</code> options, and will also affect the order in which missing entries are created or reported when a directory tree is checked against a specification. <p class=Pp>The sort order is the same as that used by the <code class=Fl>-c</code> option, which is that entries within the same directory are sorted in the order used by <a class=Xr href=strcmp.3.html>strcmp(3)</a>, except that entries for subdirectories sort after other entries. By default, if the <code class=Fl>-S</code> option is not used, entries within the same directory are collected together (separated from entries for other directories), but not sorted.</p></dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>seed</var></dt><dd>Display a single checksum to the standard error output that represents all of the files for which the keyword <b class=Sy>cksum</b> was specified. The checksum is seeded with the specified value.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>Modify the modified time of existing files, the device type of devices, and symbolic link targets, to match the specification.</dd><dt><a class=permalink href=#U><code class=Fl id=U>-U</code></a></dt><dd>Same as <code class=Fl>-u</code> except that a mismatch is not considered to be an error if it was corrected.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>Modify the owner, group, permissions, and flags of existing files, the device type of devices, and symbolic link targets, to match the specification. Create any missing directories, devices or symbolic links. User, group, and permissions must all be specified for missing directories to be created. Note that unless the <code class=Fl>-i</code> option is given, the schg and sappnd flags will not be set, even if specified. If <code class=Fl>-m</code> is given, these flags will be reset. Exit with a status of 0 on success, 2 if the file hierarchy did not match the specification, and 1 if any other error occurred.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a></dt><dd>Don't attempt to set various file attributes such as the ownership, mode, flags, or time when creating new directories or changing existing entries. This option will be most useful when used in conjunction with <code class=Fl>-U</code> or <code class=Fl>-u</code>.</dd><dt><a class=permalink href=#X><code class=Fl id=X>-X</code></a><var class=Ar>exclude-file</var></dt><dd>The specified file contains <a class=Xr href=fnmatch.3.html>fnmatch(3)</a> patterns matching files to be excluded from the specification, one to a line. If the pattern contains a ‘<code class=Li>/</code>’ character, it will be matched against entire pathnames (relative to the starting directory); otherwise, it will be matched against basenames only. Comments are permitted in the <var class=Ar>exclude-list</var> file.</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>Don't descend below mount points in the file hierarchy.</dd></dl><p class=Pp>Specifications are mostly composed of “keywords”, i.e. strings that that specify values relating to files. No keywords have default values, and if a keyword has no value set, no checks based on it are performed.</p><p class=Pp>Currently supported keywords are as follows:</p><dl class=Bl-tag><dt><b class=Sy>cksum</b></dt><dd>The checksum of the file using the default algorithm specified by the <a class=Xr href=cksum.1.html>cksum(1)</a> utility.</dd><dt><b class=Sy>device</b></dt><dd>The device number to use for <b class=Sy>block</b> or <b class=Sy>char</b> file types. The argument must be one of the following forms: <dl class=Bl-tag><dt><var class=Ar>format</var>,<var class=Ar>major</var>,<var class=Ar>minor</var></dt><dd>A device with <var class=Ar>major</var> and <var class=Ar>minor</var> fields, for an operating system specified with <var class=Ar>format</var>. See below for valid formats.</dd><dt><var class=Ar>format</var>,<var class=Ar>major</var>,<var class=Ar>unit</var>,<var class=Ar>subunit</var></dt><dd>A device with <var class=Ar>major</var>, <var class=Ar>unit</var>, and <var class=Ar>subunit</var> fields, for an operating system specified with <var class=Ar>format</var>. (Currently this is only supported by the <b class=Sy>bsdos</b> format.)</dd><dt><var class=Ar>number</var></dt><dd>Opaque number (as stored on the file system).</dd></dl><p class=Pp>The following values for <var class=Ar>format</var> are recognized: <b class=Sy>native</b>, <b class=Sy>386bsd</b>, <b class=Sy>4bsd</b>, <b class=Sy>bsdos</b>, <b class=Sy>freebsd</b>, <b class=Sy>hpux</b>, <b class=Sy>isc</b>, <b class=Sy>linux</b>, <b class=Sy>netbsd</b>, <b class=Sy>osf1</b>, <b class=Sy>sco</b>, <b class=Sy>solaris</b>, <b class=Sy>sunos</b>, <b class=Sy>svr3</b>, <b class=Sy>svr4</b>, and <b class=Sy>ultrix</b>.</p><p class=Pp>See <a class=Xr href=mknod.8.html>mknod(8)</a> for more details.</p></dd><dt><b class=Sy>flags</b></dt><dd>The file flags as a symbolic name. See <a class=Xr href=chflags.1.html>chflags(1)</a> for information on these names. If no flags are to be set the string ‘<code class=Li>none</code>’ may be used to override the current default. Note that the schg and sappnd flags are treated specially (see the <code class=Fl>-i</code> and <code class=Fl>-m</code> options).</dd><dt><b class=Sy>ignore</b></dt><dd>Ignore any file hierarchy below this file.</dd><dt><b class=Sy>gid</b></dt><dd>The file group as a numeric value.</dd><dt><b class=Sy>gname</b></dt><dd>The file group as a symbolic name.</dd><dt><b class=Sy>link</b></dt><dd>The file the symbolic link is expected to reference.</dd><dt><b class=Sy>md5</b></dt><dd>The MD5 cryptographic message digest of the file.</dd><dt><b class=Sy>md5digest</b></dt><dd>Synonym for <b class=Sy>md5</b>.</dd><dt><b class=Sy>mode</b></dt><dd>The current file's permissions as a numeric (octal) or symbolic value.</dd><dt><b class=Sy>nlink</b></dt><dd>The number of hard links the file is expected to have.</dd><dt><b class=Sy>nochange</b></dt><dd>Make sure this file or directory exists but otherwise ignore all attributes.</dd><dt><b class=Sy>optional</b></dt><dd>The file is optional; don't complain about the file if it's not in the file hierarchy.</dd><dt><b class=Sy>ripemd160digest</b></dt><dd>Synonym for <b class=Sy>rmd160</b>.</dd><dt><b class=Sy>rmd160</b></dt><dd>The RMD-160 cryptographic message digest of the file.</dd><dt><b class=Sy>rmd160digest</b></dt><dd>Synonym for <b class=Sy>rmd160</b>.</dd><dt><b class=Sy>sha1</b></dt><dd>The SHA-1 cryptographic message digest of the file.</dd><dt><b class=Sy>sha1digest</b></dt><dd>Synonym for <b class=Sy>sha1</b>.</dd><dt><b class=Sy>sha256</b></dt><dd>The 256-bits SHA-2 cryptographic message digest of the file.</dd><dt><b class=Sy>sha256digest</b></dt><dd>Synonym for <b class=Sy>sha256</b>.</dd><dt><b class=Sy>sha384</b></dt><dd>The 384-bits SHA-2 cryptographic message digest of the file.</dd><dt><b class=Sy>sha384digest</b></dt><dd>Synonym for <b class=Sy>sha384</b>.</dd><dt><b class=Sy>sha512</b></dt><dd>The 512-bits SHA-2 cryptographic message digest of the file.</dd><dt><b class=Sy>sha512digest</b></dt><dd>Synonym for <b class=Sy>sha512</b>.</dd><dt><b class=Sy>size</b></dt><dd>The size, in bytes, of the file.</dd><dt><b class=Sy>tags</b></dt><dd>Comma delimited tags to be matched with <code class=Fl>-E</code> and <code class=Fl>-I</code>. These may be specified without leading or trailing commas, but will be stored internally with them.</dd><dt><b class=Sy>time</b></dt><dd>The last modification time of the file, in second and nanoseconds. The value should include a period character and exactly nine digits after the period.</dd><dt><b class=Sy>type</b></dt><dd>The type of the file; may be set to any one of the following: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><b class=Sy>block</b></dt><dd>block special device</dd><dt><b class=Sy>char</b></dt><dd>character special device</dd><dt><b class=Sy>dir</b></dt><dd>directory</dd><dt><b class=Sy>fifo</b></dt><dd>fifo</dd><dt><b class=Sy>file</b></dt><dd>regular file</dd><dt><b class=Sy>link</b></dt><dd>symbolic link</dd><dt><b class=Sy>socket</b></dt><dd>socket</dd></dl></dd><dt><b class=Sy>uid</b></dt><dd>The file owner as a numeric value.</dd><dt><b class=Sy>uname</b></dt><dd>The file owner as a symbolic name.</dd></dl><p class=Pp>The default set of keywords are <b class=Sy>flags</b>, <b class=Sy>gid</b>, <b class=Sy>link</b>, <b class=Sy>mode</b>, <b class=Sy>nlink</b>, <b class=Sy>size</b>, <b class=Sy>time</b>, <b class=Sy>type</b>, and <b class=Sy>uid</b>.</p><p class=Pp>There are four types of lines in a specification:</p><ol class=Bl-enum><li>Set global values for a keyword. This consists of the string ‘<code class=Li>/set</code>’ followed by whitespace, followed by sets of keyword/value pairs, separated by whitespace. Keyword/value pairs consist of a keyword, followed by an equals sign (‘<code class=Li>=</code>’), followed by a value, without whitespace characters. Once a keyword has been set, its value remains unchanged until either reset or unset.</li><li>Unset global values for a keyword. This consists of the string ‘<code class=Li>/unset</code>’, followed by whitespace, followed by one or more keywords, separated by whitespace. If ‘<code class=Li>all</code>’ is specified, unset all of the keywords.</li><li>A file specification, consisting of a path name, followed by whitespace, followed by zero or more whitespace separated keyword/value pairs. <p class=Pp>The path name may be preceded by whitespace characters. The path name may contain any of the standard path name matching characters (‘<code class=Li>[</code>’, ‘<code class=Li>]</code>’, ‘<code class=Li>?</code>’ or ‘<code class=Li>*</code>’), in which case files in the hierarchy will be associated with the first pattern that they match. <code class=Nm>mtree</code> uses <a class=Xr href=strsvis.3.html>strsvis(3)</a> (in VIS_CSTYLE format) to encode path names containing non-printable characters. Whitespace characters are encoded as ‘<code class=Li>\s</code>’ (space), ‘<code class=Li>\t</code>’ (tab), and ‘<code class=Li>\n</code>’ (new line). ‘<code class=Li>#</code>’ characters in path names are escaped by a preceding backslash ‘<code class=Li>\</code>’ to distinguish them from comments.</p><p class=Pp>Each of the keyword/value pairs consist of a keyword, followed by an equals sign (‘<code class=Li>=</code>’), followed by the keyword's value, without whitespace characters. These values override, without changing, the global value of the corresponding keyword.</p><p class=Pp>The first path name entry listed must be a directory named ‘<code class=Li>.</code>’, as this ensures that intermixing full and relative path names will work consistently and correctly. Multiple entries for a directory named ‘<code class=Li>.</code>’ are permitted; the settings for the last such entry override those of the existing entry.</p><p class=Pp>A path name that contains a slash (‘<code class=Li>/</code>’) that is not the first character will be treated as a full path (relative to the root of the tree). All parent directories referenced in the path name must exist. The current directory path used by relative path names will be updated appropriately. Multiple entries for the same full path are permitted if the types are the same (unless <code class=Fl>-M</code> is given, in which case the types may differ); in this case the settings for the last entry take precedence.</p><p class=Pp>A path name that does not contain a slash will be treated as a relative path. Specifying a directory will cause subsequent files to be searched for in that directory hierarchy.</p></li><li>A line containing only the string ‘<code class=Li>..</code>’ which causes the current directory path (used by relative paths) to ascend one level.</li></ol><p class=Pp>Empty lines and lines whose first non-whitespace character is a hash mark (‘<code class=Li>#</code>’) are ignored.</p><p class=Pp>The <code class=Nm>mtree</code> utility exits with a status of 0 on success, 1 if any error occurred, and 2 if the file hierarchy did not match the specification.</p></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/mtree</span></dt><dd>system specification directory</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> To detect system binaries that have been “trojan horsed”, it is recommended that <code class=Nm>mtree</code> be run on the file systems, and a copy of the results stored on a different machine, or, at least, in encrypted form. The seed for the <code class=Fl>-s</code> option should not be an obvious value and the final checksum should not be stored on-line under any circumstances! Then, periodically, <code class=Nm>mtree</code> should be run against the on-line specifications and the final checksum compared with the previous value. While it is possible for the bad guys to change the on-line specifications to conform to their modified binaries, it shouldn't be possible for them to make it produce the same final checksum value. If the final checksum value changes, the off-line copies of the specification can be used to detect which of the binaries have actually been modified. <p class=Pp>The <code class=Fl>-d</code> option can be used in combination with <code class=Fl>-U</code> or <code class=Fl>-u</code> to create directory hierarchies for, for example, distributions.</p></section><section class=Sh><h2 class=Sh id=COMPATIBILITY><a class=permalink href=#COMPATIBILITY>COMPATIBILITY</a></h2> The compatibility shims provided by the <code class=Fl>-F</code> option are incomplete by design. Known limitations are described below. <p class=Pp>The <b class=Sy>freebsd9</b> flavor retains the default handling of lookup failures for the <b class=Sy>uname</b> and <b class=Sy>group</b> keywords by replacing them with appropriate <b class=Sy>uid</b> and <b class=Sy>gid</b> keywords rather than failing and reporting an error. The related <code class=Fl>-w</code> flag is a no-op rather than causing a warning to be printed and no keyword to be emitted. The latter behavior is not emulated as it is potentially dangerous in the face of /set statements.</p><p class=Pp>The <b class=Sy>netbsd6</b> flavor does not replicate the historical bug that reported time as seconds.nanoseconds without zero padding nanosecond values less than 100000000.</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=chflags.1.html>chflags(1)</a>, <a class=Xr href=chgrp.1.html>chgrp(1)</a>, <a class=Xr href=chmod.1.html>chmod(1)</a>, <a class=Xr href=cksum.1.html>cksum(1)</a>, <a class=Xr href=stat.2.html>stat(2)</a>, <a class=Xr href=fnmatch.3.html>fnmatch(3)</a>, <a class=Xr href=fts.3.html>fts(3)</a>, <a class=Xr href=strsvis.3.html>strsvis(3)</a>, <a class=Xr href=chown.8.html>chown(8)</a>, <a class=Xr href=mknod.8.html>mknod(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>mtree</code> utility appeared in <span class=Ux>4.3BSD-Reno</span>. The <b class=Sy>optional</b> keyword appeared in <span class=Ux>NetBSD 1.2</span>. The <code class=Fl>-U</code> option appeared in <span class=Ux>NetBSD 1.3</span>. The <b class=Sy>flags</b> and <b class=Sy>md5</b> keywords, and <code class=Fl>-i</code> and <code class=Fl>-m</code> options appeared in <span class=Ux>NetBSD 1.4</span>. The <b class=Sy>device</b>, <b class=Sy>rmd160</b>, <b class=Sy>sha1</b>, <b class=Sy>tags</b>, and <b class=Sy>all</b> keywords, <code class=Fl>-D</code>, <code class=Fl>-E</code>, <code class=Fl>-I</code>, <code class=Fl>-L</code>, <code class=Fl>-l</code>, <code class=Fl>-N</code>, <code class=Fl>-P</code>, <code class=Fl>-R</code>, <code class=Fl>-W</code>, and <code class=Fl>-X</code> options, and support for full paths appeared in <span class=Ux>NetBSD 1.6</span>. The <b class=Sy>sha256</b>, <b class=Sy>sha384</b>, and <b class=Sy>sha512</b> keywords appeared in <span class=Ux>NetBSD 3.0</span>. The <code class=Fl>-S</code> option appeared in <span class=Ux>NetBSD 6.0</span>. </section></div><table class=foot><tr><td class=foot-date>February 3, 2013</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>