<!DOCTYPE html>
<html><head><meta charset=utf-8><title>routed(8)</title><keywords content=man,routed></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>routed(8)</h1><table class=head><tr><td class=head-ltitle>ROUTED(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>ROUTED(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>routed</code>, <code class=Nm>rdisc</code> — <div class=Nd>network RIP and router discovery routing daemon</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>routed</code></td><td>[<code class=Fl>-isqdghmpAtv</code>] [<code class=Fl>-T</code><var class=Ar>tracefile</var>] [<code class=Fl>-F</code><var class=Ar>net</var>[/mask[,metric]]] [<code class=Fl>-P</code><var class=Ar>parms</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>routed</code> utility is a daemon invoked at boot time to manage the network routing tables. It uses Routing Information Protocol, RIPv1 (RFC 1058), RIPv2 (RFC 1723), and Internet Router Discovery Protocol (RFC 1256) to maintain the kernel routing table. The RIPv1 protocol is based on the reference <span class=Ux>4.3BSD</span> daemon. <p class=Pp>It listens on the <a class=Xr href=udp.4.html>udp(4)</a> socket for the <a class=Xr href=route.8.html>route(8)</a> service (see <a class=Xr href=services.5.html>services(5)</a>) for Routing Information Protocol packets. It also sends and receives multicast Router Discovery ICMP messages. If the host is a router, <code class=Nm>routed</code> periodically supplies copies of its routing tables to any directly connected hosts and networks. It also advertises or solicits default routes using Router Discovery ICMP messages.</p><p class=Pp>When started (or when a network interface is later turned on), <code class=Nm>routed</code> uses an AF_ROUTE address family facility to find those directly connected interfaces configured into the system and marked "up". It adds necessary routes for the interfaces to the kernel routing table. Soon after being first started, and provided there is at least one interface on which RIP has not been disabled, <code class=Nm>routed</code> deletes all pre-existing non-static routes in kernel table. Static routes in the kernel table are preserved and included in RIP responses if they have a valid RIP -hopcount (see <a class=Xr href=route.8.html>route(8)</a>).</p><p class=Pp>If more than one interface is present (not counting the loopback interface), it is assumed that the host should forward packets among the connected networks. After transmitting a RIP <i class=Em>request</i> and Router Discovery Advertisements or Solicitations on a new interface, the daemon enters a loop, listening for RIP request and response and Router Discovery packets from other hosts.</p><p class=Pp>When a <i class=Em>request</i> packet is received, <code class=Nm>routed</code> formulates a reply based on the information maintained in its internal tables. The <i class=Em>response</i> packet generated contains a list of known routes, each marked with a "hop count" metric (a count of 16 or greater is considered "infinite"). The advertised metric for a route reflects the metrics associated with interfaces (see <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>) though which it is received and sent, so setting the metric on an interface is an effective way to steer traffic. See also <code class=Cm>adj_inmetric</code> and <code class=Cm>adj_outmetric</code> parameters below.</p><p class=Pp>Responses do not include routes with a first hop on the requesting network to implement in part <i class=Em>split-horizon</i>. Requests from query programs such as <a class=Xr href=rtquery.8.html>rtquery(8)</a> are answered with the complete table.</p><p class=Pp>The routing table maintained by the daemon includes space for several gateways for each destination to speed recovery from a failing router. RIP <i class=Em>response</i> packets received are used to update the routing tables provided they are from one of the several currently recognized gateways or advertise a better metric than at least one of the existing gateways.</p><p class=Pp>When an update is applied, <code class=Nm>routed</code> records the change in its own tables and updates the kernel routing table if the best route to the destination changes. The change in the kernel routing table is reflected in the next batch of <i class=Em>response</i> packets sent. If the next response is not scheduled for a while, a <i class=Em>flash update</i> response containing only recently changed routes is sent.</p><p class=Pp>In addition to processing incoming packets, <code class=Nm>routed</code> also periodically checks the routing table entries. If an entry has not been updated for 3 minutes, the entry's metric is set to infinity and marked for deletion. Deletions are delayed until the route has been advertised with an infinite metric to ensure the invalidation is propagated throughout the local internet. This is a form of <i class=Em>poison reverse</i>.</p><p class=Pp>Routes in the kernel table that are added or changed as a result of ICMP Redirect messages are deleted after a while to minimize <i class=Em>black-holes</i>. When a TCP connection suffers a timeout, the kernel tells <code class=Nm>routed</code>, which deletes all redirected routes through the gateway involved, advances the age of all RIP routes through the gateway to allow an alternate to be chosen, and advances of the age of any relevant Router Discovery Protocol default routes.</p><p class=Pp>Hosts acting as internetwork routers gratuitously supply their routing tables every 30 seconds to all directly connected hosts and networks. These RIP responses are sent to the broadcast address on nets that support broadcasting, to the destination address on point-to-point links, and to the router's own address on other networks. If RIPv2 is enabled, multicast packets are sent on interfaces that support multicasting.</p><p class=Pp>If no response is received on a remote interface, if there are errors while sending responses, or if there are more errors than input or output (see <a class=Xr href=netstat.1.html>netstat(1)</a>), then the cable or some other part of the interface is assumed to be disconnected or broken, and routes are adjusted appropriately.</p><p class=Pp>The <i class=Em>Internet Router Discovery Protocol</i> is handled similarly. When the daemon is supplying RIP routes, it also listens for Router Discovery Solicitations and sends Advertisements. When it is quiet and listening to other RIP routers, it sends Solicitations and listens for Advertisements. If it receives a good Advertisement and it is not multi-homed, it stops listening for broadcast or multicast RIP responses. It tracks several advertising routers to speed recovery when the currently chosen router dies. If all discovered routers disappear, the daemon resumes listening to RIP responses. It continues listening to RIP while using Router Discovery if multi-homed to ensure all interfaces are used.</p><p class=Pp>The Router Discovery standard requires that advertisements have a default "lifetime" of 30 minutes. That means should something happen, a client can be without a good route for 30 minutes. It is a good idea to reduce the default to 45 seconds using <code class=Fl>-P</code><code class=Cm>rdisc_interval=45</code> on the command line or <code class=Cm>rdisc_interval=45</code> in the <span class=Pa>/etc/gateways</span> file.</p><p class=Pp>While using Router Discovery (which happens by default when the system has a single network interface and a Router Discover Advertisement is received), there is a single default route and a variable number of redirected host routes in the kernel table. On a host with more than one network interface, this default route will be via only one of the interfaces. Thus, multi-homed hosts running with <code class=Fl>-q</code> might need <code class=Cm>no_rdisc</code> described below.</p><p class=Pp>See the <code class=Cm>pm_rdisc</code> facility described below to support "legacy" systems that can handle neither RIPv2 nor Router Discovery.</p><p class=Pp>By default, neither Router Discovery advertisements nor solicitations are sent over point to point links (e.g. PPP). The netmask associated with point-to-point links (such as SLIP or PPP, with the IFF_POINTOPOINT flag) is used by <code class=Nm>routed</code> to infer the netmask used by the remote system when RIPv1 is used.</p><p class=Pp>The following options are available:</p><dl class=Bl-tag><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>allow <code class=Nm>routed</code> to accept a RIP request from non-router node. When specified once, <code class=Nm>routed</code> replies to a route information query from neighbor nodes. When specified twice, it replies to a query from remote nodes in addition. <a class=Xr href=rtquery.8.html>rtquery(8)</a> utility can be used to send a request. <p class=Pp>This feature is disabled by default because of a risk of reflection attack though it is useful for debugging purpose.</p></dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>force <code class=Nm>routed</code> to supply routing information. This is the default if multiple network interfaces are present on which RIP or Router Discovery have not been disabled, and if the kernel switch ipforwarding=1.</dd><dt><a class=permalink href=#q><code class=Fl id=q>-q</code></a></dt><dd>is the opposite of the <code class=Fl>-s</code> option. This is the default when only one interface is present. With this explicit option, the daemon is always in "quiet-mode" for RIP and does not supply routing information to other computers.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>do not run in the background. This option is meant for interactive use.</dd><dt><a class=permalink href=#g><code class=Fl id=g>-g</code></a></dt><dd>used on internetwork routers to offer a route to the "default" destination. It is equivalent to <code class=Fl>-F</code><code class=Cm>0/0,1</code> and is present mostly for historical reasons. A better choice is <code class=Fl>-P</code><code class=Cm>pm_rdisc</code> on the command line or <code class=Cm>pm_rdisc</code> in the <span class=Pa>/etc/gateways</span> file, since a larger metric will be used, reducing the spread of the potentially dangerous default route. This is typically used on a gateway to the Internet, or on a gateway that uses another routing protocol whose routes are not reported to other local routers. Notice that because a metric of 1 is used, this feature is dangerous. It is more commonly accidentally used to create chaos with a routing loop than to solve problems.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>cause host or point-to-point routes to not be advertised, provided there is a network route going the same direction. That is a limited kind of aggregation. This option is useful on gateways to Ethernets that have other gateway machines connected with point-to-point links such as SLIP.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a></dt><dd>cause the machine to advertise a host or point-to-point route to its primary interface. It is useful on multi-homed machines such as NFS servers. This option should not be used except when the cost of the host routes it generates is justified by the popularity of the server. It is effective only when the machine is supplying routing information, because there is more than one interface. The <code class=Fl>-m</code> option overrides the <code class=Fl>-q</code> option to the limited extent of advertising the host route.</dd><dt><a class=permalink href=#A><code class=Fl id=A>-A</code></a></dt><dd>do not ignore RIPv2 authentication if we do not care about RIPv2 authentication. This option is required for conformance with RFC 1723. However, it makes no sense and breaks using RIP as a discovery protocol to ignore all RIPv2 packets that carry authentication when this machine does not care about authentication.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>increase the debugging level, which causes more information to be logged on the tracefile specified with <code class=Fl>-T</code> or standard out. The debugging level can be increased or decreased with the <i class=Em>SIGUSR1</i> or <i class=Em>SIGUSR2</i> signals or with the <a class=Xr href=rtquery.8.html>rtquery(8)</a> command.</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><var class=Ar>tracefile</var></dt><dd>increases the debugging level to at least 1 and causes debugging information to be appended to the trace file. Note that because of security concerns, it is wisest to not run <code class=Nm>routed</code> routinely with tracing directed to a file.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>display and logs the version of daemon.</dd><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a><var class=Ar>net[/mask][,metric]</var></dt><dd>minimize routes in transmissions via interfaces with addresses that match <i class=Em>net/mask</i>, and synthesizes a default route to this machine with the <i class=Em>metric</i>. The intent is to reduce RIP traffic on slow, point-to-point links such as PPP links by replacing many large UDP packets of RIP information with a single, small packet containing a "fake" default route. If <i class=Em>metric</i> is absent, a value of 14 is assumed to limit the spread of the "fake" default route. This is a dangerous feature that when used carelessly can cause routing loops. Notice also that more than one interface can match the specified network number and mask. See also <code class=Fl>-g</code>.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>parms</var></dt><dd>is equivalent to adding the parameter line <i class=Em>parms</i> to the <span class=Pa>/etc/gateways</span> file.</dd></dl><p class=Pp>Any other argument supplied is interpreted as the name of a file in which the actions of <code class=Nm>routed</code> should be logged. It is better to use <code class=Fl>-T</code> instead of appending the name of the trace file to the command.</p><p class=Pp>The <code class=Nm>routed</code> utility also supports the notion of "distant" <i class=Em>passive</i> or <i class=Em>active</i> gateways. When <code class=Nm>routed</code> is started, it reads the file <span class=Pa>/etc/gateways</span> to find such distant gateways which may not be located using only information from a routing socket, to discover if some of the local gateways are <i class=Em>passive</i>, and to obtain other parameters. Gateways specified in this manner should be marked passive if they are not expected to exchange routing information, while gateways marked active should be willing to exchange RIP packets. Routes through <i class=Em>passive</i> gateways are installed in the kernel's routing tables once upon startup and are not included in transmitted RIP responses.</p><p class=Pp>Distant active gateways are treated like network interfaces. RIP responses are sent to the distant <i class=Em>active</i> gateway. If no responses are received, the associated route is deleted from the kernel table and RIP responses advertised via other interfaces. If the distant gateway resumes sending RIP responses, the associated route is restored.</p><p class=Pp>Such gateways can be useful on media that do not support broadcasts or multicasts but otherwise act like classic shared media like Ethernets such as some ATM networks. One can list all RIP routers reachable on the HIPPI or ATM network in <span class=Pa>/etc/gateways</span> with a series of "host" lines. Note that it is usually desirable to use RIPv2 in such situations to avoid generating lists of inferred host routes.</p><p class=Pp>Gateways marked <i class=Em>external</i> are also passive, but are not placed in the kernel routing table nor are they included in routing updates. The function of external entries is to indicate that another routing process will install such a route if necessary, and that other routes to that destination should not be installed by <code class=Nm>routed</code>. Such entries are only required when both routers may learn of routes to the same destination.</p><p class=Pp>The <span class=Pa>/etc/gateways</span> file is comprised of a series of lines, each in one of the following two formats or consist of parameters described later. Blank lines and lines starting with '#' are comments.</p><div class="Bd Pp"><code class=Cm>net</code><var class=Ar>Nname[/mask]</var><code class=Cm>gateway</code><var class=Ar>Gname</var><code class=Cm>metric</code><var class=Ar>value</var> &lt;<code class=Cm>passive</code><span class=No>|</span><code class=Cm>active</code><span class=No>|</span><code class=Cm>extern</code>&gt;</div><div class="Bd Pp"><code class=Cm>host</code><var class=Ar>Hname</var><code class=Cm>gateway</code><var class=Ar>Gname</var><code class=Cm>metric</code><var class=Ar>value</var> &lt;<code class=Cm>passive</code><span class=No>|</span><code class=Cm>active</code><span class=No>|</span><code class=Cm>extern</code>&gt;</div><p class=Pp><var class=Ar>Nname</var> or <var class=Ar>Hname</var> is the name of the destination network or host. It may be a symbolic network name or an Internet address specified in "dot" notation (see <a class=Xr href=inet.3.html>inet(3)</a>). (If it is a name, then it must either be defined in <span class=Pa>/etc/networks</span> or <span class=Pa>/etc/hosts</span>, or a method in <a class=Xr href=nsswitch.conf.5.html>nsswitch.conf(5)</a> must be able to resolve it.)</p><p class=Pp><var class=Ar>Mask</var> is an optional number between 1 and 32 indicating the netmask associated with <var class=Ar>Nname</var>.</p><p class=Pp><var class=Ar>Gname</var> is the name or address of the gateway to which RIP responses should be forwarded.</p><p class=Pp><var class=Ar>Value</var> is the hop count to the destination host or network.</p><p class=Pp><code class=Cm>Host</code><var class=Ar>hname</var> is equivalent to <code class=Cm>net</code><var class=Ar>nname/32</var>.</p><p class=Pp>One of the keywords <code class=Cm>passive</code>, <code class=Cm>active</code> or <code class=Cm>external</code> must be present to indicate whether the gateway should be treated as <code class=Cm>passive</code> or <code class=Cm>active</code> (as described above), or whether the gateway is <code class=Cm>external</code> to the scope of the RIP protocol.</p><p class=Pp>As can be seen when debugging is turned on with <code class=Fl>-t</code>, such lines create pseudo-interfaces. To set parameters for remote or external interfaces, a line starting with <code class=Cm>if=alias(Hname)</code>, <code class=Cm>if=remote(Hname)</code>, etc. should be used.</p><section class=Ss><h2 class=Ss id=Parameters><a class=permalink href=#Parameters>Parameters</a></h2> Lines that start with neither "net" nor "host" must consist of one or more of the following parameter settings, separated by commas or blanks: <dl class=Bl-tag><dt><a class=permalink href=#if><code class=Cm id=if>if</code></a>=<var class=Ar>ifname</var></dt><dd>indicates that the other parameters on the line apply to the interface name <var class=Ar>ifname</var>.</dd><dt><a class=permalink href=#subnet><code class=Cm id=subnet>subnet</code></a>=<var class=Ar>nname</var>[/<var class=Ar>mask</var>][,<var class=Ar>metric</var>]</dt><dd>advertises a route to network <var class=Ar>nname</var> with mask <var class=Ar>mask</var> and the supplied metric (default 1). This is useful for filling "holes" in CIDR allocations. This parameter must appear by itself on a line. The network number must specify a full, 32-bit value, as in 192.0.2.0 instead of 192.0.2. <p class=Pp>Do not use this feature unless necessary. It is dangerous.</p></dd><dt><a class=permalink href=#ripv1_mask><code class=Cm id=ripv1_mask>ripv1_mask</code></a>=<var class=Ar>nname</var>/<var class=Ar>mask1</var>,<var class=Ar>mask2</var></dt><dd>specifies that netmask of the network of which <var class=Ar>nname</var>/<var class=Ar>mask1</var> is a subnet should be <var class=Ar>mask2</var>. For example, “<code class=Li>ripv1_mask=192.0.2.16/28,27</code>” marks 192.0.2.16/28 as a subnet of 192.0.2.0/27 instead of 192.0.2.0/24. It is better to turn on RIPv2 instead of using this facility, for example with <code class=Cm>ripv2_out</code>.</dd><dt><a class=permalink href=#passwd><code class=Cm id=passwd>passwd</code></a>=<var class=Ar>XXX[|KeyID[start|stop]]</var></dt><dd>specifies a RIPv2 cleartext password that will be included on all RIPv2 responses sent, and checked on all RIPv2 responses received. Any blanks, tab characters, commas, or '#', '|', or NULL characters in the password must be escaped with a backslash (\). The common escape sequences \n, \r, \t, \b, and \xxx have their usual meanings. The <code class=Cm>KeyID</code> must be unique but is ignored for cleartext passwords. If present, <code class=Cm>start</code> and <code class=Cm>stop</code> are timestamps in the form year/month/day@hour:minute. They specify when the password is valid. The valid password with the most future is used on output packets, unless all passwords have expired, in which case the password that expired most recently is used, or unless no passwords are valid yet, in which case no password is output. Incoming packets can carry any password that is valid, will be valid within the next 24 hours, or that was valid within the preceding 24 hours. To protect the secrets, the passwd settings are valid only in the <span class=Pa>/etc/gateways</span> file and only when that file is readable only by UID 0.</dd><dt><a class=permalink href=#md5_passwd><code class=Cm id=md5_passwd>md5_passwd</code></a>=<var class=Ar>XXX|KeyID[start|stop]</var></dt><dd>specifies a RIPv2 MD5 password. Except that a <code class=Cm>KeyID</code> is required, this keyword is similar to <code class=Cm>passwd</code>.</dd><dt><a class=permalink href=#no_ag><code class=Cm id=no_ag>no_ag</code></a></dt><dd>turns off aggregation of subnets in RIPv1 and RIPv2 responses.</dd><dt><a class=permalink href=#no_super_ag><code class=Cm id=no_super_ag>no_super_ag</code></a></dt><dd>turns off aggregation of networks into supernets in RIPv2 responses.</dd><dt><a class=permalink href=#passive><code class=Cm id=passive>passive</code></a></dt><dd>marks the interface to not be advertised in updates sent via other interfaces, and turns off all RIP and router discovery through the interface.</dd><dt><a class=permalink href=#no_rip><code class=Cm id=no_rip>no_rip</code></a></dt><dd>disables all RIP processing on the specified interface. If no interfaces are allowed to process RIP packets, <code class=Nm>routed</code> acts purely as a router discovery daemon. <p class=Pp>Note that turning off RIP without explicitly turning on router discovery advertisements with <code class=Cm>rdisc_adv</code> or <code class=Fl>-s</code> causes <code class=Nm>routed</code> to act as a client router discovery daemon, not advertising.</p></dd><dt><a class=permalink href=#no_rip_mcast><code class=Cm id=no_rip_mcast>no_rip_mcast</code></a></dt><dd>causes RIPv2 packets to be broadcast instead of multicast.</dd><dt><a class=permalink href=#no_rip_out><code class=Cm id=no_rip_out>no_rip_out</code></a></dt><dd>causes no RIP updates to be sent.</dd><dt><a class=permalink href=#no_ripv1_in><code class=Cm id=no_ripv1_in>no_ripv1_in</code></a></dt><dd>causes RIPv1 received responses to be ignored.</dd><dt><a class=permalink href=#no_ripv2_in><code class=Cm id=no_ripv2_in>no_ripv2_in</code></a></dt><dd>causes RIPv2 received responses to be ignored.</dd><dt><a class=permalink href=#ripv2_out><code class=Cm id=ripv2_out>ripv2_out</code></a></dt><dd>turns on RIPv2 output and causes RIPv2 advertisements to be multicast when possible.</dd><dt><a class=permalink href=#ripv2><code class=Cm id=ripv2>ripv2</code></a></dt><dd>is equivalent to <code class=Cm>no_ripv1_in</code> and <code class=Cm>no_ripv1_out</code>. This enables RIPv2.</dd><dt><a class=permalink href=#no_rdisc><code class=Cm id=no_rdisc>no_rdisc</code></a></dt><dd>disables the Internet Router Discovery Protocol.</dd><dt><a class=permalink href=#no_solicit><code class=Cm id=no_solicit>no_solicit</code></a></dt><dd>disables the transmission of Router Discovery Solicitations.</dd><dt><a class=permalink href=#send_solicit><code class=Cm id=send_solicit>send_solicit</code></a></dt><dd>specifies that Router Discovery solicitations should be sent, even on point-to-point links, which by default only listen to Router Discovery messages.</dd><dt><a class=permalink href=#no_rdisc_adv><code class=Cm id=no_rdisc_adv>no_rdisc_adv</code></a></dt><dd>disables the transmission of Router Discovery Advertisements.</dd><dt><a class=permalink href=#rdisc_adv><code class=Cm id=rdisc_adv>rdisc_adv</code></a></dt><dd>specifies that Router Discovery Advertisements should be sent, even on point-to-point links, which by default only listen to Router Discovery messages.</dd><dt><a class=permalink href=#bcast_rdisc><code class=Cm id=bcast_rdisc>bcast_rdisc</code></a></dt><dd>specifies that Router Discovery packets should be broadcast instead of multicast.</dd><dt><a class=permalink href=#rdisc_pref><code class=Cm id=rdisc_pref>rdisc_pref</code></a>=<var class=Ar>N</var></dt><dd>sets the preference in Router Discovery Advertisements to the optionally signed integer <var class=Ar>N</var>. The default preference is 0. Default routes with smaller or more negative preferences are preferred by clients.</dd><dt><a class=permalink href=#rdisc_interval><code class=Cm id=rdisc_interval>rdisc_interval</code></a>=<var class=Ar>N</var></dt><dd>sets the nominal interval with which Router Discovery Advertisements are transmitted to N seconds and their lifetime to 3*N.</dd><dt><a class=permalink href=#fake_default><code class=Cm id=fake_default>fake_default</code></a>=<var class=Ar>metric</var></dt><dd>has an identical effect to <code class=Fl>-F</code><var class=Ar>net[/mask][=metric]</var> with the network and mask coming from the specified interface.</dd><dt><a class=permalink href=#pm_rdisc><code class=Cm id=pm_rdisc>pm_rdisc</code></a></dt><dd>is similar to <code class=Cm>fake_default</code>. When RIPv2 routes are multicast, so that RIPv1 listeners cannot receive them, this feature causes a RIPv1 default route to be broadcast to RIPv1 listeners. Unless modified with <code class=Cm>fake_default</code>, the default route is broadcast with a metric of 14. That serves as a "poor man's router discovery" protocol.</dd><dt><a class=permalink href=#adj_inmetric><code class=Cm id=adj_inmetric>adj_inmetric</code></a>=<var class=Ar>delta</var></dt><dd>adjusts the hop count or metric of received RIP routes by <var class=Ar>delta</var>. The metric of every received RIP route is increased by the sum of two values associated with the interface. One is the adj_inmetric value and the other is the interface metric set with <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>.</dd><dt><a class=permalink href=#adj_outmetric><code class=Cm id=adj_outmetric>adj_outmetric</code></a>=<var class=Ar>delta</var></dt><dd>adjusts the hop count or metric of advertised RIP routes by <var class=Ar>delta</var>. The metric of every received RIP route is increased by the metric associated with the interface by which it was received, or by 1 if the interface does not have a non-zero metric. The metric of the received route is then increased by the adj_outmetric associated with the interface. Every advertised route is increased by a total of four values, the metric set for the interface by which it was received with <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>, the <code class=Cm>adj_inmetric</code><var class=Ar>delta</var> of the receiving interface, the metric set for the interface by which it is transmitted with <a class=Xr href=ifconfig.8.html>ifconfig(8)</a>, and the <code class=Cm>adj_outmetric</code><var class=Ar>delta</var> of the transmitting interface.</dd><dt><a class=permalink href=#trust_gateway><code class=Cm id=trust_gateway>trust_gateway</code></a>=<var class=Ar>rname[|net1/mask1|net2/mask2|...]</var></dt><dd>causes RIP packets from router <var class=Ar>rname</var> and other routers named in other <code class=Cm>trust_gateway</code> keywords to be accepted, and packets from other routers to be ignored. If networks are specified, then routes to other networks will be ignored from that router.</dd><dt><a class=permalink href=#redirect_ok><code class=Cm id=redirect_ok>redirect_ok</code></a></dt><dd>allows the kernel to listen ICMP Redirect messages when the system is acting as a router and forwarding packets. Otherwise, ICMP Redirect messages are overridden and deleted when the system is acting as a router.</dd></dl></section></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/gateways</span></dt><dd>for distant gateways</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=icmp.4.html>icmp(4)</a>, <a class=Xr href=udp.4.html>udp(4)</a>, <a class=Xr href=rtquery.8.html>rtquery(8)</a><p class=Pp><cite class=Rs><span class=RsT>Internet Transport Protocols</span>, <span class=RsR>XSIS 028112</span>, <span class=RsQ>Xerox System Integration Standard</span>.</cite></p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>routed</code> utility appeared in <span class=Ux>4.2BSD</span>. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> It does not always detect unidirectional failures in network interfaces, for example, when the output side fails. </section></div><table class=foot><tr><td class=foot-date>June 27, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>