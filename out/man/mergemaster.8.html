<!DOCTYPE html>
<html><head><meta charset=utf-8><title>mergemaster(8)</title><keywords content=man,mergemaster></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>mergemaster(8)</h1><table class=head><tr><td class=head-ltitle>MERGEMASTER(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>MERGEMASTER(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>mergemaster</code> — <div class=Nd>merge configuration files, et al during an upgrade</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>mergemaster</code></td><td>[<code class=Fl>-scrvhpCP</code>] [<code class=Fl>-a|iFU</code>] [<code class=Fl>--run-updates=[always|never]</code>] [<code class=Fl>-m</code><var class=Ar>/path/to/sources</var>] [<code class=Fl>-t</code><var class=Ar>/path/to/temp/root</var>] [<code class=Fl>-d</code>] [<code class=Fl>-u</code><var class=Ar>N</var>] [<code class=Fl>-w</code><var class=Ar>N</var>] [<code class=Fl>-A</code><var class=Ar>Target architecture</var>] [<code class=Fl>-D</code><var class=Ar>/destdir/path</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>mergemaster</code> utility is a Bourne shell script which is designed to aid you in updating the various configuration and other files associated with <span class=Ux>FreeBSD</span>. It is <b class=Sy>HIGHLY</b> recommended that you back up your <span class=Pa>/etc</span> directory before beginning this process. <p class=Pp>The script uses <span class=Pa>/usr/src/Makefile</span> to build a temporary root environment from <span class=Pa>/</span> down, populating that environment with the various files. You can specify a different source directory with the <code class=Fl>-m</code> command line option, or specify the destination directory with the <code class=Fl>-D</code> option. It then compares each file in that environment to its installed counterpart. When the script finds a change in the new file, or there is no installed version of the new file it gives you four options to deal with it. You can install the new file as is, delete the new file, merge the old and new files (as appropriate) using <a class=Xr href=sdiff.1.html>sdiff(1)</a> or leave the file in the temporary root environment to merge by hand later.</p><p class=Pp>By default it creates the temporary root in <span class=Pa>/var/tmp/temproot</span> and compares the Version Control System (VCS) Id strings ($FreeBSD) for files that have them, deleting the temporary file if the strings match. If there is no Id string, or if the strings are different it compares the files themselves. You can also specify that the script ignore the Id strings and compare every file with the <code class=Fl>-s</code> option. Using the <code class=Fl>-F</code> option <code class=Nm>mergemaster</code> will install the new file for you if they differ only by VCS strings.</p><p class=Pp>The merge menu option is designed to let you easily combine your customizations from the old version of a file into the new one. While you can use the merge function to incorporate changes from files that you have not customized, it is not recommended.</p><p class=Pp>The <code class=Nm>mergemaster</code> utility checks your umask and issues a warning for anything other than 022. While it is not mandatory to grant world read permissions for most configuration files, you may run into problems without them. If you choose a umask other than 022 and experience trouble later this could be the cause. <span class=Pa>/etc/master.passwd</span> is treated as a special case. If you choose to install this file or a merged version of it the file permissions are always 600 (rw-------) for security reasons. After installing an updated version of this file you should probably run <a class=Xr href=pwd_mkdb.8.html>pwd_mkdb(8)</a> with the <code class=Fl>-p</code> option to rebuild your password databases and recreate <span class=Pa>/etc/passwd</span>.</p><p class=Pp>The script uses the owner and group ids that the files are created with by <span class=Pa>/usr/src/etc/Makefile</span>, and file permissions as specified by the umask. Unified diffs are used by default to display any differences unless you choose context diffs.</p><p class=Pp>The <code class=Nm>mergemaster</code> utility will source scripts that you specify right before it starts the comparison, and after it is done running. The easiest way to handle this is to place the path to the script(s) in the appropriate variables in your <span class=Pa>.mergemasterrc</span> file. The script sourced before comparison is named in <code class=Ev>MM_PRE_COMPARE_SCRIPT</code>, and the one sourced after the script is done is <code class=Ev>MM_EXIT_SCRIPT</code>. This is the recommended way to specify local modifications, or files that you want to give special handling to. This includes files that you want to be deleted without being compared. Because the named scripts are sourced from within <code class=Nm>mergemaster</code>, all of the script's variables are available for use in your custom script. You can also use <span class=Pa>/etc/mergemaster.rc</span> which will be read before <span class=Pa>.mergemasterrc</span>. Options specified on the command line are updated last, and therefore can override both files.</p><p class=Pp>When the comparison is done if there are any files remaining in the temproot directory they will be listed, and if the <code class=Fl>-a</code> option is not in use the user will be given the option of deleting the temproot directory. If there are no files remaining in the temproot directory it will be deleted.</p><p class=Pp>The options are as follows:</p><dl class=Bl-tag><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>Perform a strict comparison, diffing every pair of files. This comparison is performed line by line, without regard to VCS Ids.</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a></dt><dd>Use context diffs instead of unified diffs.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Re-run <code class=Nm>mergemaster</code> on a previously cleaned directory, skipping the creation of the temporary root environment. This option is compatible with all other options.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Be more verbose about the process. You should probably use this option the first time you run <code class=Nm>mergemaster</code>. This option also gives you a list of files that exist only in the installed version of <span class=Pa>/etc</span>.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>Run automatically. This option will leave all the files that differ from the installed versions in the temporary directory to be dealt with by hand. If the <span class=Pa>temproot</span> directory exists, it creates a new one in a previously non-existent directory. This option unsets the verbose flag, and is not compatible with <code class=Fl>-i</code>, <code class=Fl>-F</code>, or <code class=Fl>-U</code>. Setting <code class=Fl>-a</code> makes <code class=Fl>-w</code> superfluous.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Display usage and help information.</dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>Automatically install any files that do not exist in the destination directory.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>Pre-buildworld mode. Compares only files known to be essential to the success of {build|install}world, i.e., <span class=Pa>/etc/group</span> and <span class=Pa>/etc/master.passwd</span>.</dd><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a></dt><dd>If the files differ only by VCS Id ($FreeBSD) install the new file.</dd><dt><a class=permalink href=#C><code class=Fl id=C>-C</code></a></dt><dd>After a standard <code class=Nm>mergemaster</code> run, compares your rc.conf[.local] options to the defaults.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a></dt><dd>Preserve files that you replace in <span class=Pa>/var/tmp/mergemaster/preserved-files-&lt;date&gt;</span>, or another directory you specify in your <code class=Nm>mergemaster</code> rc file.</dd><dt><a class=permalink href=#U><code class=Fl id=U>-U</code></a></dt><dd>Attempt to auto upgrade files that have not been user modified. This option can be dangerous when there are critical changes in the new versions that affect your running system.</dd><dt><a class=permalink href="#-run-updates=_always_never_"><code class=Fl id="-run-updates=_always_never_">--run-updates=[always|never]</code></a></dt><dd>Specify always or never to run newaliases, pwd_mkdb, etc. at the end of the comparison run. If this option is omitted the default is to prompt the user for each update as necessary.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>/path/to/sources</var></dt><dd>Specify the path to the directory where you want to do the <a class=Xr href=make.1.html>make(1)</a>. (In other words, where your sources are, but -s was already taken.) In older versions of <code class=Nm>mergemaster</code> the path to <span class=Pa>src/etc</span> was required. <code class=Nm>mergemaster</code> will convert the path if this older method is used.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>/path/to/temp/root</var></dt><dd>Create the temporary root environment in <span class=Pa>/path/to/temp/root</span> instead of the default <span class=Pa>/var/tmp/temproot</span>.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Add the date and time to the name of the temporary root directory. If <code class=Fl>-t</code> is specified, this option must follow it if you want the date added too.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a><var class=Ar>N</var></dt><dd>Specify a numeric umask. The default is 022.</dd><dt><a class=permalink href=#w><code class=Fl id=w>-w</code></a><var class=Ar>N</var></dt><dd>Supply an alternate screen width to the <a class=Xr href=sdiff.1.html>sdiff(1)</a> command in numbers of columns. The default is 80.</dd><dt><a class=permalink href=#A><code class=Fl id=A>-A</code></a><var class=Ar>Target architecture</var></dt><dd>Specify an alternative <code class=Ev>TARGET_ARCH</code> architecture name.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a><var class=Ar>/path</var></dt><dd>Specify the destination directory for the installed files.</dd></dl></section><section class=Sh><h2 class=Sh id=ENVIRONMENT><a class=permalink href=#ENVIRONMENT>ENVIRONMENT</a></h2> The <code class=Nm>mergemaster</code> utility uses the <code class=Ev>PAGER</code> environment variable if set. Otherwise it uses <a class=Xr href=less.1.html>less(1)</a>. If <code class=Ev>PAGER</code> specifies a program outside its limited <code class=Ev>PATH</code> without specifying the full path, <code class=Nm>mergemaster</code> prompts you with options on how to proceed. The <code class=Ev>MM_PRE_COMPARE_SCRIPT</code> and <code class=Ev>MM_EXIT_SCRIPT</code> variables are used as described above. Other variables that are used by the script internally can be specified in <span class=Pa>.mergemasterrc</span> as described in more detail below. </section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/mergemaster.rc</span></dt><dd style="width: auto;"> </dd><dt><span class=Pa>$HOME/.mergemasterrc</span></dt><dd style="width: auto;"> </dd></dl><p class=Pp>The <code class=Nm>mergemaster</code> utility will <code class=Ic>.</code> (source) these files if they exist. Command line options will override rc file options. <span class=Pa>$HOME/.mergemasterrc</span> overrides <span class=Pa>/etc/mergemaster.rc</span>. Here is an example with all values commented out:</p><div class="Bd Pp"><pre>
# These are options for mergemaster, with their default values listed
# The following options have command line overrides
#
# The target architecture (-A, unset by default)
#ARCHSTRING='TARGET_ARCH=&lt;foo&gt;'
#
# Sourcedir is the directory to do the 'make' in (-m)
#SOURCEDIR='/usr/src'
#
# Directory to install the temporary root environment into (-t)
#TEMPROOT='/var/tmp/temproot'
#
# Specify the destination directory for the installed files (-D)
#DESTDIR=
#
# Strict comparison skips the VCS Id test and compares every file (-s)
#STRICT=no
#
# Type of diff, such as unified, context, etc. (-c)
#DIFF_FLAG='-u'
#
# Install the new file if it differs only by VCS Id ($FreeBSD, -F)
#FREEBSD_ID=
#
# Verbose mode includes more details and additional checks (-v)
#VERBOSE=
#
# Automatically install files that do not exist on the system already (-i)
#AUTO_INSTALL=
#
# Automatically upgrade files that have not been user modified (-U)
# ***DANGEROUS***
#AUTO_UPGRADE=
#
# Either always or never run newaliases, pwd_mkdb at the end (--run-updates)
#RUN_UPDATES=
#
# Compare /etc/rc.conf[.local] to /etc/defaults/rc.conf (-C)
#COMP_CONFS=
#
# Preserve files that you replace (-P)
#PRESERVE_FILES=
#PRESERVE_FILES_DIR=/var/tmp/mergemaster/preserved-files-`date +%y%m%d-%H%M%S`
#
# The umask for mergemaster to compare the default file's modes to (-u)
#NEW_UMASK=022
#
# The following options have no command line overrides
#
# Files to always avoid comparing
#IGNORE_FILES='/etc/motd /etc/printcap foo bar'
#
# Additional options for diff.  This will get unset when using -s.
#DIFF_OPTIONS='-Bb'	# Ignore changes in whitespace
#
# Location to store the list of mtree values for AUTO_UPGRADE purposes
#MTREEDB='/var/db'
#
# For those who just cannot stand including the full path to PAGER
#DONT_CHECK_PAGER=
#
# If you set 'yes' above, make sure to include the PATH to your pager
#PATH=/bin:/usr/bin:/usr/sbin
#
# Delete stale files in /etc/rc.d without prompting
#DELETE_STALE_RC_FILES=
#
# Specify the path to scripts to run before the comparison starts,
# and/or after the script has finished its work
#MM_PRE_COMPARE_SCRIPT=
#MM_EXIT_SCRIPT=
</pre></div></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Exit status is 0 on successful completion, or if the user bails out manually at some point during execution. <p class=Pp>Exit status is 1 if it fails for one of the following reasons:</p><p class=Pp>Invalid command line option</p><p class=Pp>Failure to create the temporary root environment</p><p class=Pp>Failure to populate the temporary root</p><p class=Pp>Presence of the 'nodev' option in <span class=Pa>&lt;DESTDIR&gt;/etc/fstab</span></p><p class=Pp>Failure to install a file</p></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Typically all you will need to do is type <code class=Nm>mergemaster</code> at the prompt and the script will do all the work for you. <p class=Pp>To use context diffs and have <code class=Nm>mergemaster</code> explain more things as it goes along, use:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li># mergemaster -cv</code></div><p class=Pp>To specify that <code class=Nm>mergemaster</code> put the temporary root environment in <span class=Pa>/usr/tmp/root</span>, use:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li># mergemaster -t /usr/tmp/root</code></div><p class=Pp>To specify a 110 column screen with a strict comparison, use:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li># mergemaster -sw 110</code></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=diff.1.html>diff(1)</a>, <a class=Xr href=make.1.html>make(1)</a>, <a class=Xr href=less.1.html>less(1)</a>, <a class=Xr href=sdiff.1.html>sdiff(1)</a>, <a class=Xr href=etcupdate.8.html>etcupdate(8)</a>, <a class=Xr href=pwd_mkdb.8.html>pwd_mkdb(8)</a><p class=Pp><span class=Pa>/usr/src/etc/Makefile</span></p><p class=Pp><cite class=Rs><span class=RsT>The FreeBSD Handbook</span>, <a class=RsU href=https://docs.freebsd.org/en/books/handbook/cutting-edge/#makeworld>https://docs.freebsd.org/en/books/handbook/cutting-edge/#makeworld</a>.</cite></p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>mergemaster</code> utility was first publicly available on one of my web pages in a much simpler form under the name <span class=Pa>comproot</span> on 13 March 1998. The idea for creating the temporary root environment comes from Nik Clayton's make world tutorial which is referenced above. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This manual page and the script itself were written by <span class=An>Douglas Barton</span> &lt;<a class=Mt href=mailto:dougb@FreeBSD.org>dougb@FreeBSD.org</a>&gt;. </section></div><table class=foot><tr><td class=foot-date>May 20, 2021</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>