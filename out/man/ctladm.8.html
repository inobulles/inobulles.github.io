<!DOCTYPE html>
<html><head><meta charset=utf-8><title>ctladm(8)</title><keywords content=man,ctladm></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>ctladm(8)</h1><table class=head><tr><td class=head-ltitle>CTLADM(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>CTLADM(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>ctladm</code> — <div class=Nd>CAM Target Layer control utility</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td>⟨<var class=Ar>command</var>⟩ [lun] [generic args] [command args]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>tur</code> ⟨lun⟩ [general options]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>inquiry</code> ⟨lun⟩ [general options]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>reqsense</code> ⟨lun⟩ [general options]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>reportluns</code> ⟨lun⟩ [general options]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>read</code> ⟨lun⟩ [general options] ⟨<code class=Fl>-l</code><var class=Ar>lba</var>⟩ ⟨<code class=Fl>-d</code><var class=Ar>datalen</var>⟩ ⟨<code class=Fl>-f</code><var class=Ar>file|-</var>⟩ ⟨<code class=Fl>-b</code><var class=Ar>blocksize_bytes</var>⟩ [<code class=Fl>-c</code><var class=Ar>cdbsize</var>] [<code class=Fl>-N</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>write</code> ⟨lun⟩ [general options] ⟨<code class=Fl>-l</code><var class=Ar>lba</var>⟩ ⟨<code class=Fl>-d</code><var class=Ar>datalen</var>⟩ ⟨<code class=Fl>-f</code><var class=Ar>file|-</var>⟩ ⟨<code class=Fl>-b</code><var class=Ar>blocksize_bytes</var>⟩ [<code class=Fl>-c</code><var class=Ar>cdbsize</var>] [<code class=Fl>-N</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>readcap</code> ⟨lun⟩ [general options] [<code class=Fl>-c</code><var class=Ar>cdbsize</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>modesense</code> ⟨lun⟩ ⟨<code class=Fl>-m</code><var class=Ar>page</var> | <code class=Fl>-l</code>⟩ [<code class=Fl>-P</code><var class=Ar>pc</var>] [<code class=Fl>-d</code>] [<code class=Fl>-S</code><var class=Ar>subpage</var>] [<code class=Fl>-c</code><var class=Ar>size</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>start</code> ⟨lun⟩ [general options] [<code class=Fl>-i</code>] [<code class=Fl>-o</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>stop</code> ⟨lun⟩ [general options] [<code class=Fl>-i</code>] [<code class=Fl>-o</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>synccache</code> ⟨lun⟩ [general options] [<code class=Fl>-l</code><var class=Ar>lba</var>] [<code class=Fl>-b</code><var class=Ar>blockcount</var>] [<code class=Fl>-r</code>] [<code class=Fl>-i</code>] [<code class=Fl>-c</code><var class=Ar>cdbsize</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>lunlist</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>delay</code> ⟨lun⟩ ⟨<code class=Fl>-l</code><var class=Ar>datamove|done</var>⟩ ⟨<code class=Fl>-t</code><var class=Ar>secs</var>⟩ [<code class=Fl>-T</code><var class=Ar>oneshot|cont</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>inject</code> ⟨<code class=Fl>-i</code><var class=Ar>action</var>⟩ ⟨<code class=Fl>-p</code><var class=Ar>pattern</var>⟩ [<code class=Fl>-r</code><var class=Ar>lba,len</var>] [<code class=Fl>-s</code><var class=Ar>len fmt</var> [<var class=Ar>args</var>]] [<code class=Fl>-c</code>] [<code class=Fl>-d</code><var class=Ar>delete_id</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>create</code> ⟨<code class=Fl>-b</code><var class=Ar>backend</var>⟩ [<code class=Fl>-B</code><var class=Ar>blocksize</var>] [<code class=Fl>-d</code><var class=Ar>device_id</var>] [<code class=Fl>-l</code><var class=Ar>lun_id</var>] [<code class=Fl>-o</code><var class=Ar>name=value</var>] [<code class=Fl>-s</code><var class=Ar>size_bytes</var>] [<code class=Fl>-S</code><var class=Ar>serial_num</var>] [<code class=Fl>-t</code><var class=Ar>device_type</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>remove</code> ⟨<code class=Fl>-b</code><var class=Ar>backend</var>⟩ ⟨<code class=Fl>-l</code><var class=Ar>lun_id</var>⟩ [<code class=Fl>-o</code><var class=Ar>name=value</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>modify</code> ⟨<code class=Fl>-b</code><var class=Ar>backend</var>⟩ ⟨<code class=Fl>-l</code><var class=Ar>lun_id</var>⟩ [<code class=Fl>-o</code><var class=Ar>name=value</var>] ⟨<code class=Fl>-s</code><var class=Ar>size_bytes</var>⟩</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>devlist</code> [<code class=Fl>-b</code><var class=Ar>backend</var>] [<code class=Fl>-v</code>] [<code class=Fl>-x</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>port</code> [<code class=Fl>-c</code>] [<code class=Fl>-o</code><var class=Ar>on|off</var>] [<code class=Fl>-w</code><var class=Ar>wwpn</var>] [<code class=Fl>-W</code><var class=Ar>wwnn</var>] [<code class=Fl>-O</code><var class=Ar>pp|vp</var>] [<code class=Fl>-p</code><var class=Ar>targ_port</var>] [<code class=Fl>-r</code><var class=Ar>targ_port</var>] [<code class=Fl>-t</code><var class=Ar>fe_type</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>portlist</code> [<code class=Fl>-f</code><var class=Ar>frontend</var>] [<code class=Fl>-i</code>] [<code class=Fl>-l</code>] [<code class=Fl>-p</code><var class=Ar>targ_port</var>] [<code class=Fl>-q</code>] [<code class=Fl>-v</code>] [<code class=Fl>-x</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>lunmap</code> ⟨<code class=Fl>-p</code><var class=Ar>targ_port</var>⟩ [<code class=Fl>-l</code><var class=Ar>pLUN</var>] [<code class=Fl>-L</code><var class=Ar>cLUN</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>dumpooa</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>dumpstructs</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>islist</code> [<code class=Fl>-v</code>] [<code class=Fl>-x</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>islogout</code> ⟨<code class=Fl>-a</code> | <code class=Fl>-c</code><var class=Ar>connection-id</var> | <code class=Fl>-i</code><var class=Ar>name</var> | <code class=Fl>-p</code><var class=Ar>portal</var>⟩</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>isterminate</code> ⟨<code class=Fl>-a</code> | <code class=Fl>-c</code><var class=Ar>connection-id</var> | <code class=Fl>-i</code><var class=Ar>name</var> | <code class=Fl>-p</code><var class=Ar>portal</var>⟩</td></tr></table><br><table class=Nm><tr><td><code class=Nm>ctladm</code></td><td><code class=Ic>help</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>ctladm</code> utility is designed to provide a way to access and control the CAM Target Layer (CTL). It provides a way to send SCSI commands to the CTL layer, and also provides some meta-commands that utilize SCSI commands. (For instance, the <code class=Ic>lunlist</code> command is implemented using the SCSI REPORT LUNS and INQUIRY commands.) <p class=Pp>The <code class=Nm>ctladm</code> utility has a number of primary functions, many of which require a device identifier. The device identifier takes the following form:</p><dl class=Bl-tag><dt>lun</dt><dd>Specify the LUN number to operate on.</dd></dl> Many of the primary functions of the <code class=Nm>ctladm</code> utility take the following optional arguments: <dl class=Bl-tag><dt><a class=permalink href=#C><code class=Fl id=C>-C</code></a><var class=Ar>retries</var></dt><dd>Specify the number of times to retry a command in the event of failure.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a><var class=Ar>device</var></dt><dd>Specify the device to open. This allows opening a device other than the default device, <span class=Pa>/dev/cam/ctl</span>, to be opened for sending commands.</dd><dt><a class=permalink href=#I><code class=Fl id=I>-I</code></a><var class=Ar>id</var></dt><dd>Specify the initiator number to use. By default, <code class=Nm>ctladm</code> will use 7 as the initiator number.</dd></dl><p class=Pp>Primary commands:</p><dl class=Bl-tag><dt><a class=permalink href=#tur><code class=Ic id=tur>tur</code></a></dt><dd>Send the SCSI TEST UNIT READY command to the device and report whether or not it is ready.</dd><dt><a class=permalink href=#inquiry><code class=Ic id=inquiry>inquiry</code></a></dt><dd>Send the SCSI INQUIRY command to the device and display some of the returned inquiry data.</dd><dt><a class=permalink href=#reqsense><code class=Ic id=reqsense>reqsense</code></a></dt><dd>Send the SCSI REQUEST SENSE command to the device and display the returned sense information.</dd><dt><a class=permalink href=#reportluns><code class=Ic id=reportluns>reportluns</code></a></dt><dd>Send the SCSI REPORT LUNS command to the device and display supported LUNs.</dd><dt><a class=permalink href=#read><code class=Ic id=read>read</code></a></dt><dd>Send a SCSI READ command to the device, and write the requested data to a file or stdout. <dl class=Bl-tag><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a><var class=Ar>lba</var></dt><dd>Specify the starting Logical Block Address for the READ. This can be specified in decimal, octal (starting with 0), hexadecimal (starting with 0x) or any other base supported by <a class=Xr href=strtoull.3.html>strtoull(3)</a>.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a><var class=Ar>datalen</var></dt><dd>Specify the length, in 512 byte blocks, of the READ request.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>file</var></dt><dd>Specify the destination for the data read by the READ command. Either a filename or ‘-’ for stdout may be specified.</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a><var class=Ar>cdbsize</var></dt><dd>Specify the minimum SCSI CDB (Command Data Block) size to be used for the READ request. Allowable values are 6, 10, 12 and 16. Depending upon the LBA and amount of data requested, a larger CDB size may be used to satisfy the request. (e.g., for LBAs above 0xffffffff, READ(16) must be used to satisfy the request.)</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>blocksize</var></dt><dd>Specify the blocksize of the underlying SCSI device, so the transfer length can be calculated accurately. The blocksize can be obtained via the SCSI READ CAPACITY command.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a></dt><dd>Do not copy data to <code class=Nm>ctladm</code> from the kernel when doing a read, just execute the command without copying data. This is to be used for performance testing.</dd></dl></dd><dt><a class=permalink href=#write><code class=Ic id=write>write</code></a></dt><dd>Read data from a file or stdin, and write the data to the device using the SCSI WRITE command. <dl class=Bl-tag><dt><a class=permalink href=#l_2><code class=Fl id=l_2>-l</code></a><var class=Ar>lba</var></dt><dd>Specify the starting Logical Block Address for the WRITE. This can be specified in decimal, octal (starting with 0), hexadecimal (starting with 0x) or any other base supported by <a class=Xr href=strtoull.3.html>strtoull(3)</a>.</dd><dt><a class=permalink href=#d_2><code class=Fl id=d_2>-d</code></a><var class=Ar>atalen</var></dt><dd>Specify the length, in 512 byte blocks, of the WRITE request.</dd><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a><var class=Ar>file</var></dt><dd>Specify the source for the data to be written by the WRITE command. Either a filename or ‘-’ for stdin may be specified.</dd><dt><a class=permalink href=#c_2><code class=Fl id=c_2>-c</code></a><var class=Ar>cdbsize</var></dt><dd>Specify the minimum SCSI CDB (Command Data Block) size to be used for the READ request. Allowable values are 6, 10, 12 and 16. Depending upon the LBA and amount of data requested, a larger CDB size may be used to satisfy the request. (e.g., for LBAs above 0xffffffff, READ(16) must be used to satisfy the request.)</dd><dt><a class=permalink href=#b_2><code class=Fl id=b_2>-b</code></a><var class=Ar>blocksize</var></dt><dd>Specify the blocksize of the underlying SCSI device, so the transfer length can be calculated accurately. The blocksize can be obtained via the SCSI READ CAPACITY command.</dd><dt><a class=permalink href=#N_2><code class=Fl id=N_2>-N</code></a></dt><dd>Do not copy data to <code class=Nm>ctladm</code> to the kernel when doing a write, just execute the command without copying data. This is to be used for performance testing.</dd></dl></dd><dt><a class=permalink href=#readcap><code class=Ic id=readcap>readcap</code></a></dt><dd>Send the SCSI READ CAPACITY command to the device and display the device size and device block size. By default, READ CAPACITY(10) is used. If the device returns a maximum LBA of 0xffffffff, however, <code class=Nm>ctladm</code> will automatically issue a READ CAPACITY(16), which is implemented as a service action of the SERVICE ACTION IN(16) opcode. The user can specify the minimum CDB size with the <code class=Fl>-c</code> argument. Valid values for the <code class=Fl>-c</code> option are 10 and 16. If a 10 byte CDB is specified, the request will be automatically reissued with a 16 byte CDB if the maximum LBA returned is 0xffffffff.</dd><dt><a class=permalink href=#modesense><code class=Ic id=modesense>modesense</code></a></dt><dd>Send a SCSI MODE SENSE command to the device, and display the requested mode page(s) or page list. <dl class=Bl-tag><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>page</var></dt><dd>Specify the mode page to display. This option and the <code class=Fl>-l</code> option are mutually exclusive. One of the two must be specified, though. Mode page numbers may be specified in decimal or hexadecimal.</dd><dt><a class=permalink href=#l_3><code class=Fl id=l_3>-l</code></a></dt><dd>Request that the list of mode pages supported by the device be returned. This option and the <code class=Fl>-m</code> option are mutually exclusive. One of the two must be specified, though.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>pc</var></dt><dd>Specify the mode page control value. Possible values are: <dl class="Bl-tag Bl-compact"><dt>0</dt><dd>Current values.</dd><dt>1</dt><dd>Changeable value bitmask.</dd><dt>2</dt><dd>Default values.</dd><dt>3</dt><dd>Saved values.</dd></dl></dd><dt><a class=permalink href=#d_3><code class=Fl id=d_3>-d</code></a></dt><dd>Disable block descriptors when sending the mode sense request.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>subpage</var></dt><dd>Specify the subpage used with the mode sense request.</dd><dt><a class=permalink href=#c_3><code class=Fl id=c_3>-c</code></a><var class=Ar>cdbsize</var></dt><dd>Specify the CDB size used for the mode sense request. Supported values are 6 and 10.</dd></dl></dd><dt><a class=permalink href=#start><code class=Ic id=start>start</code></a></dt><dd>Send the SCSI START STOP UNIT command to the specified LUN with the start bit set. <dl class=Bl-tag><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>Set the immediate bit in the CDB. Note that CTL does not support the immediate bit, so this is primarily useful for making sure that CTL returns the proper error.</dd></dl></dd><dt><a class=permalink href=#stop><code class=Ic id=stop>stop</code></a></dt><dd>Send the SCSI START STOP UNIT command to the specified LUN with the start bit cleared. We use an ordered tag to stop the LUN, so we can guarantee that all pending I/O executes before it is stopped. (CTL guarantees this anyway, but <code class=Nm>ctladm</code> sends an ordered tag for completeness.) <dl class=Bl-tag><dt><a class=permalink href=#i_2><code class=Fl id=i_2>-i</code></a></dt><dd>Set the immediate bit in the CDB. Note that CTL does not support the immediate bit, so this is primarily useful for making sure that CTL returns the proper error.</dd></dl></dd><dt><a class=permalink href=#synccache><code class=Ic id=synccache>synccache</code></a></dt><dd>Send the SCSI SYNCHRONIZE CACHE command to the device. By default, SYNCHRONIZE CACHE(10) is used. If the specified starting LBA is greater than 0xffffffff or the length is greater than 0xffff, though, SYNCHRONIZE CACHE(16) will be used. The 16 byte command will also be used if the user specifies a 16 byte CDB with the <code class=Fl>-c</code> argument. <dl class=Bl-tag><dt><a class=permalink href=#l_4><code class=Fl id=l_4>-l</code></a><var class=Ar>lba</var></dt><dd>Specify the starting LBA of the cache region to synchronize. This option is a no-op for CTL. If you send a SYNCHRONIZE CACHE command, it will sync the cache for the entire LUN.</dd><dt><a class=permalink href=#b_3><code class=Fl id=b_3>-b</code></a><var class=Ar>blockcount</var></dt><dd>Specify the length of the cache region to synchronize. This option is a no-op for CTL. If you send a SYNCHRONIZE CACHE command, it will sync the cache for the entire LUN.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Specify relative addressing for the starting LBA. CTL does not support relative addressing, since it only works for linked commands, and CTL does not support linked commands.</dd><dt><a class=permalink href=#i_3><code class=Fl id=i_3>-i</code></a></dt><dd>Tell the target to return status immediately after issuing the SYNCHRONIZE CACHE command rather than waiting for the cache to finish syncing. CTL does not support this bit.</dd><dt><a class=permalink href=#c_4><code class=Fl id=c_4>-c</code></a><var class=Ar>cdbsize</var></dt><dd>Specify the minimum CDB size. Valid values are 10 and 16 bytes.</dd></dl></dd><dt><a class=permalink href=#lunlist><code class=Ic id=lunlist>lunlist</code></a></dt><dd>List all LUNs registered with CTL. Because this command uses the ioctl port, it will only work when the FETDs (Front End Target Drivers) are enabled. This command is the equivalent of doing a REPORT LUNS on one LUN and then an INQUIRY on each LUN in the system.</dd><dt><a class=permalink href=#delay><code class=Ic id=delay>delay</code></a></dt><dd>Delay commands at the given location. There are two places where commands may be delayed currently: before data is transferred (“datamove”) and just prior to sending status to the host (“done”). One of the two must be supplied as an argument to the <code class=Fl>-l</code> option. The <code class=Fl>-t</code> option must also be specified. <dl class=Bl-tag><dt><a class=permalink href=#l_5><code class=Fl id=l_5>-l</code></a><var class=Ar>delayloc</var></dt><dd>Delay command(s) at the specified location. This can either be at the data movement stage (datamove) or prior to command completion (done).</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>delaytime</var></dt><dd>Delay command(s) for the specified number of seconds. This must be specified. If set to 0, it will clear out any previously set delay for this particular location (datamove or done).</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><var class=Ar>delaytype</var></dt><dd>Specify the delay type. By default, the <code class=Ic>delay</code> option will delay the next command sent to the given LUN. With the <code class=Fl>-T</code><var class=Ar>cont</var> option, every command will be delayed by the specified period of time. With the <code class=Fl>-T</code><var class=Ar>oneshot</var> the next command sent to the given LUN will be delayed and all subsequent commands will be completed normally. This is the default.</dd></dl></dd><dt><a class=permalink href=#inject><code class=Ic id=inject>inject</code></a></dt><dd>Inject the specified type of error for the LUN specified, when a command that matches the given pattern is seen. The sense data returned is in either fixed or descriptor format, depending upon the status of the D_SENSE bit in the control mode page (page 0xa) for the LUN. <p class=Pp>Errors are only injected for commands that have not already failed for other reasons. By default, only the first command matching the pattern specified is returned with the supplied error.</p><p class=Pp>If the <code class=Fl>-c</code> flag is specified, all commands matching the pattern will be returned with the specified error until the error injection command is deleted with <code class=Fl>-d</code> flag.</p><dl class=Bl-tag><dt><a class=permalink href=#i_4><code class=Fl id=i_4>-i</code></a><var class=Ar>action</var></dt><dd>Specify the error to return: <dl class=Bl-tag><dt>aborted</dt><dd>Return the next matching command on the specified LUN with the sense key ABORTED COMMAND (0x0b), and the ASC/ASCQ 0x45,0x00 ("Select or reselect failure").</dd><dt>mediumerr</dt><dd>Return the next matching command on the specified LUN with the sense key MEDIUM ERROR (0x03) and the ASC/ASCQ 0x11,0x00 ("Unrecovered read error") for reads, or ASC/ASCQ 0x0c,0x02 ("Write error - auto reallocation failed") for write errors.</dd><dt>ua</dt><dd>Return the next matching command on the specified LUN with the sense key UNIT ATTENTION (0x06) and the ASC/ASCQ 0x29,0x00 ("POWER ON, RESET, OR BUS DEVICE RESET OCCURRED").</dd><dt>custom</dt><dd>Return the next matching command on the specified LUN with the supplied sense data. The <code class=Fl>-s</code> argument must be specified.</dd></dl></dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>pattern</var></dt><dd>Specify which commands should be returned with the given error. <dl class=Bl-tag><dt>read</dt><dd>The error should apply to READ(6), READ(10), READ(12), READ(16), etc.</dd><dt>write</dt><dd>The error should apply to WRITE(6), WRITE(10), WRITE(12), WRITE(16), WRITE AND VERIFY(10), etc.</dd><dt>rw</dt><dd>The error should apply to both read and write type commands.</dd><dt>readcap</dt><dd>The error should apply to READ CAPACITY(10) and READ CAPACITY(16) commands.</dd><dt>tur</dt><dd>The error should apply to TEST UNIT READY commands.</dd><dt>any</dt><dd>The error should apply to any command.</dd></dl></dd><dt><a class=permalink href=#r_2><code class=Fl id=r_2>-r</code></a><var class=Ar>lba,len</var></dt><dd>Specify the starting lba and length of the range of LBAs which should trigger an error. This option is only applies when read and/or write patterns are specified. If used with other command types, the error will never be triggered.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>len fmt</var> [<var class=Ar>args</var>]</dt><dd>Specify the sense data that is to be returned for custom actions. If the format is ‘-’, len bytes of sense data will be read from standard input and written to the sense buffer. If len is longer than 252 bytes (the maximum allowable SCSI sense data length), it will be truncated to that length. The sense data format is described in <a class=Xr href=cam_cdbparse.3.html>cam_cdbparse(3)</a>.</dd><dt><a class=permalink href=#c_5><code class=Fl id=c_5>-c</code></a></dt><dd>The error injection should be persistent, instead of happening once. Persistent errors must be deleted with the <code class=Fl>-d</code> argument.</dd><dt><a class=permalink href=#d_4><code class=Fl id=d_4>-d</code></a><var class=Ar>delete_id</var></dt><dd>Delete the specified error injection serial number. The serial number is returned when the error is injected.</dd></dl></dd><dt><a class=permalink href=#port><code class=Ic id=port>port</code></a></dt><dd>Perform one of several CTL frontend port operations. Either get a list of frontend ports (<code class=Fl>-l</code>), turn one or more frontends on or off (<code class=Fl>-o</code><var class=Ar>on|off</var>), or set the World Wide Node Name (<code class=Fl>-w</code><var class=Ar>wwnn</var>) or World Wide Port Name (<code class=Fl>-W</code><var class=Ar>wwpn</var>) for a given port. One of <code class=Fl>-l</code>, <code class=Fl>-o</code>, or <code class=Fl>-w</code> or <code class=Fl>-W</code> must be specified. The WWNN and WWPN may both be specified at the same time, but cannot be combined with enabling/disabling or listing ports. <dl class=Bl-tag><dt><a class=permalink href=#c_6><code class=Fl id=c_6>-c</code></a></dt><dd>Create new frontend port using free pp and vp=0.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>on|off</var></dt><dd>Turn the specified CTL frontend ports on or off. If no port number or port type is specified, all ports are turned on or off.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>pp|vp</var></dt><dd>Specify generic options on the ioctl frontend port. At present, only pp and vp port numbers can be set.</dd><dt><a class=permalink href=#p_2><code class=Fl id=p_2>-p</code></a><var class=Ar>targ_port</var></dt><dd>Specify the frontend port number. The port numbers can be found in the frontend port list.</dd><dt><a class=permalink href=#r_3><code class=Fl id=r_3>-r</code></a></dt><dd>Remove port specified with (<code class=Fl>-p</code><var class=Ar>targ_port</var>).</dd><dt><a class=permalink href=#t_2><code class=Fl id=t_2>-t</code></a><var class=Ar>fe_type</var></dt><dd>Specify the frontend type. Currently defined port types are “fc” (Fibre Channel), “scsi” (Parallel SCSI), “ioctl” (CTL ioctl interface), and “internal” (CTL CAM SIM).</dd><dt><a class=permalink href=#w><code class=Fl id=w>-w</code></a><var class=Ar>wwnn</var></dt><dd>Set the World Wide Node Name for the given port. The <code class=Fl>-n</code> argument must be specified, since this is only possible to implement on a single port. As a general rule, the WWNN should be the same across all ports on the system.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a><var class=Ar>wwpn</var></dt><dd>Set the World Wide Port Name for the given port. The <code class=Fl>-n</code> argument must be specified, since this is only possible to implement on a single port. As a general rule, the WWPN must be different for every port in the system.</dd></dl></dd><dt><a class=permalink href=#portlist><code class=Ic id=portlist>portlist</code></a></dt><dd>List CTL frontend ports. <dl class=Bl-tag><dt><a class=permalink href=#f_3><code class=Fl id=f_3>-f</code></a><var class=Ar>frontend</var></dt><dd>Specify the frontend type.</dd><dt><a class=permalink href=#i_5><code class=Fl id=i_5>-i</code></a></dt><dd>Report target and connected initiators addresses.</dd><dt><a class=permalink href=#l_6><code class=Fl id=l_6>-l</code></a></dt><dd>Report LUN mapping.</dd><dt><a class=permalink href=#p_3><code class=Fl id=p_3>-p</code></a><var class=Ar>targ_port</var></dt><dd>Specify the frontend port number.</dd><dt><a class=permalink href=#q><code class=Fl id=q>-q</code></a></dt><dd>Omit the header in the port list output.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Enable verbose output (report all port options).</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>Output the port list in XML format.</dd></dl></dd><dt><a class=permalink href=#lunmap><code class=Ic id=lunmap>lunmap</code></a></dt><dd>Change LUN mapping for specified port. If both <var class=Ar>pLUN</var> and <var class=Ar>cLUN</var> are specified -- LUN will be mapped. If <var class=Ar>pLUN</var> is specified, but <var class=Ar>cLUN</var> is not -- LUN will be unmapped. If neither <var class=Ar>pLUN</var> nor <var class=Ar>cLUN</var> are specified -- LUN mapping will be disabled, exposing all CTL LUNs. <dl class=Bl-tag><dt><a class=permalink href=#p_4><code class=Fl id=p_4>-p</code></a><var class=Ar>targ_port</var></dt><dd>Specify the frontend port number.</dd><dt><a class=permalink href=#l_7><code class=Fl id=l_7>-l</code></a><var class=Ar>pLUN</var></dt><dd>LUN number visible by specified port.</dd><dt><a class=permalink href=#L><code class=Fl id=L>-L</code></a><var class=Ar>cLUN</var></dt><dd>CTL LUN number.</dd></dl></dd><dt><a class=permalink href=#dumpooa><code class=Ic id=dumpooa>dumpooa</code></a></dt><dd>Dump the OOA (Order Of Arrival) queue for each LUN registered with CTL.</dd><dt><a class=permalink href=#dumpstructs><code class=Ic id=dumpstructs>dumpstructs</code></a></dt><dd>Dump the CTL structures to the console.</dd><dt><a class=permalink href=#create><code class=Ic id=create>create</code></a></dt><dd>Create a new LUN. The backend must be specified, and depending upon the backend requested, some of the other options may be required. If the LUN is created successfully, the LUN configuration will be displayed. If LUN creation fails, a message will be displayed describing the failure. <dl class=Bl-tag><dt><a class=permalink href=#b_4><code class=Fl id=b_4>-b</code></a><var class=Ar>backend</var></dt><dd>The <code class=Fl>-b</code> flag is required. This specifies the name backend to use when creating the LUN. Examples are “ramdisk” and “block”.</dd><dt><a class=permalink href=#B><code class=Fl id=B>-B</code></a><var class=Ar>blocksize</var></dt><dd>Specify the blocksize of the backend in bytes.</dd><dt><a class=permalink href=#d_5><code class=Fl id=d_5>-d</code></a><var class=Ar>device_id</var></dt><dd>Specify the LUN-associated string to use in the SCSI INQUIRY VPD page 0x83 data.</dd><dt><a class=permalink href=#l_8><code class=Fl id=l_8>-l</code></a><var class=Ar>lun_id</var></dt><dd>Request that a particular LUN number be assigned. If the requested LUN number is not available, the request will fail.</dd><dt><a class=permalink href=#o_2><code class=Fl id=o_2>-o</code></a><var class=Ar>name=value</var></dt><dd>Specify a backend-specific name/value pair. Multiple <code class=Fl>-o</code> arguments may be specified. Refer to the backend documentation for arguments that may be used.</dd><dt><a class=permalink href=#s_2><code class=Fl id=s_2>-s</code></a><var class=Ar>size_bytes</var></dt><dd>Specify the size of the LUN in bytes. Some backends may allow setting the size (e.g. the ramdisk backend) and for others the size may be implicit (e.g. the block backend).</dd><dt><a class=permalink href=#S_2><code class=Fl id=S_2>-S</code></a><var class=Ar>serial_num</var></dt><dd>Specify the serial number to be used in the SCSI INQUIRY VPD page 0x80 data.</dd><dt><a class=permalink href=#t_3><code class=Fl id=t_3>-t</code></a><var class=Ar>device_type</var></dt><dd>Specify the numeric SCSI device type to use when creating the LUN. If this flag is not used, the type of LUN created is backend-specific. Not all LUN types are supported. Currently CTL supports Direct Access (type 0), Processor (type 3) and CD/DVD (type 5) LUNs. The backend requested may or may not support all of the LUN types that CTL supports.</dd></dl></dd><dt><a class=permalink href=#remove><code class=Ic id=remove>remove</code></a></dt><dd>Remove a LUN. The backend must be specified, and the LUN number must also be specified. Backend-specific options may also be specified with the <code class=Fl>-o</code> flag. <dl class=Bl-tag><dt><a class=permalink href=#b_5><code class=Fl id=b_5>-b</code></a><var class=Ar>backend</var></dt><dd>Specify the backend that owns the LUN to be removed. Examples are “ramdisk” and “block”.</dd><dt><a class=permalink href=#l_9><code class=Fl id=l_9>-l</code></a><var class=Ar>lun_id</var></dt><dd>Specify the LUN number to remove.</dd><dt><a class=permalink href=#o_3><code class=Fl id=o_3>-o</code></a><var class=Ar>name=value</var></dt><dd>Specify a backend-specific name/value pair. Multiple <code class=Fl>-o</code> arguments may be specified. Refer to the backend documentation for arguments that may be used.</dd></dl></dd><dt><a class=permalink href=#modify><code class=Ic id=modify>modify</code></a></dt><dd>Modify a LUN size. The backend, the LUN number, and the size must be specified. <dl class=Bl-tag><dt><a class=permalink href=#b_6><code class=Fl id=b_6>-b</code></a><var class=Ar>backend</var></dt><dd>Specify the backend that owns the LUN to be modified. Examples are “ramdisk” and “block”.</dd><dt><a class=permalink href=#l_10><code class=Fl id=l_10>-l</code></a><var class=Ar>lun_id</var></dt><dd>Specify the LUN number to modify.</dd><dt><a class=permalink href=#o_4><code class=Fl id=o_4>-o</code></a><var class=Ar>name=value</var></dt><dd>Specify a backend-specific name/value pair. Multiple <code class=Fl>-o</code> arguments may be specified. Refer to the backend documentation for arguments that may be used.</dd><dt><a class=permalink href=#s_3><code class=Fl id=s_3>-s</code></a><var class=Ar>size_bytes</var></dt><dd>Specify the size of the LUN in bytes. For the “block” backend, an “auto” keyword may be passed instead; this will make CTL use the size of backing file or device.</dd></dl></dd><dt><a class=permalink href=#devlist><code class=Ic id=devlist>devlist</code></a></dt><dd>Get a list of all configured LUNs. This also includes the LUN size and blocksize, serial number and device ID. <dl class=Bl-tag><dt><a class=permalink href=#b_7><code class=Fl id=b_7>-b</code></a><var class=Ar>backend</var></dt><dd>Specify the backend. This restricts the LUN list to the named backend. Examples are “ramdisk” and “block”.</dd><dt><a class=permalink href=#v_2><code class=Fl id=v_2>-v</code></a></dt><dd>Be verbose. This will also display any backend-specific LUN attributes in addition to the standard per-LUN information.</dd><dt><a class=permalink href=#x_2><code class=Fl id=x_2>-x</code></a></dt><dd>Dump the raw XML. The LUN list information from the kernel comes in XML format, and this option allows the display of the raw XML data. This option and the <code class=Fl>-v</code> and <code class=Fl>-b</code> options are mutually exclusive. If you specify <code class=Fl>-x</code>, the entire LUN database is displayed in XML format.</dd></dl></dd><dt><a class=permalink href=#islist><code class=Ic id=islist>islist</code></a></dt><dd>Get a list of currently running iSCSI sessions. This includes initiator and target names and the unique connection IDs. <dl class=Bl-tag><dt><a class=permalink href=#v_3><code class=Fl id=v_3>-v</code></a></dt><dd>Verbose mode.</dd><dt><a class=permalink href=#x_3><code class=Fl id=x_3>-x</code></a></dt><dd>Dump the raw XML. The sessions list information from the kernel comes in XML format, and this option allows the display of the raw XML data.</dd></dl></dd><dt><a class=permalink href=#islogout><code class=Ic id=islogout>islogout</code></a></dt><dd>Ask the initiator to log out iSCSI sessions matching criteria. <dl class=Bl-tag><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>Log out all sessions.</dd><dt><a class=permalink href=#c_7><code class=Fl id=c_7>-c</code></a></dt><dd>Specify connection ID.</dd><dt><a class=permalink href=#i_6><code class=Fl id=i_6>-i</code></a></dt><dd>Specify initiator name.</dd><dt><a class=permalink href=#p_5><code class=Fl id=p_5>-p</code></a></dt><dd>Specify initiator portal (hostname or IP address).</dd></dl></dd><dt><a class=permalink href=#isterminate><code class=Ic id=isterminate>isterminate</code></a></dt><dd>Forcibly terminate iSCSI sessions matching criteria. <dl class=Bl-tag><dt><a class=permalink href=#a_2><code class=Fl id=a_2>-a</code></a></dt><dd>Terminate all sessions.</dd><dt><a class=permalink href=#c_8><code class=Fl id=c_8>-c</code></a></dt><dd>Specify connection ID.</dd><dt><a class=permalink href=#i_7><code class=Fl id=i_7>-i</code></a></dt><dd>Specify initiator name.</dd><dt><a class=permalink href=#p_6><code class=Fl id=p_6>-p</code></a></dt><dd>Specify initiator portal (hostname or IP address).</dd></dl></dd><dt><a class=permalink href=#help><code class=Ic id=help>help</code></a></dt><dd>Display <code class=Nm>ctladm</code> usage information.</dd></dl></section><section class=Sh><h2 class=Sh id=OPTIONS><a class=permalink href=#OPTIONS>OPTIONS</a></h2> Number of additional configuration options may be specified for LUNs. Some options are global, others are backend-specific. <p class=Pp>Global options:</p><dl class=Bl-tag><dt><var class=Va>vendor</var></dt><dd>Specifies LUN vendor string up to 8 chars.</dd><dt><var class=Va>product</var></dt><dd>Specifies LUN product string up to 16 chars.</dd><dt><var class=Va>revision</var></dt><dd>Specifies LUN revision string up to 4 chars.</dd><dt><var class=Va>scsiname</var></dt><dd>Specifies LUN SCSI name string.</dd><dt><var class=Va>eui</var></dt><dd>Specifies LUN EUI-64 identifier.</dd><dt><var class=Va>naa</var></dt><dd>Specifies LUN NAA identifier.</dd><dt><var class=Va>uuid</var></dt><dd>Specifies LUN locally assigned RFC 4122 UUID identifier. EUI, NAA or UUID identifier should be set to UNIQUE value to allow EXTENDED COPY command access the LUN. Non-unique LUN identifiers may lead to data corruption. Some initiators may not support later introduced UUID identifiers.</dd><dt><var class=Va>ident_info</var></dt><dd>Specified LUN identification information (string or 0x + hex).</dd><dt><var class=Va>text_ident_info</var></dt><dd>Specified LUN text identification information (UTF-8 string).</dd><dt><var class=Va>ha_role</var></dt><dd>Setting to "primary" or "secondary" overrides default role of the node in HA cluster, set by kern.cam.ctl.ha_role sysctl.</dd><dt><var class=Va>insecure_tpc</var></dt><dd>Setting to "on" allows EXTENDED COPY command sent to this LUN access other LUNs on this host, not accessible otherwise. This allows to offload copying between different iSCSI targets residing on the same host in trusted environments.</dd><dt><var class=Va>readcache</var></dt><dd>Set to "off", disables read caching for the LUN, if supported by the backend.</dd><dt><var class=Va>readonly</var></dt><dd>Set to "on", blocks all media write operations to the LUN, reporting it as write protected.</dd><dt><var class=Va>removable</var></dt><dd>Set to "on", makes LUN removable.</dd><dt><var class=Va>reordering</var></dt><dd>Set to "unrestricted", allows target to process commands with SIMPLE task attribute in arbitrary order. Any data integrity exposures related to command sequence order shall be explicitly handled by the application client through the selection of appropriate commands and task attributes. The default value is "restricted". It improves data integrity, but may introduce some additional delays.</dd><dt><var class=Va>serseq</var></dt><dd>Set to "on" to fully serialize consecutive reads/writes. Set to "read" to fully serialize consecutive reads. Set to "soft" to slightly serialize consecutive reads. Set to "off" to allow them be issued in parallel. Parallel issue of consecutive operations may confuse logic of the backing file system, hurting performance; but it may improve performance of backing stores without prefetch/write-back.</dd><dt><var class=Va>pblocksize</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>pblockoffset</var></dt><dd>Specify physical block size and offset of the device.</dd><dt><var class=Va>ublocksize</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>ublockoffset</var></dt><dd>Specify UNMAP block size and offset of the device.</dd><dt><var class=Va>rpm</var></dt><dd>Specifies medium rotation rate of the device: 0 -- not reported, 1 -- non-rotating (SSD), &gt;1024 -- value in revolutions per minute.</dd><dt><var class=Va>formfactor</var></dt><dd>Specifies nominal form factor of the device: 0 -- not reported, 1 -- 5.25", 2 -- 3.5", 3 -- 2.5", 4 -- 1.8", 5 -- less then 1.8".</dd><dt><var class=Va>temperature</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>reftemperature</var></dt><dd>Specify current and reference (maximum) temperatures of the device.</dd><dt><var class=Va>provisioning_type</var></dt><dd>When UNMAP support is enabled, this option specifies provisioning type: "resource", "thin" or "unknown". Default value is "thin". Logical units without UNMAP support are reported as fully provisioned.</dd><dt><var class=Va>unmap</var></dt><dd>Setting to "on" or "off" controls UNMAP support for the logical unit. Default value is "on" if supported by the backend.</dd><dt><var class=Va>unmap_max_lba</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>unmap_max_descr</var></dt><dd>Specify maximum allowed number of LBAs and block descriptors per UNMAP command to report in Block Limits VPD page.</dd><dt><var class=Va>write_same_max_lba</var></dt><dd>Specify maximum allowed number of LBAs per WRITE SAME command to report in Block Limits VPD page.</dd><dt><var class=Va>avail-threshold</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>used-threshold</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>pool-avail-threshold</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>pool-used-threshold</var></dt><dd>Set per-LUN/-pool thin provisioning soft thresholds. LUN will establish UNIT ATTENTION condition if its or pool available space get below configured avail values, or its or pool used space get above configured used values. Pool thresholds are working only for ZVOL-backed LUNs.</dd><dt><var class=Va>writecache</var></dt><dd>Set to "off", disables write caching for the LUN, if supported by the backend.</dd></dl><p class=Pp>Options specific for block backend:</p><dl class=Bl-tag><dt><var class=Va>file</var></dt><dd>Specifies file or device name to use for backing store.</dd><dt><var class=Va>num_threads</var></dt><dd>Specifies number of backend threads to use for this LUN.</dd></dl><p class=Pp>Options specific for ramdisk backend:</p><dl class=Bl-tag><dt><var class=Va>capacity</var></dt><dd>Specifies capacity of backing store (maximum RAM for data). The default value is zero, that disables backing store completely, making all writes go to nowhere, while all reads return zeroes.</dd></dl></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> Send a SCSI TEST UNIT READY command to LUN 1. <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm tur 1</code></div><p class=Pp>Display the list of mode pages supported by LUN 1.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm modesense 1 -l</code></div><p class=Pp>Display the saved version of the Control mode page (page 10) on LUN 0. Disable fetching block descriptors, and use a 10 byte MODE SENSE command instead of the default 6 byte command.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm modesense 0 -m 10 -P 3 -d -c 10</code></div><p class=Pp>Read the first 512 byte block from LUN 2 and dump it to the file</p><div class="Bd Pp"><pre>
</pre><div class="Bd Bd-indent"><code class=Li>ctladm read 2 -l 0 -d 1 -b 512 -f - &gt; foo </code></div></div><p class=Pp>Read 10240 bytes from the file <span class=Pa>/tmp/bar</span> and write it to LUN 3. starting at LBA 0xff432140.</p><div class="Bd Pp"><pre>
</pre><div class="Bd Bd-indent"><code class=Li>ctladm write 3 -l 0xff432140 -d 20 -b 512 -f /tmp/bar </code></div></div><p class=Pp>Create a LUN with the “fake” ramdisk as a backing store. The LUN will claim to have a size of approximately 10 terabytes, while having no real data store (all written data are lost).</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm create -b ramdisk -s 10485760000000000</code></div><p class=Pp>Create a thin provisioned LUN with a ramdisk as a backing store. The LUN will have maximal backing store capacity of 10 gigabytes, while reporting size of 10 terabytes,</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm create -b ramdisk -s 10T -o capacity=10G</code></div><p class=Pp>Create a LUN using the block backend, specify the ZFS volume <span class=Pa>tank/example</span> as the backing store, and specify the SCSI VPD page 0x80 and 0x83 serial number (<code class=Fl>-S</code>) and device ID (<code class=Fl>-d</code>). The size of the LUN will be derived from the size of the ZVOL.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm create -b block -o file=/dev/zvol/tank/example -S MYSERIAL321 -d MYDEVID123</code></div><p class=Pp>Use to specify generic options on ioctl frontend port, now it is only possible to set pp and/or vp port number.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm port -c -O pp=11 -O vp=12</code></div><p class=Pp>Remove specified targ_port.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm port -r -p 4</code></div><p class=Pp>Remove LUN 12, which is handled by the block backend, from the system.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm remove -b block -l 12</code></div><p class=Pp>List configured LUNs in the system, along with their backend and serial number. This works when the Front End Target Drivers are enabled or disabled.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm devlist</code></div><p class=Pp>List all LUNs in the system, along with their inquiry data and device type. This only works when the FETDs are enabled, since the commands go through the ioctl port.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm lunlist</code></div><p class=Pp>Inject a medium error on LUN 6 for every read that covers the first 512 blocks of the LUN.</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ctladm inject 6 -i mediumerr -p read -r 0,512 -c</code></div><p class=Pp>Inject a custom error on LUN 6 for the next TEST UNIT READY command only. This will result in a sense key of NOT READY (0x02), and an ASC/ASCQ of 0x04,0x02 ("Logical unit not ready, initializing command required").</p><div class="Bd Pp Bd-indent"><pre>
ctladm inject 6 -i custom -p tur -s 18 "f0 0 02 s12 04 02"
</pre></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=cam.3.html>cam(3)</a>, <a class=Xr href=cam_cdbparse.3.html>cam_cdbparse(3)</a>, <a class=Xr href=cam.4.html>cam(4)</a>, <a class=Xr href=ctl.4.html>ctl(4)</a>, <a class=Xr href=xpt.4.html>xpt(4)</a>, <a class=Xr href=camcontrol.8.html>camcontrol(8)</a>, <a class=Xr href=ctld.8.html>ctld(8)</a>, <a class=Xr href=ctlstat.8.html>ctlstat(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>ctladm</code> utility was originally written during the Winter/Spring of 2003 as an interface to CTL. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Ken Merry</span> &lt;<a class=Mt href=mailto:ken@FreeBSD.org>ken@FreeBSD.org</a>&gt; </section></div><table class=foot><tr><td class=foot-date>March 9, 2021</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>