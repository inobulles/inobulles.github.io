<!DOCTYPE html>
<html><head><meta charset=utf-8><title>zpool-features(7)</title><keywords content=man,zpool-features></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>zpool-features(7)</h1><table class=head><tr><td class=head-ltitle>ZPOOL-FEATURES(7)</td><td class=head-vol>FreeBSD Miscellaneous Information Manual</td><td class=head-rtitle>ZPOOL-FEATURES(7)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>zpool-features</code> — <div class=Nd>ZFS pool feature descriptions</div></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> ZFS pool on-disk format versions are specified via "features" which replace the old on-disk format numbers (the last supported on-disk format number is 28). To enable a feature on a pool use the <code class=Cm>upgrade</code> subcommand of the <a class=Xr href=zpool.8.html>zpool(8)</a> command, or set the <b class=Sy>feature@feature_name</b> property to <var class=Ar>enabled</var>. <p class=Pp>The pool format does not affect file system version compatibility or the ability to send file systems between pools.</p><p class=Pp>Since most features can be enabled independently of each other the on-disk format of the pool is specified by the set of all features marked as <b class=Sy>active</b> on the pool. If the pool was created by another software version this set may include unsupported features.</p><section class=Ss><h2 class=Ss id=Identifying_features><a class=permalink href=#Identifying_features>Identifying features</a></h2> Every feature has a guid of the form <b class=Sy>com.example:feature_name</b>. The reverse DNS name ensures that the feature's guid is unique across all ZFS implementations. When unsupported features are encountered on a pool they will be identified by their guids. Refer to the documentation for the ZFS implementation that created the pool for information about those features. <p class=Pp>Each supported feature also has a short name. By convention a feature's short name is the portion of its guid which follows the ':' (e.g. <b class=Sy>com.example:feature_name</b> would have the short name <b class=Sy>feature_name ),</b> however a feature's short name may differ across ZFS implementations if following the convention would result in name conflicts.</p></section><section class=Ss><h2 class=Ss id=Feature_states><a class=permalink href=#Feature_states>Feature states</a></h2> Features can be in one of three states: <dl class=Bl-tag><dt><b class=Sy>active</b></dt><dd>This feature's on-disk format changes are in effect on the pool. Support for this feature is required to import the pool in read-write mode. If this feature is not read-only compatible, support is also required to import the pool in read-only mode (see "Read-only compatibility").</dd><dt><b class=Sy>enabled</b></dt><dd>An administrator has marked this feature as enabled on the pool, but the feature's on-disk format changes have not been made yet. The pool can still be imported by software that does not support this feature, but changes may be made to the on-disk format at any time which will move the feature to the <b class=Sy>active</b> state. Some features may support returning to the <b class=Sy>enabled</b> state after becoming <b class=Sy>active</b>. See feature-specific documentation for details.</dd><dt><b class=Sy>disabled</b></dt><dd>This feature's on-disk format changes have not been made and will not be made unless an administrator moves the feature to the <b class=Sy>enabled</b> state. Features cannot be disabled once they have been enabled.</dd></dl><p class=Pp>The state of supported features is exposed through pool properties of the form <b class=Sy>feature@short_name</b>.</p></section><section class=Ss><h2 class=Ss id=Read_-only_compatibility><a class=permalink href=#Read_-only_compatibility>Read-only compatibility</a></h2> Some features may make on-disk format changes that do not interfere with other software's ability to read from the pool. These features are referred to as "read-only compatible". If all unsupported features on a pool are read-only compatible, the pool can be imported in read-only mode by setting the <b class=Sy>readonly</b> property during import (see <a class=Xr href=zpool.8.html>zpool(8)</a> for details on importing pools). </section><section class=Ss><h2 class=Ss id=Unsupported_features><a class=permalink href=#Unsupported_features>Unsupported features</a></h2> For each unsupported feature enabled on an imported pool a pool property named <b class=Sy>unsupported@feature_guid</b> will indicate why the import was allowed despite the unsupported feature. Possible values for this property are: <dl class=Bl-tag><dt><b class=Sy>inactive</b></dt><dd>The feature is in the <b class=Sy>enabled</b> state and therefore the pool's on-disk format is still compatible with software that does not support this feature.</dd><dt><b class=Sy>readonly</b></dt><dd>The feature is read-only compatible and the pool has been imported in read-only mode.</dd></dl></section><section class=Ss><h2 class=Ss id=Feature_dependencies><a class=permalink href=#Feature_dependencies>Feature dependencies</a></h2> Some features depend on other features being enabled in order to function properly. Enabling a feature will automatically enable any features it depends on. </section></section><section class=Sh><h2 class=Sh id=FEATURES><a class=permalink href=#FEATURES>FEATURES</a></h2> The following features are supported on this system: <dl class=Bl-tag><dt><b class=Sy>async_destroy</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:async_destroy</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>Destroying a file system requires traversing all of its data in order to return its used space to the pool. Without <b class=Sy>async_destroy</b> the file system is not fully removed until all space has been reclaimed. If the destroy operation is interrupted by a reboot or power outage the next attempt to open the pool will need to complete the destroy operation synchronously.</p><p class=Pp>When <b class=Sy>async_destroy</b> is enabled the file system's data will be reclaimed by a background process, allowing the destroy operation to complete without traversing the entire file system. The background process is able to resume interrupted destroys after the pool has been opened, eliminating the need to finish interrupted destroys as part of the open operation. The amount of space remaining to be reclaimed by the background process is available through the <b class=Sy>freeing</b> property.</p><p class=Pp>This feature is only <b class=Sy>active</b> while <b class=Sy>freeing</b> is non-zero.</p></dd><dt><b class=Sy>empty_bpobj</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:empty_bpobj</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature increases the performance of creating and using a large number of snapshots of a single filesystem or volume, and also reduces the disk space required.</p><p class=Pp>When there are many snapshots, each snapshot uses many Block Pointer Objects (bpobj's) to track blocks associated with that snapshot. However, in common use cases, most of these bpobj's are empty. This feature allows us to create each bpobj on-demand, thus eliminating the empty bpobjs.</p><p class=Pp>This feature is <b class=Sy>active</b> while there are any filesystems, volumes, or snapshots which were created after enabling this feature.</p></dd><dt><b class=Sy>filesystem_limits</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.joyent:filesystem_limits</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>This feature enables filesystem and snapshot limits. These limits can be used to control how many filesystems and/or snapshots can be created at the point in the tree on which the limits are set.</p><p class=Pp>This feature is <b class=Sy>active</b> once either of the limit properties has been set on a dataset. Once activated the feature is never deactivated.</p></dd><dt><b class=Sy>lz4_compress</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>org.illumos:lz4_compress</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp><b class=Sy>lz4</b> is a high-performance real-time compression algorithm that features significantly faster compression and decompression as well as a higher compression ratio than the older <b class=Sy>lzjb</b> compression. Typically, <b class=Sy>lz4</b> compression is approximately 50% faster on compressible data and 200% faster on incompressible data than <b class=Sy>lzjb</b>. It is also approximately 80% faster on decompression, while giving approximately 10% better compression ratio.</p><p class=Pp>When the <b class=Sy>lz4_compress</b> feature is set to <b class=Sy>enabled</b>, the administrator can turn on <b class=Sy>lz4</b> compression on any dataset on the pool using the <a class=Xr href=zfs.8.html>zfs(8)</a> command. Also, all newly written metadata will be compressed with <b class=Sy>lz4</b> algorithm. Since this feature is not read-only compatible, this operation will render the pool unimportable on systems without support for the <b class=Sy>lz4_compress</b> feature. Booting off of <b class=Sy>lz4</b> -compressed root pools is supported.</p><p class=Pp>This feature becomes <b class=Sy>active</b> as soon as it is enabled and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>multi_vdev_crash_dump</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.joyent:multi_vdev_crash_dump</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature allows a dump device to be configured with a pool comprised of multiple vdevs. Those vdevs may be arranged in any mirrored or raidz configuration.</p></dd><dt><b class=Sy>spacemap_histogram</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:spacemap_histogram</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This features allows ZFS to maintain more information about how free space is organized within the pool. If this feature is <b class=Sy>enabled</b>, ZFS will set this feature to <b class=Sy>active</b> when a new space map object is created or an existing space map is upgraded to the new format. Once the feature is <b class=Sy>active</b>, it will remain in that state until the pool is destroyed.</p></dd><dt><b class=Sy>extensible_dataset</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:extensible_dataset</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature allows more flexible use of internal ZFS data structures, and exists for other features to depend on.</p><p class=Pp>This feature will be <b class=Sy>active</b> when the first dependent feature uses it, and will be returned to the <b class=Sy>enabled</b> state when all datasets that use this feature are destroyed.</p></dd><dt><b class=Sy>bookmarks</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:bookmarks</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>This feature enables use of the <code class=Nm>zfs</code><code class=Cm>bookmark</code> subcommand.</p><p class=Pp>This feature is <b class=Sy>active</b> while any bookmarks exist in the pool. All bookmarks in the pool can be listed by running <code class=Nm>zfs</code><code class=Cm>list</code><code class=Fl>-t</code><span class=No>bookmark</span><code class=Fl>-r</code><var class=Ar>poolname</var>.</p></dd><dt><b class=Sy>enabled_txg</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:enabled_txg</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>Once this feature is enabled ZFS records the transaction group number in which new features are enabled. This has no user-visible impact, but other features may depend on this feature.</p><p class=Pp>This feature becomes <b class=Sy>active</b> as soon as it is enabled and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>hole_birth</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:hole_birth</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>enabled_txg</td></tr></table><p class=Pp>This feature improves performance of incremental sends (“zfs send -i”) and receives for objects with many holes. The most common case of hole-filled objects is zvols.</p><p class=Pp>An incremental send stream from snapshot <b class=Sy>A</b> to snapshot <b class=Sy>B</b> contains information about every block that changed between <b class=Sy>A</b> and <b class=Sy>B</b>. Blocks which did not change between those snapshots can be identified and omitted from the stream using a piece of metadata called the 'block birth time', but birth times are not recorded for holes (blocks filled only with zeroes). Since holes created after <b class=Sy>A</b> cannot be distinguished from holes created before <b class=Sy>A</b>, information about every hole in the entire filesystem or zvol is included in the send stream.</p><p class=Pp>For workloads where holes are rare this is not a problem. However, when incrementally replicating filesystems or zvols with many holes (for example a zvol formatted with another filesystem) a lot of time will be spent sending and receiving unnecessary information about holes that already exist on the receiving side.</p><p class=Pp>Once the <b class=Sy>hole_birth</b> feature has been enabled the block birth times of all new holes will be recorded. Incremental sends between snapshots created after this feature is enabled will use this new metadata to avoid sending information about holes that already exist on the receiving side.</p><p class=Pp>This feature becomes <b class=Sy>active</b> as soon as it is enabled and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>embedded_data</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:embedded_data</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature improves the performance and compression ratio of highly-compressible blocks. Blocks whose contents can compress to 112 bytes or smaller can take advantage of this feature.</p><p class=Pp>When this feature is enabled, the contents of highly-compressible blocks are stored in the block "pointer" itself (a misnomer in this case, as it contains the compressed data, rather than a pointer to its location on disk). Thus the space of the block (one sector, typically 512 bytes or 4KB) is saved, and no additional i/o is needed to read and write the data block.</p><p class=Pp>This feature becomes <b class=Sy>active</b> as soon as it is enabled and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>zpool_checkpoint</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:zpool_checkpoint</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature enables the "zpool checkpoint" subcommand that can checkpoint the state of the pool at the time it was issued and later rewind back to it or discard it.</p><p class=Pp>This feature becomes <b class=Sy>active</b> when the "zpool checkpoint" command is used to checkpoint the pool. The feature will only return back to being <b class=Sy>enabled</b> when the pool is rewound or the checkpoint has been discarded.</p></dd><dt><b class=Sy>device_removal</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:device_removal</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature enables the "zpool remove" subcommand to remove top-level vdevs, evacuating them to reduce the total size of the pool.</p><p class=Pp>This feature becomes <b class=Sy>active</b> when the "zpool remove" command is used on a top-level vdev, and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>obsolete_counts</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:obsolete_counts</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>device_removal</td></tr></table><p class=Pp>This feature is an enhancement of device_removal, which will over time reduce the memory used to track removed devices. When indirect blocks are freed or remapped, we note that their part of the indirect mapping is "obsolete", i.e. no longer needed. See also the "zfs remap" subcommand in <a class=Xr href=zfs.8.html>zfs(8)</a>.</p><p class=Pp>This feature becomes <b class=Sy>active</b> when the "zpool remove" command is used on a top-level vdev, and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>spacemap_v2</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.delphix:spacemap_v2</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature enables the use of the new space map encoding which consists of two words (instead of one) whenever it is advantageous. The new encoding allows space maps to represent large regions of space more efficiently on-disk while also increasing their maximum addressable offset.</p><p class=Pp>This feature becomes <b class=Sy>active</b> as soon as it is enabled and will never return to being <b class=Sy>enabled</b>.</p></dd><dt><b class=Sy>large_blocks</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>org.open-zfs:large_block</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>The <b class=Sy>large_block</b> feature allows the record size on a dataset to be set larger than 128KB.</p><p class=Pp>This feature becomes <b class=Sy>active</b> once a <b class=Sy>recordsize</b> property has been set larger than 128KB, and will return to being <b class=Sy>enabled</b> once all filesystems that have ever had their recordsize larger than 128KB are destroyed.</p><p class=Pp>Please note that booting from datasets that have recordsize greater than 128KB is <i class=Em>NOT</i> supported by the <span class=Ux>FreeBSD</span> boot loader.</p></dd><dt><b class=Sy>large_dnode</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>org.zfsonlinux:large_dnode</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>The <b class=Sy>large_dnode</b> feature allows the size of dnodes in a dataset to be set larger than 512B.</p><p class=Pp>This feature becomes <b class=Sy>active</b> once a dataset contains an object with a dnode larger than 512B, which occurs as a result of setting the <b class=Sy>dnodesize</b> dataset property to a value other than <b class=Sy>legacy</b>. The feature will return to being <b class=Sy>enabled</b> once all filesystems that have ever contained a dnode larger than 512B are destroyed. Large dnodes allow more data to be stored in the bonus buffer, thus potentially improving performance by avoiding the use of spill blocks.</p></dd><dt><b class=Sy>sha512</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>org.illumos:sha512</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>The <b class=Sy>sha512</b> feature enables the use of the SHA-512/256 truncated hash algorithm (FIPS 180-4) for checksum and dedup. The native 64-bit arithmetic of SHA-512 provides an approximate 50% performance boost over SHA-256 on 64-bit hardware and is thus a good minimum-change replacement candidate for systems where hash performance is important, but these systems cannot for whatever reason utilize the faster <b class=Sy>skein</b> algorithms.</p><p class=Pp>When the <b class=Sy>sha512</b> feature is set to <b class=Sy>enabled</b>, the administrator can turn on the <b class=Sy>sha512</b> checksum on any dataset using the</p><div class="Bd Bd-indent"><code class=Li># zfs set checksum=sha512 <var class=Ar>dataset</var></code></div> command. This feature becomes <b class=Sy>active</b> once a <b class=Sy>checksum</b> property has been set to <b class=Sy>sha512</b>, and will return to being <b class=Sy>enabled</b> once all filesystems that have ever had their checksum set to <b class=Sy>sha512</b> are destroyed.</dd><dt><b class=Sy>skein</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>org.illumos:skein</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>no</td></tr><tr><td>DEPENDENCIES</td><td>extensible_dataset</td></tr></table><p class=Pp>The <b class=Sy>skein</b> feature enables the use of the Skein hash algorithm for checksum and dedup. Skein is a high-performance secure hash algorithm that was a finalist in the NIST SHA-3 competition. It provides a very high security margin and high performance on 64-bit hardware (80% faster than SHA-256). This implementation also utilizes the new salted checksumming functionality in ZFS, which means that the checksum is pre-seeded with a secret 256-bit random key (stored on the pool) before being fed the data block to be checksummed. Thus the produced checksums are unique to a given pool, preventing hash collision attacks on systems with dedup.</p><p class=Pp>When the <b class=Sy>skein</b> feature is set to <b class=Sy>enabled</b>, the administrator can turn on the <b class=Sy>skein</b> checksum on any dataset using the</p><div class="Bd Bd-indent"><code class=Li># zfs set checksum=skein <var class=Ar>dataset</var></code></div> command. This feature becomes <b class=Sy>active</b> once a <b class=Sy>checksum</b> property has been set to <b class=Sy>skein</b>, and will return to being <b class=Sy>enabled</b> once all filesystems that have ever had their checksum set to <b class=Sy>skein</b> are destroyed. Booting off of pools using <b class=Sy>skein</b> is supported.</dd><dt><b class=Sy>allocation_classes</b></dt><dd><table class=Bl-column><tr><td>GUID</td><td>com.intel:allocation_classes</td></tr><tr><td>READ-ONLY COMPATIBLE</td><td>yes</td></tr><tr><td>DEPENDENCIES</td><td>none</td></tr></table><p class=Pp>This feature enables support for separate allocation classes.</p><p class=Pp>This feature becomes <b class=Sy>active</b> when a dedicated allocation class vdev (dedup or special) is created with “zpool create” or “zpool add”. With device removal, it can be returned to the <b class=Sy>enabled</b> state if all the top-level vdevs from an allocation class are removed.</p></dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=zpool.8.html>zpool(8)</a></section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This manual page is a <a class=Xr href=mdoc.7.html>mdoc(7)</a> reimplementation of the illumos manual page <i class=Em>zpool-features(5)</i>, modified and customized for <span class=Ux>FreeBSD</span> and licensed under the Common Development and Distribution License (CDDL). <p class=Pp>The <a class=Xr href=mdoc.7.html>mdoc(7)</a> implementation of this manual page was initially written by <span class=An>Martin Matuska</span> ⟨mm@FreeBSD.org⟩.</p></section></div><table class=foot><tr><td class=foot-date>June 7, 2017</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>