<!DOCTYPE html>
<html><head><meta charset=utf-8><title>SDT(9)</title><keywords content=man,SDT></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>SDT(9)</h1><table class=head><tr><td class=head-ltitle>SDT(9)</td><td class=head-vol>FreeBSD Kernel Developer's Manual</td><td class=head-rtitle>SDT(9)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>SDT</code> — <div class=Nd>a DTrace framework for adding statically-defined tracing probes</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/param.h.html>sys/param.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/sys/queue.h.html>sys/queue.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/sys/sdt.h.html>sys/sdt.h</a>&gt;</code><p class=Pp><code class=Fn>SDT_PROVIDER_DECLARE</code>(<var class=Fa style="white-space: nowrap;">prov</var>);</p><p class=Pp><code class=Fn>SDT_PROVIDER_DEFINE</code>(<var class=Fa style="white-space: nowrap;">prov</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DECLARE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE0</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE1</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE2</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE3</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE4</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE5</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE6</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE7</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>, <var class=Fa style="white-space: nowrap;">arg6</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE0_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE1_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE2_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE3_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">xarg2</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE4_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">xarg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">xarg3</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE5_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">xarg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">xarg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">xarg4</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE6_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">xarg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">xarg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">xarg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>, <var class=Fa style="white-space: nowrap;">xarg5</var>);</p><p class=Pp><code class=Fn>SDT_PROBE_DEFINE7_XLATE</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">xarg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">xarg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">xarg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">xarg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">xarg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>, <var class=Fa style="white-space: nowrap;">xarg5</var>, <var class=Fa style="white-space: nowrap;">arg6</var>, <var class=Fa style="white-space: nowrap;">xarg6</var>);</p><p class=Pp><code class=Fn>SDT_PROBE0</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>);</p><p class=Pp><code class=Fn>SDT_PROBE1</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>);</p><p class=Pp><code class=Fn>SDT_PROBE2</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>);</p><p class=Pp><code class=Fn>SDT_PROBE3</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>);</p><p class=Pp><code class=Fn>SDT_PROBE4</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>);</p><p class=Pp><code class=Fn>SDT_PROBE5</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>);</p><p class=Pp><code class=Fn>SDT_PROBE6</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>);</p><p class=Pp><code class=Fn>SDT_PROBE7</code>(<var class=Fa style="white-space: nowrap;">prov</var>, <var class=Fa style="white-space: nowrap;">mod</var>, <var class=Fa style="white-space: nowrap;">func</var>, <var class=Fa style="white-space: nowrap;">name</var>, <var class=Fa style="white-space: nowrap;">arg0</var>, <var class=Fa style="white-space: nowrap;">arg1</var>, <var class=Fa style="white-space: nowrap;">arg2</var>, <var class=Fa style="white-space: nowrap;">arg3</var>, <var class=Fa style="white-space: nowrap;">arg4</var>, <var class=Fa style="white-space: nowrap;">arg5</var>, <var class=Fa style="white-space: nowrap;">arg6</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>SDT</code> macros allow programmers to define static trace points in kernel code. These trace points are used by the <code class=Nm>SDT</code> framework to create DTrace probes, allowing the code to be instrumented using <a class=Xr href=dtrace.1.html>dtrace(1)</a>. By default, <code class=Nm>SDT</code> trace points are disabled and have no effect on the surrounding code. When a DTrace probe corresponding to a given trace point is enabled, threads that execute the trace point will call a handler and cause the probe to fire. Moreover, trace points can take arguments, making it possible to pass data to the DTrace framework when an enabled probe fires. <p class=Pp>Multiple trace points may correspond to a single DTrace probe, allowing programmers to create DTrace probes that correspond to logical system events rather than tying probes to specific code execution paths. For instance, a DTrace probe corresponding to the arrival of an IP packet into the network stack may be defined using two <code class=Nm>SDT</code> trace points: one for IPv4 packets and one for IPv6 packets.</p><p class=Pp>In addition to defining DTrace probes, the <code class=Nm>SDT</code> macros allow programmers to define new DTrace providers, making it possible to namespace logically-related probes. An example is FreeBSD's sctp provider, which contains <code class=Nm>SDT</code> probes for FreeBSD's <a class=Xr href=sctp.4.html>sctp(4)</a> implementation.</p><p class=Pp>The <code class=Fn>SDT_PROVIDER_DECLARE</code>() and <code class=Fn>SDT_PROVIDER_DEFINE</code>() macros are used respectively to declare and define a DTrace provider named <var class=Ar>prov</var> with the <code class=Nm>SDT</code> framework. A provider need only be defined once; however, the provider must be declared before defining any <code class=Nm>SDT</code> probes belonging to that provider.</p><p class=Pp>Similarly, the <code class=Fn>SDT_PROBE_DECLARE</code>() and <code class=Fn>SDT_PROBE_DEFINE*</code>() macros are used to declare and define DTrace probes using the <code class=Nm>SDT</code> framework. Once a probe has been defined, trace points for that probe may be added to kernel code. DTrace probe identifiers consist of a provider, module, function and name, all of which may be specified in the <code class=Nm>SDT</code> probe definition. Note that probes should not specify a module name: the module name of a probe is used to determine whether or not it should be destroyed when a kernel module is unloaded. See the <a class=Sx href=#BUGS>BUGS</a> section. Note in particular that probes must not be defined across multiple kernel modules.</p><p class=Pp>If ‘<code class=Li>-</code>’ character (dash) is wanted in a probe name, then it should be represented as ‘<code class=Li>__</code>’ (double underscore) in the probe <var class=Ar>name</var> parameter passed to various <code class=Fn>SDT_*</code>() macros, because of technical reasons (a dash is not valid in C identifiers).</p><p class=Pp>The <code class=Fn>SDT_PROBE_DEFINE*</code>() macros also allow programmers to declare the types of the arguments that are passed to probes. This is optional; if the argument types are omitted (through use of the <code class=Fn>SDT_PROBE_DEFINE</code>() macro), users wishing to make use of the arguments will have to manually cast them to the correct types in their D scripts. It is strongly recommended that probe definitions include a declaration of their argument types.</p><p class=Pp>The <code class=Fn>SDT_PROBE_DEFINE*_XLATE</code>() macros are used for probes whose argument types are to be dynamically translated to the types specified by the corresponding <var class=Ar>xarg</var> arguments. This is mainly useful when porting probe definitions from other operating systems. As seen by <a class=Xr href=dtrace.1.html>dtrace(1)</a>, the arguments of a probe defined using these macros will have types which match the <var class=Ar>xarg</var> types in the probe definition. However, the arguments passed in at the trace point will have types matching the native argument types in the probe definition, and thus the native type is dynamically translated to the translated type. So long as an appropriate translator is defined in <span class=Pa>/usr/lib/dtrace</span>, scripts making use of the probe need not concern themselves with the underlying type of a given <code class=Nm>SDT</code> probe argument.</p><p class=Pp>The <code class=Fn>SDT_PROBE*</code>() macros are used to create <code class=Nm>SDT</code> trace points. They are meant to be added to executable code and can be used to instrument the code in which they are called.</p></section><section class=Sh><h2 class=Sh id=PROVIDERS><a class=permalink href=#PROVIDERS>PROVIDERS</a></h2> A number of kernel DTrace providers are available. In general, these providers define stable interfaces and should be treated as such: existing D scripts may be broken if a probe is renamed or its arguments are modified. However, it is often useful to define ad-hoc <code class=Nm>SDT</code> probes for debugging a subsystem or driver. Similarly, a developer may wish to provide a group of <code class=Nm>SDT</code> probes without committing to their future stability. Such probes should be added to the ‘<code class=Li>sdt</code>’ provider instead of defining a new provider. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> The DTrace providers available on the current system can be listed with <div class="Bd Pp Bd-indent"><pre>
dtrace -l | sed 1d | awk '{print $2}' | sort -u
</pre></div><p class=Pp>A detailed list of the probes offered by a given provider can be obtained by specifying the provider using the <code class=Fl>-P</code> flag. For example, to view the probes and argument types for the ‘<code class=Li>sched</code>’ provider, run</p><div class="Bd Pp Bd-indent"><pre>
dtrace -lv -P sched
</pre></div><p class=Pp>The following probe definition will create a DTrace probe called ‘<code class=Li>icmp:::receive-unreachable</code>’, which would hypothetically be triggered when the kernel receives an ICMP packet of type Destination Unreachable:</p><div class="Bd Pp Bd-indent"><pre>
SDT_PROVIDER_DECLARE(icmp);

SDT_PROBE_DEFINE1(icmp, , , receive__unreachable,
    "struct icmp *");

</pre></div> This particular probe would take a single argument: a pointer to the struct containing the ICMP header for the packet. Note that the module name of this probe is not specified. <p class=Pp>Consider a DTrace probe which fires when the network stack receives an IP packet. Such a probe would be defined by multiple tracepoints:</p><div class="Bd Pp Bd-indent"><pre>
SDT_PROBE_DEFINE3(ip, , , receive, "struct ifnet *",
    "struct ip *", "struct ip6_hdr *");

int
ip_input(struct mbuf *m)
{
	struct ip *ip;
	...
	ip = mtod(m, struct ip *);
	SDT_PROBE3(ip, , , receive, m-&gt;m_pkthdr.rcvif, ip, NULL);
	...
}

int
ip6_input(struct mbuf *m)
{
	struct ip6_hdr *ip6;
	...
	ip6 = mtod(m, struct ip6_hdr *);
	SDT_PROBE3(ip, , , receive, m-&gt;m_pkthdr.rcvif, NULL, ip6);
	...
}

</pre></div> In particular, the probe should fire when the kernel receives either an IPv4 packet or an IPv6 packet. <p class=Pp>Consider the ICMP probe discussed above. We note that its second argument is of type <var class=Ar>struct icmp</var>, which is a type defined in the FreeBSD kernel to represent the ICMP header of an ICMP packet, defined in RFC 792. Linux has a corresponding type, <var class=Ar>struct icmphdr</var>, for the same purpose, but its field names differ from FreeBSD's <var class=Ar>struct icmp</var>. Similarly, illumos defines the <var class=Ar>icmph_t</var> type, again with different field names. Even with the ‘<code class=Li>icmp:::pkt-receive</code>’ probes defined in all three operating systems, one would still have to write OS-specific scripts to extract a given field out of the ICMP header argument. Dynamically-translated types solve this problem: one can define an OS-independent <a class=Xr href=c.7.html>c(7)</a> struct to represent an ICMP header, say <var class=Ar>struct icmp_hdr_dt</var>, and define translators from each of the three OS-specific types to <var class=Ar>struct icmp_hdr_dt</var>, all in the <a class=Xr href=dtrace.1.html>dtrace(1)</a> library path. Then the FreeBSD probe above can be defined with:</p><div class="Bd Pp Bd-indent"><pre>
SDT_PROBE_DEFINE1_XLATE(ip, , , receive, "struct icmp *",
    "struct icmp_hdr_dt *");
</pre></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=dtrace.1.html>dtrace(1)</a>, <a class=Xr href=dtrace_io.4.html>dtrace_io(4)</a>, <a class=Xr href=dtrace_ip.4.html>dtrace_ip(4)</a>, <a class=Xr href=dtrace_proc.4.html>dtrace_proc(4)</a>, <a class=Xr href=dtrace_sched.4.html>dtrace_sched(4)</a>, <a class=Xr href=dtrace_tcp.4.html>dtrace_tcp(4)</a>, <a class=Xr href=dtrace_udp.4.html>dtrace_udp(4)</a></section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> DTrace and the <code class=Nm>SDT</code> framework were originally ported to FreeBSD from Solaris by <span class=An>John Birrell</span> &lt;<a class=Mt href=mailto:jb@FreeBSD.org>jb@FreeBSD.org</a>&gt;. This manual page was written by <span class=An>Mark Johnston</span> &lt;<a class=Mt href=mailto:markj@FreeBSD.org>markj@FreeBSD.org</a>&gt;. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The <code class=Nm>SDT</code> macros allow the module and function names of a probe to be specified as part of a probe definition. The DTrace framework uses the module name of probes to determine which probes should be destroyed when a kernel module is unloaded, so the module name of a probe should match the name of the module in which its defined. <code class=Nm>SDT</code> will set the module name properly if it is left unspecified in the probe definition; see the <a class=Sx href=#EXAMPLES>EXAMPLES</a> section. <p class=Pp>One of the goals of the original <code class=Nm>SDT</code> implementation (and by extension, of FreeBSD's port) is that inactive <code class=Nm>SDT</code> probes should have no performance impact. This is unfortunately not the case; <code class=Nm>SDT</code> trace points will add a small but non-zero amount of latency to the code in which they are defined. A more sophisticated implementation of the probes will help alleviate this problem.</p></section></div><table class=foot><tr><td class=foot-date>April 18, 2015</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>