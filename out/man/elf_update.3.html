<!DOCTYPE html>
<html><head><meta charset=utf-8><title>elf_update(3)</title><keywords content=man,elf_update></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>elf_update(3)</h1><table class=head><tr><td class=head-ltitle>ELF_UPDATE(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>ELF_UPDATE(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>elf_update</code> — <div class=Nd>update an ELF descriptor</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>ELF Access Library (libelf, -lelf)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/libelf.h.html>libelf.h</a>&gt;</code><p class=Pp><var class=Ft>off_t</var><br><code class=Fn>elf_update</code>(<var class=Fa style="white-space: nowrap;">Elf *elf</var>, <var class=Fa style="white-space: nowrap;">Elf_Cmd cmd</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> Function <code class=Fn>elf_update</code>() causes the library to recalculate the structure of an ELF object and optionally write out the image of the object to file. <p class=Pp>Argument <var class=Ar>elf</var> should reference a valid ELF descriptor.</p><p class=Pp>Argument <var class=Ar>cmd</var> can be one of the following values:</p><dl class=Bl-tag><dt><a class=permalink href=#ELF_C_NULL><code class=Dv id=ELF_C_NULL>ELF_C_NULL</code></a></dt><dd>The library will recalculate structural information flagging modified structures with the <code class=Dv>ELF_F_DIRTY</code> flag, but will not write data to the underlying file image.</dd><dt><a class=permalink href=#ELF_C_WRITE><code class=Dv id=ELF_C_WRITE>ELF_C_WRITE</code></a></dt><dd>The library will recalculate structural information and will also write the new image to the underlying file. The ELF descriptor referenced by argument <var class=Ar>elf</var> should permit the underlying ELF object to be written or updated (see <a class=Xr href=elf_begin.3.html>elf_begin(3)</a>).</dd></dl><p class=Pp>All pointers to <var class=Vt>Elf_Scn</var> and <var class=Vt>Elf_Data</var> descriptors associated with descriptor <var class=Ar>elf</var> should be considered invalid after a call to <code class=Fn>elf_update</code>().</p><section class=Ss><h2 class=Ss id=Specifying_Object_Layout><a class=permalink href=#Specifying_Object_Layout>Specifying Object Layout</a></h2> The <span class=Lb>ELF Access Library (libelf, -lelf)</span> supports two layout modes. <dl class=Bl-tag><dt>Library Layout</dt><dd>If the <code class=Dv>ELF_F_LAYOUT</code> flag is not set on the ELF descriptor, the ELF library will lay out the ELF object according to the following scheme: <dl class="Bl-tag Bl-compact"><dt><i class=Em>EHDR</i></dt><dd>The ELF executable header will be placed at the start of the object.</dd><dt><i class=Em>PHDR</i></dt><dd>If the ELF descriptor contains a program header table, it will be placed after the Executable Header.</dd><dt><i class=Em>Section Data</i></dt><dd>ELF section data, if any, will be placed next, keeping each section's alignment requirements in mind.</dd><dt><i class=Em>SHDR</i></dt><dd>The ELF section header table, if any, will be placed last.</dd></dl></dd><dt>Application Controlled Layout</dt><dd>The application can take full control of the layout of the ELF object by setting the <code class=Dv>ELF_F_LAYOUT</code> flag on the ELF descriptor (see <a class=Xr href=elf_flagelf.3.html>elf_flagelf(3)</a>). In this case the library will lay out the ELF object using application-supplied information as below: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><i class=Em>EHDR</i></dt><dd>The ELF executable header will be placed at the start of the object.</dd><dt><i class=Em>PHDR</i></dt><dd>The ELF program header table, if any, it will be placed at the offset specified in the <var class=Va>e_phoff</var> field of the ELF executable header.</dd><dt><i class=Em>Section Data</i></dt><dd>The data for each ELF section will be placed at the offset specified by the <var class=Va>sh_offset</var> field of the section's header. The size of the section will be taken from the <var class=Va>sh_size</var> field of the section header.</dd><dt><i class=Em>SHDR</i></dt><dd>The ELF section header table, if any, will be placed at the offset specified by the <var class=Va>e_shoff</var> field of the executable header.</dd></dl></dd></dl><p class=Pp>Gaps in the coverage of the file's contents will be set to the fill value specified by <a class=Xr href=elf_fill.3.html>elf_fill(3)</a>.</p></section><section class=Ss><h2 class=Ss id=Application_Supplied_Information><a class=permalink href=#Application_Supplied_Information>Application Supplied Information</a></h2> The application needs to set the following fields in the data structures associated with the ELF descriptor prior to calling <code class=Fn>elf_update</code>(). <dl class=Bl-tag><dt>Executable Header</dt><dd>The fields of the ELF executable header that need to be set by the application are: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Va>e_entry</var></dt><dd>To be set to the desired entry address for executables.</dd><dt><var class=Va>e_flags</var></dt><dd>To be set to the desired processor specific flags.</dd><dt><var class=Va>e_ident[EI_DATA]</var></dt><dd>Must be set to one of <code class=Dv>ELFDATA2LSB</code> or <code class=Dv>ELFDATA2MSB</code>.</dd><dt><var class=Va>e_ident[EI_OSABI]</var></dt><dd>To be set to the OS ABI desired. For example, for <span class=Ux>FreeBSD</span> executables, this field should be set to <code class=Dv>ELFOSABI_FREEBSD</code>.</dd><dt><var class=Va>e_machine</var></dt><dd>To be set to the desired machine architecture, one of the <code class=Dv>EM_*</code> values in the header file <code class=In>&lt;<a class=In href=../src/elfdefinitions.h.html>elfdefinitions.h</a>&gt;</code>.</dd><dt><var class=Va>e_phoff</var></dt><dd>If the application is managing the object's layout, it must set this field to the file offset of the ELF program header table.</dd><dt><var class=Va>e_shoff</var></dt><dd>If the application is managing the object's layout, it must set this field to the file offset of the ELF section header table.</dd><dt><var class=Va>e_shstrndx</var></dt><dd>To be set to the index of the string table containing section names.</dd><dt><var class=Va>e_type</var></dt><dd>To be set to the type of the ELF object, one of the <code class=Dv>ET_*</code> values in the header file <code class=In>&lt;<a class=In href=../src/elfdefinitions.h.html>elfdefinitions.h</a>&gt;</code>.</dd><dt><var class=Va>e_version</var></dt><dd>To be set to the desired version of the ELF object.</dd></dl></dd><dt>Program Header</dt><dd>All fields of the entries in the program header table need to be set by the application.</dd><dt>Section Header</dt><dd>The fields of ELF section headers that need to be set by the application are: <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Va>sh_addr</var></dt><dd>To be set to the memory address where the section should reside.</dd><dt><var class=Va>sh_addralign</var></dt><dd>If the application is managing the file layout, it must set this field to the desired alignment for the section's contents. This value must be a power of two and must be at least as large as the largest alignment needed by any <var class=Vt>Elf_Data</var> descriptor associated with the section.</dd><dt><var class=Va>sh_entsize</var></dt><dd>To be set to the size of each entry, for sections containing fixed size elements, or set to zero for sections without fixed size elements. If the application is not managing file layout, it may leave this field as zero for those sections whose types are known to the library.</dd><dt><var class=Va>sh_flags</var></dt><dd>To be set to the desired section flags.</dd><dt><var class=Va>sh_info</var></dt><dd>To be set as described in <a class=Xr href=elf.5.html>elf(5)</a>.</dd><dt><var class=Va>sh_link</var></dt><dd>To be set as described in <a class=Xr href=elf.5.html>elf(5)</a>.</dd><dt><var class=Va>sh_name</var></dt><dd>To be set to the index of the section's name in the string table containing section names.</dd><dt><var class=Va>sh_offset</var></dt><dd>If the application is managing the file layout, it must set this field to the file offset of the section's contents.</dd><dt><var class=Va>sh_size</var></dt><dd>If the application is managing the file layout, it must set this field to the file size of the section's contents.</dd><dt><var class=Va>sh_type</var></dt><dd>To be set to the type of the section.</dd></dl></dd><dt>Section Data</dt><dd>The <var class=Vt>Elf_Data</var> descriptors associated with each section specify its contents (see <a class=Xr href=elf_getdata.3.html>elf_getdata(3)</a>). While all the fields in these descriptors are under application control, the following fields influence object layout: <dl class="Bl-tag Bl-compact"><dt><var class=Va>d_align</var></dt><dd>To be set to the desired alignment, within the containing section, of the descriptor's data.</dd><dt><var class=Va>d_off</var></dt><dd>If the application is managing object layout, it must set this field to the file offset, within the section, at which the descriptor's data should be placed.</dd><dt><var class=Va>d_size</var></dt><dd>To be set to the size in bytes of the memory representation of the descriptor's data.</dd></dl></dd></dl></section></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> Function <code class=Fn>elf_update</code>() returns the total size of the file image if successful, or -1 if an error occurred. </section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> This function may fail with the following errors: <dl class=Bl-tag><dt>[<a class=permalink href=#ELF_E_ARGUMENT><code class=Er id=ELF_E_ARGUMENT>ELF_E_ARGUMENT</code></a>]</dt><dd>Argument <var class=Ar>elf</var> was null.</dd><dt>[<a class=permalink href=#ELF_E_ARGUMENT_2><code class=Er id=ELF_E_ARGUMENT_2>ELF_E_ARGUMENT</code></a>]</dt><dd>Argument <var class=Ar>cmd</var> was not recognized.</dd><dt>[<a class=permalink href=#ELF_E_ARGUMENT_3><code class=Er id=ELF_E_ARGUMENT_3>ELF_E_ARGUMENT</code></a>]</dt><dd>The argument <var class=Ar>elf</var> was not a descriptor for an ELF object.</dd><dt>[<a class=permalink href=#ELF_E_CLASS><code class=Er id=ELF_E_CLASS>ELF_E_CLASS</code></a>]</dt><dd>The <var class=Va>e_ident[EI_CLASS]</var> field of the executable header of argument <var class=Ar>elf</var> did not match the class of the file.</dd><dt>[<a class=permalink href=#ELF_E_DATA><code class=Er id=ELF_E_DATA>ELF_E_DATA</code></a>]</dt><dd>An <var class=Vt>Elf_Data</var> descriptor contained in argument <var class=Ar>elf</var> specified an unsupported type.</dd><dt>[<a class=permalink href=#ELF_E_DATA_2><code class=Er id=ELF_E_DATA_2>ELF_E_DATA</code></a>]</dt><dd>An <var class=Vt>Elf_Data</var> descriptor specified an alignment that was zero or was not a power of two.</dd><dt>[<a class=permalink href=#ELF_E_HEADER><code class=Er id=ELF_E_HEADER>ELF_E_HEADER</code></a>]</dt><dd>The ELF header in argument <var class=Ar>elf</var> requested a different byte order from the byte order already associated with the file.</dd><dt>[<a class=permalink href=#ELF_E_IO><code class=Er id=ELF_E_IO>ELF_E_IO</code></a>]</dt><dd>An I/O error was encountered.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT><code class=Er id=ELF_E_LAYOUT>ELF_E_LAYOUT</code></a>]</dt><dd>An <var class=Vt>Elf_Data</var> descriptor contained in argument <var class=Ar>elf</var> specified an alignment incompatible with its containing section.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_2><code class=Er id=ELF_E_LAYOUT_2>ELF_E_LAYOUT</code></a>]</dt><dd>Argument <var class=Ar>elf</var> contained section descriptors that overlapped in extent.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_3><code class=Er id=ELF_E_LAYOUT_3>ELF_E_LAYOUT</code></a>]</dt><dd>Argument <var class=Ar>elf</var> contained section descriptors that were incorrectly aligned or were too small for their data.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_4><code class=Er id=ELF_E_LAYOUT_4>ELF_E_LAYOUT</code></a>]</dt><dd>The flag <code class=Dv>ELF_F_LAYOUT</code> was set on the Elf descriptor and the executable header overlapped with the program header table.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_5><code class=Er id=ELF_E_LAYOUT_5>ELF_E_LAYOUT</code></a>]</dt><dd>The flag <code class=Dv>ELF_F_LAYOUT</code> was set on the Elf descriptor and the program header table was placed at a misaligned file offset.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_6><code class=Er id=ELF_E_LAYOUT_6>ELF_E_LAYOUT</code></a>]</dt><dd>The flag <code class=Dv>ELF_F_LAYOUT</code> was set on the Elf descriptor and the section header table overlapped an extent mapped by a section descriptor.</dd><dt>[<a class=permalink href=#ELF_E_LAYOUT_7><code class=Er id=ELF_E_LAYOUT_7>ELF_E_LAYOUT</code></a>]</dt><dd>The <code class=Dv>ELF_F_LAYOUT</code> flag was set on the Elf descriptor, and the <var class=Va>d_offset</var> field in an <var class=Vt>Elf_Data</var> descriptor contained a value that was not a multiple of the descriptor's specified alignment.</dd><dt>[<a class=permalink href=#ELF_E_MODE><code class=Er id=ELF_E_MODE>ELF_E_MODE</code></a>]</dt><dd>An <code class=Dv>ELF_C_WRITE</code> operation was requested with an ELF descriptor that was not opened for writing or updating.</dd><dt>[<a class=permalink href=#ELF_E_SECTION><code class=Er id=ELF_E_SECTION>ELF_E_SECTION</code></a>]</dt><dd>Argument <var class=Ar>elf</var> contained a section with an unrecognized type.</dd><dt>[<a class=permalink href=#ELF_E_SECTION_2><code class=Er id=ELF_E_SECTION_2>ELF_E_SECTION</code></a>]</dt><dd>The section header at index <code class=Dv>SHN_UNDEF</code> had an illegal section type.</dd><dt>[<a class=permalink href=#ELF_E_SEQUENCE><code class=Er id=ELF_E_SEQUENCE>ELF_E_SEQUENCE</code></a>]</dt><dd>An <code class=Dv>ELF_C_WRITE</code> operation was requested after a prior call to <code class=Fn>elf_cntl</code>(<var class=Fa>elf</var>, <var class=Fa>ELF_C_FDDONE</var>) disassociated the ELF descriptor <var class=Ar>elf</var> from its underlying file.</dd><dt>[<a class=permalink href=#ELF_E_UNIMPL><code class=Er id=ELF_E_UNIMPL>ELF_E_UNIMPL</code></a>]</dt><dd>Argument <var class=Ar>elf</var> contained a section with an unsupported ELF type.</dd><dt>[<a class=permalink href=#ELF_E_VERSION><code class=Er id=ELF_E_VERSION>ELF_E_VERSION</code></a>]</dt><dd>Argument <var class=Ar>elf</var> had an unsupported version or contained an <var class=Vt>Elf_Data</var> descriptor with an unsupported version.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=elf.3.html>elf(3)</a>, <a class=Xr href=elf32_getehdr.3.html>elf32_getehdr(3)</a>, <a class=Xr href=elf32_getphdr.3.html>elf32_getphdr(3)</a>, <a class=Xr href=elf32_newehdr.3.html>elf32_newehdr(3)</a>, <a class=Xr href=elf32_newphdr.3.html>elf32_newphdr(3)</a>, <a class=Xr href=elf64_getehdr.3.html>elf64_getehdr(3)</a>, <a class=Xr href=elf64_getphdr.3.html>elf64_getphdr(3)</a>, <a class=Xr href=elf64_newehdr.3.html>elf64_newehdr(3)</a>, <a class=Xr href=elf64_newphdr.3.html>elf64_newphdr(3)</a>, <a class=Xr href=elf_begin.3.html>elf_begin(3)</a>, <a class=Xr href=elf_cntl.3.html>elf_cntl(3)</a>, <a class=Xr href=elf_fill.3.html>elf_fill(3)</a>, <a class=Xr href=elf_flagehdr.3.html>elf_flagehdr(3)</a>, <a class=Xr href=elf_flagelf.3.html>elf_flagelf(3)</a>, <a class=Xr href=elf_getdata.3.html>elf_getdata(3)</a>, <a class=Xr href=elf_getscn.3.html>elf_getscn(3)</a>, <a class=Xr href=elf_newdata.3.html>elf_newdata(3)</a>, <a class=Xr href=elf_newscn.3.html>elf_newscn(3)</a>, <a class=Xr href=elf_rawdata.3.html>elf_rawdata(3)</a>, <a class=Xr href=gelf.3.html>gelf(3)</a>, <a class=Xr href=gelf_newehdr.3.html>gelf_newehdr(3)</a>, <a class=Xr href=gelf_newphdr.3.html>gelf_newphdr(3)</a>, <a class=Xr href=elf.5.html>elf(5)</a></section></div><table class=foot><tr><td class=foot-date>April 22, 2019</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>