<!DOCTYPE html>
<html><head><meta charset=utf-8><title>newfs(8)</title><keywords content=man,newfs></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>newfs(8)</h1><table class=head><tr><td class=head-ltitle>NEWFS(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>NEWFS(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>newfs</code> — <div class=Nd>construct a new UFS1/UFS2 file system</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>newfs</code></td><td>[<code class=Fl>-EJNUjlnt</code>] [<code class=Fl>-L</code><var class=Ar>volname</var>] [<code class=Fl>-O</code><var class=Ar>filesystem-type</var>] [<code class=Fl>-S</code><var class=Ar>sector-size</var>] [<code class=Fl>-T</code><var class=Ar>disktype</var>] [<code class=Fl>-a</code><var class=Ar>maxcontig</var>] [<code class=Fl>-b</code><var class=Ar>block-size</var>] [<code class=Fl>-c</code><var class=Ar>blocks-per-cylinder-group</var>] [<code class=Fl>-d</code><var class=Ar>max-extent-size</var>] [<code class=Fl>-e</code><var class=Ar>maxbpg</var>] [<code class=Fl>-f</code><var class=Ar>frag-size</var>] [<code class=Fl>-g</code><var class=Ar>avgfilesize</var>] [<code class=Fl>-h</code><var class=Ar>avgfpdir</var>] [<code class=Fl>-i</code><var class=Ar>bytes</var>] [<code class=Fl>-k</code><var class=Ar>held-for-metadata-blocks</var>] [<code class=Fl>-m</code><var class=Ar>free-space</var>] [<code class=Fl>-o</code><var class=Ar>optimization</var>] [<code class=Fl>-p</code><var class=Ar>partition</var>] [<code class=Fl>-r</code><var class=Ar>reserved</var>] [<code class=Fl>-s</code><var class=Ar>size</var>] <var class=Ar>special</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>newfs</code> utility is used to initialize and clear file systems before first use. The <code class=Nm>newfs</code> utility builds a file system on the specified special file. (We often refer to the “special file” as the “disk”, although the special file need not be a physical disk. In fact, it need not even be special.) Typically the defaults are reasonable, however <code class=Nm>newfs</code> has numerous options to allow the defaults to be selectively overridden. <p class=Pp>The following options define the general layout policies:</p><dl class=Bl-tag><dt><a class=permalink href=#E><code class=Fl id=E>-E</code></a></dt><dd>Erase the content of the disk before making the filesystem. The reserved area in front of the superblock (for bootcode) will not be erased. Erasing is only relevant to flash-memory or thinly provisioned devices. Erasing may take a long time. If the device does not support BIO_DELETE, the command will fail.</dd><dt><a class=permalink href=#J><code class=Fl id=J>-J</code></a></dt><dd>Enable journaling on the new file system via gjournal. See <a class=Xr href=gjournal.8.html>gjournal(8)</a> for details.</dd><dt><a class=permalink href=#L><code class=Fl id=L>-L</code></a><var class=Ar>volname</var></dt><dd>Add a volume label to the new file system. Legal characters are alphanumerics, dashes, and underscores.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a></dt><dd>Cause the file system parameters to be printed out without really creating the file system.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a><var class=Ar>filesystem-type</var></dt><dd>Use 1 to specify that a UFS1 format file system be built; use 2 to specify that a UFS2 format file system be built. The default format is UFS2.</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a><var class=Ar>disktype</var></dt><dd>For backward compatibility.</dd><dt><a class=permalink href=#U><code class=Fl id=U>-U</code></a></dt><dd>Enable soft updates on the new file system.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a><var class=Ar>maxcontig</var></dt><dd>Specify the maximum number of contiguous blocks that will be laid out before forcing a rotational delay. The default value is 16. See <a class=Xr href=tunefs.8.html>tunefs(8)</a> for more details on how to set this option.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>block-size</var></dt><dd>The block size of the file system, in bytes. It must be a power of 2. The default size is 32768 bytes, and the smallest allowable size is 4096 bytes. The optimal block:fragment ratio is 8:1. Other ratios are possible, but are not recommended, and may produce poor results.</dd><dt><a class=permalink href=#c><code class=Fl id=c>-c</code></a><var class=Ar>blocks-per-cylinder-group</var></dt><dd>The number of blocks per cylinder group in a file system. The default is to compute the maximum allowed by the other parameters. This value is dependent on a number of other parameters, in particular the block size and the number of bytes per inode.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a><var class=Ar>max-extent-size</var></dt><dd>The file system may choose to store large files using extents. This parameter specifies the largest extent size that may be used. The default value is the file system blocksize. It is presently limited to a maximum value of 16 times the file system blocksize and a minimum value of the file system blocksize.</dd><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a><var class=Ar>maxbpg</var></dt><dd>Indicate the maximum number of blocks any single file can allocate out of a cylinder group before it is forced to begin allocating blocks from another cylinder group. The default is about one quarter of the total blocks in a cylinder group. See <a class=Xr href=tunefs.8.html>tunefs(8)</a> for more details on how to set this option.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>frag-size</var></dt><dd>The fragment size of the file system in bytes. It must be a power of two ranging in value between <var class=Ar>blocksize</var>/8 and <var class=Ar>blocksize</var>. The default is 4096 bytes.</dd><dt><a class=permalink href=#g><code class=Fl id=g>-g</code></a><var class=Ar>avgfilesize</var></dt><dd>The expected average file size for the file system.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a><var class=Ar>avgfpdir</var></dt><dd>The expected average number of files per directory on the file system.</dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a><var class=Ar>bytes</var></dt><dd>Specify the density of inodes in the file system. The default is to create an inode for every (2 * <var class=Ar>frag-size</var>) bytes of data space. If fewer inodes are desired, a larger number should be used; to create more inodes a smaller number should be given. One inode is required for each distinct file, so this value effectively specifies the average file size on the file system.</dd><dt><a class=permalink href=#j><code class=Fl id=j>-j</code></a></dt><dd>Enable soft updates journaling on the new file system. This flag is implemented by running the <a class=Xr href=tunefs.8.html>tunefs(8)</a> utility found in the user's <code class=Dv>$PATH</code>.</dd><dt><a class=permalink href=#k><code class=Fl id=k>-k</code></a><var class=Ar>held-for-metadata-blocks</var></dt><dd>Set the amount of space to be held for metadata blocks in each cylinder group. When set, the file system preference routines will try to save the specified amount of space immediately following the inode blocks in each cylinder group for use by metadata blocks. Clustering the metadata blocks speeds up random file access and decreases the running time of <a class=Xr href=fsck.8.html>fsck(8)</a>. By default <code class=Nm>newfs</code> sets it to half of the space reserved to minfree.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a></dt><dd>Enable multilabel MAC on the new file system.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>free-space</var></dt><dd>The percentage of space reserved from normal users; the minimum free space threshold. The default value used is defined by <code class=Dv>MINFREE</code> from <code class=In>&lt;<a class=In href=../src/ufs/ffs/fs.h.html>ufs/ffs/fs.h</a>&gt;</code>, currently 8%. See <a class=Xr href=tunefs.8.html>tunefs(8)</a> for more details on how to set this option.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Do not create a <span class=Pa>.snap</span> directory on the new file system. The resulting file system will not support snapshot generation, so <a class=Xr href=dump.8.html>dump(8)</a> in live mode and background <a class=Xr href=fsck.8.html>fsck(8)</a> will not function properly. The traditional <a class=Xr href=fsck.8.html>fsck(8)</a> and offline <a class=Xr href=dump.8.html>dump(8)</a> will work on the file system. This option is intended primarily for memory or vnode-backed file systems that do not require <a class=Xr href=dump.8.html>dump(8)</a> or <a class=Xr href=fsck.8.html>fsck(8)</a> support.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>optimization</var></dt><dd>(<code class=Cm>space</code> or <code class=Cm>time</code>). The file system can either be instructed to try to minimize the time spent allocating blocks, or to try to minimize the space fragmentation on the disk. If the value of minfree (see above) is less than 8%, the default is to optimize for <code class=Cm>space</code>; if the value of minfree is greater than or equal to 8%, the default is to optimize for <code class=Cm>time</code>. See <a class=Xr href=tunefs.8.html>tunefs(8)</a> for more details on how to set this option.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a><var class=Ar>partition</var></dt><dd>The partition name (a..h) you want to use in case the underlying image is a file, so you do not have access to individual partitions through the filesystem. Can also be used with a device, e.g., <code class=Nm>newfs</code><code class=Fl>-p</code><var class=Ar>f</var><var class=Ar>/dev/da1s3</var> is equivalent to <code class=Nm>newfs</code><var class=Ar>/dev/da1s3f</var>.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a><var class=Ar>reserved</var></dt><dd>The size, in sectors, of reserved space at the end of the partition specified in <var class=Ar>special</var>. This space will not be occupied by the file system; it can be used by other consumers such as <a class=Xr href=geom.4.html>geom(4)</a>. Defaults to 0.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>size</var></dt><dd>The size of the file system in sectors. This value defaults to the size of the raw partition specified in <var class=Ar>special</var> less the <var class=Ar>reserved</var> space at its end (see <code class=Fl>-r</code>). A <var class=Ar>size</var> of 0 can also be used to choose the default value. A valid <var class=Ar>size</var> value cannot be larger than the default one, which means that the file system cannot extend into the reserved space.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>Turn on the TRIM enable flag. If enabled, and if the underlying device supports the BIO_DELETE command, the file system will send a delete request to the underlying device for each freed block. The trim enable flag is typically set for flash-memory devices to reduce write amplification which reduces wear on write-limited flash-memory and often improves long-term performance. Thinly provisioned storage also benefits by returning unused blocks to the global pool.</dd></dl><p class=Pp>The following options override the standard sizes for the disk geometry. Their default values are taken from the disk label. Changing these defaults is useful only when using <code class=Nm>newfs</code> to build a file system whose raw image will eventually be used on a different type of disk than the one on which it is initially created (for example on a write-once disk). Note that changing any of these values from their defaults will make it impossible for <a class=Xr href=fsck.8.html>fsck(8)</a> to find the alternate superblocks if the standard superblock is lost.</p><dl class=Bl-tag><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>sector-size</var></dt><dd>The size of a sector in bytes (almost never anything but 512).</dd></dl></section><section class=Sh><h2 class=Sh id=NOTES_ON_THE_NAMING><a class=permalink href=#NOTES_ON_THE_NAMING>NOTES ON THE NAMING</a></h2> “newfs” is a common name prefix for utilities creating filesystems, with the suffix indicating the type of the filesystem, for instance <a class=Xr href=newfs_msdos.8.html>newfs_msdos(8)</a>. The <code class=Nm>newfs</code> utility is a special case which predates that convention. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2><div class="Bd Bd-indent"><code class=Li>newfs /dev/ada3s1a</code></div><p class=Pp>Creates a new ufs file system on <span class=Pa>ada3s1a</span>. The <code class=Nm>newfs</code> utility will use a block size of 32768 bytes, a fragment size of 4096 bytes and the largest possible number of blocks per cylinders group. These values tend to produce better performance for most applications than the historical defaults (8192 byte block size and 1024 byte fragment size). This large fragment size may lead to much wasted space on file systems that contain many small files.</p></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=fdformat.8.html>fdformat(8)</a>, <a class=Xr href=geom.4.html>geom(4)</a>, <a class=Xr href=disktab.5.html>disktab(5)</a>, <a class=Xr href=fs.5.html>fs(5)</a>, <a class=Xr href=camcontrol.8.html>camcontrol(8)</a>, <a class=Xr href=dump.8.html>dump(8)</a>, <a class=Xr href=dumpfs.8.html>dumpfs(8)</a>, <a class=Xr href=fsck.8.html>fsck(8)</a>, <a class=Xr href=gjournal.8.html>gjournal(8)</a>, <a class=Xr href=gpart.8.html>gpart(8)</a>, <a class=Xr href=growfs.8.html>growfs(8)</a>, <a class=Xr href=gvinum.8.html>gvinum(8)</a>, <a class=Xr href=makefs.8.html>makefs(8)</a>, <a class=Xr href=mount.8.html>mount(8)</a>, <a class=Xr href=newfs_msdos.8.html>newfs_msdos(8)</a>, <a class=Xr href=tunefs.8.html>tunefs(8)</a><p class=Pp><cite class=Rs><span class=RsA>M. McKusick</span>, <span class=RsA>W. Joy</span>, <span class=RsA>S. Leffler</span>, and <span class=RsA>R. Fabry</span>, <span class=RsT>A Fast File System for UNIX</span>, <i class=RsJ>ACM Transactions on Computer Systems 2</i>, <span class=RsV>3</span>, <span class=RsP>pp 181-197</span>, <span class=RsD>August 1984</span>, <span class=RsO>(reprinted in the BSD System Manager's Manual)</span>.</cite></p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>newfs</code> utility appeared in <span class=Ux>4.2BSD</span>. </section></div><table class=foot><tr><td class=foot-date>April 17, 2021</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>