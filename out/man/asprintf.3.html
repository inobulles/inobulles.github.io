<!DOCTYPE html>
<html><head><meta charset=utf-8><title>asprintf(3)</title><keywords content=man,asprintf></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>asprintf(3)</h1><table class=head><tr><td class=head-ltitle>PRINTF(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>PRINTF(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>printf</code>, <code class=Nm>fprintf</code>, <code class=Nm>sprintf</code>, <code class=Nm>snprintf</code>, <code class=Nm>asprintf</code>, <code class=Nm>dprintf</code>, <code class=Nm>vprintf</code>, <code class=Nm>vfprintf</code>, <code class=Nm>vsprintf</code>, <code class=Nm>vsnprintf</code>, <code class=Nm>vasprintf</code>, <code class=Nm>vdprintf</code> — <div class=Nd>formatted output conversion</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/stdio.h.html>stdio.h</a>&gt;</code><p class=Pp><var class=Ft>int</var><br><code class=Fn>printf</code>(<var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>fprintf</code>(<var class=Fa style="white-space: nowrap;">FILE * restrict stream</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>sprintf</code>(<var class=Fa style="white-space: nowrap;">char * restrict str</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>snprintf</code>(<var class=Fa style="white-space: nowrap;">char * restrict str</var>, <var class=Fa style="white-space: nowrap;">size_t size</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>asprintf</code>(<var class=Fa style="white-space: nowrap;">char **ret</var>, <var class=Fa style="white-space: nowrap;">const char *format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>dprintf</code>(<var class=Fa style="white-space: nowrap;">int fd</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">...</var>);</p><p class=Pp><code class=In>#include &lt;<a class=In href=../src/stdarg.h.html>stdarg.h</a>&gt;</code></p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vprintf</code>(<var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vfprintf</code>(<var class=Fa style="white-space: nowrap;">FILE * restrict stream</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vsprintf</code>(<var class=Fa style="white-space: nowrap;">char * restrict str</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vsnprintf</code>(<var class=Fa style="white-space: nowrap;">char * restrict str</var>, <var class=Fa style="white-space: nowrap;">size_t size</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vasprintf</code>(<var class=Fa style="white-space: nowrap;">char **ret</var>, <var class=Fa style="white-space: nowrap;">const char *format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>vdprintf</code>(<var class=Fa style="white-space: nowrap;">int fd</var>, <var class=Fa style="white-space: nowrap;">const char * restrict format</var>, <var class=Fa style="white-space: nowrap;">va_list ap</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Fn>printf</code>() family of functions produces output according to a <var class=Fa>format</var> as described below. The <code class=Fn>printf</code>() and <code class=Fn>vprintf</code>() functions write output to <code class=Dv>stdout</code>, the standard output stream; <code class=Fn>fprintf</code>() and <code class=Fn>vfprintf</code>() write output to the given output <var class=Fa>stream</var>; <code class=Fn>dprintf</code>() and <code class=Fn>vdprintf</code>() write output to the given file descriptor; <code class=Fn>sprintf</code>(), <code class=Fn>snprintf</code>(), <code class=Fn>vsprintf</code>(), and <code class=Fn>vsnprintf</code>() write to the character string <var class=Fa>str</var>; and <code class=Fn>asprintf</code>() and <code class=Fn>vasprintf</code>() dynamically allocate a new string with <a class=Xr href=malloc.3.html>malloc(3)</a>. <p class=Pp>These functions write the output under the control of a <var class=Fa>format</var> string that specifies how subsequent arguments (or arguments accessed via the variable-length argument facilities of <a class=Xr href=stdarg.3.html>stdarg(3)</a>) are converted for output.</p><p class=Pp>The <code class=Fn>asprintf</code>() and <code class=Fn>vasprintf</code>() functions set <var class=Fa>*ret</var> to be a pointer to a buffer sufficiently large to hold the formatted string. This pointer should be passed to <a class=Xr href=free.3.html>free(3)</a> to release the allocated storage when it is no longer needed. If sufficient space cannot be allocated, <code class=Fn>asprintf</code>() and <code class=Fn>vasprintf</code>() will return -1 and set <var class=Fa>ret</var> to be a <code class=Dv>NULL</code> pointer.</p><p class=Pp>The <code class=Fn>snprintf</code>() and <code class=Fn>vsnprintf</code>() functions will write at most <var class=Fa>size</var>-1 of the characters printed into the output string (the <var class=Fa>size</var>'th character then gets the terminating ‘<code class=Li>\0</code>’); if the return value is greater than or equal to the <var class=Fa>size</var> argument, the string was too short and some of the printed characters were discarded. The output is always null-terminated, unless <var class=Fa>size</var> is 0.</p><p class=Pp>The <code class=Fn>sprintf</code>() and <code class=Fn>vsprintf</code>() functions effectively assume a <var class=Fa>size</var> of <code class=Dv>INT_MAX + 1.</code></p><p class=Pp>The format string is composed of zero or more directives: ordinary characters (not <code class=Cm>%</code>), which are copied unchanged to the output stream; and conversion specifications, each of which results in fetching zero or more subsequent arguments. Each conversion specification is introduced by the <code class=Cm>%</code> character. The arguments must correspond properly (after type promotion) with the conversion specifier. After the <code class=Cm>%</code>, the following appear in sequence:</p><ul class=Bl-bullet><li>An optional field, consisting of a decimal digit string followed by a <code class=Cm>$</code>, specifying the next argument to access. If this field is not provided, the argument following the last argument accessed will be used. Arguments are numbered starting at <code class=Cm>1</code>. If unaccessed arguments in the format string are interspersed with ones that are accessed the results will be indeterminate.</li><li>Zero or more of the following flags: <dl class=Bl-tag><dt>‘<code class=Cm>#</code>’</dt><dd>The value should be converted to an “alternate form”. For <code class=Cm>c</code>, <code class=Cm>d</code>, <code class=Cm>i</code>, <code class=Cm>n</code>, <code class=Cm>p</code>, <code class=Cm>s</code>, and <code class=Cm>u</code> conversions, this option has no effect. For <code class=Cm>o</code> conversions, the precision of the number is increased to force the first character of the output string to a zero. For <code class=Cm>x</code> and <code class=Cm>X</code> conversions, a non-zero result has the string ‘<code class=Li>0x</code>’ (or ‘<code class=Li>0X</code>’ for <code class=Cm>X</code> conversions) prepended to it. For <code class=Cm>a</code>, <code class=Cm>A</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, <code class=Cm>F</code>, <code class=Cm>g</code>, and <code class=Cm>G</code> conversions, the result will always contain a decimal point, even if no digits follow it (normally, a decimal point appears in the results of those conversions only if a digit follows). For <code class=Cm>g</code> and <code class=Cm>G</code> conversions, trailing zeros are not removed from the result as they would otherwise be.</dd><dt>‘<code class=Cm>0</code>’ (zero)</dt><dd>Zero padding. For all conversions except <code class=Cm>n</code>, the converted value is padded on the left with zeros rather than blanks. If a precision is given with a numeric conversion (<code class=Cm>d</code>, <code class=Cm>i</code>, <code class=Cm>o</code>, <code class=Cm>u</code>, <code class=Cm>i</code>, <code class=Cm>x</code>, and <code class=Cm>X</code>), the <code class=Cm>0</code> flag is ignored.</dd><dt>‘<code class=Cm>-</code>’</dt><dd>A negative field width flag; the converted value is to be left adjusted on the field boundary. Except for <code class=Cm>n</code> conversions, the converted value is padded on the right with blanks, rather than on the left with blanks or zeros. A <code class=Cm>-</code> overrides a <code class=Cm>0</code> if both are given.</dd><dt>‘ ’ (space)</dt><dd>A blank should be left before a positive number produced by a signed conversion (<code class=Cm>a</code>, <code class=Cm>A</code>, <code class=Cm>d</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, <code class=Cm>F</code>, <code class=Cm>g</code>, <code class=Cm>G</code>, or <code class=Cm>i</code>).</dd><dt>‘<code class=Cm>+</code>’</dt><dd>A sign must always be placed before a number produced by a signed conversion. A <code class=Cm>+</code> overrides a space if both are used.</dd><dt>‘'’ (apostrophe)</dt><dd>Decimal conversions (<code class=Cm>d</code>, <code class=Cm>u</code>, or <code class=Cm>i</code>) or the integral portion of a floating point conversion (<code class=Cm>f</code> or <code class=Cm>F</code>) should be grouped and separated by thousands using the non-monetary separator returned by <a class=Xr href=localeconv.3.html>localeconv(3)</a>.</dd></dl></li><li>An optional decimal digit string specifying a minimum field width. If the converted value has fewer characters than the field width, it will be padded with spaces on the left (or right, if the left-adjustment flag has been given) to fill out the field width.</li><li>An optional precision, in the form of a period <code class=Cm>.</code> followed by an optional digit string. If the digit string is omitted, the precision is taken as zero. This gives the minimum number of digits to appear for <code class=Cm>d</code>, <code class=Cm>i</code>, <code class=Cm>o</code>, <code class=Cm>u</code>, <code class=Cm>x</code>, and <code class=Cm>X</code> conversions, the number of digits to appear after the decimal-point for <code class=Cm>a</code>, <code class=Cm>A</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, and <code class=Cm>F</code> conversions, the maximum number of significant digits for <code class=Cm>g</code> and <code class=Cm>G</code> conversions, or the maximum number of characters to be printed from a string for <code class=Cm>s</code> conversions.</li><li>An optional length modifier, that specifies the size of the argument. The following length modifiers are valid for the <code class=Cm>d</code>, <code class=Cm>i</code>, <code class=Cm>n</code>, <code class=Cm>o</code>, <code class=Cm>u</code>, <code class=Cm>x</code>, or <code class=Cm>X</code> conversion: <table class=Bl-column><tr><td><b class=Sy>Modifier</b></td><td><a class=permalink href=#d><code class=Cm id=d>d</code></a>, <code class=Cm>i</code></td><td><a class=permalink href=#o><code class=Cm id=o>o</code></a>, <code class=Cm>u</code>, <code class=Cm>x</code>, <code class=Cm>X</code></td><td><a class=permalink href=#n><code class=Cm id=n>n</code></a></td></tr><tr><td><a class=permalink href=#hh><code class=Cm id=hh>hh</code></a></td><td><var class=Vt>signed char</var></td><td><var class=Vt>unsigned char</var></td><td><var class=Vt>signed char *</var></td></tr><tr><td><a class=permalink href=#h><code class=Cm id=h>h</code></a></td><td><var class=Vt>short</var></td><td><var class=Vt>unsigned short</var></td><td><var class=Vt>short *</var></td></tr><tr><td><a class=permalink href=#l><code class=Cm id=l>l</code></a><span class=No>(ell)</span></td><td><var class=Vt>long</var></td><td><var class=Vt>unsigned long</var></td><td><var class=Vt>long *</var></td></tr><tr><td><a class=permalink href=#ll><code class=Cm id=ll>ll</code></a><span class=No>(ell ell)</span></td><td><var class=Vt>long long</var></td><td><var class=Vt>unsigned long long</var></td><td><var class=Vt>long long *</var></td></tr><tr><td><a class=permalink href=#j><code class=Cm id=j>j</code></a></td><td><var class=Vt>intmax_t</var></td><td><var class=Vt>uintmax_t</var></td><td><var class=Vt>intmax_t *</var></td></tr><tr><td><a class=permalink href=#t><code class=Cm id=t>t</code></a></td><td><var class=Vt>ptrdiff_t</var></td><td>(see note)</td><td><var class=Vt>ptrdiff_t *</var></td></tr><tr><td><a class=permalink href=#z><code class=Cm id=z>z</code></a></td><td>(see note)</td><td><var class=Vt>size_t</var></td><td>(see note)</td></tr><tr><td><a class=permalink href=#q><code class=Cm id=q>q</code></a><i class=Em>(deprecated)</i></td><td><var class=Vt>quad_t</var></td><td><var class=Vt>u_quad_t</var></td><td><var class=Vt>quad_t *</var></td></tr></table><p class=Pp>Note: the <code class=Cm>t</code> modifier, when applied to a <code class=Cm>o</code>, <code class=Cm>u</code>, <code class=Cm>x</code>, or <code class=Cm>X</code> conversion, indicates that the argument is of an unsigned type equivalent in size to a <var class=Vt>ptrdiff_t</var>. The <code class=Cm>z</code> modifier, when applied to a <code class=Cm>d</code> or <code class=Cm>i</code> conversion, indicates that the argument is of a signed type equivalent in size to a <var class=Vt>size_t</var>. Similarly, when applied to an <code class=Cm>n</code> conversion, it indicates that the argument is a pointer to a signed type equivalent in size to a <var class=Vt>size_t</var>.</p><p class=Pp>The following length modifier is valid for the <code class=Cm>a</code>, <code class=Cm>A</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, <code class=Cm>F</code>, <code class=Cm>g</code>, or <code class=Cm>G</code> conversion:</p><table class=Bl-column><tr><td><b class=Sy>Modifier</b></td><td><a class=permalink href=#a><code class=Cm id=a>a</code></a>, <code class=Cm>A</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, <code class=Cm>F</code>, <code class=Cm>g</code>, <code class=Cm>G</code></td></tr><tr><td><a class=permalink href=#l_2><code class=Cm id=l_2>l</code></a><span class=No>(ell)</span></td><td><var class=Vt>double</var> (ignored, same behavior as without it)</td></tr><tr><td><a class=permalink href=#L><code class=Cm id=L>L</code></a></td><td><var class=Vt>long double</var></td></tr></table><p class=Pp>The following length modifier is valid for the <code class=Cm>c</code> or <code class=Cm>s</code> conversion:</p><table class=Bl-column><tr><td><b class=Sy>Modifier</b></td><td><a class=permalink href=#c><code class=Cm id=c>c</code></a></td><td><a class=permalink href=#s><code class=Cm id=s>s</code></a></td></tr><tr><td><a class=permalink href=#l_3><code class=Cm id=l_3>l</code></a><span class=No>(ell)</span></td><td><var class=Vt>wint_t</var></td><td><var class=Vt>wchar_t *</var></td></tr></table></li><li>A character that specifies the type of conversion to be applied.</li></ul><p class=Pp>A field width or precision, or both, may be indicated by an asterisk ‘<code class=Li>*</code>’ or an asterisk followed by one or more decimal digits and a ‘<code class=Li>$</code>’ instead of a digit string. In this case, an <var class=Vt>int</var> argument supplies the field width or precision. A negative field width is treated as a left adjustment flag followed by a positive field width; a negative precision is treated as though it were missing. If a single format directive mixes positional (<code class=Li>nn$</code>) and non-positional arguments, the results are undefined.</p><p class=Pp>The conversion specifiers and their meanings are:</p><dl class=Bl-tag><dt><a class=permalink href=#diouxX><code class=Cm id=diouxX>diouxX</code></a></dt><dd>The <var class=Vt>int</var> (or appropriate variant) argument is converted to signed decimal (<code class=Cm>d</code> and <code class=Cm>i</code>), unsigned octal (<code class=Cm>o</code>), unsigned decimal (<code class=Cm>u</code>), or unsigned hexadecimal (<code class=Cm>x</code> and <code class=Cm>X</code>) notation. The letters “<code class=Li>abcdef</code>” are used for <code class=Cm>x</code> conversions; the letters “<code class=Li>ABCDEF</code>” are used for <code class=Cm>X</code> conversions. The precision, if any, gives the minimum number of digits that must appear; if the converted value requires fewer digits, it is padded on the left with zeros.</dd><dt><a class=permalink href=#DOU><code class=Cm id=DOU>DOU</code></a></dt><dd>The <var class=Vt>long int</var> argument is converted to signed decimal, unsigned octal, or unsigned decimal, as if the format had been <code class=Cm>ld</code>, <code class=Cm>lo</code>, or <code class=Cm>lu</code> respectively. These conversion characters are deprecated, and will eventually disappear.</dd><dt><a class=permalink href=#eE><code class=Cm id=eE>eE</code></a></dt><dd>The <var class=Vt>double</var> argument is rounded and converted in the style [-]<var class=Ar>d</var><code class=Li>.</code><var class=Ar>ddd</var><code class=Li>e±</code><var class=Ar>dd</var> where there is one digit before the decimal-point character and the number of digits after it is equal to the precision; if the precision is missing, it is taken as 6; if the precision is zero, no decimal-point character appears. An <code class=Cm>E</code> conversion uses the letter ‘<code class=Li>E</code>’ (rather than ‘<code class=Li>e</code>’) to introduce the exponent. The exponent always contains at least two digits; if the value is zero, the exponent is 00. <p class=Pp>For <code class=Cm>a</code>, <code class=Cm>A</code>, <code class=Cm>e</code>, <code class=Cm>E</code>, <code class=Cm>f</code>, <code class=Cm>F</code>, <code class=Cm>g</code>, and <code class=Cm>G</code> conversions, positive and negative infinity are represented as <code class=Li>inf</code> and <code class=Li>-inf</code> respectively when using the lowercase conversion character, and <code class=Li>INF</code> and <code class=Li>-INF</code> respectively when using the uppercase conversion character. Similarly, NaN is represented as <code class=Li>nan</code> when using the lowercase conversion, and <code class=Li>NAN</code> when using the uppercase conversion.</p></dd><dt><a class=permalink href=#fF><code class=Cm id=fF>fF</code></a></dt><dd>The <var class=Vt>double</var> argument is rounded and converted to decimal notation in the style [-]<var class=Ar>ddd</var><code class=Li>.</code><var class=Ar>ddd</var>, where the number of digits after the decimal-point character is equal to the precision specification. If the precision is missing, it is taken as 6; if the precision is explicitly zero, no decimal-point character appears. If a decimal point appears, at least one digit appears before it.</dd><dt><a class=permalink href=#gG><code class=Cm id=gG>gG</code></a></dt><dd>The <var class=Vt>double</var> argument is converted in style <code class=Cm>f</code> or <code class=Cm>e</code> (or <code class=Cm>F</code> or <code class=Cm>E</code> for <code class=Cm>G</code> conversions). The precision specifies the number of significant digits. If the precision is missing, 6 digits are given; if the precision is zero, it is treated as 1. Style <code class=Cm>e</code> is used if the exponent from its conversion is less than -4 or greater than or equal to the precision. Trailing zeros are removed from the fractional part of the result; a decimal point appears only if it is followed by at least one digit.</dd><dt><a class=permalink href=#aA><code class=Cm id=aA>aA</code></a></dt><dd>The <var class=Vt>double</var> argument is rounded and converted to hexadecimal notation in the style [-]<code class=Li>0x</code><var class=Ar>h</var><code class=Li>.</code><var class=Ar>hhhp</var>[±]<var class=Ar>d</var>, where the number of digits after the hexadecimal-point character is equal to the precision specification. If the precision is missing, it is taken as enough to represent the floating-point number exactly, and no rounding occurs. If the precision is zero, no hexadecimal-point character appears. The <code class=Cm>p</code> is a literal character ‘<code class=Li>p</code>’, and the exponent consists of a positive or negative sign followed by a decimal number representing an exponent of 2. The <code class=Cm>A</code> conversion uses the prefix “<code class=Li>0X</code>” (rather than “<code class=Li>0x</code>”), the letters “<code class=Li>ABCDEF</code>” (rather than “<code class=Li>abcdef</code>”) to represent the hex digits, and the letter ‘<code class=Li>P</code>’ (rather than ‘<code class=Li>p</code>’) to separate the mantissa and exponent. <p class=Pp>Note that there may be multiple valid ways to represent floating-point numbers in this hexadecimal format. For example, <code class=Li>0x1.92p+1</code>, <code class=Li>0x3.24p+0</code>, <code class=Li>0x6.48p-1</code>, and <code class=Li>0xc.9p-2</code> are all equivalent. <span class=Ux>FreeBSD 8.0</span> and later always prints finite non-zero numbers using ‘<code class=Li>1</code>’ as the digit before the hexadecimal point. Zeroes are always represented with a mantissa of 0 (preceded by a ‘<code class=Li>-</code>’ if appropriate) and an exponent of <code class=Li>+0</code>.</p></dd><dt><a class=permalink href=#C><code class=Cm id=C>C</code></a></dt><dd>Treated as <code class=Cm>c</code> with the <code class=Cm>l</code> (ell) modifier.</dd><dt><a class=permalink href=#c_2><code class=Cm id=c_2>c</code></a></dt><dd>The <var class=Vt>int</var> argument is converted to an <var class=Vt>unsigned char</var>, and the resulting character is written. <p class=Pp>If the <code class=Cm>l</code> (ell) modifier is used, the <var class=Vt>wint_t</var> argument shall be converted to a <var class=Vt>wchar_t</var>, and the (potentially multi-byte) sequence representing the single wide character is written, including any shift sequences. If a shift sequence is used, the shift state is also restored to the original state after the character.</p></dd><dt><a class=permalink href=#S><code class=Cm id=S>S</code></a></dt><dd>Treated as <code class=Cm>s</code> with the <code class=Cm>l</code> (ell) modifier.</dd><dt><a class=permalink href=#s_2><code class=Cm id=s_2>s</code></a></dt><dd>The <var class=Vt>char *</var> argument is expected to be a pointer to an array of character type (pointer to a string). Characters from the array are written up to (but not including) a terminating <code class=Dv>NUL</code> character; if a precision is specified, no more than the number specified are written. If a precision is given, no null character need be present; if the precision is not specified, or is greater than the size of the array, the array must contain a terminating <code class=Dv>NUL</code> character. <p class=Pp>If the <code class=Cm>l</code> (ell) modifier is used, the <var class=Vt>wchar_t *</var> argument is expected to be a pointer to an array of wide characters (pointer to a wide string). For each wide character in the string, the (potentially multi-byte) sequence representing the wide character is written, including any shift sequences. If any shift sequence is used, the shift state is also restored to the original state after the string. Wide characters from the array are written up to (but not including) a terminating wide <code class=Dv>NUL</code> character; if a precision is specified, no more than the number of bytes specified are written (including shift sequences). Partial characters are never written. If a precision is given, no null character need be present; if the precision is not specified, or is greater than the number of bytes required to render the multibyte representation of the string, the array must contain a terminating wide <code class=Dv>NUL</code> character.</p></dd><dt><a class=permalink href=#p><code class=Cm id=p>p</code></a></dt><dd>The <var class=Vt>void *</var> pointer argument is printed in hexadecimal (as if by ‘<code class=Li>%#x</code>’ or ‘<code class=Li>%#lx</code>’).</dd><dt><a class=permalink href=#n_2><code class=Cm id=n_2>n</code></a></dt><dd>The number of characters written so far is stored into the integer indicated by the <var class=Vt>int *</var> (or variant) pointer argument. No argument is converted.</dd><dt><a class=permalink href=#m><code class=Cm id=m>m</code></a></dt><dd>Print the string representation of the error code stored in the <code class=Dv>errno</code> variable at the beginning of the call, as returned by <a class=Xr href=strerror.3.html>strerror(3)</a>. No argument is taken.</dd><dt><a class=permalink href=#_><code class=Cm id=_>%</code></a></dt><dd>A ‘<code class=Li>%</code>’ is written. No argument is converted. The complete conversion specification is ‘<code class=Li>%%</code>’.</dd></dl><p class=Pp>The decimal point character is defined in the program's locale (category <code class=Dv>LC_NUMERIC</code>).</p><p class=Pp>In no case does a non-existent or small field width cause truncation of a numeric field; if the result of a conversion is wider than the field width, the field is expanded to contain the conversion result.</p></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> These functions return the number of characters printed (not including the trailing ‘<code class=Li>\0</code>’ used to end output to strings), except for <code class=Fn>snprintf</code>() and <code class=Fn>vsnprintf</code>(), which return the number of characters that would have been printed if the <var class=Fa>size</var> were unlimited (again, not including the final ‘<code class=Li>\0</code>’). These functions return a negative value if an error occurs. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> To print a date and time in the form “<code class=Li>Sunday, July 3, 10:02</code>”, where <var class=Fa>weekday</var> and <var class=Fa>month</var> are pointers to strings: <div class="Bd Pp Bd-indent"><pre>
#include &lt;stdio.h&gt;
fprintf(stdout, "%s, %s %d, %.2d:%.2d\n",
	weekday, month, day, hour, min);
</pre></div><p class=Pp>To print pi to five decimal places:</p><div class="Bd Pp Bd-indent"><pre>
#include &lt;math.h&gt;
#include &lt;stdio.h&gt;
fprintf(stdout, "pi = %.5f\n", 4 * atan(1.0));
</pre></div><p class=Pp>To allocate a 128 byte string and print into it:</p><div class="Bd Pp Bd-indent"><pre>
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdarg.h&gt;
char *newfmt(const char *fmt, ...)
{
	char *p;
	va_list ap;
	if ((p = malloc(128)) == NULL)
		return (NULL);
	va_start(ap, fmt);
	(void) vsnprintf(p, 128, fmt, ap);
	va_end(ap);
	return (p);
}
</pre></div></section><section class=Sh><h2 class=Sh id=COMPATIBILITY><a class=permalink href=#COMPATIBILITY>COMPATIBILITY</a></h2> The conversion formats <code class=Cm>%D</code>, <code class=Cm>%O</code>, and <code class=Cm>%U</code> are not standard and are provided only for backward compatibility. The conversion format <code class=Cm>%m</code> is also not standard and provides the popular extension from the GNU C library. <p class=Pp>The effect of padding the <code class=Cm>%p</code> format with zeros (either by the <code class=Cm>0</code> flag or by specifying a precision), and the benign effect (i.e., none) of the <code class=Cm>#</code> flag on <code class=Cm>%n</code> and <code class=Cm>%p</code> conversions, as well as other nonsensical combinations such as <code class=Cm>%Ld</code>, are not standard; such combinations should be avoided.</p></section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> In addition to the errors documented for the <a class=Xr href=write.2.html>write(2)</a> system call, the <code class=Fn>printf</code>() family of functions may fail if: <dl class=Bl-tag><dt>[<a class=permalink href=#EILSEQ><code class=Er id=EILSEQ>EILSEQ</code></a>]</dt><dd>An invalid wide character code was encountered.</dd><dt>[<a class=permalink href=#ENOMEM><code class=Er id=ENOMEM>ENOMEM</code></a>]</dt><dd>Insufficient storage space is available.</dd><dt>[<a class=permalink href=#EOVERFLOW><code class=Er id=EOVERFLOW>EOVERFLOW</code></a>]</dt><dd>The <var class=Fa>size</var> argument exceeds <code class=Dv>INT_MAX + 1</code>, or the return value would be too large to be represented by an <var class=Vt>int</var>.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=printf.1.html>printf(1)</a>, <a class=Xr href=errno.2.html>errno(2)</a>, <a class=Xr href=fmtcheck.3.html>fmtcheck(3)</a>, <a class=Xr href=scanf.3.html>scanf(3)</a>, <a class=Xr href=setlocale.3.html>setlocale(3)</a>, <a class=Xr href=strerror.3.html>strerror(3)</a>, <a class=Xr href=wprintf.3.html>wprintf(3)</a></section><section class=Sh><h2 class=Sh id=STANDARDS><a class=permalink href=#STANDARDS>STANDARDS</a></h2> Subject to the caveats noted in the <a class=Sx href=#BUGS>BUGS</a> section below, the <code class=Fn>fprintf</code>(), <code class=Fn>printf</code>(), <code class=Fn>sprintf</code>(), <code class=Fn>vprintf</code>(), <code class=Fn>vfprintf</code>(), and <code class=Fn>vsprintf</code>() functions conform to <span class=St>ANSI X3.159-1989 (“ANSI C89”)</span> and <span class=St>ISO/IEC 9899:1999 (“ISO C99”)</span>. With the same reservation, the <code class=Fn>snprintf</code>() and <code class=Fn>vsnprintf</code>() functions conform to <span class=St>ISO/IEC 9899:1999 (“ISO C99”)</span>, while <code class=Fn>dprintf</code>() and <code class=Fn>vdprintf</code>() conform to <span class=St>IEEE Std 1003.1-2008 (“POSIX.1”)</span>. </section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The functions <code class=Fn>asprintf</code>() and <code class=Fn>vasprintf</code>() first appeared in the GNU C library. These were implemented by <span class=An>Peter Wemm</span> &lt;<a class=Mt href=mailto:peter@FreeBSD.org>peter@FreeBSD.org</a>&gt; in <span class=Ux>FreeBSD 2.2</span>, but were later replaced with a different implementation from <span class=Ux>OpenBSD 2.3</span> by <span class=An>Todd C. Miller</span> &lt;<a class=Mt href=mailto:Todd.Miller@courtesan.com>Todd.Miller@courtesan.com</a>&gt;. The <code class=Fn>dprintf</code>() and <code class=Fn>vdprintf</code>() functions were added in <span class=Ux>FreeBSD 8.0</span>. The <code class=Cm>%m</code> format extension first appeared in the GNU C library, and was implemented in <span class=Ux>FreeBSD 12.0</span>. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The <code class=Nm>printf</code> family of functions do not correctly handle multibyte characters in the <var class=Fa>format</var> argument. </section><section class=Sh><h2 class=Sh id=SECURITY_CONSIDERATIONS><a class=permalink href=#SECURITY_CONSIDERATIONS>SECURITY CONSIDERATIONS</a></h2> The <code class=Fn>sprintf</code>() and <code class=Fn>vsprintf</code>() functions are easily misused in a manner which enables malicious users to arbitrarily change a running program's functionality through a buffer overflow attack. Because <code class=Fn>sprintf</code>() and <code class=Fn>vsprintf</code>() assume an infinitely long string, callers must be careful not to overflow the actual space; this is often hard to assure. For safety, programmers should use the <code class=Fn>snprintf</code>() interface instead. For example: <div class="Bd Pp"><pre>
void
foo(const char *arbitrary_string, const char *and_another)
{
	char onstack[8];

#ifdef BAD
	/*
	 * This first sprintf is bad behavior.  Do not use sprintf!
	 */
	sprintf(onstack, "%s, %s", arbitrary_string, and_another);
#else
	/*
	 * The following two lines demonstrate better use of
	 * snprintf().
	 */
	snprintf(onstack, sizeof(onstack), "%s, %s", arbitrary_string,
	    and_another);
#endif
}
</pre></div><p class=Pp>The <code class=Fn>printf</code>() and <code class=Fn>sprintf</code>() family of functions are also easily misused in a manner allowing malicious users to arbitrarily change a running program's functionality by either causing the program to print potentially sensitive data “left on the stack”, or causing it to generate a memory fault or bus error by dereferencing an invalid pointer.</p><p class=Pp><code class=Cm>%n</code> can be used to write arbitrary data to potentially carefully-selected addresses. Programmers are therefore strongly advised to never pass untrusted strings as the <var class=Fa>format</var> argument, as an attacker can put format specifiers in the string to mangle your stack, leading to a possible security hole. This holds true even if the string was built using a function like <code class=Fn>snprintf</code>(), as the resulting string may still contain user-supplied conversion specifiers for later interpolation by <code class=Fn>printf</code>().</p><p class=Pp>Always use the proper secure idiom:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>snprintf(buffer, sizeof(buffer), "%s", string);</code></div></section></div><table class=foot><tr><td class=foot-date>May 22, 2018</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>