<!DOCTYPE html>
<html><head><meta charset=utf-8><title>fdlopen(3)</title><keywords content=man,fdlopen></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>fdlopen(3)</h1><table class=head><tr><td class=head-ltitle>DLOPEN(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>DLOPEN(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>dlopen</code>, <code class=Nm>fdlopen</code>, <code class=Nm>dlsym</code>, <code class=Nm>dlvsym</code>, <code class=Nm>dlfunc</code>, <code class=Nm>dlerror</code>, <code class=Nm>dlclose</code> — <div class=Nd>programmatic interface to the dynamic linker</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/dlfcn.h.html>dlfcn.h</a>&gt;</code><p class=Pp><var class=Ft>void *</var><br><code class=Fn>dlopen</code>(<var class=Fa style="white-space: nowrap;">const char *path</var>, <var class=Fa style="white-space: nowrap;">int mode</var>);</p><p class=Pp><var class=Ft>void *</var><br><code class=Fn>fdlopen</code>(<var class=Fa style="white-space: nowrap;">int fd</var>, <var class=Fa style="white-space: nowrap;">int mode</var>);</p><p class=Pp><var class=Ft>void *</var><br><code class=Fn>dlsym</code>(<var class=Fa style="white-space: nowrap;">void * restrict handle</var>, <var class=Fa style="white-space: nowrap;">const char * restrict symbol</var>);</p><p class=Pp><var class=Ft>void *</var><br><code class=Fn>dlvsym</code>(<var class=Fa style="white-space: nowrap;">void * restrict handle</var>, <var class=Fa style="white-space: nowrap;">const char * restrict symbol</var>, <var class=Fa style="white-space: nowrap;">const char * restrict version</var>);</p><p class=Pp><var class=Ft>dlfunc_t</var><br><code class=Fn>dlfunc</code>(<var class=Fa style="white-space: nowrap;">void * restrict handle</var>, <var class=Fa style="white-space: nowrap;">const char * restrict symbol</var>);</p><p class=Pp><var class=Ft>char *</var><br><code class=Fn>dlerror</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>dlclose</code>(<var class=Fa style="white-space: nowrap;">void *handle</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> These functions provide a simple programmatic interface to the services of the dynamic linker. Operations are provided to add new shared objects to a program's address space, to obtain the address bindings of symbols defined by such objects, and to remove such objects when their use is no longer required. <p class=Pp>The <code class=Fn>dlopen</code>() function provides access to the shared object in <var class=Fa>path</var>, returning a descriptor that can be used for later references to the object in calls to <code class=Fn>dlsym</code>(), <code class=Fn>dlvsym</code>() and <code class=Fn>dlclose</code>(). If <var class=Fa>path</var> was not in the address space prior to the call to <code class=Fn>dlopen</code>(), it is placed in the address space. When an object is first loaded into the address space in this way, its function <code class=Fn>_init</code>(), if any, is called by the dynamic linker. If <var class=Fa>path</var> has already been placed in the address space in a previous call to <code class=Fn>dlopen</code>(), it is not added a second time, although a reference count of <code class=Fn>dlopen</code>() operations on <var class=Fa>path</var> is maintained. A null pointer supplied for <var class=Fa>path</var> is interpreted as a reference to the main executable of the process. The <var class=Fa>mode</var> argument controls the way in which external function references from the loaded object are bound to their referents. It must contain one of the following values, possibly ORed with additional flags which will be described subsequently:</p><dl class=Bl-tag><dt><a class=permalink href=#RTLD_LAZY><code class=Dv id=RTLD_LAZY>RTLD_LAZY</code></a></dt><dd>Each external function reference is resolved when the function is first called.</dd><dt><a class=permalink href=#RTLD_NOW><code class=Dv id=RTLD_NOW>RTLD_NOW</code></a></dt><dd>All external function references are bound immediately by <code class=Fn>dlopen</code>().</dd></dl><p class=Pp><code class=Dv>RTLD_LAZY</code> is normally preferred, for reasons of efficiency. However, <code class=Dv>RTLD_NOW</code> is useful to ensure that any undefined symbols are discovered during the call to <code class=Fn>dlopen</code>().</p><p class=Pp>One of the following flags may be ORed into the <var class=Fa>mode</var> argument:</p><dl class=Bl-tag><dt><a class=permalink href=#RTLD_GLOBAL><code class=Dv id=RTLD_GLOBAL>RTLD_GLOBAL</code></a></dt><dd>Symbols from this shared object and its directed acyclic graph (DAG) of needed objects will be available for resolving undefined references from all other shared objects.</dd><dt><a class=permalink href=#RTLD_LOCAL><code class=Dv id=RTLD_LOCAL>RTLD_LOCAL</code></a></dt><dd>Symbols in this shared object and its DAG of needed objects will be available for resolving undefined references only from other objects in the same DAG. This is the default, but it may be specified explicitly with this flag.</dd><dt><a class=permalink href=#RTLD_TRACE><code class=Dv id=RTLD_TRACE>RTLD_TRACE</code></a></dt><dd>When set, causes dynamic linker to exit after loading all objects needed by this shared object and printing a summary which includes the absolute pathnames of all objects, to standard output. With this flag <code class=Fn>dlopen</code>() will return to the caller only in the case of error.</dd><dt><a class=permalink href=#RTLD_NODELETE><code class=Dv id=RTLD_NODELETE>RTLD_NODELETE</code></a></dt><dd>Prevents unload of the loaded object on <code class=Fn>dlclose</code>(). The same behaviour may be requested by <code class=Fl>-z nodelete</code> option of the static linker <a class=Xr href=ld.1.html>ld(1)</a>.</dd><dt><a class=permalink href=#RTLD_NOLOAD><code class=Dv id=RTLD_NOLOAD>RTLD_NOLOAD</code></a></dt><dd>Only return valid handle for the object if it is already loaded in the process address space, otherwise <code class=Dv>NULL</code> is returned. Other mode flags may be specified, which will be applied for promotion for the found object.</dd><dt><a class=permalink href=#RTLD_DEEPBIND><code class=Dv id=RTLD_DEEPBIND>RTLD_DEEPBIND</code></a></dt><dd>Symbols from the loaded library are put before global symbols when resolving symbolic references originated from the library.</dd></dl><p class=Pp>If <code class=Fn>dlopen</code>() fails, it returns a null pointer, and sets an error condition which may be interrogated with <code class=Fn>dlerror</code>().</p><p class=Pp>The <code class=Fn>fdlopen</code>() function is similar to <code class=Fn>dlopen</code>(), but it takes the file descriptor argument <var class=Fa>fd</var>, which is used for the file operations needed to load an object into the address space. The file descriptor <var class=Fa>fd</var> is not closed by the function regardless a result of execution, but a duplicate of the file descriptor is. This may be important if a <a class=Xr href=lockf.3.html>lockf(3)</a> lock is held on the passed descriptor. The <var class=Fa>fd</var> argument -1 is interpreted as a reference to the main executable of the process, similar to <var class=Va>NULL</var> value for the <var class=Fa>name</var> argument to <code class=Fn>dlopen</code>(). The <code class=Fn>fdlopen</code>() function can be used by the code that needs to perform additional checks on the loaded objects, to prevent races with symlinking or renames.</p><p class=Pp>The <code class=Fn>dlsym</code>() function returns the address binding of the symbol described in the null-terminated character string <var class=Fa>symbol</var>, as it occurs in the shared object identified by <var class=Fa>handle</var>. The symbols exported by objects added to the address space by <code class=Fn>dlopen</code>() can be accessed only through calls to <code class=Fn>dlsym</code>(). Such symbols do not supersede any definition of those symbols already present in the address space when the object is loaded, nor are they available to satisfy normal dynamic linking references.</p><p class=Pp>If <code class=Fn>dlsym</code>() is called with the special <var class=Fa>handle</var><code class=Dv>NULL</code>, it is interpreted as a reference to the executable or shared object from which the call is being made. Thus a shared object can reference its own symbols.</p><p class=Pp>If <code class=Fn>dlsym</code>() is called with the special <var class=Fa>handle</var><code class=Dv>RTLD_DEFAULT</code>, the search for the symbol follows the algorithm used for resolving undefined symbols when objects are loaded. The objects searched are as follows, in the given order:</p><ol class=Bl-enum><li>The referencing object itself (or the object from which the call to <code class=Fn>dlsym</code>() is made), if that object was linked using the <code class=Fl>-Bsymbolic</code> option to <a class=Xr href=ld.1.html>ld(1)</a>.</li><li>All objects loaded at program start-up.</li><li>All objects loaded via <code class=Fn>dlopen</code>() with the <code class=Dv>RTLD_GLOBAL</code> flag set in the <var class=Fa>mode</var> argument.</li><li>All objects loaded via <code class=Fn>dlopen</code>() which are in needed-object DAGs that also contain the referencing object.</li></ol><p class=Pp>If <code class=Fn>dlsym</code>() is called with the special <var class=Fa>handle</var><code class=Dv>RTLD_NEXT</code>, then the search for the symbol is limited to the shared objects which were loaded after the one issuing the call to <code class=Fn>dlsym</code>(). Thus, if the function is called from the main program, all the shared libraries are searched. If it is called from a shared library, all subsequent shared libraries are searched. <code class=Dv>RTLD_NEXT</code> is useful for implementing wrappers around library functions. For example, a wrapper function <code class=Fn>getpid</code>() could access the “real” <code class=Fn>getpid</code>() with <code class=Li>dlsym(RTLD_NEXT, "getpid")</code>. (Actually, the <code class=Fn>dlfunc</code>() interface, below, should be used, since <code class=Fn>getpid</code>() is a function and not a data object.)</p><p class=Pp>If <code class=Fn>dlsym</code>() is called with the special <var class=Fa>handle</var><code class=Dv>RTLD_SELF</code>, then the search for the symbol is limited to the shared object issuing the call to <code class=Fn>dlsym</code>() and those shared objects which were loaded after it.</p><p class=Pp>The <code class=Fn>dlsym</code>() function returns a null pointer if the symbol cannot be found, and sets an error condition which may be queried with <code class=Fn>dlerror</code>().</p><p class=Pp>The <code class=Fn>dlvsym</code>() function behaves like <code class=Fn>dlsym</code>(), but takes an extra argument <var class=Fa>version</var>: a null-terminated character string which is used to request a specific version of <var class=Fa>symbol</var>.</p><p class=Pp>The <code class=Fn>dlfunc</code>() function implements all of the behavior of <code class=Fn>dlsym</code>(), but has a return type which can be cast to a function pointer without triggering compiler diagnostics. (The <code class=Fn>dlsym</code>() function returns a data pointer; in the C standard, conversions between data and function pointer types are undefined. Some compilers and <a class=Xr href=lint.1.html>lint(1)</a> utilities warn about such casts.) The precise return type of <code class=Fn>dlfunc</code>() is unspecified; applications must cast it to an appropriate function pointer type.</p><p class=Pp>The <code class=Fn>dlerror</code>() function returns a null-terminated character string describing the last error that occurred during a call to <code class=Fn>dlopen</code>(), <code class=Fn>dladdr</code>(), <code class=Fn>dlinfo</code>(), <code class=Fn>dlsym</code>(), <code class=Fn>dlvsym</code>(), <code class=Fn>dlfunc</code>(), or <code class=Fn>dlclose</code>(). If no such error has occurred, <code class=Fn>dlerror</code>() returns a null pointer. At each call to <code class=Fn>dlerror</code>(), the error indication is reset. Thus in the case of two calls to <code class=Fn>dlerror</code>(), where the second call follows the first immediately, the second call will always return a null pointer.</p><p class=Pp>The <code class=Fn>dlclose</code>() function deletes a reference to the shared object referenced by <var class=Fa>handle</var>. If the reference count drops to 0, the object is removed from the address space, and <var class=Fa>handle</var> is rendered invalid. Just before removing a shared object in this way, the dynamic linker calls the object's <code class=Fn>_fini</code>() function, if such a function is defined by the object. If <code class=Fn>dlclose</code>() is successful, it returns a value of 0. Otherwise it returns -1, and sets an error condition that can be interrogated with <code class=Fn>dlerror</code>().</p><p class=Pp>The object-intrinsic functions <code class=Fn>_init</code>() and <code class=Fn>_fini</code>() are called with no arguments, and are not expected to return values.</p></section><section class=Sh><h2 class=Sh id=NOTES><a class=permalink href=#NOTES>NOTES</a></h2> ELF executables need to be linked using the <code class=Fl>-export-dynamic</code> option to <a class=Xr href=ld.1.html>ld(1)</a> for symbols defined in the executable to become visible to <code class=Fn>dlsym</code>(), <code class=Fn>dlvsym</code>() or <code class=Fn>dlfunc</code>() <p class=Pp>Other ELF platforms require linking with <span class=Lb>Dynamic Linker Services Filter (libdl, -ldl)</span> to provide <code class=Fn>dlopen</code>() and other functions. <span class=Ux>FreeBSD</span> does not require linking with the library, but supports it for compatibility.</p><p class=Pp>In previous implementations, it was necessary to prepend an underscore to all external symbols in order to gain symbol compatibility with object code compiled from the C language. This is still the case when using the (obsolete) <code class=Fl>-aout</code> option to the C language compiler.</p></section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> The <code class=Fn>dlopen</code>(), <code class=Fn>fdlopen</code>(), <code class=Fn>dlsym</code>(), <code class=Fn>dlvsym</code>(), and <code class=Fn>dlfunc</code>() functions return a null pointer in the event of errors. The <code class=Fn>dlclose</code>() function returns 0 on success, or -1 if an error occurred. Whenever an error has been detected, a message detailing it can be retrieved via a call to <code class=Fn>dlerror</code>(). </section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=ld.1.html>ld(1)</a>, <a class=Xr href=rtld.1.html>rtld(1)</a>, <a class=Xr href=dladdr.3.html>dladdr(3)</a>, <a class=Xr href=dlinfo.3.html>dlinfo(3)</a>, <a class=Xr href=link.5.html>link(5)</a></section></div><table class=foot><tr><td class=foot-date>May 14, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>