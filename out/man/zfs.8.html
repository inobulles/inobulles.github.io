<!DOCTYPE html>
<html><head><meta charset=utf-8><title>zfs(8)</title><keywords content=man,zfs></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>zfs(8)</h1><table class=head><tr><td class=head-ltitle>ZFS(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>ZFS(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>zfs</code> — <div class=Nd>configures ZFS file systems</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>zfs</code></td><td>[<code class=Fl>-?</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>create</code> [<code class=Fl>-pu</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>create</code> [<code class=Fl>-ps</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <code class=Fl>-V</code><var class=Ar>size volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>destroy</code> [<code class=Fl>-fnpRrv</code>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>destroy</code> [<code class=Fl>-dnpRrv</code>] <var class=Ar>filesystem</var>|volume@snap[%<var class=Ar>snap</var>][,<var class=Ar>snap</var>[%<var class=Ar>snap</var>]][,...]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>destroy</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var>#<var class=Ar>bookmark</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>snapshot</code>|<code class=Cm>snap</code> [<code class=Fl>-r</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem@snapname</var>|<var class=Ar>volume@snapname</var><var class=Ar>filesystem@snapname</var>|<var class=Ar>volume@snapname</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rollback</code> [<code class=Fl>-rRf</code>] <var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>clone</code> [<code class=Fl>-p</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>snapshot filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>promote</code><var class=Ar>clone-filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rename</code> [<code class=Fl>-f</code>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rename</code> [<code class=Fl>-f</code>] <code class=Fl>-p</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rename</code><code class=Fl>-r</code><var class=Ar>snapshot snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rename</code><var class=Ar>bookmark bookmark</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>rename</code><code class=Fl>-u</code> [<code class=Fl>-p</code>] <var class=Ar>filesystem filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>list</code> [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,property]...] [<code class=Fl>-t</code><var class=Ar>type</var>[,type]...] [<code class=Fl>-s</code><var class=Ar>property</var>]... [<code class=Fl>-S</code><var class=Ar>property</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var> |<var class=Ar>bookmark</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>remap</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value</var> [<var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>get</code> [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>all</var> | <var class=Ar>field</var>[,<var class=Ar>field</var>]...] [<code class=Fl>-t</code><var class=Ar>type</var>[, <var class=Ar>type</var>]...] [<code class=Fl>-s</code><var class=Ar>source</var>[,<var class=Ar>source</var>]...] <var class=Ar>all</var> | <var class=Ar>property</var>[,<var class=Ar>property</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>inherit</code> [<code class=Fl>-rS</code>] <var class=Ar>property</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>upgrade</code> [<code class=Fl>-v</code>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>upgrade</code> [<code class=Fl>-r</code>] [<code class=Fl>-V</code><var class=Ar>version</var>] <code class=Fl>-a</code> | <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>userspace</code> [<code class=Fl>-Hinp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,<var class=Ar>field</var>]...] [<code class=Fl>-s</code><var class=Ar>field</var>]... [<code class=Fl>-S</code><var class=Ar>field</var>]... [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>groupspace</code> [<code class=Fl>-Hinp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,field]...] [<code class=Fl>-s</code><var class=Ar>field</var>]... [<code class=Fl>-S</code><var class=Ar>field</var>]... [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>mount</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>mount</code> [<code class=Fl>-vO</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,<var class=Ar>property</var>]...] <code class=Fl>-a</code> | <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unmount</code>|<code class=Cm>umount</code> [<code class=Fl>-f</code>] <code class=Fl>-a</code> | <var class=Ar>filesystem</var>|<var class=Ar>mountpoint</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>share</code><code class=Fl>-a</code> | <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unshare</code><code class=Fl>-a</code> | <var class=Ar>filesystem</var>|<var class=Ar>mountpoint</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>bookmark</code><var class=Ar>snapshot</var><var class=Ar>bookmark</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>send</code> [<code class=Fl>-DLPRVcenpv</code>] [<code class=Fl>-i</code><var class=Ar>snapshot</var> | <code class=Fl>-I</code><var class=Ar>snapshot</var>] <var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>send</code> [<code class=Fl>-LPcenv</code>] [<code class=Fl>-i</code><var class=Ar>snapshot</var>|<var class=Ar>bookmark</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>send</code> [<code class=Fl>-PVenv</code>] <code class=Fl>-t</code><var class=Ar>receive_resume_token</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code>|<code class=Cm>recv</code> [<code class=Fl>-vnsFu</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code>|<code class=Cm>recv</code> [<code class=Fl>-vnsFu</code>] [<code class=Fl>-d</code> | <code class=Fl>-e</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] <var class=Ar>filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>receive</code>|<code class=Cm>recv</code><code class=Fl>-A</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>allow</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>allow</code> [<code class=Fl>-ldug</code>] <var class=Ar>user</var>|<var class=Ar>group</var>[,<var class=Ar>user</var>|<var class=Ar>group</var>]... <var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>allow</code> [<code class=Fl>-ld</code>] <code class=Fl>-e</code>|<code class=Cm>everyone</code><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>allow</code><code class=Fl>-c</code><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>allow</code><code class=Fl>-s</code><var class=Ar>@setname</var><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unallow</code> [<code class=Fl>-rldug</code>] <var class=Ar>user</var>|<var class=Ar>group</var>[,<var class=Ar>user</var>|<var class=Ar>group</var>]... [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unallow</code> [<code class=Fl>-rld</code>] <code class=Fl>-e</code>|<code class=Cm>everyone</code> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unallow</code> [<code class=Fl>-r</code>] <code class=Fl>-c</code> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unallow</code> [<code class=Fl>-r</code>] <code class=Fl>-s</code><var class=Ar>@setname</var> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>hold</code> [<code class=Fl>-r</code>] <var class=Ar>tag snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>holds</code> [<code class=Fl>-Hp</code>] [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>release</code> [<code class=Fl>-r</code>] <var class=Ar>tag snapshot</var>...</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>diff</code> [<code class=Fl>-FHt</code>] <var class=Ar>snapshot</var> [<var class=Ar>snapshot</var>|<var class=Ar>filesystem</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>program</code> [<code class=Fl>-jn</code>] [<code class=Fl>-t</code><var class=Ar>timeout</var>] [<code class=Fl>-m</code><var class=Ar>memory_limit</var>] <var class=Ar>pool script</var> [<var class=Ar>arg1</var><span class=No>...</span>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>jail</code><var class=Ar>jailid</var>|<var class=Ar>jailname filesystem</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>zfs</code></td><td><code class=Cm>unjail</code><var class=Ar>jailid</var>|<var class=Ar>jailname filesystem</var></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>zfs</code> command configures ZFS datasets within a ZFS storage pool, as described in <a class=Xr href=zpool.8.html>zpool(8)</a>. A dataset is identified by a unique path within the ZFS namespace. For example: <div class="Bd Pp Bd-indent"><span class=No>pool/</span>{filesystem,volume,snapshot}</div><p class=Pp>where the maximum length of a dataset name is <code class=Dv>MAXNAMELEN</code> (256 bytes) and the maximum amount of nesting allowed in a path is 50 levels deep.</p><p class=Pp>A dataset can be one of the following:</p><dl class=Bl-hang><dt><b class=Sy>file system</b></dt><dd>A ZFS dataset of type <i class=Em>filesystem</i> can be mounted within the standard system namespace and behaves like other file systems. While ZFS file systems are designed to be POSIX compliant, known issues exist that prevent compliance in some cases. Applications that depend on standards conformance might fail due to nonstandard behavior when checking file system free space.</dd><dt><b class=Sy>volume</b></dt><dd>A logical volume exported as a raw or block device. This type of dataset should only be used under special circumstances. File systems are typically used in most environments.</dd><dt><b class=Sy>snapshot</b></dt><dd>A read-only version of a file system or volume at a given point in time. It is specified as <i class=Em>filesystem@name</i> or <i class=Em>volume@name</i>.</dd></dl><section class=Ss><h2 class=Ss id=ZFS_File_System_Hierarchy><a class=permalink href=#ZFS_File_System_Hierarchy>ZFS File System Hierarchy</a></h2> A ZFS storage pool is a logical collection of devices that provide space for datasets. A storage pool is also the root of the ZFS file system hierarchy. <p class=Pp>The root of the pool can be accessed as a file system, such as mounting and unmounting, taking snapshots, and setting properties. The physical storage characteristics, however, are managed by the <a class=Xr href=zpool.8.html>zpool(8)</a> command.</p><p class=Pp>See <a class=Xr href=zpool.8.html>zpool(8)</a> for more information on creating and administering pools.</p></section><section class=Ss><h2 class=Ss id=Snapshots><a class=permalink href=#Snapshots>Snapshots</a></h2> A snapshot is a read-only copy of a file system or volume. Snapshots can be created extremely quickly, and initially consume no additional space within the pool. As data within the active dataset changes, the snapshot consumes more data than would otherwise be shared with the active dataset. <p class=Pp>Snapshots can have arbitrary names. Snapshots of volumes can be cloned or rolled back, but cannot be accessed independently.</p><p class=Pp>File system snapshots can be accessed under the <span class=Pa>.zfs/snapshot</span> directory in the root of the file system. Snapshots are automatically mounted on demand and may be unmounted at regular intervals. The visibility of the <span class=Pa>.zfs</span> directory can be controlled by the <b class=Sy>snapdir</b> property.</p></section><section class=Ss><h2 class=Ss id=Clones><a class=permalink href=#Clones>Clones</a></h2> A clone is a writable volume or file system whose initial contents are the same as another dataset. As with snapshots, creating a clone is nearly instantaneous, and initially consumes no additional space. <p class=Pp>Clones can only be created from a snapshot. When a snapshot is cloned, it creates an implicit dependency between the parent and child. Even though the clone is created somewhere else in the dataset hierarchy, the original snapshot cannot be destroyed as long as a clone exists. The <b class=Sy>origin</b> property exposes this dependency, and the <code class=Cm>destroy</code> command lists any such dependencies, if they exist.</p><p class=Pp>The clone parent-child dependency relationship can be reversed by using the <code class=Cm>promote</code> subcommand. This causes the "origin" file system to become a clone of the specified file system, which makes it possible to destroy the file system that the clone was created from.</p></section><section class=Ss><h2 class=Ss id=Mount_Points><a class=permalink href=#Mount_Points>Mount Points</a></h2> Creating a ZFS file system is a simple operation, so the number of file systems per system is likely to be numerous. To cope with this, ZFS automatically manages mounting and unmounting file systems without the need to edit the <span class=Pa>/etc/fstab</span> file. All automatically managed file systems are mounted by ZFS at boot time. <p class=Pp>By default, file systems are mounted under <span class=Pa>/path</span>, where <var class=Ar>path</var> is the name of the file system in the ZFS namespace. Directories are created and destroyed as needed.</p><p class=Pp>A file system can also have a mount point set in the <b class=Sy>mountpoint</b> property. This directory is created as needed, and ZFS automatically mounts the file system when the “<code class=Nm>zfs</code><code class=Cm>mount</code><code class=Fl>-a</code>” command is invoked (without editing <span class=Pa>/etc/fstab</span>). The <b class=Sy>mountpoint</b> property can be inherited, so if <i class=Em>pool/home</i> has a mount point of <span class=Pa>/home</span>, then <i class=Em>pool/home/user</i> automatically inherits a mount point of <span class=Pa>/home/user</span>.</p><p class=Pp>A file system <b class=Sy>mountpoint</b> property of <code class=Cm>none</code> prevents the file system from being mounted.</p><p class=Pp>If needed, ZFS file systems can also be managed with traditional tools (<a class=Xr href=mount.8.html>mount(8)</a>, <a class=Xr href=umount.8.html>umount(8)</a>, <a class=Xr href=fstab.5.html>fstab(5)</a>). If a file system's mount point is set to <code class=Cm>legacy</code>, ZFS makes no attempt to manage the file system, and the administrator is responsible for mounting and unmounting the file system.</p></section><section class=Ss><h2 class=Ss id=Jails><a class=permalink href=#Jails>Jails</a></h2><span class=No>A</span> ZFS dataset can be attached to a jail by using the “<code class=Nm>zfs</code><code class=Cm>jail</code>” subcommand. You cannot attach a dataset to one jail and the children of the same dataset to another jail. You can also not attach the root file system of the jail or any dataset which needs to be mounted before the zfs rc script is run inside the jail, as it would be attached unmounted until it is mounted from the rc script inside the jail. To allow management of the dataset from within a jail, the <b class=Sy>jailed</b> property has to be set and the jail needs access to the <span class=Pa>/dev/zfs</span> device. The <b class=Sy>quota</b> property cannot be changed from within a jail. See <a class=Xr href=jail.8.html>jail(8)</a> for information on how to allow mounting ZFS datasets from within a jail. <p class=Pp><span class=No>A</span> ZFS dataset can be detached from a jail using the “<code class=Nm>zfs</code><code class=Cm>unjail</code>” subcommand.</p><p class=Pp>After a dataset is attached to a jail and the jailed property is set, a jailed file system cannot be mounted outside the jail, since the jail administrator might have set the mount point to an unacceptable value.</p></section><section class=Ss><h2 class=Ss id=Deduplication><a class=permalink href=#Deduplication>Deduplication</a></h2> Deduplication is the process for removing redundant data at the block-level, reducing the total amount of data stored. If a file system has the <code class=Cm>dedup</code> property enabled, duplicate data blocks are removed synchronously. The result is that only unique data is stored and common components are shared among files. </section><section class=Ss><h2 class=Ss id=Native_Properties><a class=permalink href=#Native_Properties>Native Properties</a></h2> Properties are divided into two types, native properties and user-defined (or "user") properties. Native properties either export internal statistics or control ZFS behavior. In addition, native properties are either editable or read-only. User properties have no effect on ZFS behavior, but you can use them to annotate datasets in a way that is meaningful in your environment. For more information about user properties, see the “<a class=Sx href=#User_Properties>User Properties</a>” section, below. <p class=Pp>Every dataset has a set of properties that export statistics about the dataset as well as control various behaviors. Properties are inherited from the parent unless overridden by the child. Some properties apply only to certain types of datasets (file systems, volumes, or snapshots).</p><p class=Pp>The values of numeric properties can be specified using human-readable suffixes (for example, <b class=Sy>k</b>, <b class=Sy>KB</b>, <b class=Sy>M</b>, <b class=Sy>Gb</b>, and so forth, up to <b class=Sy>Z</b> for zettabyte). The following are all valid (and equal) specifications:</p><div class="Bd Pp Bd-indent">1536M, 1.5g, 1.50GB</div><p class=Pp>The values of non-numeric properties are case sensitive and must be lowercase, except for <b class=Sy>mountpoint</b>, <b class=Sy>sharenfs</b>, <span class=No>and</span><b class=Sy>sharesmb</b>.</p><p class=Pp>The following native properties consist of read-only statistics about the dataset. These properties can be neither set, nor inherited. Native properties apply to all dataset types unless otherwise noted.</p><dl class=Bl-tag><dt><b class=Sy>available</b></dt><dd>The amount of space available to the dataset and all its children, assuming that there is no other activity in the pool. Because space is shared within a pool, availability can be limited by any number of factors, including physical pool size, quotas, reservations, or other datasets within the pool. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>avail</b>.</p></dd><dt><b class=Sy>compressratio</b></dt><dd>For non-snapshots, the compression ratio achieved for the <b class=Sy>used</b> space of this dataset, expressed as a multiplier. The <b class=Sy>used</b> property includes descendant datasets, and, for clones, does not include the space shared with the origin snapshot. For snapshots, the <b class=Sy>compressratio</b> is the same as the <b class=Sy>refcompressratio</b> property. Compression can be turned on by running: “<code class=Nm>zfs</code><code class=Cm>set compression=on</code><var class=Ar>dataset</var>” The default value is <code class=Cm>off</code>.</dd><dt><b class=Sy>createtxg</b></dt><dd>The transaction group (txg) in which the dataset was created. Bookmarks have the same <b class=Sy>createtxg</b> as the snapshot they are initially tied to. This property is suitable for ordering a list of snapshots, e.g. for incremental send and receive.</dd><dt><b class=Sy>creation</b></dt><dd>The time this dataset was created.</dd><dt><b class=Sy>clones</b></dt><dd>For snapshots, this property is a comma-separated list of filesystems or volumes which are clones of this snapshot. The clones' <b class=Sy>origin</b> property is this snapshot. If the <b class=Sy>clones</b> property is not empty, then this snapshot can not be destroyed (even with the <code class=Fl>-r</code> or <code class=Fl>-f</code> options).</dd><dt><b class=Sy>defer_destroy</b></dt><dd>This property is <code class=Cm>on</code> if the snapshot has been marked for deferred destroy by using the “<code class=Nm>zfs</code><code class=Cm>destroy -d</code>” command. Otherwise, the property is <code class=Cm>off</code>.</dd><dt><b class=Sy>filesystem_count</b></dt><dd>The total number of filesystems and volumes that exist under this location in the dataset tree. This value is only available when a <b class=Sy>filesystem_limit</b> has been set somewhere in the tree under which the dataset resides.</dd><dt><b class=Sy>guid</b></dt><dd>The 64 bit GUID of this dataset or bookmark which does not change over its entire lifetime. When a snapshot is sent to another pool, the received snapshot has the same GUID. Thus, the <b class=Sy>guid</b> is suitable to identify a snapshot across pools.</dd><dt><b class=Sy>logicalreferenced</b></dt><dd>The amount of space that is “logically” accessible by this dataset. See the <b class=Sy>referenced</b> property. The logical space ignores the effect of the <b class=Sy>compression</b> and <b class=Sy>copies</b> properties, giving a quantity closer to the amount of data that applications see. However, it does include space consumed by metadata. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>lrefer</b>.</p></dd><dt><b class=Sy>logicalused</b></dt><dd>The amount of space that is “logically” consumed by this dataset and all its descendents. See the <b class=Sy>used</b> property. The logical space ignores the effect of the <b class=Sy>compression</b> and <b class=Sy>copies</b> properties, giving a quantity closer to the amount of data that applications see. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>lused</b>.</p></dd><dt><b class=Sy>mounted</b></dt><dd>For file systems, indicates whether the file system is currently mounted. This property can be either <code class=Cm>yes</code> or <code class=Cm>no</code>.</dd><dt><b class=Sy>objsetid</b></dt><dd>A unique identifier for this dataset within the pool. Unlike the dataset's <b class=Sy>guid</b> , the <b class=Sy>objsetid</b> of a dataset is not transferred to other pools when the snapshot is copied with a send/receive operation. The <b class=Sy>objsetid</b> can be reused (for a new datatset) after the dataset is deleted.</dd><dt><b class=Sy>origin</b></dt><dd>For cloned file systems or volumes, the snapshot from which the clone was created. See also the <b class=Sy>clones</b> property.</dd><dt><b class=Sy>receive_resume_token</b></dt><dd>For filesystems or volumes which have saved partially-completed state from <b class=Sy>zfs receive -s</b>, this opaque token can be provided to <b class=Sy>zfs send -t</b> to resume and complete the <b class=Sy>zfs receive</b>.</dd><dt><b class=Sy>referenced</b></dt><dd>The amount of data that is accessible by this dataset, which may or may not be shared with other datasets in the pool. When a snapshot or clone is created, it initially references the same amount of space as the file system or snapshot it was created from, since its contents are identical. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>refer</b>.</p></dd><dt><b class=Sy>refcompressratio</b></dt><dd>The compression ratio achieved for the <b class=Sy>referenced</b> space of this dataset, expressed as a multiplier. See also the <b class=Sy>compressratio</b> property.</dd><dt><b class=Sy>snapshot_count</b></dt><dd>The total number of snapshots that exist under this location in the dataset tree. This value is only available when a <b class=Sy>snapshot_limit</b> has been set somewhere in the tree under which the dataset resides.</dd><dt><b class=Sy>type</b></dt><dd>The type of dataset: <b class=Sy>filesystem</b>, <b class=Sy>volume</b>, <span class=No>or</span><b class=Sy>snapshot</b>.</dd><dt><b class=Sy>used</b></dt><dd>The amount of space consumed by this dataset and all its descendents. This is the value that is checked against this dataset's quota and reservation. The space used does not include this dataset's reservation, but does take into account the reservations of any descendent datasets. The amount of space that a dataset consumes from its parent, as well as the amount of space that are freed if this dataset is recursively destroyed, is the greater of its space used and its reservation. <p class=Pp>When snapshots (see the “<a class=Sx href=#Snapshots>Snapshots</a>” section) are created, their space is initially shared between the snapshot and the file system, and possibly with previous snapshots. As the file system changes, space that was previously shared becomes unique to the snapshot, and counted in the snapshot's space used. Additionally, deleting snapshots can increase the amount of space unique to (and used by) other snapshots.</p><p class=Pp>The amount of space used, available, or referenced does not take into account pending changes. Pending changes are generally accounted for within a few seconds. Committing a change to a disk using <a class=Xr href=fsync.2.html>fsync(2)</a> or <b class=Sy>O_SYNC</b> does not necessarily guarantee that the space usage information is updated immediately.</p></dd><dt><b class=Sy>usedby*</b></dt><dd>The <b class=Sy>usedby*</b> properties decompose the <b class=Sy>used</b> properties into the various reasons that space is used. Specifically, <b class=Sy>used</b><span class=No>=</span><b class=Sy>usedbysnapshots + usedbydataset + usedbychildren + usedbyrefreservation</b>. These properties are only available for datasets created with ZFS pool version 13 pools and higher.</dd><dt><b class=Sy>usedbysnapshots</b></dt><dd>The amount of space consumed by snapshots of this dataset. In particular, it is the amount of space that would be freed if all of this dataset's snapshots were destroyed. Note that this is not simply the sum of the snapshots' <b class=Sy>used</b> properties because space can be shared by multiple snapshots.</dd><dt><b class=Sy>usedbydataset</b></dt><dd>The amount of space used by this dataset itself, which would be freed if the dataset were destroyed (after first removing any <b class=Sy>refreservation</b> and destroying any necessary snapshots or descendents).</dd><dt><b class=Sy>usedbychildren</b></dt><dd>The amount of space used by children of this dataset, which would be freed if all the dataset's children were destroyed.</dd><dt><b class=Sy>usedbyrefreservation</b></dt><dd>The amount of space used by a <b class=Sy>refreservation</b> set on this dataset, which would be freed if the <b class=Sy>refreservation</b> was removed.</dd><dt><b class=Sy>userused@</b><var class=Ar>user</var></dt><dd>The amount of space consumed by the specified user in this dataset. Space is charged to the owner of each file, as displayed by “<code class=Nm>ls</code><code class=Fl>-l</code>”. The amount of space charged is displayed by “<code class=Nm>du</code>” and “<code class=Nm>ls</code><code class=Fl>-s</code>”. See the “<code class=Nm>zfs</code><code class=Cm>userspace</code>” subcommand for more information. <p class=Pp>Unprivileged users can access only their own space usage. The root user, or a user who has been granted the <b class=Sy>userused</b> privilege with “<code class=Nm>zfs</code><code class=Cm>allow</code>”, can access everyone's usage.</p><p class=Pp>The <b class=Sy>userused@</b>... properties are not displayed by “<code class=Nm>zfs</code><code class=Cm>get all</code>”. The user's name must be appended after the <b class=Sy>@</b> symbol, using one of the following forms:</p><ul class="Bl-bullet Bd-indent"><li>POSIX name (for example, <i class=Em>joe</i>)</li><li>POSIX numeric ID (for example, <i class=Em>1001</i>)</li></ul></dd><dt><b class=Sy>userrefs</b></dt><dd>This property is set to the number of user holds on this snapshot. User holds are set by using the “<code class=Nm>zfs</code><code class=Cm>hold</code>” command.</dd><dt><b class=Sy>groupused@</b><var class=Ar>group</var></dt><dd>The amount of space consumed by the specified group in this dataset. Space is charged to the group of each file, as displayed by <code class=Nm>ls</code><code class=Fl>-l</code>. See the <b class=Sy>userused@</b><var class=Ar>user</var> property for more information. <p class=Pp>Unprivileged users can only access their own groups' space usage. The root user, or a user who has been granted the <b class=Sy>groupused</b> privilege with “<code class=Nm>zfs</code><code class=Cm>allow</code>”, can access all groups' usage.</p></dd><dt><b class=Sy>volblocksize</b>=<var class=Ar>blocksize</var></dt><dd>For volumes, specifies the block size of the volume. The <var class=Ar>blocksize</var> cannot be changed once the volume has been written, so it should be set at volume creation time. The default <var class=Ar>blocksize</var> for volumes is 8 Kbytes. Any power of 2 from 512 bytes to 128 Kbytes is valid. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>volblock</b>.</p></dd><dt><b class=Sy>written</b></dt><dd>The amount of <b class=Sy>referenced</b> space written to this dataset since the previous snapshot.</dd><dt><b class=Sy>written@</b><var class=Ar>snapshot</var></dt><dd>The amount of <b class=Sy>referenced</b> space written to this dataset since the specified snapshot. This is the space that is referenced by this dataset but was not referenced by the specified snapshot. <p class=Pp>The <var class=Ar>snapshot</var> may be specified as a short snapshot name (just the part after the <b class=Sy>@</b>), in which case it will be interpreted as a snapshot in the same filesystem as this dataset. The <var class=Ar>snapshot</var> may be a full snapshot name (<i class=Em>filesystem@snapshot</i>), which for clones may be a snapshot in the origin's filesystem (or the origin of the origin's filesystem, etc).</p></dd></dl><p class=Pp>The following native properties can be used to change the behavior of a ZFS dataset.</p><dl class=Bl-tag><dt><b class=Sy>aclinherit</b>=<code class=Cm>discard</code> | <a class=permalink href=#noallow><code class=Cm id=noallow>noallow</code></a> | <a class=permalink href=#restricted><code class=Cm id=restricted>restricted</code></a> | <a class=permalink href=#passthrough><code class=Cm id=passthrough>passthrough</code></a> | <a class=permalink href=#passthrough-x><code class=Cm id=passthrough-x>passthrough-x</code></a></dt><dd>Controls how ACL entries are inherited when files and directories are created. A file system with an <b class=Sy>aclinherit</b> property of <code class=Cm>discard</code> does not inherit any ACL entries. A file system with an <b class=Sy>aclinherit</b> property value of <code class=Cm>noallow</code> only inherits inheritable ACL entries that specify "deny" permissions. The property value <code class=Cm>restricted</code> (the default) removes the <i class=Em>write_acl</i> and <i class=Em>write_owner</i> permissions when the ACL entry is inherited. A file system with an <b class=Sy>aclinherit</b> property value of <code class=Cm>passthrough</code> inherits all inheritable ACL entries without any modifications made to the ACL entries when they are inherited. A file system with an <b class=Sy>aclinherit</b> property value of <code class=Cm>passthrough-x</code> has the same meaning as <code class=Cm>passthrough</code>, except that the <i class=Em>owner@</i>, <i class=Em>group@</i>, <span class=No>and</span><i class=Em>everyone@</i> ACEs inherit the execute permission only if the file creation mode also requests the execute bit. <p class=Pp>When the property value is set to <code class=Cm>passthrough</code>, files are created with a mode determined by the inheritable ACEs. If no inheritable ACEs exist that affect the mode, then the mode is set in accordance to the requested mode from the application.</p></dd><dt><b class=Sy>aclmode</b>=<code class=Cm>discard</code> | <a class=permalink href=#groupmask><code class=Cm id=groupmask>groupmask</code></a> | <a class=permalink href=#passthrough_2><code class=Cm id=passthrough_2>passthrough</code></a> | <a class=permalink href=#restricted_2><code class=Cm id=restricted_2>restricted</code></a></dt><dd>Controls how an ACL is modified during <a class=Xr href=chmod.2.html>chmod(2)</a>. A file system with an <b class=Sy>aclmode</b> property of <code class=Cm>discard</code> (the default) deletes all ACL entries that do not represent the mode of the file. An <b class=Sy>aclmode</b> property of <code class=Cm>groupmask</code> reduces permissions granted in all <i class=Em>ALLOW</i> entries found in the ACL such that they are no greater than the group permissions specified by <a class=Xr href=chmod.2.html>chmod(2)</a>. A file system with an <b class=Sy>aclmode</b> property of <code class=Cm>passthrough</code> indicates that no changes are made to the ACL other than creating or updating the necessary ACL entries to represent the new mode of the file or directory. An <b class=Sy>aclmode</b> property of <code class=Cm>restricted</code> will cause the <a class=Xr href=chmod.2.html>chmod(2)</a> operation to return an error when used on any file or directory which has a non-trivial ACL whose entries can not be represented by a mode. <a class=Xr href=chmod.2.html>chmod(2)</a> is required to change the set user ID, set group ID, or sticky bits on a file or directory, as they do not have equivalent ACL entries. In order to use <a class=Xr href=chmod.2.html>chmod(2)</a> on a file or directory with a non-trivial ACL when <b class=Sy>aclmode</b> is set to <code class=Cm>restricted</code>, you must first remove all ACL entries which do not represent the current mode.</dd><dt><b class=Sy>atime</b>=<code class=Cm>on</code> | <a class=permalink href=#off><code class=Cm id=off>off</code></a></dt><dd>Controls whether the access time for files is updated when they are read. Turning this property off avoids producing write traffic when reading files and can result in significant performance gains, though it might confuse mailers and other similar utilities. The default value is <code class=Cm>on</code>.</dd><dt><b class=Sy>canmount</b>=<code class=Cm>on</code> | <a class=permalink href=#off_2><code class=Cm id=off_2>off</code></a> | <a class=permalink href=#noauto><code class=Cm id=noauto>noauto</code></a></dt><dd>If this property is set to <code class=Cm>off</code>, the file system cannot be mounted, and is ignored by “<code class=Nm>zfs</code><code class=Cm>mount</code><code class=Fl>-a</code>”. Setting this property to <code class=Cm>off</code> is similar to setting the <b class=Sy>mountpoint</b> property to <code class=Cm>none</code>, except that the dataset still has a normal <b class=Sy>mountpoint</b> property, which can be inherited. Setting this property to <code class=Cm>off</code> allows datasets to be used solely as a mechanism to inherit properties. One example of setting <b class=Sy>canmount</b>=<code class=Cm>off</code> is to have two datasets with the same <b class=Sy>mountpoint</b>, so that the children of both datasets appear in the same directory, but might have different inherited characteristics. <p class=Pp>When the <code class=Cm>noauto</code> value is set, a dataset can only be mounted and unmounted explicitly. The dataset is not mounted automatically when the dataset is created or imported, nor is it mounted by the “<code class=Nm>zfs</code><code class=Cm>mount</code><code class=Fl>-a</code>” command or unmounted by the “<code class=Nm>zfs</code><code class=Cm>umount</code><code class=Fl>-a</code>” command.</p><p class=Pp>This property is not inherited.</p></dd><dt><b class=Sy>checksum</b>=<code class=Cm>on</code> | <a class=permalink href=#off_3><code class=Cm id=off_3>off</code></a> | <a class=permalink href=#fletcher2><code class=Cm id=fletcher2>fletcher2</code></a> | <a class=permalink href=#fletcher4><code class=Cm id=fletcher4>fletcher4</code></a> | <a class=permalink href=#sha256><code class=Cm id=sha256>sha256</code></a> | <a class=permalink href=#noparity><code class=Cm id=noparity>noparity</code></a> | <a class=permalink href=#sha512><code class=Cm id=sha512>sha512</code></a> | <a class=permalink href=#skein><code class=Cm id=skein>skein</code></a></dt><dd>Controls the checksum used to verify data integrity. The default value is <code class=Cm>on</code>, which automatically selects an appropriate algorithm (currently, <code class=Cm>fletcher4</code>, but this may change in future releases). The value <code class=Cm>off</code> disables integrity checking on user data. The value <code class=Cm>noparity</code> not only disables integrity but also disables maintaining parity for user data. This setting is used internally by a dump device residing on a RAID-Z pool and should not be used by any other dataset. Disabling checksums is <i class=Em>NOT</i> a recommended practice. The <b class=Sy>sha512</b>, and <b class=Sy>skein</b> checksum algorithms require enabling the appropriate features on the pool. Please see <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for more information on these algorithms. <p class=Pp>Changing this property affects only newly-written data.</p><p class=Pp>The salted checksum algorithm (<code class=Cm>edonr</code>) is currently not supported on FreeBSD.</p></dd><dt><b class=Sy>compression</b>=<code class=Cm>on</code> | <a class=permalink href=#off_4><code class=Cm id=off_4>off</code></a> | <a class=permalink href=#lzjb><code class=Cm id=lzjb>lzjb</code></a> | <a class=permalink href=#gzip><code class=Cm id=gzip>gzip</code></a> | <a class=permalink href=#gzip-><code class=Cm id=gzip->gzip-</code></a><var class=Ar>N</var> | <a class=permalink href=#zle><code class=Cm id=zle>zle</code></a> | <a class=permalink href=#lz4><code class=Cm id=lz4>lz4</code></a></dt><dd>Controls the compression algorithm used for this dataset. Setting compression to <code class=Cm>on</code> indicates that the current default compression algorithm should be used. The default balances compression and decompression speed, with compression ratio and is expected to work well on a wide variety of workloads. Unlike all other settings for this property, on does not select a fixed compression type. As new compression algorithms are added to ZFS and enabled on a pool, the default compression algorithm may change. The current default compression algorthm is either <code class=Cm>lzjb</code> or, if the <b class=Sy>lz4_compress</b> feature is enabled, <code class=Cm>lz4</code>. The <code class=Cm>lzjb</code> compression algorithm is optimized for performance while providing decent data compression. Setting compression to <code class=Cm>on</code> uses the <code class=Cm>lzjb</code> compression algorithm. The <code class=Cm>gzip</code> compression algorithm uses the same compression as the <a class=Xr href=gzip.1.html>gzip(1)</a> command. You can specify the <code class=Cm>gzip</code> level by using the value <code class=Cm>gzip-</code><var class=Ar>N</var> where <var class=Ar>N</var> is an integer from 1 (fastest) to 9 (best compression ratio). Currently, <code class=Cm>gzip</code> is equivalent to <code class=Cm>gzip-6</code> (which is also the default for <a class=Xr href=gzip.1.html>gzip(1)</a>). The <code class=Cm>zle</code> compression algorithm compresses runs of zeros. <p class=Pp>The <b class=Sy>lz4</b> compression algorithm is a high-performance replacement for the <b class=Sy>lzjb</b> algorithm. It features significantly faster compression and decompression, as well as a moderately higher compression ratio than <b class=Sy>lzjb</b>, but can only be used on pools with the <b class=Sy>lz4_compress</b> feature set to <b class=Sy>enabled</b>. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>lz4_compress</b> feature.</p><p class=Pp>This property can also be referred to by its shortened column name <code class=Cm>compress</code>. Changing this property affects only newly-written data.</p></dd><dt><b class=Sy>copies</b>=<code class=Cm>1</code> | <a class=permalink href=#2><code class=Cm id=2>2</code></a> | <a class=permalink href=#3><code class=Cm id=3>3</code></a></dt><dd>Controls the number of copies of data stored for this dataset. These copies are in addition to any redundancy provided by the pool, for example, mirroring or RAID-Z. The copies are stored on different disks, if possible. The space used by multiple copies is charged to the associated file and dataset, changing the <b class=Sy>used</b> property and counting against quotas and reservations. <p class=Pp>Changing this property only affects newly-written data. Therefore, set this property at file system creation time by using the <code class=Fl>-o</code><code class=Cm>copies=</code><var class=Ar>N</var> option.</p></dd><dt><b class=Sy>dedup</b>=<code class=Cm>on</code> | <a class=permalink href=#off_5><code class=Cm id=off_5>off</code></a> | <a class=permalink href=#verify><code class=Cm id=verify>verify</code></a> | <a class=permalink href=#sha256_2><code class=Cm id=sha256_2>sha256</code></a>[<code class=Cm>,verify</code>] | <b class=Sy>sha512</b>[<code class=Cm>,verify</code>] | <b class=Sy>skein</b>[<code class=Cm>,verify</code>]</dt><dd>Configures deduplication for a dataset. The default value is <code class=Cm>off</code>. The default deduplication checksum is <code class=Cm>sha256</code> (this may change in the future). When <b class=Sy>dedup</b> is enabled, the checksum defined here overrides the <b class=Sy>checksum</b> property. Setting the value to <code class=Cm>verify</code> has the same effect as the setting <code class=Cm>sha256,verify</code>. <p class=Pp>If set to <code class=Cm>verify</code>, ZFS will do a byte-to-byte comparsion in case of two blocks having the same signature to make sure the block contents are identical.</p></dd><dt><b class=Sy>devices</b>=<code class=Cm>on</code> | <a class=permalink href=#off_6><code class=Cm id=off_6>off</code></a></dt><dd>The <b class=Sy>devices</b> property is currently not supported on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>exec</b>=<code class=Cm>on</code> | <a class=permalink href=#off_7><code class=Cm id=off_7>off</code></a></dt><dd>Controls whether processes can be executed from within this file system. The default value is <code class=Cm>on</code>.</dd><dt><b class=Sy>mlslabel</b>=<var class=Ar>label</var> | <a class=permalink href=#none><code class=Cm id=none>none</code></a></dt><dd>The <b class=Sy>mlslabel</b> property is currently not supported on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>filesystem_limit</b>=<var class=Ar>count</var> | <a class=permalink href=#none_2><code class=Cm id=none_2>none</code></a></dt><dd>Limits the number of filesystems and volumes that can exist under this point in the dataset tree. The limit is not enforced if the user is allowed to change the limit. Setting a <b class=Sy>filesystem_limit</b> on a descendent of a filesystem that already has a <b class=Sy>filesystem_limit</b> does not override the ancestor's <b class=Sy>filesystem_limit</b>, but rather imposes an additional limit. This feature must be enabled to be used (see <a class=Xr href=zpool-features.7.html>zpool-features(7)</a>).</dd><dt><b class=Sy>special_small_blocks</b>=<var class=Ar>size</var></dt><dd>This value represents the threshold block size for including small file blocks into the special allocation class. Blocks smaller than or equal to this value will be assigned to the special allocation class while greater blocks will be assigned to the regular class. Valid values are zero or a power of two from 512B up to 128K. The default size is 0 which means no small file blocks will be allocated in the special class. <p class=Pp>Before setting this property, a special class vdev must be added to the pool. See <a class=Xr href=zpool.8.html>zpool(8)</a> for more details on the special allocation class.</p></dd><dt><b class=Sy>mountpoint</b>=<var class=Ar>path</var> | <a class=permalink href=#none_3><code class=Cm id=none_3>none</code></a> | <a class=permalink href=#legacy><code class=Cm id=legacy>legacy</code></a></dt><dd>Controls the mount point used for this file system. See the “<a class=Sx href=#Mount_Points>Mount Points</a>” section for more information on how this property is used. <p class=Pp>When the <b class=Sy>mountpoint</b> property is changed for a file system, the file system and any children that inherit the mount point are unmounted. If the new value is <code class=Cm>legacy</code>, then they remain unmounted. Otherwise, they are automatically remounted in the new location if the property was previously <code class=Cm>legacy</code> or <code class=Cm>none</code>, or if they were mounted before the property was changed. In addition, any shared file systems are unshared and shared in the new location.</p></dd><dt><b class=Sy>nbmand</b>=<code class=Cm>on</code> | <a class=permalink href=#off_8><code class=Cm id=off_8>off</code></a></dt><dd>The <b class=Sy>nbmand</b> property is currently not supported on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>primarycache</b>=<code class=Cm>all</code> | <a class=permalink href=#none_4><code class=Cm id=none_4>none</code></a> | <a class=permalink href=#metadata><code class=Cm id=metadata>metadata</code></a></dt><dd>Controls what is cached in the primary cache (ARC). If this property is set to <code class=Cm>all</code>, then both user data and metadata is cached. If this property is set to <code class=Cm>none</code>, then neither user data nor metadata is cached. If this property is set to <code class=Cm>metadata</code>, then only metadata is cached. The default value is <code class=Cm>all</code>.</dd><dt><b class=Sy>quota</b>=<var class=Ar>size</var> | <a class=permalink href=#none_5><code class=Cm id=none_5>none</code></a></dt><dd>Limits the amount of space a dataset and its descendents can consume. This property enforces a hard limit on the amount of space used. This includes all space consumed by descendents, including file systems and snapshots. Setting a quota on a descendent of a dataset that already has a quota does not override the ancestor's quota, but rather imposes an additional limit. <p class=Pp>Quotas cannot be set on volumes, as the <b class=Sy>volsize</b> property acts as an implicit quota.</p></dd><dt><b class=Sy>snapshot_limit</b>=<var class=Ar>count</var> | <a class=permalink href=#none_6><code class=Cm id=none_6>none</code></a></dt><dd>Limits the number of snapshots that can be created on a dataset and its descendents. Setting a <b class=Sy>snapshot_limit</b> on a descendent of a dataset that already has a <b class=Sy>snapshot_limit</b> does not override the ancestor's <b class=Sy>snapshot_limit</b>, but rather imposes an additional limit. The limit is not enforced if the user is allowed to change the limit. For example, this means that recursive snapshots taken from the global zone are counted against each delegated dataset within a jail. This feature must be enabled to be used (see <a class=Xr href=zpool-features.7.html>zpool-features(7)</a>).</dd><dt><b class=Sy>userquota@</b><var class=Ar>user</var>=<var class=Ar>size</var> | <a class=permalink href=#none_7><code class=Cm id=none_7>none</code></a></dt><dd>Limits the amount of space consumed by the specified user. Similar to the <b class=Sy>refquota</b> property, the <b class=Sy>userquota</b> space calculation does not include space that is used by descendent datasets, such as snapshots and clones. User space consumption is identified by the <b class=Sy>userspace@</b><var class=Ar>user</var> property. <p class=Pp>Enforcement of user quotas may be delayed by several seconds. This delay means that a user might exceed their quota before the system notices that they are over quota and begins to refuse additional writes with the <i class=Em>EDQUOT</i> error message. See the <code class=Cm>userspace</code> subcommand for more information.</p><p class=Pp>Unprivileged users can only access their own groups' space usage. The root user, or a user who has been granted the <b class=Sy>userquota</b> privilege with “<code class=Nm>zfs</code><code class=Cm>allow</code>”, can get and set everyone's quota.</p><p class=Pp>This property is not available on volumes, on file systems before version 4, or on pools before version 15. The <b class=Sy>userquota@</b>... properties are not displayed by “<code class=Nm>zfs</code><code class=Cm>get all</code>”. The user's name must be appended after the <b class=Sy>@</b> symbol, using one of the following forms:</p><ul class="Bl-bullet Bd-indent"><li>POSIX name (for example, <i class=Em>joe</i>)</li><li>POSIX numeric ID (for example, <i class=Em>1001</i>)</li></ul></dd><dt><b class=Sy>groupquota@</b><var class=Ar>group</var>=<var class=Ar>size</var> | <a class=permalink href=#none_8><code class=Cm id=none_8>none</code></a></dt><dd>Limits the amount of space consumed by the specified group. Group space consumption is identified by the <b class=Sy>userquota@</b><var class=Ar>user</var> property. <p class=Pp>Unprivileged users can access only their own groups' space usage. The root user, or a user who has been granted the <b class=Sy>groupquota</b> privilege with “<code class=Nm>zfs</code><code class=Cm>allow</code>”, can get and set all groups' quotas.</p></dd><dt><b class=Sy>readonly</b>=<code class=Cm>on</code> | <a class=permalink href=#off_9><code class=Cm id=off_9>off</code></a></dt><dd>Controls whether this dataset can be modified. The default value is <code class=Cm>off</code>.</dd><dt><b class=Sy>recordsize</b>=<var class=Ar>size</var></dt><dd>Specifies a suggested block size for files in the file system. This property is designed solely for use with database workloads that access files in fixed-size records. ZFS automatically tunes block sizes according to internal algorithms optimized for typical access patterns. <p class=Pp>For databases that create very large files but access them in small random chunks, these algorithms may be suboptimal. Specifying a <b class=Sy>recordsize</b> greater than or equal to the record size of the database can result in significant performance gains. Use of this property for general purpose file systems is strongly discouraged, and may adversely affect performance.</p><p class=Pp>The size specified must be a power of two greater than or equal to 512 and less than or equal to 128 Kbytes. If the <b class=Sy>large_blocks</b> feature is enabled on the pool, the size may be up to 1 Mbyte. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags.</p><p class=Pp>Changing the file system's <b class=Sy>recordsize</b> affects only files created afterward; existing files are unaffected.</p><p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>recsize</b>.</p></dd><dt><b class=Sy>redundant_metadata</b>=<code class=Cm>all</code> | <a class=permalink href=#most><code class=Cm id=most>most</code></a></dt><dd>Controls what types of metadata are stored redundantly. ZFS stores an extra copy of metadata, so that if a single block is corrupted, the amount of user data lost is limited. This extra copy is in addition to any redundancy provided at the pool level (e.g. by mirroring or RAID-Z), and is in addition to an extra copy specified by the <b class=Sy>copies</b> property (up to a total of 3 copies). For example if the pool is mirrored, <code class=Cm>copies</code>=<var class=Ar>2</var>, and <code class=Cm>redundant_metadata</code>=<var class=Ar>most</var>, then ZFS stores 6 copies of most metadata, and 4 copies of data and some metadata. <p class=Pp>When set to <code class=Cm>all</code>, ZFS stores an extra copy of all metadata. If a single on-disk block is corrupt, at worst a single block of user data (which is <code class=Cm>recordsize</code> bytes long can be lost.)</p><p class=Pp>When set to <code class=Cm>most</code>, ZFS stores an extra copy of most types of metadata. This can improve performance of random writes, because less metadata must be written. In practice, at worst about 100 blocks (of <code class=Cm>recordsize</code> bytes each) of user data can be lost if a single on-disk block is corrupt. The exact behavior of which metadata blocks are stored redundantly may change in future releases.</p><p class=Pp>The default value is <code class=Cm>all</code>.</p></dd><dt><b class=Sy>refquota</b>=<var class=Ar>size</var> | <a class=permalink href=#none_9><code class=Cm id=none_9>none</code></a></dt><dd>Limits the amount of space a dataset can consume. This property enforces a hard limit on the amount of space used. This hard limit does not include space used by descendents, including file systems and snapshots.</dd><dt><b class=Sy>refreservation</b>=<var class=Ar>size</var> | <a class=permalink href=#none_10><code class=Cm id=none_10>none</code></a> | <a class=permalink href=#auto><code class=Cm id=auto>auto</code></a></dt><dd>The minimum amount of space guaranteed to a dataset, not including its descendents. When the amount of space used is below this value, the dataset is treated as if it were taking up the amount of space specified by <b class=Sy>refreservation</b>. The <b class=Sy>refreservation</b> reservation is accounted for in the parent datasets' space used, and counts against the parent datasets' quotas and reservations. <p class=Pp>If <b class=Sy>refreservation</b> is set, a snapshot is only allowed if there is enough free pool space outside of this reservation to accommodate the current number of "referenced" bytes in the dataset.</p><p class=Pp>If <b class=Sy>refreservation</b> is set to <b class=Sy>auto</b>, a volume is thick provisioned or not sparse. <b class=Sy>refreservation</b>= <code class=Cm>auto</code> is only supported on volumes. See <b class=Sy>volsize</b> in the Native Properties section for more information about sparse volumes.</p><p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>refreserv</b>.</p></dd><dt><b class=Sy>reservation</b>=<var class=Ar>size</var> | <a class=permalink href=#none_11><code class=Cm id=none_11>none</code></a></dt><dd>The minimum amount of space guaranteed to a dataset and its descendents. When the amount of space used is below this value, the dataset is treated as if it were taking up the amount of space specified by its reservation. Reservations are accounted for in the parent datasets' space used, and count against the parent datasets' quotas and reservations. <p class=Pp>This property can also be referred to by its shortened column name, <b class=Sy>reserv</b>.</p></dd><dt><b class=Sy>secondarycache</b>=<code class=Cm>all</code> | <a class=permalink href=#none_12><code class=Cm id=none_12>none</code></a> | <a class=permalink href=#metadata_2><code class=Cm id=metadata_2>metadata</code></a></dt><dd>Controls what is cached in the secondary cache (L2ARC). If this property is set to <code class=Cm>all</code>, then both user data and metadata is cached. If this property is set to <code class=Cm>none</code>, then neither user data nor metadata is cached. If this property is set to <code class=Cm>metadata</code>, then only metadata is cached. The default value is <code class=Cm>all</code>.</dd><dt><b class=Sy>setuid</b>=<code class=Cm>on</code> | <a class=permalink href=#off_10><code class=Cm id=off_10>off</code></a></dt><dd>Controls whether the <span class=No>set-</span>UID bit is respected for the file system. The default value is <code class=Cm>on</code>.</dd><dt><b class=Sy>sharesmb</b>=<code class=Cm>on</code> | <a class=permalink href=#off_11><code class=Cm id=off_11>off</code></a> | <var class=Ar>opts</var></dt><dd>The <b class=Sy>sharesmb</b> property currently has no effect on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>sharenfs</b>=<code class=Cm>on</code> | <a class=permalink href=#off_12><code class=Cm id=off_12>off</code></a> | <var class=Ar>opts</var></dt><dd>Controls whether the file system is shared via NFS, and what options are used. A file system with a <b class=Sy>sharenfs</b> property of <code class=Cm>off</code> is managed the traditional way via <a class=Xr href=exports.5.html>exports(5)</a>. Otherwise, the file system is automatically shared and unshared with the “<code class=Nm>zfs</code><code class=Cm>share</code>” and “<code class=Nm>zfs</code><code class=Cm>unshare</code>” commands. If the property is set to <code class=Cm>on</code> no NFS export options are used. Otherwise, NFS export options are equivalent to the contents of this property. The export options may be comma-separated. See <a class=Xr href=exports.5.html>exports(5)</a> for a list of valid options. <p class=Pp>When the <b class=Sy>sharenfs</b> property is changed for a dataset, the <a class=Xr href=mountd.8.html>mountd(8)</a> daemon is reloaded.</p></dd><dt><b class=Sy>logbias</b>=<code class=Cm>latency</code> | <a class=permalink href=#throughput><code class=Cm id=throughput>throughput</code></a></dt><dd>Provide a hint to ZFS about handling of synchronous requests in this dataset. If <b class=Sy>logbias</b> is set to <code class=Cm>latency</code> (the default), ZFS will use pool log devices (if configured) to handle the requests at low latency. If <b class=Sy>logbias</b> is set to <code class=Cm>throughput</code>, ZFS will not use configured pool log devices. ZFS will instead optimize synchronous operations for global pool throughput and efficient use of resources.</dd><dt><b class=Sy>snapdir</b>=<code class=Cm>hidden</code> | <a class=permalink href=#visible><code class=Cm id=visible>visible</code></a></dt><dd>Controls whether the <span class=Pa>.zfs</span> directory is hidden or visible in the root of the file system as discussed in the “<a class=Sx href=#Snapshots>Snapshots</a>” section. The default value is <code class=Cm>hidden</code>.</dd><dt><b class=Sy>sync</b>=<code class=Cm>standard</code> | <a class=permalink href=#always><code class=Cm id=always>always</code></a> | <a class=permalink href=#disabled><code class=Cm id=disabled>disabled</code></a></dt><dd>Controls the behavior of synchronous requests (e.g. <a class=Xr href=fsync.2.html>fsync(2)</a>, O_DSYNC). This property accepts the following values: <div class=Bd-indent><dl class=Bl-tag><dt><b class=Sy>standard</b></dt><dd>This is the POSIX specified behavior of ensuring all synchronous requests are written to stable storage and all devices are flushed to ensure data is not cached by device controllers (this is the default).</dd><dt><b class=Sy>always</b></dt><dd>All file system transactions are written and flushed before their system calls return. This has a large performance penalty.</dd><dt><b class=Sy>disabled</b></dt><dd>Disables synchronous requests. File system transactions are only committed to stable storage periodically. This option will give the highest performance. However, it is very dangerous as ZFS would be ignoring the synchronous transaction demands of applications such as databases or NFS. Administrators should only use this option when the risks are understood.</dd></dl></div></dd><dt><b class=Sy>volsize</b>=<var class=Ar>size</var></dt><dd>For volumes, specifies the logical size of the volume. By default, creating a volume establishes a reservation of equal size. For storage pools with a version number of 9 or higher, a <b class=Sy>refreservation</b> is set instead. Any changes to <b class=Sy>volsize</b> are reflected in an equivalent change to the reservation (or <b class=Sy>refreservation</b>). The <b class=Sy>volsize</b> can only be set to a multiple of <code class=Cm>volblocksize</code>, and cannot be zero. <p class=Pp>The reservation is kept equal to the volume's logical size to prevent unexpected behavior for consumers. Without the reservation, the volume could run out of space, resulting in undefined behavior or data corruption, depending on how the volume is used. These effects can also occur when the volume size is changed while it is in use (particularly when shrinking the size). Extreme care should be used when adjusting the volume size.</p><p class=Pp>Though not recommended, a "sparse volume" (also known as "thin provisioned") can be created by specifying the <code class=Fl>-s</code> option to the “<code class=Nm>zfs</code><code class=Cm>create</code><code class=Fl>-V</code>” command, or by changing the value of the <b class=Sy>refreservation</b> property, or <b class=Sy>reservation</b> property on pool version 8 or earlier after the volume has been created. A "sparse volume" is a volume where the value of <b class=Sy>refreservation</b> is less then the size of the volume plus the space required to store its metadata. Consequently, writes to a sparse volume can fail with <b class=Sy>ENOSPC</b> when the pool is low on space. For a sparse volume, changes to <b class=Sy>volsize</b> are not reflected in the <b class=Sy>refreservation</b>. A volume that is not sparse is said to be "thick provisioned". A sparse volume can become thick provisioned by setting <b class=Sy>refreservation</b> to <b class=Sy>auto</b>.</p></dd><dt><b class=Sy>volmode</b>=<code class=Cm>default</code> | <a class=permalink href=#geom><code class=Cm id=geom>geom</code></a> | <a class=permalink href=#dev><code class=Cm id=dev>dev</code></a> | <a class=permalink href=#none_13><code class=Cm id=none_13>none</code></a></dt><dd>This property specifies how volumes should be exposed to the OS. Setting it to <b class=Sy>geom</b> exposes volumes as <a class=Xr href=geom.4.html>geom(4)</a> providers, providing maximal functionality. Setting it to <b class=Sy>dev</b> exposes volumes only as cdev device in devfs. Such volumes can be accessed only as raw disk device files, i.e. they can not be partitioned, mounted, participate in RAIDs, etc, but they are faster, and in some use scenarios with untrusted consumer, such as NAS or VM storage, can be more safe. Volumes with property set to <b class=Sy>none</b> are not exposed outside ZFS, but can be snapshoted, cloned, replicated, etc, that can be suitable for backup purposes. Value <b class=Sy>default</b> means that volumes exposition is controlled by system-wide sysctl/tunable <var class=Va>vfs.zfs.vol.mode</var>, where <b class=Sy>geom</b>, <b class=Sy>dev</b> and <b class=Sy>none</b> are encoded as 1, 2 and 3 respectively. The default values is <b class=Sy>geom</b>. This property can be changed any time, but so far it is processed only during volume creation and pool import.</dd><dt><b class=Sy>vscan</b>=<code class=Cm>off</code> | <a class=permalink href=#on><code class=Cm id=on>on</code></a></dt><dd>The <b class=Sy>vscan</b> property is currently not supported on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>xattr</b>=<code class=Cm>off</code> | <a class=permalink href=#on_2><code class=Cm id=on_2>on</code></a></dt><dd>The <b class=Sy>xattr</b> property is currently not supported on <span class=Ux>FreeBSD</span>.</dd><dt><b class=Sy>jailed</b>=<code class=Cm>off</code> | <a class=permalink href=#on_3><code class=Cm id=on_3>on</code></a></dt><dd>Controls whether the dataset is managed from a jail. See the “<a class=Sx href=#Jails>Jails</a>” section for more information. The default value is <code class=Cm>off</code>.</dd></dl><p class=Pp>The following three properties cannot be changed after the file system is created, and therefore, should be set when the file system is created. If the properties are not set with the “<code class=Nm>zfs</code><code class=Cm>create</code>” or <code class=Nm>zpool</code><code class=Cm>create</code> commands, these properties are inherited from the parent dataset. If the parent dataset lacks these properties due to having been created prior to these features being supported, the new file system will have the default values for these properties.</p><dl class=Bl-tag><dt><b class=Sy>casesensitivity</b>=<code class=Cm>sensitive</code> | <a class=permalink href=#insensitive><code class=Cm id=insensitive>insensitive</code></a> | <a class=permalink href=#mixed><code class=Cm id=mixed>mixed</code></a></dt><dd>Indicates whether the file name matching algorithm used by the file system should be case-sensitive, case-insensitive, or allow a combination of both styles of matching. The default value for the <b class=Sy>casesensitivity</b> property is <code class=Cm>sensitive</code>. Traditionally, UNIX and POSIX file systems have case-sensitive file names. <p class=Pp>The <code class=Cm>mixed</code> value for the <b class=Sy>casesensitivity</b> property indicates that the file system can support requests for both case-sensitive and case-insensitive matching behavior.</p></dd><dt><b class=Sy>normalization</b>=<code class=Cm>none</code> | <a class=permalink href=#formC><code class=Cm id=formC>formC</code></a> | <a class=permalink href=#formD><code class=Cm id=formD>formD</code></a> | <a class=permalink href=#formKC><code class=Cm id=formKC>formKC</code></a> | <a class=permalink href=#formKD><code class=Cm id=formKD>formKD</code></a></dt><dd>Indicates whether the file system should perform a <b class=Sy>unicode</b> normalization of file names whenever two file names are compared, and which normalization algorithm should be used. File names are always stored unmodified, names are normalized as part of any comparison process. If this property is set to a legal value other than <code class=Cm>none</code>, and the <b class=Sy>utf8only</b> property was left unspecified, the <b class=Sy>utf8only</b> property is automatically set to <code class=Cm>on</code>. The default value of the <b class=Sy>normalization</b> property is <code class=Cm>none</code>. This property cannot be changed after the file system is created.</dd><dt><b class=Sy>utf8only</b>=<code class=Cm>on</code> | <a class=permalink href=#off_13><code class=Cm id=off_13>off</code></a></dt><dd>Indicates whether the file system should reject file names that include characters that are not present in the <b class=Sy>UTF-8</b> character code set. If this property is explicitly set to <code class=Cm>off</code>, the normalization property must either not be explicitly set or be set to <code class=Cm>none</code>. The default value for the <b class=Sy>utf8only</b> property is <code class=Cm>off</code>. This property cannot be changed after the file system is created.</dd></dl><p class=Pp>The <b class=Sy>casesensitivity</b>, <b class=Sy>normalization</b>, <span class=No>and</span><b class=Sy>utf8only</b> properties are also new permissions that can be assigned to non-privileged users by using the ZFS delegated administration feature.</p></section><section class=Ss><h2 class=Ss id=Temporary_Mount_Point_Properties><a class=permalink href=#Temporary_Mount_Point_Properties>Temporary Mount Point Properties</a></h2> When a file system is mounted, either through <a class=Xr href=mount.8.html>mount(8)</a> for legacy mounts or the “<code class=Nm>zfs</code><code class=Cm>mount</code>” command for normal file systems, its mount options are set according to its properties. The correlation between properties and mount options is as follows: <table class="Bl-column Bd-indent"><tr><td>PROPERTY</td><td>MOUNT OPTION</td></tr><tr><td>atime</td><td>atime/noatime</td></tr><tr><td>exec</td><td>exec/noexec</td></tr><tr><td>readonly</td><td>ro/rw</td></tr><tr><td>setuid</td><td>suid/nosuid</td></tr></table><p class=Pp>In addition, these options can be set on a per-mount basis using the <code class=Fl>-o</code> option, without affecting the property that is stored on disk. The values specified on the command line override the values stored in the dataset. These properties are reported as "temporary" by the “<code class=Nm>zfs</code><code class=Cm>get</code>” command. If the properties are changed while the dataset is mounted, the new setting overrides any temporary settings.</p></section><section class=Ss><h2 class=Ss id=User_Properties><a class=permalink href=#User_Properties>User Properties</a></h2> In addition to the standard native properties, ZFS supports arbitrary user properties. User properties have no effect on ZFS behavior, but applications or administrators can use them to annotate datasets (file systems, volumes, and snapshots). <p class=Pp>User property names must contain a colon (<b class=Sy>:</b>) character to distinguish them from native properties. They may contain lowercase letters, numbers, and the following punctuation characters: colon (<b class=Sy>:</b>), dash (<b class=Sy>-</b>), period (<b class=Sy>.</b>) and underscore (<b class=Sy>_</b>). The expected convention is that the property name is divided into two portions such as <i class=Em>module</i><b class=Sy>:</b><i class=Em>property</i>, but this namespace is not enforced by ZFS. User property names can be at most 256 characters, and cannot begin with a dash (<b class=Sy>-</b>).</p><p class=Pp>When making programmatic use of user properties, it is strongly suggested to use a reversed DNS domain name for the <var class=Ar>module</var> component of property names to reduce the chance that two independently-developed packages use the same property name for different purposes. Property names beginning with <i class=Em>com.sun</i> are reserved for use by Sun Microsystems.</p><p class=Pp>The values of user properties are arbitrary strings, are always inherited, and are never validated. All of the commands that operate on properties (“<code class=Nm>zfs</code><code class=Cm>list</code>”, “<code class=Nm>zfs</code><code class=Cm>get</code>”, “<code class=Nm>zfs</code><code class=Cm>set</code>” and so forth) can be used to manipulate both native properties and user properties. Use the “<code class=Nm>zfs</code><code class=Cm>inherit</code>” command to clear a user property. If the property is not defined in any parent dataset, it is removed entirely. Property values are limited to 1024 characters.</p></section></section><section class=Sh><h2 class=Sh id=SUBCOMMANDS><a class=permalink href=#SUBCOMMANDS>SUBCOMMANDS</a></h2> All subcommands that modify state are logged persistently to the pool in their original form. <dl class=Bl-tag><dt><code class=Nm>zfs</code> [<code class=Fl>-?</code>]</dt><dd><p class=Pp>Displays a help message.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>create</code> [<code class=Fl>-pu</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem</var></dt><dd><p class=Pp>Creates a new ZFS file system. The file system is automatically mounted according to the <b class=Sy>mountpoint</b> property inherited from the parent.</p><dl class=Bl-tag><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>Creates all the non-existing parent datasets. Datasets created in this manner are automatically mounted according to the <b class=Sy>mountpoint</b> property inherited from their parent. Any property specified on the command line using the <code class=Fl>-o</code> option is ignored. If the target filesystem already exists, the operation completes successfully.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>Newly created file system is not mounted.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property as if the command “<code class=Nm>zfs</code><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value</var>” was invoked at the same time the dataset was created. Any editable ZFS property can also be set at creation time. Multiple <code class=Fl>-o</code> options can be specified. An error results if the same property is specified in multiple <code class=Fl>-o</code> options.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>create</code> [<code class=Fl>-ps</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <code class=Fl>-V</code><var class=Ar>size volume</var></dt><dd><p class=Pp>Creates a volume of the given size. The volume is exported as a block device in <span class=Pa>/dev/zvol/path</span>, where <var class=Ar>path</var> is the name of the volume in the ZFS namespace. The size represents the logical size as exported by the device. By default, a reservation of equal size is created.</p><p class=Pp><var class=Ar>size</var> is automatically rounded up to the nearest 128 Kbytes to ensure that the volume has an integral number of blocks regardless of <var class=Ar>blocksize</var>.</p><dl class=Bl-tag><dt><a class=permalink href=#p_2><code class=Fl id=p_2>-p</code></a></dt><dd>Creates all the non-existing parent datasets. Datasets created in this manner are automatically mounted according to the <b class=Sy>mountpoint</b> property inherited from their parent. Any property specified on the command line using the <code class=Fl>-o</code> option is ignored. If the target filesystem already exists, the operation completes successfully.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>Creates a sparse volume with no reservation. See <b class=Sy>volsize</b> in the “<a class=Sx href=#Native_Properties>Native Properties</a>” section for more information about sparse volumes.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>blocksize</var></dt><dd>Equivalent to <code class=Fl>-o</code><code class=Cm>volblocksize</code>=<var class=Ar>blocksize</var>. If this option is specified in conjunction with <code class=Fl>-o</code><code class=Cm>volblocksize</code>, the resulting behavior is undefined.</dd><dt><a class=permalink href=#o_2><code class=Fl id=o_2>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property as if the “<code class=Nm>zfs</code><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value</var>” command was invoked at the same time the dataset was created. Any editable ZFS property can also be set at creation time. Multiple <code class=Fl>-o</code> options can be specified. An error results if the same property is specified in multiple <code class=Fl>-o</code> options.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>destroy</code> [<code class=Fl>-fnpRrv</code>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Destroys the given dataset. By default, the command unshares any file systems that are currently shared, unmounts any file systems that are currently mounted, and refuses to destroy a dataset that has active dependents (children or clones).</p><dl class=Bl-tag><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Recursively destroy all children.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a></dt><dd>Recursively destroy all dependents, including cloned file systems outside the target hierarchy.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a></dt><dd>Force an unmount of any file systems using the “<code class=Nm>zfs</code><code class=Cm>unmount</code><code class=Fl>-f</code>” command. This option has no effect on non-file systems or unmounted file systems.</dd><dt><a class=permalink href=#n><code class=Fl id=n>-n</code></a></dt><dd>Do a dry-run ("No-op") deletion. No data will be deleted. This is useful in conjunction with the <code class=Fl>-v</code> or <code class=Fl>-p</code> flags to determine what data would be deleted.</dd><dt><a class=permalink href=#p_3><code class=Fl id=p_3>-p</code></a></dt><dd>Print machine-parsable verbose information about the deleted data.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Print verbose information about the deleted data.</dd></dl><p class=Pp>Extreme care should be taken when applying either the <code class=Fl>-r</code> or the <code class=Fl>-R</code> options, as they can destroy large portions of a pool and cause unexpected behavior for mounted file systems in use.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>destroy</code> [<code class=Fl>-dnpRrv</code>] <var class=Ar>snapshot</var>[%<var class=Ar>snapname</var>][,...]</dt><dd><p class=Pp>The given snapshots are destroyed immediately if and only if the “<code class=Nm>zfs</code><code class=Cm>destroy</code>” command without the <code class=Fl>-d</code> option would have destroyed it. Such immediate destruction would occur, for example, if the snapshot had no clones and the user-initiated reference count were zero.</p><p class=Pp>If a snapshot does not qualify for immediate destruction, it is marked for deferred deletion. In this state, it exists as a usable, visible snapshot until both of the preconditions listed above are met, at which point it is destroyed.</p><p class=Pp>An inclusive range of snapshots may be specified by separating the first and last snapshots with a percent sign (<b class=Sy>%</b>). The first and/or last snapshots may be left blank, in which case the filesystem's oldest or newest snapshot will be implied.</p><p class=Pp>Multiple snapshots (or ranges of snapshots) of the same filesystem or volume may be specified in a comma-separated list of snapshots. Only the snapshot's short name (the part after the <b class=Sy>@</b>) should be specified when using a range or comma-separated list to identify multiple snapshots.</p><dl class=Bl-tag><dt><a class=permalink href=#r_2><code class=Fl id=r_2>-r</code></a></dt><dd>Destroy (or mark for deferred deletion) all snapshots with this name in descendent file systems.</dd><dt><a class=permalink href=#R_2><code class=Fl id=R_2>-R</code></a></dt><dd>Recursively destroy all clones of these snapshots, including the clones, snapshots, and children. If this flag is specified, the <code class=Fl>-d</code> flag will have no effect.</dd><dt><a class=permalink href=#n_2><code class=Fl id=n_2>-n</code></a></dt><dd>Do a dry-run ("No-op") deletion. No data will be deleted. This is useful in conjunction with the <code class=Fl>-v</code> or <code class=Fl>-p</code> flags to determine what data would be deleted.</dd><dt><a class=permalink href=#p_4><code class=Fl id=p_4>-p</code></a></dt><dd>Print machine-parsable verbose information about the deleted data.</dd><dt><a class=permalink href=#v_2><code class=Fl id=v_2>-v</code></a></dt><dd>Print verbose information about the deleted data.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Defer snapshot deletion.</dd></dl><p class=Pp>Extreme care should be taken when applying either the <code class=Fl>-r</code> or the <code class=Fl>-R</code> options, as they can destroy large portions of a pool and cause unexpected behavior for mounted file systems in use.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>destroy</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var>#<var class=Ar>bookmark</var></dt><dd><p class=Pp>The given bookmark is destroyed.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>snapshot</code>|<code class=Cm>snap</code> [<code class=Fl>-r</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem@snapname</var>|volume@snapname <var class=Ar>filesystem@snapname</var>|volume@snapname...</dt><dd><p class=Pp>Creates snapshots with the given names. All previous modifications by successful system calls to the file system are part of the snapshots. Snapshots are taken atomically, so that all snapshots correspond to the same moment in time. See the “<a class=Sx href=#Snapshots>Snapshots</a>” section for details.</p><dl class=Bl-tag><dt><a class=permalink href=#r_3><code class=Fl id=r_3>-r</code></a></dt><dd>Recursively create snapshots of all descendent datasets</dd><dt><a class=permalink href=#o_3><code class=Fl id=o_3>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property; see “<code class=Nm>zfs</code><code class=Cm>create</code>” for details.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>rollback</code> [<code class=Fl>-rRf</code>] <var class=Ar>snapshot</var></dt><dd><p class=Pp>Roll back the given dataset to a previous snapshot. When a dataset is rolled back, all data that has changed since the snapshot is discarded, and the dataset reverts to the state at the time of the snapshot. By default, the command refuses to roll back to a snapshot other than the most recent one. In order to do so, all intermediate snapshots and bookmarks must be destroyed by specifying the <code class=Fl>-r</code> option.</p><p class=Pp>The <code class=Fl>-rR</code> options do not recursively destroy the child snapshots of a recursive snapshot. Only direct snapshots of the specified filesystem are destroyed by either of these options. To completely roll back a recursive snapshot, you must rollback the individual child snapshots.</p><dl class=Bl-tag><dt><a class=permalink href=#r_4><code class=Fl id=r_4>-r</code></a></dt><dd>Destroy any snapshots and bookmarks more recent than the one specified.</dd><dt><a class=permalink href=#R_3><code class=Fl id=R_3>-R</code></a></dt><dd>Destroy any more recent snapshots and bookmarks, as well as any clones of those snapshots.</dd><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a></dt><dd>Used with the <code class=Fl>-R</code> option to force an unmount of any clone file systems that are to be destroyed.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>clone</code> [<code class=Fl>-p</code>] [<code class=Fl>-o</code><var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>snapshot filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Creates a clone of the given snapshot. See the “<a class=Sx href=#Clones>Clones</a>” section for details. The target dataset can be located anywhere in the ZFS hierarchy, and is created as the same type as the original.</p><dl class=Bl-tag><dt><a class=permalink href=#p_5><code class=Fl id=p_5>-p</code></a></dt><dd>Creates all the non-existing parent datasets. Datasets created in this manner are automatically mounted according to the <b class=Sy>mountpoint</b> property inherited from their parent. If the target filesystem or volume already exists, the operation completes successfully.</dd><dt><a class=permalink href=#o_4><code class=Fl id=o_4>-o</code></a><var class=Ar>property</var>=<var class=Ar>value</var></dt><dd>Sets the specified property; see “<code class=Nm>zfs</code><code class=Cm>create</code>” for details.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>promote</code><var class=Ar>clone-filesystem</var></dt><dd><p class=Pp>Promotes a clone file system to no longer be dependent on its "origin" snapshot. This makes it possible to destroy the file system that the clone was created from. The clone parent-child dependency relationship is reversed, so that the origin file system becomes a clone of the specified file system.</p><p class=Pp>The snapshot that was cloned, and any snapshots previous to this snapshot, are now owned by the promoted clone. The space they use moves from the origin file system to the promoted clone, so enough space must be available to accommodate these snapshots. No new space is consumed by this operation, but the space accounting is adjusted. The promoted clone must not have any conflicting snapshot names of its own. The <code class=Cm>rename</code> subcommand can be used to rename any conflicting snapshots.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>rename</code> [<code class=Fl>-f</code>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>rename</code> [<code class=Fl>-f</code>] <code class=Fl>-p</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>rename</code><code class=Fl>-u</code> [<code class=Fl>-p</code>] <var class=Ar>filesystem filesystem</var></dt><dd><p class=Pp>Renames the given dataset. The new target can be located anywhere in the ZFS hierarchy, with the exception of snapshots. Snapshots can only be renamed within the parent file system or volume. When renaming a snapshot, the parent file system of the snapshot does not need to be specified as part of the second argument. Renamed file systems can inherit new mount points, in which case they are unmounted and remounted at the new mount point.</p><dl class=Bl-tag><dt><a class=permalink href=#p_6><code class=Fl id=p_6>-p</code></a></dt><dd>Creates all the nonexistent parent datasets. Datasets created in this manner are automatically mounted according to the <b class=Sy>mountpoint</b> property inherited from their parent.</dd><dt><a class=permalink href=#u_2><code class=Fl id=u_2>-u</code></a></dt><dd>Do not remount file systems during rename. If a file system's <b class=Sy>mountpoint</b> property is set to <code class=Cm>legacy</code> or <code class=Cm>none</code>, file system is not unmounted even if this option is not given.</dd><dt><a class=permalink href=#f_3><code class=Fl id=f_3>-f</code></a></dt><dd>Force unmount any filesystems that need to be unmounted in the process. This flag has no effect if used together with the <code class=Fl>-u</code> flag.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>rename</code><code class=Fl>-r</code><var class=Ar>snapshot snapshot</var></dt><dd><p class=Pp>Recursively rename the snapshots of all descendent datasets. Snapshots are the only dataset that can be renamed recursively.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>rename</code><var class=Ar>bookmark bookmark</var></dt><dd><p class=Pp>Renames the given bookmark. Bookmarks can only be renamed within the parent file system or volume. When renaming a bookmark, the parent file system or volume of the bookmark does not need to be specified as part of the second argument.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>list</code> [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,<var class=Ar>property</var>]...] [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] [<code class=Fl>-s</code><var class=Ar>property</var>]... [<code class=Fl>-S</code><var class=Ar>property</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</dt><dd><p class=Pp>Lists the property information for the given datasets in tabular form. If specified, you can list property information by the absolute pathname or the relative pathname. By default, all file systems and volumes are displayed. Snapshots are displayed if the <b class=Sy>listsnaps</b> property is <code class=Cm>on</code> (the default is <code class=Cm>off</code>). The following fields are displayed, <b class=Sy>name</b>, <b class=Sy>used</b>, <b class=Sy>available</b>, <b class=Sy>referenced</b>, <b class=Sy>mountpoint</b>.</p><dl class=Bl-tag><dt><a class=permalink href=#r_5><code class=Fl id=r_5>-r</code></a></dt><dd>Recursively display any children of the dataset on the command line.</dd><dt><a class=permalink href=#d_2><code class=Fl id=d_2>-d</code></a><var class=Ar>depth</var></dt><dd>Recursively display any children of the dataset, limiting the recursion to <var class=Ar>depth</var>. A depth of <b class=Sy>1</b> will display only the dataset and its direct children.</dd><dt><a class=permalink href=#H><code class=Fl id=H>-H</code></a></dt><dd>Used for scripting mode. Do not print headers and separate fields by a single tab instead of arbitrary white space.</dd><dt><a class=permalink href=#p_7><code class=Fl id=p_7>-p</code></a></dt><dd>Display numbers in parsable (exact) values.</dd><dt><a class=permalink href=#o_5><code class=Fl id=o_5>-o</code></a><var class=Ar>property</var>[,<var class=Ar>property</var>]...</dt><dd>A comma-separated list of properties to display. The property must be: <ul class="Bl-bullet Bd-indent"><li>One of the properties described in the “<a class=Sx href=#Native_Properties>Native Properties</a>” section</li><li>A user property</li><li>The value <code class=Cm>name</code> to display the dataset name</li><li>The value <code class=Cm>space</code> to display space usage properties on file systems and volumes. This is a shortcut for specifying <code class=Fl>-o</code><b class=Sy>name,avail,used,usedsnap,usedds,usedrefreserv,usedchild</b><code class=Fl>-t</code><b class=Sy>filesystem,volume</b> syntax.</li></ul></dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a><var class=Ar>type</var>[,<var class=Ar>type</var>]...</dt><dd>A comma-separated list of types to display, where <var class=Ar>type</var> is one of <b class=Sy>filesystem</b>, <b class=Sy>snapshot</b>, <b class=Sy>snap</b>, <b class=Sy>volume</b>, <b class=Sy>bookmark</b>, <span class=No>or</span><b class=Sy>all</b>. For example, specifying <code class=Fl>-t</code><code class=Cm>snapshot</code> displays only snapshots.</dd><dt><a class=permalink href=#s_2><code class=Fl id=s_2>-s</code></a><var class=Ar>property</var></dt><dd>A property for sorting the output by column in ascending order based on the value of the property. The property must be one of the properties described in the “<a class=Sx href=#Properties>Properties</a>” section, or the special value <code class=Cm>name</code> to sort by the dataset name. Multiple properties can be specified at one time using multiple <code class=Fl>-s</code> property options. Multiple <code class=Fl>-s</code> options are evaluated from left to right in decreasing order of importance. <p class=Pp>The following is a list of sorting criteria:</p><ul class="Bl-bullet Bd-indent"><li>Numeric types sort in numeric order.</li><li>String types sort in alphabetical order.</li><li>Types inappropriate for a row sort that row to the literal bottom, regardless of the specified ordering.</li><li>If no sorting options are specified the existing behavior of “<code class=Nm>zfs</code><code class=Cm>list</code>” is preserved.</li></ul></dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>property</var></dt><dd>Same as the <code class=Fl>-s</code> option, but sorts by property in descending order.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>set</code><var class=Ar>property</var>=<var class=Ar>value</var> [<var class=Ar>property</var>=<var class=Ar>value</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></dt><dd><p class=Pp>Sets the property or list of properties to the given value(s) for each dataset. Only some properties can be edited. See the "Properties" section for more information on what properties can be set and acceptable values. Numeric values can be specified as exact values, or in a human-readable form with a suffix of <b class=Sy>B</b>, <b class=Sy>K</b>, <b class=Sy>M</b>, <b class=Sy>G</b>, <b class=Sy>T</b>, <b class=Sy>P</b>, <b class=Sy>E</b>, <b class=Sy>Z</b> (for bytes, kilobytes, megabytes, gigabytes, terabytes, petabytes, exabytes, or zettabytes, respectively). User properties can be set on snapshots. For more information, see the “<a class=Sx href=#User_Properties>User Properties</a>” section.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>get</code> [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] [<code class=Fl>-Hp</code>] [<code class=Fl>-o</code><var class=Ar>all</var> | <var class=Ar>field</var>[,<var class=Ar>field</var>]...] [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] [<code class=Fl>-s</code><var class=Ar>source</var>[,<var class=Ar>source</var>]...] <var class=Ar>all</var> | <var class=Ar>property</var>[,<var class=Ar>property</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>|<var class=Ar>bookmark</var>...</dt><dd><p class=Pp>Displays properties for the given datasets. If no datasets are specified, then the command displays properties for all datasets on the system. For each property, the following columns are displayed:</p><p class=Pp></p><dl class="Bl-hang Bd-indent Bl-compact"><dt>name</dt><dd>Dataset name</dd><dt>property</dt><dd>Property name</dd><dt>value</dt><dd>Property value</dd><dt>source</dt><dd>Property source. Can either be local, default, temporary, inherited, received, or none (-).</dd></dl><p class=Pp>All columns except the <b class=Sy>RECEIVED</b> column are displayed by default. The columns to display can be specified by using the <code class=Fl>-o</code> option. This command takes a comma-separated list of properties as described in the “<a class=Sx href=#Native_Properties>Native Properties</a>” and “<a class=Sx href=#User_Properties>User Properties</a>” sections.</p><p class=Pp>The special value <code class=Cm>all</code> can be used to display all properties that apply to the given dataset's type (filesystem, volume, snapshot, or bookmark).</p><dl class=Bl-tag><dt><a class=permalink href=#r_6><code class=Fl id=r_6>-r</code></a></dt><dd>Recursively display properties for any children.</dd><dt><a class=permalink href=#d_3><code class=Fl id=d_3>-d</code></a><var class=Ar>depth</var></dt><dd>Recursively display any children of the dataset, limiting the recursion to <var class=Ar>depth</var>. A depth of <b class=Sy>1</b> will display only the dataset and its direct children.</dd><dt><a class=permalink href=#H_2><code class=Fl id=H_2>-H</code></a></dt><dd>Display output in a form more easily parsed by scripts. Any headers are omitted, and fields are explicitly separated by a single tab instead of an arbitrary amount of space.</dd><dt><a class=permalink href=#p_8><code class=Fl id=p_8>-p</code></a></dt><dd>Display numbers in parsable (exact) values.</dd><dt><a class=permalink href=#o_6><code class=Fl id=o_6>-o</code></a><code class=Cm>all</code> | <var class=Ar>field</var>[,<var class=Ar>field</var>]...</dt><dd>A comma-separated list of columns to display. Supported values are <b class=Sy>name,property,value,received,source</b>. Default values are <b class=Sy>name,property,value,source</b>. The keyword <code class=Cm>all</code> specifies all columns.</dd><dt><a class=permalink href=#t_2><code class=Fl id=t_2>-t</code></a><var class=Ar>type</var>[,<var class=Ar>type</var>]...</dt><dd>A comma-separated list of types to display, where <var class=Ar>type</var> is one of <b class=Sy>filesystem</b>, <b class=Sy>snapshot</b>, <b class=Sy>volume</b>, <span class=No>or</span><b class=Sy>all</b>. For example, specifying <code class=Fl>-t</code><code class=Cm>snapshot</code> displays only snapshots.</dd><dt><a class=permalink href=#s_3><code class=Fl id=s_3>-s</code></a><var class=Ar>source</var>[,<var class=Ar>source</var>]...</dt><dd>A comma-separated list of sources to display. Those properties coming from a source other than those in this list are ignored. Each source must be one of the following: <b class=Sy>local,default,inherited,temporary,received,none</b>. The default value is all sources.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>inherit</code> [<code class=Fl>-rS</code>] <var class=Ar>property</var><var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</dt><dd><p class=Pp>Clears the specified property, causing it to be inherited from an ancestor, restored to default if no ancestor has the property set, or with the <code class=Fl>-S</code> option reverted to the received value if one exists. See the “<a class=Sx href=#Properties>Properties</a>” section for a listing of default values, and details on which properties can be inherited.</p><dl class=Bl-tag><dt><a class=permalink href=#r_7><code class=Fl id=r_7>-r</code></a></dt><dd>Recursively inherit the given property for all children.</dd><dt><a class=permalink href=#S_2><code class=Fl id=S_2>-S</code></a></dt><dd>Revert the property to the received value if one exists; otherwise operate as if the <code class=Fl>-S</code> option was not specified.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>remap</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Remap the indirect blocks in the given filesystem or volume so that they no longer reference blocks on previously removed vdevs and we can eventually shrink the size of the indirect mapping objects for the previously removed vdevs. Note that remapping all blocks might not be possible and that references from snapshots will still exist and cannot be remapped.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>upgrade</code> [<code class=Fl>-v</code>]</dt><dd><p class=Pp>Displays a list of file systems that are not the most recent version.</p><dl class=Bl-tag><dt><a class=permalink href=#v_3><code class=Fl id=v_3>-v</code></a></dt><dd>Displays ZFS filesystem versions supported by the current software. The current ZFS filesystem version and all previous supported versions are displayed, along with an explanation of the features provided with each version.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>upgrade</code> [<code class=Fl>-r</code>] [<code class=Fl>-V</code><var class=Ar>version</var>] <code class=Fl>-a</code> | <var class=Ar>filesystem</var></dt><dd><p class=Pp>Upgrades file systems to a new on-disk version. Once this is done, the file systems will no longer be accessible on systems running older versions of the software. “<code class=Nm>zfs</code><code class=Cm>send</code>” streams generated from new snapshots of these file systems cannot be accessed on systems running older versions of the software.</p><p class=Pp>In general, the file system version is independent of the pool version. See <a class=Xr href=zpool.8.html>zpool(8)</a> for information on the <code class=Nm>zpool</code><code class=Cm>upgrade</code> command.</p><p class=Pp>In some cases, the file system version and the pool version are interrelated and the pool version must be upgraded before the file system version can be upgraded.</p><dl class=Bl-tag><dt><a class=permalink href=#r_8><code class=Fl id=r_8>-r</code></a></dt><dd>Upgrade the specified file system and all descendent file systems.</dd><dt><a class=permalink href=#V><code class=Fl id=V>-V</code></a><var class=Ar>version</var></dt><dd>Upgrade to the specified <var class=Ar>version</var>. If the <code class=Fl>-V</code> flag is not specified, this command upgrades to the most recent version. This option can only be used to increase the version number, and only up to the most recent version supported by this software.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>Upgrade all file systems on all imported pools.</dd><dt><var class=Ar>filesystem</var></dt><dd>Upgrade the specified file system.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>userspace</code> [<code class=Fl>-Hinp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,<var class=Ar>field</var>]...] [<code class=Fl>-s</code><var class=Ar>field</var>]... [<code class=Fl>-S</code><var class=Ar>field</var>]... [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></dt><dd><p class=Pp>Displays space consumed by, and quotas on, each user in the specified filesystem or snapshot. This corresponds to the <b class=Sy>userused@</b><var class=Ar>user</var> and <b class=Sy>userquota@</b><var class=Ar>user</var> properties.</p><dl class=Bl-tag><dt><a class=permalink href=#n_3><code class=Fl id=n_3>-n</code></a></dt><dd>Print numeric ID instead of user/group name.</dd><dt><a class=permalink href=#H_3><code class=Fl id=H_3>-H</code></a></dt><dd>Do not print headers, use tab-delimited output.</dd><dt><a class=permalink href=#p_9><code class=Fl id=p_9>-p</code></a></dt><dd>Use exact (parsable) numeric output.</dd><dt><a class=permalink href=#o_7><code class=Fl id=o_7>-o</code></a><var class=Ar>field</var>[,<var class=Ar>field</var>]...</dt><dd>Display only the specified fields from the following set: <b class=Sy>type,name,used,quota</b>. The default is to display all fields.</dd><dt><a class=permalink href=#s_4><code class=Fl id=s_4>-s</code></a><var class=Ar>field</var></dt><dd>Sort output by this field. The <code class=Fl>-s</code> and <code class=Fl>-S</code> flags may be specified multiple times to sort first by one field, then by another. The default is <code class=Fl>-s</code><code class=Cm>type</code><code class=Fl>-s</code><code class=Cm>name</code>.</dd><dt><a class=permalink href=#S_3><code class=Fl id=S_3>-S</code></a><var class=Ar>field</var></dt><dd>Sort by this field in reverse order. See <code class=Fl>-s</code>.</dd><dt><a class=permalink href=#t_3><code class=Fl id=t_3>-t</code></a><var class=Ar>type</var>[,<var class=Ar>type</var>]...</dt><dd>Print only the specified types from the following set: <b class=Sy>all,posixuser,smbuser,posixgroup,smbgroup</b>. <p class=Pp>The default is <code class=Fl>-t</code><code class=Cm>posixuser,smbuser</code>.</p><p class=Pp>The default can be changed to include group types.</p></dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>Translate SID to POSIX ID. This flag currently has no effect on <span class=Ux>FreeBSD</span>.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>groupspace</code> [<code class=Fl>-Hinp</code>] [<code class=Fl>-o</code><var class=Ar>field</var>[,<var class=Ar>field</var>]...] [<code class=Fl>-s</code><var class=Ar>field</var>]... [<code class=Fl>-S</code><var class=Ar>field</var>]... [<code class=Fl>-t</code><var class=Ar>type</var>[,<var class=Ar>type</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>snapshot</var></dt><dd><p class=Pp>Displays space consumed by, and quotas on, each group in the specified filesystem or snapshot. This subcommand is identical to “<code class=Nm>zfs</code><code class=Cm>userspace</code>”, except that the default types to display are <code class=Fl>-t</code><b class=Sy>posixgroup,smbgroup</b>.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>mount</code></dt><dd><p class=Pp>Displays all ZFS file systems currently mounted.</p><dl class=Bl-tag><dt><a class=permalink href=#f_4><code class=Fl id=f_4>-f</code></a></dt><dd style="width: auto;"> </dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>mount</code> [<code class=Fl>-vO</code>] [<code class=Fl>-o</code><var class=Ar>property</var>[,<var class=Ar>property</var>]...] <code class=Fl>-a</code> | <var class=Ar>filesystem</var></dt><dd><p class=Pp>Mounts ZFS file systems.</p><dl class=Bl-tag><dt><a class=permalink href=#v_4><code class=Fl id=v_4>-v</code></a></dt><dd>Report mount progress.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a></dt><dd>Perform an overlay mount. Overlay mounts are not supported on <span class=Ux>FreeBSD</span>.</dd><dt><a class=permalink href=#o_8><code class=Fl id=o_8>-o</code></a><var class=Ar>property</var>[,<var class=Ar>property</var>]...</dt><dd>An optional, comma-separated list of mount options to use temporarily for the duration of the mount. See the “<a class=Sx href=#Temporary_Mount_Point_Properties>Temporary Mount Point Properties</a>” section for details.</dd><dt><a class=permalink href=#a_2><code class=Fl id=a_2>-a</code></a></dt><dd>Mount all available ZFS file systems. This command may be executed on <span class=Ux>FreeBSD</span> system startup by <span class=Pa>/etc/rc.d/zfs</span>. For more information, see variable <var class=Va>zfs_enable</var> in <a class=Xr href=rc.conf.5.html>rc.conf(5)</a>.</dd><dt><var class=Ar>filesystem</var></dt><dd>Mount the specified filesystem.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>unmount</code>|<code class=Cm>umount</code> [<code class=Fl>-f</code>] <code class=Fl>-a</code> | <var class=Ar>filesystem</var>|<var class=Ar>mountpoint</var></dt><dd><p class=Pp>Unmounts currently mounted ZFS file systems.</p><dl class=Bl-tag><dt><a class=permalink href=#f_5><code class=Fl id=f_5>-f</code></a></dt><dd>Forcefully unmount the file system, even if it is currently in use.</dd><dt><a class=permalink href=#a_3><code class=Fl id=a_3>-a</code></a></dt><dd>Unmount all available ZFS file systems.</dd><dt><var class=Ar>filesystem</var> | <var class=Ar>mountpoint</var></dt><dd>Unmount the specified filesystem. The command can also be given a path to a ZFS file system mount point on the system.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>share</code><code class=Fl>-a</code> | <var class=Ar>filesystem</var></dt><dd><p class=Pp>Shares ZFS file systems that have the <b class=Sy>sharenfs</b> property set.</p><dl class=Bl-tag><dt><a class=permalink href=#a_4><code class=Fl id=a_4>-a</code></a></dt><dd>Share all ZFS file systems that have the <b class=Sy>sharenfs</b> property set. This command may be executed on <span class=Ux>FreeBSD</span> system startup by <span class=Pa>/etc/rc.d/zfs</span>. For more information, see variable <var class=Va>zfs_enable</var> in <a class=Xr href=rc.conf.5.html>rc.conf(5)</a>.</dd><dt><var class=Ar>filesystem</var></dt><dd>Share the specified filesystem according to the sharenfs property. File systems are shared when the sharenfs property is set.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>unshare</code><code class=Fl>-a</code> | <var class=Ar>filesystem</var>|<var class=Ar>mountpoint</var></dt><dd><p class=Pp>Unshares ZFS file systems that have the sharenfs property set.</p><dl class=Bl-tag><dt><a class=permalink href=#a_5><code class=Fl id=a_5>-a</code></a></dt><dd>Unshares ZFS file systems that have the <b class=Sy>sharenfs</b> property set. This command may be executed on <span class=Ux>FreeBSD</span> system shutdown by <span class=Pa>/etc/rc.d/zfs</span>. For more information, see variable <var class=Va>zfs_enable</var> in <a class=Xr href=rc.conf.5.html>rc.conf(5)</a>.</dd><dt><var class=Ar>filesystem</var> | <var class=Ar>mountpoint</var></dt><dd>Unshare the specified filesystem. The command can also be given a path to a ZFS file system shared on the system.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>bookmark</code><var class=Ar>snapshot</var><var class=Ar>bookmark</var></dt><dd><p class=Pp>Creates a bookmark of the given snapshot. Bookmarks mark the point in time when the snapshot was created, and can be used as the incremental source for a “<code class=Nm>zfs</code><code class=Cm>send</code>” command.</p><p class=Pp>This feature must be enabled to be used. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>bookmark</b> feature.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>send</code> [<code class=Fl>-DLPRVcenpv</code>] [<code class=Fl>-i</code><var class=Ar>snapshot</var> | <code class=Fl>-I</code><var class=Ar>snapshot</var>] <var class=Ar>snapshot</var></dt><dd><p class=Pp>Creates a stream representation of the last <var class=Ar>snapshot</var> argument (not part of <code class=Fl>-i</code> or <code class=Fl>-I</code>) which is written to standard output. The output can be redirected to a file or to a different system (for example, using <a class=Xr href=ssh.1.html>ssh(1)</a>). By default, a full stream is generated.</p><dl class=Bl-tag><dt><a class=permalink href=#i_2><code class=Fl id=i_2>-i</code></a><var class=Ar>snapshot</var></dt><dd>Generate an incremental stream from the first <var class=Ar>snapshot</var> (the incremental source) to the second <var class=Ar>snapshot</var> (the incremental target). The incremental source can be specified as the last component of the snapshot name (the <i class=Em>@</i><span class=No>character and following</span>) and it is assumed to be from the same file system as the incremental target. <p class=Pp>If the destination is a clone, the source may be the origin snapshot, which must be fully specified (for example, <code class=Cm>pool/fs@origin</code>, not just <code class=Cm>@origin</code>).</p></dd><dt><a class=permalink href=#I><code class=Fl id=I>-I</code></a><var class=Ar>snapshot</var></dt><dd>Generate a stream package that sends all intermediary snapshots from the first <var class=Ar>snapshot</var> to the second <var class=Ar>snapshot</var>. For example, <code class=Ic>-I @a fs@d</code> is similar to <code class=Ic>-i @a fs@b; -i @b fs@c; -i @c fs@d</code>. The incremental source may be specified as with the <code class=Fl>-i</code> option.</dd><dt><a class=permalink href=#R,><code class=Fl id=R,>-R,</code></a><code class=Fl>--replicate</code></dt><dd>Generate a replication stream package, which will replicate the specified filesystem, and all descendent file systems, up to the named snapshot. When received, all properties, snapshots, descendent file systems, and clones are preserved. <p class=Pp>If the <code class=Fl>-i</code> or <code class=Fl>-I</code> flags are used in conjunction with the <code class=Fl>-R</code> flag, an incremental replication stream is generated. The current values of properties, and current snapshot and file system names are set when the stream is received. If the <code class=Fl>-F</code> flag is specified when this stream is received, snapshots and file systems that do not exist on the sending side are destroyed.</p></dd><dt><a class=permalink href=#D,><code class=Fl id=D,>-D,</code></a><code class=Fl>--dedup</code></dt><dd>Generate a deduplicated stream. Blocks which would have been sent multiple times in the send stream will only be sent once. The receiving system must also support this feature to receive a deduplicated stream. This flag can be used regardless of the dataset's <b class=Sy>dedup</b> property, but performance will be much better if the filesystem uses a dedup-capable checksum (eg. <b class=Sy>sha256</b>).</dd><dt><a class=permalink href=#L,><code class=Fl id=L,>-L,</code></a><code class=Fl>--large-block</code></dt><dd>Generate a stream which may contain blocks larger than 128KB. This flag has no effect if the <b class=Sy>large_blocks</b> pool feature is disabled, or if the <b class=Sy>recordsize</b> property of this filesystem has never been set above 128KB. The receiving system must have the <b class=Sy>large_blocks</b> pool feature enabled as well. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>large_blocks</b> feature.</dd><dt><a class=permalink href=#e,><code class=Fl id=e,>-e,</code></a><code class=Fl>--embed</code></dt><dd>Generate a more compact stream by using WRITE_EMBEDDED records for blocks which are stored more compactly on disk by the <b class=Sy>embedded_data</b> pool feature. This flag has no effect if the <b class=Sy>embedded_data</b> feature is disabled. The receiving system must have the <b class=Sy>embedded_data</b> feature enabled. If the <b class=Sy>lz4_compress</b> feature is active on the sending system, then the receiving system must have that feature enabled as well. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>embedded_data</b> feature.</dd><dt><a class=permalink href=#c,><code class=Fl id=c,>-c,</code></a><code class=Fl>--compressed</code></dt><dd>Generate a more compact stream by using compressed WRITE records for blocks which are compressed on disk and in memory (see the <b class=Sy>compression</b> property for details). If the <b class=Sy>lz4_compress</b> feature is active on the sending system, then the receiving system must have that feature enabled as well. If the <b class=Sy>large_blocks</b> feature is enabled on the sending system but the <code class=Fl>-L</code> option is not supplied in conjunction with <code class=Fl>-c</code> then the data will be decompressed before sending so it can be split into smaller block sizes.</dd><dt><a class=permalink href=#p,><code class=Fl id=p,>-p,</code></a><code class=Fl>--props</code></dt><dd>Include the dataset's properties in the stream. This flag is implicit when <code class=Fl>-R</code> is specified. The receiving system must also support this feature.</dd><dt><a class=permalink href=#n,><code class=Fl id=n,>-n,</code></a><code class=Fl>--dryrun</code></dt><dd>Do a dry-run ("No-op") send. Do not generate any actual send data. This is useful in conjunction with the <code class=Fl>-v</code> or <code class=Fl>-P</code> flags to determine what data will be sent. In this case, the verbose output will be written to standard output (contrast with a non-dry-run, where the stream is written to standard output and the verbose output goes to standard error).</dd><dt><a class=permalink href=#P,><code class=Fl id=P,>-P,</code></a><code class=Fl>--parsable</code></dt><dd>Print machine-parsable verbose information about the stream package generated.</dd><dt><a class=permalink href=#v,><code class=Fl id=v,>-v,</code></a><code class=Fl>--verbose</code></dt><dd>Print verbose information about the stream package generated. This information includes a per-second report of how much data has been sent.</dd><dt><a class=permalink href=#V_2><code class=Fl id=V_2>-V</code></a></dt><dd>Set the process title to a per-second report of how much data has been sent.</dd></dl><p class=Pp>The format of the stream is committed. You will be able to receive your streams on future versions of ZFS.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>send</code> [<code class=Fl>-LPcenv</code>] [<code class=Fl>-i</code><var class=Ar>snapshot</var>|<var class=Ar>bookmark</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></dt><dd><p class=Pp>Generate a send stream, which may be of a filesystem, and may be incremental from a bookmark. If the destination is a filesystem or volume, the pool must be read-only, or the filesystem must not be mounted. When the stream generated from a filesystem or volume is received, the default snapshot name will be (--head--).</p><dl class=Bl-tag><dt><a class=permalink href=#i_3><code class=Fl id=i_3>-i</code></a><var class=Ar>snapshot</var>|<var class=Ar>bookmark</var></dt><dd>Generate an incremental send stream. The incremental source must be an earlier snapshot in the destination's history. It will commonly be an earlier snapshot in the destination's filesystem, in which case it can be specified as the last component of the name (the <i class=Em>#</i><span class=No>or</span><i class=Em>@</i><span class=No>character and following</span>). <p class=Pp>If the incremental target is a clone, the incremental source can be the origin snapshot, or an earlier snapshot in the origin's filesystem, or the origin's origin, etc.</p></dd><dt><a class=permalink href=#n,_2><code class=Fl id=n,_2>-n,</code></a><code class=Fl>--dryrun</code></dt><dd>Do a dry-run (“No-op”) send. Do not generate any actual send data. This is useful in conjunction with the <code class=Fl>-v</code> or <code class=Fl>-P</code> flags to determine what data will be sent. In this case, the verbose output will be written to standard output (contrast with a non-dry-run, where the stream is written to standard output and the verbose output goes to standard error).</dd><dt><a class=permalink href=#v,_2><code class=Fl id=v,_2>-v,</code></a><code class=Fl>--verbose</code></dt><dd>Print verbose information about the stream package generated. This information includes a per-second report of how much data has been sent.</dd><dt><a class=permalink href=#L,_2><code class=Fl id=L,_2>-L,</code></a><code class=Fl>--large-block</code></dt><dd>Generate a stream which may contain blocks larger than 128KB. This flag has no effect if the <b class=Sy>large_blocks</b> pool feature is disabled, or if the <b class=Sy>recordsize</b> property of this filesystem has never been set above 128KB. The receiving system must have the <b class=Sy>large_blocks</b> pool feature enabled as well. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>large_blocks</b> feature.</dd><dt><a class=permalink href=#P,_2><code class=Fl id=P,_2>-P,</code></a><code class=Fl>--parsable</code></dt><dd>Print machine-parsable verbose information about the stream package generated.</dd><dt><a class=permalink href=#c,_2><code class=Fl id=c,_2>-c,</code></a><code class=Fl>--compressed</code></dt><dd>Generate a more compact stream by using compressed WRITE records for blocks which are compressed on disk and in memory (see the <b class=Sy>compression</b> property for details). If the <b class=Sy>lz4_compress</b> feature is active on the sending system, then the receiving system must have that feature enabled as well. If the <b class=Sy>large_blocks</b> feature is enabled on the sending system but the <code class=Fl>-L</code> option is not supplied in conjunction with <code class=Fl>-c</code> then the data will be decompressed before sending so it can be split into smaller block sizes.</dd><dt><a class=permalink href=#e,_2><code class=Fl id=e,_2>-e,</code></a><code class=Fl>--embed</code></dt><dd>Generate a more compact stream by using WRITE_EMBEDDED records for blocks which are stored more compactly on disk by the <b class=Sy>embedded_data</b> pool feature. This flag has no effect if the <b class=Sy>embedded_data</b> feature is disabled. The receiving system must have the <b class=Sy>embedded_data</b> feature enabled. If the <b class=Sy>lz4_compress</b> feature is active on the sending system, then the receiving system must have that feature enabled as well. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags and the <b class=Sy>embedded_data</b> feature.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>send</code> [<code class=Fl>-Penv</code>] <code class=Fl>-t</code><var class=Ar>receive_resume_token</var></dt><dd>Creates a send stream which resumes an interrupted receive. The <var class=Ar>receive_resume_token</var> is the value of this property on the filesystem or volume that was being received into. See the documentation for <b class=Sy>zfs receive -s</b> for more details.</dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code>|<code class=Cm>recv</code> [<code class=Fl>-vnsFu</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code>|<code class=Cm>recv</code> [<code class=Fl>-vnsFu</code>] [<code class=Fl>-d</code> | <code class=Fl>-e</code>] [<code class=Fl>-o</code><b class=Sy>origin</b>=<var class=Ar>snapshot</var>] <var class=Ar>filesystem</var></dt><dd><p class=Pp>Creates a snapshot whose contents are as specified in the stream provided on standard input. If a full stream is received, then a new file system is created as well. Streams are created using the “<code class=Nm>zfs</code><code class=Cm>send</code>” subcommand, which by default creates a full stream. “<code class=Nm>zfs</code><code class=Cm>recv</code>” can be used as an alias for “<code class=Nm>zfs</code><code class=Cm>receive</code>”.</p><p class=Pp>If an incremental stream is received, then the destination file system must already exist, and its most recent snapshot must match the incremental stream's source. For <b class=Sy>zvol</b>s, the destination device link is destroyed and recreated, which means the <b class=Sy>zvol</b> cannot be accessed during the <b class=Sy>receive</b> operation.</p><p class=Pp>When a snapshot replication package stream that is generated by using the “<code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-R</code>” command is received, any snapshots that do not exist on the sending location are destroyed by using the “<code class=Nm>zfs</code><code class=Cm>destroy</code><code class=Fl>-d</code>” command.</p><p class=Pp>The name of the snapshot (and file system, if a full stream is received) that this subcommand creates depends on the argument type and the <code class=Fl>-d</code> or <code class=Fl>-e</code> option.</p><p class=Pp>If the argument is a snapshot name, the specified <var class=Ar>snapshot</var> is created. If the argument is a file system or volume name, a snapshot with the same name as the sent snapshot is created within the specified <var class=Ar>filesystem</var> or <var class=Ar>volume</var>. If the <code class=Fl>-d</code> or <code class=Fl>-e</code> option is specified, the snapshot name is determined by appending the sent snapshot's name to the specified <var class=Ar>filesystem</var>. If the <code class=Fl>-d</code> option is specified, all but the pool name of the sent snapshot path is appended (for example, <b class=Sy>b/c@1</b> appended from sent snapshot <b class=Sy>a/b/c@1</b>), and if the <code class=Fl>-e</code> option is specified, only the tail of the sent snapshot path is appended (for example, <b class=Sy>c@1</b> appended from sent snapshot <b class=Sy>a/b/c@1</b>). In the case of <code class=Fl>-d</code>, any file systems needed to replicate the path of the sent snapshot are created within the specified file system.</p><dl class=Bl-tag><dt><a class=permalink href=#d_4><code class=Fl id=d_4>-d</code></a></dt><dd>Use the full sent snapshot path without the first element (without pool name) to determine the name of the new snapshot as described in the paragraph above.</dd><dt><a class=permalink href=#e><code class=Fl id=e>-e</code></a></dt><dd>Use only the last element of the sent snapshot path to determine the name of the new snapshot as described in the paragraph above.</dd><dt><a class=permalink href=#u_3><code class=Fl id=u_3>-u</code></a></dt><dd>File system that is associated with the received stream is not mounted.</dd><dt><a class=permalink href=#v_5><code class=Fl id=v_5>-v</code></a></dt><dd>Print verbose information about the stream and the time required to perform the receive operation.</dd><dt><a class=permalink href=#n_4><code class=Fl id=n_4>-n</code></a></dt><dd>Do not actually receive the stream. This can be useful in conjunction with the <code class=Fl>-v</code> option to verify the name the receive operation would use.</dd><dt><a class=permalink href=#o_9><code class=Fl id=o_9>-o</code></a><b class=Sy>origin</b>=<var class=Ar>snapshot</var></dt><dd>Forces the stream to be received as a clone of the given snapshot. If the stream is a full send stream, this will create the filesystem described by the stream as a clone of the specified snapshot. Which snapshot was specified will not affect the success or failure of the receive, as long as the snapshot does exist. If the stream is an incremental send stream, all the normal verification will be performed.</dd><dt><a class=permalink href=#F><code class=Fl id=F>-F</code></a></dt><dd>Force a rollback of the file system to the most recent snapshot before performing the receive operation. If receiving an incremental replication stream (for example, one generated by “<code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-R</code> {<code class=Fl>-i</code> | <code class=Fl>-I</code>}”), destroy snapshots and file systems that do not exist on the sending side.</dd><dt><a class=permalink href=#s_5><code class=Fl id=s_5>-s</code></a></dt><dd>If the receive is interrupted, save the partially received state, rather than deleting it. Interruption may be due to premature termination of the stream (e.g. due to network failure or failure of the remote system if the stream is being read over a network connection), a checksum error in the stream, termination of the <code class=Nm>zfs</code><code class=Cm>receive</code> process, or unclean shutdown of the system. <p class=Pp>The receive can be resumed with a stream generated by <code class=Nm>zfs</code><code class=Cm>send</code><code class=Fl>-t</code><var class=Ar>token</var>, where the <var class=Ar>token</var> is the value of the <b class=Sy>receive_resume_token</b> property of the filesystem or volume which is received into.</p><p class=Pp>To use this flag, the storage pool must have the <b class=Sy>extensible_dataset</b> feature enabled. See <a class=Xr href=zpool-features.7.html>zpool-features(7)</a> for details on ZFS feature flags.</p></dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>receive</code>|<code class=Cm>recv</code><code class=Fl>-A</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd>Abort an interrupted <code class=Nm>zfs</code><code class=Cm>receive</code><code class=Fl>-s</code>, deleting its saved partially received state.</dd><dt><code class=Nm>zfs</code><code class=Cm>allow</code><var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Displays permissions that have been delegated on the specified filesystem or volume. See the other forms of “<code class=Nm>zfs</code><code class=Cm>allow</code>” for more information.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>allow</code> [<code class=Fl>-ldug</code>] <var class=Ar>user</var>|<var class=Ar>group</var>[,<var class=Ar>user</var>|<var class=Ar>group</var>]... <var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>allow</code> [<code class=Fl>-ld</code>] <code class=Fl>-e</code>|<code class=Cm>everyone</code><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Delegates ZFS administration permission for the file systems to non-privileged users.</p><dl class=Bl-tag><dt>[<code class=Fl>-ug</code>] <var class=Ar>user</var>|<var class=Ar>group</var>[, <var class=Ar>user</var>|<var class=Ar>group</var>]...</dt><dd>Specifies to whom the permissions are delegated. Multiple entities can be specified as a comma-separated list. If neither of the <code class=Fl>-ug</code> options are specified, then the argument is interpreted preferentially as the keyword <code class=Cm>everyone</code>, then as a user name, and lastly as a group name. To specify a user or group named “everyone”, use the <code class=Fl>-u</code> or <code class=Fl>-g</code> options. To specify a group with the same name as a user, use the <code class=Fl>-g</code> option.</dd><dt>[<code class=Fl>-e</code>|<code class=Cm>everyone</code>]</dt><dd>Specifies that the permissions be delegated to “everyone”.</dd><dt><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...</dt><dd>The permissions to delegate. Multiple permissions may be specified as a comma-separated list. Permission names are the same as ZFS subcommand and property names. See the property list below. Property set names, which begin with an at sign (<b class=Sy>@</b>), may be specified. See the <code class=Fl>-s</code> form below for details.</dd><dt>[<code class=Fl>-ld</code>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd>Specifies where the permissions are delegated. If neither of the <code class=Fl>-ld</code> options are specified, or both are, then the permissions are allowed for the file system or volume, and all of its descendents. If only the <code class=Fl>-l</code> option is used, then is allowed "locally" only for the specified file system. If only the <code class=Fl>-d</code> option is used, then is allowed only for the descendent file systems.</dd></dl><p class=Pp>Permissions are generally the ability to use a ZFS subcommand or change a ZFS property. The following permissions are available:</p><table class="Bl-column Bd-indent"><tr><td>NAME</td><td>TYPE</td><td>NOTES</td></tr><tr><td>allow</td><td>subcommand</td><td>Must also have the permission that is being allowed</td></tr><tr><td>clone</td><td>subcommand</td><td>Must also have the 'create' ability and 'mount' ability in the origin file system</td></tr><tr><td>create</td><td>subcommand</td><td>Must also have the 'mount' ability</td></tr><tr><td>destroy</td><td>subcommand</td><td>Must also have the 'mount' ability</td></tr><tr><td>diff</td><td>subcommand</td><td>Allows lookup of paths within a dataset given an object number, and the ability to create snapshots necessary to 'zfs diff'</td></tr><tr><td>hold</td><td>subcommand</td><td>Allows adding a user hold to a snapshot</td></tr><tr><td>mount</td><td>subcommand</td><td>Allows mount/umount of ZFS <span class=No>datasets</span></td></tr><tr><td>promote</td><td>subcommand</td><td>Must also have the 'mount' and 'promote' ability in the origin file system</td></tr><tr><td>receive</td><td>subcommand</td><td>Must also have the 'mount' and 'create' ability</td></tr><tr><td>release</td><td>subcommand</td><td>Allows releasing a user hold which might destroy the snapshot</td></tr><tr><td>rename</td><td>subcommand</td><td>Must also have the 'mount' and 'create' ability in the new parent</td></tr><tr><td>rollback</td><td>subcommand</td><td>Must also have the 'mount' ability</td></tr><tr><td>send</td><td>subcommand</td></tr><tr><td>share</td><td>subcommand</td><td>Allows sharing file systems over the NFS protocol</td></tr><tr><td>snapshot</td><td>subcommand</td><td>Must also have the 'mount' ability</td></tr><tr><td>groupquota</td><td>other</td><td>Allows accessing any groupquota@... property</td></tr><tr><td>groupused</td><td>other</td><td>Allows reading any groupused@... property</td></tr><tr><td>userprop</td><td>other</td><td>Allows changing any user property</td></tr><tr><td>userquota</td><td>other</td><td>Allows accessing any userquota@... property</td></tr><tr><td>userused</td><td>other</td><td>Allows reading any userused@... property</td></tr><tr><td>aclinherit</td><td>property</td></tr><tr><td>aclmode</td><td>property</td></tr><tr><td>atime</td><td>property</td></tr><tr><td>canmount</td><td>property</td></tr><tr><td>casesensitivity</td><td>property</td></tr><tr><td>checksum</td><td>property</td></tr><tr><td>compression</td><td>property</td></tr><tr><td>copies</td><td>property</td></tr><tr><td>dedup</td><td>property</td></tr><tr><td>devices</td><td>property</td></tr><tr><td>exec</td><td>property</td></tr><tr><td>filesystem_limit</td><td>property</td></tr><tr><td>logbias</td><td>property</td></tr><tr><td>jailed</td><td>property</td></tr><tr><td>mlslabel</td><td>property</td></tr><tr><td>mountpoint</td><td>property</td></tr><tr><td>nbmand</td><td>property</td></tr><tr><td>normalization</td><td>property</td></tr><tr><td>primarycache</td><td>property</td></tr><tr><td>quota</td><td>property</td></tr><tr><td>readonly</td><td>property</td></tr><tr><td>recordsize</td><td>property</td></tr><tr><td>refquota</td><td>property</td></tr><tr><td>refreservation</td><td>property</td></tr><tr><td>reservation</td><td>property</td></tr><tr><td>secondarycache</td><td>property</td></tr><tr><td>setuid</td><td>property</td></tr><tr><td>sharenfs</td><td>property</td></tr><tr><td>sharesmb</td><td>property</td></tr><tr><td>snapdir</td><td>property</td></tr><tr><td>snapshot_limit</td><td>property</td></tr><tr><td>sync</td><td>property</td></tr><tr><td>utf8only</td><td>property</td></tr><tr><td>version</td><td>property</td></tr><tr><td>volblocksize</td><td>property</td></tr><tr><td>volsize</td><td>property</td></tr><tr><td>vscan</td><td>property</td></tr><tr><td>xattr</td><td>property</td></tr></table></dd><dt><code class=Nm>zfs</code><code class=Cm>allow</code><code class=Fl>-c</code><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Sets "create time" permissions. These permissions are granted (locally) to the creator of any newly-created descendent file system.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>allow</code><code class=Fl>-s</code><var class=Ar>@setname</var><var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]... <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Defines or adds permissions to a permission set. The set can be used by other “<code class=Nm>zfs</code><code class=Cm>allow</code>” commands for the specified file system and its descendents. Sets are evaluated dynamically, so changes to a set are immediately reflected. Permission sets follow the same naming restrictions as ZFS file systems, but the name must begin with an "at sign" (<b class=Sy>@</b>), and can be no more than 64 characters long.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>unallow</code> [<code class=Fl>-rldug</code>] <var class=Ar>user</var>|<var class=Ar>group</var>[,<var class=Ar>user</var>|<var class=Ar>group</var>]... [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>unallow</code> [<code class=Fl>-rld</code>] <code class=Fl>-e</code>|<code class=Cm>everyone</code> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd style="width: auto;"> </dd><dt><code class=Nm>zfs</code><code class=Cm>unallow</code> [<code class=Fl>-r</code>] <code class=Fl>-c</code> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Removes permissions that were granted with the “<code class=Nm>zfs</code><code class=Cm>allow</code>” command. No permissions are explicitly denied, so other permissions granted are still in effect. For example, if the permission is granted by an ancestor. If no permissions are specified, then all permissions for the specified <var class=Ar>user</var>, <var class=Ar>group</var>, <span class=No>or everyone</span> are removed. Specifying <code class=Cm>everyone</code> (or using the <code class=Fl>-e</code> option) only removes the permissions that were granted to everyone, not all permissions for every user and group. See the “<code class=Nm>zfs</code><code class=Cm>allow</code>” command for a description of the <code class=Fl>-ldugec</code> options.</p><dl class=Bl-tag><dt><a class=permalink href=#r_9><code class=Fl id=r_9>-r</code></a></dt><dd>Recursively remove the permissions from this file system and all descendents.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>unallow</code> [<code class=Fl>-r</code>] <code class=Fl>-s</code><var class=Ar>@setname</var> [<var class=Ar>perm</var>|<var class=Ar>@setname</var>[,<var class=Ar>perm</var>|<var class=Ar>@setname</var>]...] <var class=Ar>filesystem</var>|<var class=Ar>volume</var></dt><dd><p class=Pp>Removes permissions from a permission set. If no permissions are specified, then all permissions are removed, thus removing the set entirely.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>hold</code> [<code class=Fl>-r</code>] <var class=Ar>tag snapshot</var>...</dt><dd><p class=Pp>Adds a single reference, named with the <var class=Ar>tag</var> argument, to the specified snapshot or snapshots. Each snapshot has its own tag namespace, and tags must be unique within that space.</p><p class=Pp>If a hold exists on a snapshot, attempts to destroy that snapshot by using the “<code class=Nm>zfs</code><code class=Cm>destroy</code>” command returns <i class=Em>EBUSY</i>.</p><dl class=Bl-tag><dt><a class=permalink href=#r_10><code class=Fl id=r_10>-r</code></a></dt><dd>Specifies that a hold with the given tag is applied recursively to the snapshots of all descendent file systems.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>holds</code> [<code class=Fl>-Hp</code>] [<code class=Fl>-r</code>|<code class=Fl>-d</code><var class=Ar>depth</var>] <var class=Ar>filesystem</var>|<var class=Ar>volume</var>|<var class=Ar>snapshot</var>...</dt><dd><p class=Pp>Lists all existing user references for the given dataset or datasets.</p><dl class=Bl-tag><dt><a class=permalink href=#H_4><code class=Fl id=H_4>-H</code></a></dt><dd>Used for scripting mode. Do not print headers and separate fields by a single tab instead of arbitrary white space.</dd><dt><a class=permalink href=#p_10><code class=Fl id=p_10>-p</code></a></dt><dd>Display numbers in parsable (exact) values.</dd><dt><a class=permalink href=#r_11><code class=Fl id=r_11>-r</code></a></dt><dd>Lists the holds that are set on the descendent snapshots of the named datasets or snapshots, in addition to listing the holds on the named snapshots, if any.</dd><dt><a class=permalink href=#d_5><code class=Fl id=d_5>-d</code></a><var class=Ar>depth</var></dt><dd>Recursively display any holds on the named snapshots, or descendent snapshots of the named datasets or snapshots, limiting the recursion to <var class=Ar>depth</var>.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>release</code> [<code class=Fl>-r</code>] <var class=Ar>tag snapshot</var>...</dt><dd><p class=Pp>Removes a single reference, named with the <var class=Ar>tag</var> argument, from the specified snapshot or snapshots. The tag must already exist for each snapshot.</p><dl class=Bl-tag><dt><a class=permalink href=#r_12><code class=Fl id=r_12>-r</code></a></dt><dd>Recursively releases a hold with the given tag on the snapshots of all descendent file systems.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>diff</code> [<code class=Fl>-FHt</code>] <var class=Ar>snapshot</var> [<var class=Ar>snapshot</var>|<var class=Ar>filesystem</var>]</dt><dd><p class=Pp>Display the difference between a snapshot of a given filesystem and another snapshot of that filesystem from a later time or the current contents of the filesystem. The first column is a character indicating the type of change, the other columns indicate pathname, new pathname (in case of rename), change in link count, and optionally file type and/or change time.</p><p class=Pp>The types of change are:</p><table class="Bl-column Bd-indent"><tr><td>-</td><td>path was removed</td></tr><tr><td>+</td><td>path was added</td></tr><tr><td>M</td><td>path was modified</td></tr><tr><td>R</td><td>path was renamed</td></tr></table><dl class=Bl-tag><dt><a class=permalink href=#F_2><code class=Fl id=F_2>-F</code></a></dt><dd>Display an indication of the type of file, in a manner similar to the <code class=Fl>-F</code> option of <a class=Xr href=ls.1.html>ls(1)</a>. <table class="Bl-column Bd-indent"><tr><td>B</td><td>block device</td></tr><tr><td>C</td><td>character device</td></tr><tr><td>F</td><td>regular file</td></tr><tr><td>/</td><td>directory</td></tr><tr><td>@</td><td>symbolic link</td></tr><tr><td>=</td><td>socket</td></tr><tr><td>&gt;</td><td>door (not supported on <span class=Ux>FreeBSD</span>)</td></tr><tr><td>|</td><td>named pipe (not supported on <span class=Ux>FreeBSD</span>)</td></tr><tr><td>P</td><td>event port (not supported on <span class=Ux>FreeBSD</span>)</td></tr></table></dd><dt><a class=permalink href=#H_5><code class=Fl id=H_5>-H</code></a></dt><dd>Give more parsable tab-separated output, without header lines and without arrows.</dd><dt><a class=permalink href=#t_4><code class=Fl id=t_4>-t</code></a></dt><dd>Display the path's inode change time as the first column of output.</dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>program</code> [<code class=Fl>-jn</code>] [<code class=Fl>-t</code><var class=Ar>timeout</var>] [<code class=Fl>-m</code><var class=Ar>memory_limit</var>] <var class=Ar>pool script</var> [<var class=Ar>arg1</var><span class=No>...</span>]</dt><dd><p class=Pp>Executes <var class=Ar>script</var> as a ZFS channel program on <var class=Ar>pool</var>. The ZFS channel program interface allows ZFS administrative operations to be run programmatically via a Lua script. The entire script is executed atomically, with no other administrative operations taking effect concurrently. A library of ZFS calls is made available to channel program scripts. Channel programs may only be run with root privileges.</p><p class=Pp>For full documentation of the ZFS channel program interface, see the manual page for <a class=Xr href=zfs-program.8.html>zfs-program(8)</a>.</p><dl class=Bl-tag><dt><a class=permalink href=#j><code class=Fl id=j>-j</code></a></dt><dd>Display channel program output in JSON format. When this flag is specified and standard output is empty - channel program encountered an error. The details of such an error will be printed to standard error in plain text.</dd><dt><a class=permalink href=#n_5><code class=Fl id=n_5>-n</code></a></dt><dd>Executes a read-only channel program, which runs faster. The program cannot change on-disk state by calling functions from the zfs.sync submodule. The program can be used to gather information such as properties and determining if changes would succeed (zfs.check.*). Without this flag, all pending changes must be synced to disk before a channel program can complete.</dd><dt><a class=permalink href=#t_5><code class=Fl id=t_5>-t</code></a><var class=Ar>timeout</var></dt><dd>Execution time limit, in milliseconds. If a channel program executes for longer than the provided timeout, it will be stopped and an error will be returned. The default timeout is 1000 ms, and can be set to a maximum of 10000 ms.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a><var class=Ar>memory-limit</var></dt><dd>Memory limit, in bytes. If a channel program attempts to allocate more memory than the given limit, it will be stopped and an error returned. The default memory limit is 10 MB, and can be set to a maximum of 100 MB. <p class=Pp>All remaining argument strings are passed directly to the channel program as arguments. See <a class=Xr href=zfs-program.8.html>zfs-program(8)</a> for more information.</p></dd></dl></dd><dt><code class=Nm>zfs</code><code class=Cm>jail</code><var class=Ar>jailid filesystem</var></dt><dd><p class=Pp>Attaches the specified <var class=Ar>filesystem</var> to the jail identified by JID <var class=Ar>jailid</var>. From now on this file system tree can be managed from within a jail if the <b class=Sy>jailed</b> property has been set. To use this functionality, the jail needs the <var class=Va>allow.mount</var> and <var class=Va>allow.mount.zfs</var> parameters set to 1 and the <var class=Va>enforce_statfs</var> parameter set to a value lower than 2.</p><p class=Pp>See <a class=Xr href=jail.8.html>jail(8)</a> for more information on managing jails and configuring the parameters above.</p></dd><dt><code class=Nm>zfs</code><code class=Cm>unjail</code><var class=Ar>jailid filesystem</var></dt><dd><p class=Pp>Detaches the specified <var class=Ar>filesystem</var> from the jail identified by JID <var class=Ar>jailid</var>.</p></dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> The following exit values are returned: <div class=Bd-indent><dl class=Bl-tag><dt>0</dt><dd>Successful completion.</dd><dt>1</dt><dd>An error occurred.</dd><dt>2</dt><dd>Invalid command line options were specified.</dd></dl></div></section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2><dl class=Bl-tag><dt><b class=Sy>Example 1</b><span class=No>Creating a</span> ZFS <span class=No>File System Hierarchy</span></dt><dd><p class=Pp>The following commands create a file system named <i class=Em>pool/home</i> and a file system named <i class=Em>pool/home/bob</i>. The mount point <span class=Pa>/home</span> is set for the parent file system, and is automatically inherited by the child file system.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs create pool/home
</code>
<code class=Li>#
</code> <code class=Ic>zfs set mountpoint=/home pool/home
</code>
<code class=Li>#
</code> <code class=Ic>zfs create pool/home/bob
</code>
    </pre></div></dd><dt><b class=Sy>Example 2</b><span class=No>Creating a</span> ZFS <span class=No>Snapshot</span></dt><dd><p class=Pp>The following command creates a snapshot named <b class=Sy>yesterday</b>. This snapshot is mounted on demand in the <span class=Pa>.zfs/snapshot</span> directory at the root of the <i class=Em>pool/home/bob</i> file system.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs snapshot pool/home/bob@yesterday
</code>
    </pre></div></dd><dt><b class=Sy>Example 3</b><span class=No>Creating and Destroying Multiple Snapshots</span></dt><dd><p class=Pp>The following command creates snapshots named <i class=Em>yesterday</i> of <i class=Em>pool/home</i> and all of its descendent file systems. Each snapshot is mounted on demand in the <span class=Pa>.zfs/snapshot</span> directory at the root of its file system. The second command destroys the newly created snapshots.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs snapshot -r pool/home@yesterday
</code>
<code class=Li>#
</code> <code class=Ic>zfs destroy -r pool/home@yesterday
</code>
    </pre></div></dd><dt><b class=Sy>Example 4</b><span class=No>Disabling and Enabling File System Compression</span></dt><dd><p class=Pp>The following command disables the <b class=Sy>compression</b> property for all file systems under <i class=Em>pool/home</i>. The next command explicitly enables <b class=Sy>compression</b> for <i class=Em>pool/home/anne</i>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs set compression=off pool/home
</code>
<code class=Li>#
</code> <code class=Ic>zfs set compression=on pool/home/anne
</code>
    </pre></div></dd><dt><b class=Sy>Example 5</b><span class=No>Listing</span> ZFS <span class=No>Datasets</span></dt><dd><p class=Pp>The following command lists all active file systems and volumes in the system. Snapshots are displayed if the <b class=Sy>listsnaps</b> property is <code class=Cm>on</code>. The default is <code class=Cm>off</code>. See <a class=Xr href=zpool.8.html>zpool(8)</a> for more information on pool properties.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs list
</code>
   NAME                      USED  AVAIL  REFER  MOUNTPOINT
   pool                      450K   457G    18K  /pool
   pool/home                 315K   457G    21K  /home
   pool/home/anne             18K   457G    18K  /home/anne
   pool/home/bob             276K   457G   276K  /home/bob
    </pre></div></dd><dt><b class=Sy>Example 6</b><span class=No>Setting a Quota on a</span> ZFS <span class=No>File System</span></dt><dd><p class=Pp>The following command sets a quota of 50 Gbytes for <i class=Em>pool/home/bob</i>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs set quota=50G pool/home/bob
</code>
    </pre></div></dd><dt><b class=Sy>Example 7</b><span class=No>Listing</span> ZFS <span class=No>Properties</span></dt><dd><p class=Pp>The following command lists all properties for <i class=Em>pool/home/bob</i>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs get all pool/home/bob
</code>
NAME           PROPERTY              VALUE                  SOURCE
pool/home/bob  type                  filesystem             -
pool/home/bob  creation              Tue Jul 21 15:53 2009  -
pool/home/bob  used                  21K                    -
pool/home/bob  available             20.0G                  -
pool/home/bob  referenced            21K                    -
pool/home/bob  compressratio         1.00x                  -
pool/home/bob  mounted               yes                    -
pool/home/bob  quota                 20G                    local
pool/home/bob  reservation           none                   default
pool/home/bob  recordsize            128K                   default
pool/home/bob  mountpoint            /home/bob              default
pool/home/bob  sharenfs              off                    default
pool/home/bob  checksum              on                     default
pool/home/bob  compression           on                     local
pool/home/bob  atime                 on                     default
pool/home/bob  devices               on                     default
pool/home/bob  exec                  on                     default
pool/home/bob  filesystem_limit      none                   default
pool/home/bob  setuid                on                     default
pool/home/bob  readonly              off                    default
pool/home/bob  jailed                off                    default
pool/home/bob  snapdir               hidden                 default
pool/home/bob  snapshot_limit        none                   default
pool/home/bob  aclmode               discard                default
pool/home/bob  aclinherit            restricted             default
pool/home/bob  canmount              on                     default
pool/home/bob  xattr                 on                     default
pool/home/bob  copies                1                      default
pool/home/bob  version               5                      -
pool/home/bob  utf8only              off                    -
pool/home/bob  normalization         none                   -
pool/home/bob  casesensitivity       sensitive              -
pool/home/bob  vscan                 off                    default
pool/home/bob  nbmand                off                    default
pool/home/bob  sharesmb              off                    default
pool/home/bob  refquota              none                   default
pool/home/bob  refreservation        none                   default
pool/home/bob  primarycache          all                    default
pool/home/bob  secondarycache        all                    default
pool/home/bob  usedbysnapshots       0                      -
pool/home/bob  usedbydataset         21K                    -
pool/home/bob  usedbychildren        0                      -
pool/home/bob  usedbyrefreservation  0                      -
pool/home/bob  logbias               latency                default
pool/home/bob  dedup                 off                    default
pool/home/bob  mlslabel                                     -
pool/home/bob  sync                  standard               default
pool/home/bob  refcompressratio      1.00x                  -
    </pre></div><p class=Pp>The following command gets a single property value.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs get -H -o value compression pool/home/bob
</code>
on
    </pre></div><p class=Pp>The following command lists all properties with local settings for <i class=Em>pool/home/bob</i>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs get -s local -o name,property,value all pool/home/bob
</code>
NAME           PROPERTY              VALUE
pool/home/bob  quota                 20G
pool/home/bob  compression           on
    </pre></div></dd><dt><b class=Sy>Example 8</b><span class=No>Rolling Back a</span> ZFS <span class=No>File System</span></dt><dd><p class=Pp>The following command reverts the contents of <i class=Em>pool/home/anne</i> to the snapshot named <i class=Em>yesterday</i>, deleting all intermediate snapshots.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs rollback -r pool/home/anne@yesterday
</code>
    </pre></div></dd><dt><b class=Sy>Example 9</b><span class=No>Creating a</span> ZFS <span class=No>Clone</span></dt><dd><p class=Pp>The following command creates a writable file system whose initial contents are the same as <i class=Em>pool/home/bob@yesterday</i>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs clone pool/home/bob@yesterday pool/clone
</code>
    </pre></div></dd><dt><b class=Sy>Example 10</b><span class=No>Promoting a</span> ZFS <span class=No>Clone</span></dt><dd><p class=Pp>The following commands illustrate how to test out changes to a file system, and then replace the original file system with the changed one, using clones, clone promotion, and renaming:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs create pool/project/production
</code>
    </pre></div><p class=Pp>Populate <span class=Pa>/pool/project/production</span> with data and continue with the following commands:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs snapshot pool/project/production@today
</code>
<code class=Li>#
</code> <code class=Ic>zfs clone pool/project/production@today pool/project/beta
</code>
    </pre></div><p class=Pp>Now make changes to <span class=Pa>/pool/project/beta</span> and continue with the following commands:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs promote pool/project/beta
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename pool/project/production pool/project/legacy
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename pool/project/beta pool/project/production
</code>
    </pre></div><p class=Pp>Once the legacy version is no longer needed, it can be destroyed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs destroy pool/project/legacy
</code>
    </pre></div></dd><dt><b class=Sy>Example 11</b><span class=No>Inheriting</span> ZFS <span class=No>Properties</span></dt><dd><p class=Pp>The following command causes <i class=Em>pool/home/bob</i> and <i class=Em>pool/home/anne</i> to inherit the <b class=Sy>checksum</b> property from their parent.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs inherit checksum pool/home/bob pool/home/anne
</code>
    </pre></div></dd><dt><b class=Sy>Example 12</b><span class=No>Remotely Replicating</span> ZFS <span class=No>Data</span></dt><dd><p class=Pp>The following commands send a full stream and then an incremental stream to a remote machine, restoring them into <b class=Sy>poolB/received/fs@a</b> and <b class=Sy>poolB/received/fs@b</b>, respectively. <b class=Sy>poolB</b> must contain the file system <b class=Sy>poolB/received</b>, and must not initially contain <b class=Sy>poolB/received/fs</b>.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs send pool/fs@a
</code> | <code class=Ic>ssh host zfs receive poolB/received/fs@a
</code>
<code class=Li>#
</code> <code class=Ic>zfs send -i a pool/fs@b
</code> | <code class=Ic>ssh host zfs receive poolB/received/fs
</code>
    </pre></div></dd><dt><b class=Sy>Example 13</b> Using the “zfs receive -d” Option</dt><dd><p class=Pp>The following command sends a full stream of <b class=Sy>poolA/fsA/fsB@snap</b> to a remote machine, receiving it into <b class=Sy>poolB/received/fsA/fsB@snap</b>. The <b class=Sy>fsA/fsB@snap</b> portion of the received snapshot's name is determined from the name of the sent snapshot. <b class=Sy>poolB</b> must contain the file system <b class=Sy>poolB/received</b>. If <b class=Sy>poolB/received/fsA</b> does not exist, it is created as an empty file system.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs send poolA/fsA/fsB@snap
</code> | <code class=Ic>ssh host zfs receive -d poolB/received
</code>
    </pre></div></dd><dt><b class=Sy>Example 14</b><span class=No>Setting User Properties</span></dt><dd><p class=Pp>The following example sets the user-defined <b class=Sy>com.example:department</b> property for a dataset.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs set com.example:department=12345 tank/accounting
</code>
    </pre></div></dd><dt><b class=Sy>Example 15</b><span class=No>Performing a Rolling Snapshot</span></dt><dd><p class=Pp>The following example shows how to maintain a history of snapshots with a consistent naming scheme. To keep a week's worth of snapshots, the user destroys the oldest snapshot, renames the remaining snapshots, and then creates a new snapshot, as follows:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs destroy -r pool/users@7daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@6daysago @7daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@5daysago @6daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@4daysago @5daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@3daysago @4daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@2daysago @3daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@yesterday @2daysago
</code>
<code class=Li>#
</code> <code class=Ic>zfs rename -r pool/users@today @yesterday
</code>
<code class=Li>#
</code> <code class=Ic>zfs snapshot -r pool/users@today
</code>
    </pre></div></dd><dt><b class=Sy>Example 16</b> Setting “sharenfs” Property Options on a ZFS File System</dt><dd><p class=Pp>The following command shows how to set <b class=Sy>sharenfs</b> property options to enable root access for a specific network on the <i class=Em>tank/home</i> file system. The contents of the <b class=Sy>sharenfs</b> property are valid <a class=Xr href=exports.5.html>exports(5)</a> options.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs set sharenfs="maproot=root,network 192.168.0.0/24" tank/home
</code>
    </pre></div><p class=Pp>Another way to write this command with the same result is:</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>set zfs sharenfs="-maproot=root -network 192.168.0.0/24" tank/home
</code>
    </pre></div></dd><dt><b class=Sy>Example 17</b> Delegating ZFS Administration Permissions on a ZFS Dataset</dt><dd><p class=Pp>The following example shows how to set permissions so that user <i class=Em>cindys</i> can create, destroy, mount, and take snapshots on <i class=Em>tank/cindys</i>. The permissions on <i class=Em>tank/cindys</i> are also displayed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs allow cindys create,destroy,mount,snapshot tank/cindys
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow tank/cindys
</code>
---- Permissions on tank/cindys --------------------------------------
Local+Descendent permissions:
        user cindys create,destroy,mount,snapshot
    </pre></div></dd><dt><b class=Sy>Example 18</b><span class=No>Delegating Create Time Permissions on a</span> ZFS <span class=No>Dataset</span></dt><dd><p class=Pp>The following example shows how to grant anyone in the group <i class=Em>staff</i> to create file systems in <i class=Em>tank/users</i>. This syntax also allows staff members to destroy their own file systems, but not destroy anyone else's file system. The permissions on <i class=Em>tank/users</i> are also displayed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs allow staff create,mount tank/users
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow -c destroy tank/users
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow tank/users
</code>
---- Permissions on tank/users ---------------------------------------
Permission sets:
        destroy
Local+Descendent permissions:
        group staff create,mount
    </pre></div></dd><dt><b class=Sy>Example 19</b> Defining and Granting a Permission Set on a ZFS Dataset</dt><dd><p class=Pp>The following example shows how to define and grant a permission set on the <i class=Em>tank/users</i> file system. The permissions on <i class=Em>tank/users</i> are also displayed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs allow -s @pset create,destroy,snapshot,mount tank/users
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow staff @pset tank/users
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow tank/users
</code>
---- Permissions on tank/users ---------------------------------------
Permission sets:
        @pset create,destroy,mount,snapshot
Local+Descendent permissions:
        group staff @pset
    </pre></div></dd><dt><b class=Sy>Example 20</b><span class=No>Delegating Property Permissions on a</span> ZFS <span class=No>Dataset</span></dt><dd><p class=Pp>The following example shows to grant the ability to set quotas and reservations on the <b class=Sy>users/home</b> file system. The permissions on <b class=Sy>users/home</b> are also displayed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs allow cindys quota,reservation users/home
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow users/home
</code>
---- Permissions on users/home ---------------------------------------
Local+Descendent permissions:
        user cindys quota,reservation
<code class=Li>#
</code> <code class=Ic>su - cindys
</code>
<code class=Li>cindys%
</code> <code class=Ic>zfs set quota=10G users/home/marks
</code>
<code class=Li>cindys%
</code> <code class=Ic>zfs get quota users/home/marks
</code>
NAME              PROPERTY  VALUE  SOURCE
users/home/marks  quota     10G    local
    </pre></div></dd><dt><b class=Sy>Example 21</b><span class=No>Removing ZFS Delegated Permissions on a</span> ZFS <span class=No>Dataset</span></dt><dd><p class=Pp>The following example shows how to remove the snapshot permission from the <i class=Em>staff</i> group on the <i class=Em>tank/users</i> file system. The permissions on <i class=Em>tank/users</i> are also displayed.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs unallow staff snapshot tank/users
</code>
<code class=Li>#
</code> <code class=Ic>zfs allow tank/users
</code>
---- Permissions on tank/users ---------------------------------------
Permission sets:
        @pset create,destroy,mount,snapshot
Local+Descendent permissions:
        group staff @pset
    </pre></div></dd><dt><b class=Sy>Example 22 Showing the differences between a snapshot and a ZFS Dataset</b></dt><dd><p class=Pp>The following example shows how to see what has changed between a prior snapshot of a ZFS Dataset and its current state. The <code class=Fl>-F</code> option is used to indicate type information for the files affected.</p><div class="Bd Pp Bd-indent"><pre>
<code class=Li>#
</code> <code class=Ic>zfs diff tank/test@before tank/test
</code>
M       /       /tank/test/
M       F       /tank/test/linked      (+1)
R       F       /tank/test/oldname -&gt; /tank/test/newname
-       F       /tank/test/deleted
+       F       /tank/test/created
M       F       /tank/test/modified
    </pre></div></dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=chmod.2.html>chmod(2)</a>, <a class=Xr href=fsync.2.html>fsync(2)</a>, <a class=Xr href=exports.5.html>exports(5)</a>, <a class=Xr href=fstab.5.html>fstab(5)</a>, <a class=Xr href=rc.conf.5.html>rc.conf(5)</a>, <a class=Xr href=jail.8.html>jail(8)</a>, <a class=Xr href=mount.8.html>mount(8)</a>, <a class=Xr href=umount.8.html>umount(8)</a>, <a class=Xr href=zfs-program.8.html>zfs-program(8)</a>, <a class=Xr href=zpool.8.html>zpool(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>zfs</code> utility first appeared in <span class=Ux>FreeBSD 7.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This manual page is a <a class=Xr href=mdoc.7.html>mdoc(7)</a> reimplementation of the OpenSolaris manual page <i class=Em>zfs(1M)</i>, modified and customized for <span class=Ux>FreeBSD</span> and licensed under the Common Development and Distribution License (CDDL). <p class=Pp>The <a class=Xr href=mdoc.7.html>mdoc(7)</a> implementation of this manual page was initially written by <span class=An>Martin Matuska</span> ⟨mm@FreeBSD.org⟩.</p></section></div><table class=foot><tr><td class=foot-date>September 12, 2020</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>