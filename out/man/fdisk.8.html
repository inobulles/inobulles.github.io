<!DOCTYPE html>
<html><head><meta charset=utf-8><title>fdisk(8)</title><keywords content=man,fdisk></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>fdisk(8)</h1><table class=head><tr><td class=head-ltitle>FDISK(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>FDISK(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>fdisk</code> — <div class=Nd>PC slice table maintenance utility</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>fdisk</code></td><td>[<code class=Fl>-BIaipqstu</code>] [<code class=Fl>-b</code><var class=Ar>bootcode</var>] [<code class=Fl>-1234</code>] [<var class=Ar>disk</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>fdisk</code></td><td><code class=Fl>-f</code><var class=Ar>configfile</var> [<code class=Fl>-itv</code>] [<var class=Ar>disk</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=PROLOGUE><a class=permalink href=#PROLOGUE>PROLOGUE</a></h2> In order for the BIOS to boot the kernel, certain conventions must be adhered to. Sector 0 of the disk must contain boot code, a slice table, and a magic number. BIOS slices can be used to break the disk up into several pieces. The BIOS brings in sector 0 and verifies the magic number. The sector 0 boot code then searches the slice table to determine which slice is marked “active”. This boot code then brings in the bootstrap from the active slice and, if marked bootable, runs it. Under DOS, you can have one or more slices with one active. The DOS <code class=Nm>fdisk</code> utility can be used to divide space on the disk into slices and set one active. </section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2><div class="Bf Sy">This command is obsolete. Users are advised to use <a class=Xr href=gpart.8.html>gpart(8)</a> instead.</div><p class=Pp>The <span class=Ux>FreeBSD</span> utility, <code class=Nm>fdisk</code>, serves a similar purpose to the DOS utility. The first form is used to display slice information or to interactively edit the slice table. The second is used to write a slice table using a <var class=Ar>configfile</var>, and is designed to be used by other scripts/programs.</p><p class=Pp>Options are:</p><dl class=Bl-tag><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>Change the active slice only. Ignored if <code class=Fl>-f</code> is given.</dd><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>bootcode</var></dt><dd>Get the boot code from the file <var class=Ar>bootcode</var>. Default is <span class=Pa>/boot/mbr</span>.</dd><dt><a class=permalink href=#B><code class=Fl id=B>-B</code></a></dt><dd>Reinitialize the boot code contained in sector 0 of the disk. Ignored if <code class=Fl>-f</code> is given.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>configfile</var></dt><dd>Set slice values using the file <var class=Ar>configfile</var>. The <var class=Ar>configfile</var> only modifies explicitly specified slices, unless <code class=Fl>-i</code> is also given, in which case all existing slices are deleted (marked as “unused”) before the <var class=Ar>configfile</var> is read. The <var class=Ar>configfile</var> can be ‘<code class=Fl>-</code>’, in which case standard input is read. See <a class=Sx href=#CONFIGURATION_FILE>CONFIGURATION FILE</a>, below, for file syntax. <p class=Pp><i class=Em>WARNING</i>: when <code class=Fl>-f</code> is used, you are not asked if you really want to write the slices table (as you are in the interactive mode). Use with caution!</p></dd><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>Initialize sector 0 of the disk. Existing slice entries will be cleared (marked as unused) before editing. (Compare with <code class=Fl>-u</code>.)</dd><dt><a class=permalink href=#I><code class=Fl id=I>-I</code></a></dt><dd>Initialize sector 0 slice table for one <span class=Ux>FreeBSD</span> slice covering the entire disk.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>Print a slice table in <code class=Nm>fdisk</code> configuration file format and exit; see <a class=Sx href=#CONFIGURATION_FILE>CONFIGURATION FILE</a>, below.</dd><dt><a class=permalink href=#q><code class=Fl id=q>-q</code></a></dt><dd>Be quiet. Benign warnings (such as "GEOM not found") are suppressed.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a></dt><dd>Print summary information and exit.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>Test mode; do not write slice values. Generally used with the <code class=Fl>-f</code> option to see what would be written to the slice table. Implies <code class=Fl>-v</code>.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>Update (edit) the disk's sector 0 slice table. Ignored if <code class=Fl>-f</code> is given.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Be verbose. When <code class=Fl>-f</code> is used, <code class=Nm>fdisk</code> prints out the slice table that is written to the disk.</dd><dt><a class=permalink href=#1234><code class=Fl id=1234>-1234</code></a></dt><dd>Operate on a single slice table entry only. Ignored if <code class=Fl>-f</code> is given.</dd></dl><p class=Pp>The final disk name can be provided as a “bare” disk name only, e.g. <span class=Pa>da0</span>, or as a full pathname. If omitted, <code class=Nm>fdisk</code> tries to figure out the default disk device name from the mounted root device.</p><p class=Pp>When called with no arguments, it prints the sector 0 slice table. An example follows:</p><div class="Bd Pp"><pre>
	******* Working on device /dev/ada0 *******
	parameters extracted from in-core disklabel are:
	cylinders=769 heads=15 sectors/track=33 (495 blks/cyl)

	parameters to be used for BIOS calculations are:
	cylinders=769 heads=15 sectors/track=33 (495 blks/cyl)

	Warning: BIOS sector numbering starts with sector 1
	Information from DOS bootblock is:
	The data for partition 1 is:
	sysid 165,(FreeBSD/NetBSD/386BSD)
           start 495, size 380160 (185 Meg), flag 0
		beg: cyl 1/ sector 1/ head 0;
		end: cyl 768/ sector 33/ head 14
	The data for partition 2 is:
	sysid 164,(unknown)
           start 378180, size 2475 (1 Meg), flag 0
		beg: cyl 764/ sector 1/ head 0;
		end: cyl 768/ sector 33/ head 14
	The data for partition 3 is:
	&lt;UNUSED&gt;
	The data for partition 4 is:
	sysid 99,(ISC UNIX, other System V/386, GNU HURD or Mach)
           start 380656, size 224234 (109 Meg), flag 80
		beg: cyl 769/ sector 2/ head 0;
		end: cyl 197/ sector 33/ head 14
</pre></div><p class=Pp>The disk is divided into three slices that happen to fill the disk. The second slice overlaps the end of the first. (Used for debugging purposes.)</p><dl class=Bl-tag><dt><i class=Em>sysid</i></dt><dd>is used to label the slice. <span class=Ux>FreeBSD</span> reserves the magic number 165 decimal (A5 in hex).</dd><dt><i class=Em>start</i> and <i class=Em>size</i></dt><dd>fields provide the start address and size of a slice in sectors.</dd><dt><i class=Em>flag 80</i></dt><dd>specifies that this is the active slice.</dd><dt><i class=Em>cyl</i>, <i class=Em>sector</i> and <i class=Em>head</i></dt><dd>fields are used to specify the beginning and end addresses of the slice.</dd></dl><p class=Pp><i class=Em>Note</i>: these numbers are calculated using BIOS's understanding of the disk geometry and saved in the bootblock.</p><p class=Pp>The <code class=Fl>-i</code> and <code class=Fl>-u</code> flags are used to indicate that the slice data is to be updated. Unless the <code class=Fl>-f</code> option is also given, <code class=Nm>fdisk</code> will enter a conversational mode. In this mode, no changes will be written to disk unless you explicitly tell <code class=Nm>fdisk</code> to.</p><p class=Pp>The <code class=Nm>fdisk</code> utility will display each slice and ask whether you want to edit it. If you say yes, <code class=Nm>fdisk</code> will step through each field, show you the old value, and ask you for a new one. When you are done with the slice, <code class=Nm>fdisk</code> will display it and ask you whether it is correct. It will then proceed to the next entry.</p><p class=Pp>Getting the <i class=Em>cyl</i>, <i class=Em>sector</i>, and <i class=Em>head</i> fields correct is tricky, so by default, they will be calculated for you; you can specify them if you choose to though.</p><p class=Pp>After all the slices are processed, you are given the option to change the “active” slice. Finally, when all the new data for sector 0 has been accumulated, you are asked to confirm whether you really want to rewrite it.</p><p class=Pp>The difference between the <code class=Fl>-u</code> and <code class=Fl>-i</code> flags is that the <code class=Fl>-u</code> flag edits (updates) the existing slice parameters while the <code class=Fl>-i</code> flag is used to “initialize” them (old values will be ignored); if you edit the first slice, <code class=Fl>-i</code> will also set it up to use the whole disk for <span class=Ux>FreeBSD</span> and make it active.</p></section><section class=Sh><h2 class=Sh id=NOTES><a class=permalink href=#NOTES>NOTES</a></h2> The automatic calculation of starting cylinder etc. uses a set of figures that represent what the BIOS thinks the geometry of the drive is. These figures are taken from the in-core disklabel by default, but <code class=Nm>fdisk</code> initially gives you an opportunity to change them. This allows you to create a bootblock that can work with drives that use geometry translation under the BIOS. <p class=Pp>If you hand craft your disk layout, please make sure that the <span class=Ux>FreeBSD</span> slice starts on a cylinder boundary.</p><p class=Pp>Editing an existing slice will most likely result in the loss of all data in that slice.</p><p class=Pp>You should run <code class=Nm>fdisk</code> interactively once or twice to see how it works. This is completely safe as long as you answer the last question in the negative. There are subtleties that <code class=Nm>fdisk</code> detects that are not fully explained in this manual page.</p></section><section class=Sh><h2 class=Sh id=CONFIGURATION_FILE><a class=permalink href=#CONFIGURATION_FILE>CONFIGURATION FILE</a></h2> When the <code class=Fl>-f</code> option is given, a disk's slice table can be written using values from a <var class=Ar>configfile</var>. The syntax of this file is very simple; each line is either a comment or a specification, as follows: <dl class=Bl-tag><dt><a class=permalink href=#_><code class=Ic id=_>#</code></a><var class=Ar>comment ...</var></dt><dd>Lines beginning with a <code class=Ic>#</code> are comments and are ignored.</dd><dt><a class=permalink href=#g><code class=Ic id=g>g</code></a><var class=Ar>spec1 spec2 spec3</var></dt><dd>Set the BIOS geometry used in slice calculations. There must be three values specified, with a letter preceding each number: <dl class=Bl-tag><dt><a class=permalink href=#c><code class=Cm id=c>c</code></a><var class=Ar>num</var></dt><dd>Set the number of cylinders to <var class=Ar>num</var>.</dd><dt><a class=permalink href=#h><code class=Cm id=h>h</code></a><var class=Ar>num</var></dt><dd>Set the number of heads to <var class=Ar>num</var>.</dd><dt><a class=permalink href=#s_2><code class=Cm id=s_2>s</code></a><var class=Ar>num</var></dt><dd>Set the number of sectors/track to <var class=Ar>num</var>.</dd></dl><p class=Pp>These specs can occur in any order, as the leading letter determines which value is which; however, all three must be specified.</p><p class=Pp>This line must occur before any lines that specify slice information.</p><p class=Pp>It is an error if the following is not true:</p><div class="Bd Pp Bd-indent"><pre>
1 &lt;= number of cylinders
1 &lt;= number of heads &lt;= 256
1 &lt;= number of sectors/track &lt; 64
    </pre></div><p class=Pp>The number of cylinders should be less than or equal to 1024, but this is not enforced, although a warning will be printed. Note that bootable <span class=Ux>FreeBSD</span> slices (the “<span class=Pa>/</span>” file system) must lie completely within the first 1024 cylinders; if this is not true, booting may fail. Non-bootable slices do not have this restriction.</p><p class=Pp>Example (all of these are equivalent), for a disk with 1019 cylinders, 39 heads, and 63 sectors:</p><div class="Bd Pp Bd-indent"><pre>
g       c1019   h39     s63
g       h39     c1019   s63
g       s63     h39     c1019
    </pre></div></dd><dt><a class=permalink href=#p_2><code class=Ic id=p_2>p</code></a><var class=Ar>slice type start length</var></dt><dd>Set the slice given by <var class=Ar>slice</var> (1-4) to type <var class=Ar>type</var>, starting at sector <var class=Ar>start</var> for <var class=Ar>length</var> sectors. If the <var class=Ar>start</var> or <var class=Ar>length</var> is suffixed with a <i class=Em>K</i>, <i class=Em>M</i> or <i class=Em>G</i>, it is taken as a <i class=Em>Kilobyte</i>, <i class=Em>Megabyte</i> or <i class=Em>Gigabyte</i> measurement respectively. If the <var class=Ar>start</var> is given as “*” it is set to the value of the previous partition end. If the <var class=Ar>length</var> is given as “*” the partition end is set to the end of the disk. <p class=Pp>Only those slices explicitly mentioned by these lines are modified; any slice not referenced by a <code class=Ic>p</code> line will not be modified. However, if an invalid slice table is present, or the <code class=Fl>-i</code> option is specified, all existing slice entries will be cleared (marked as unused), and these <code class=Ic>p</code> lines will have to be used to explicitly set slice information. If multiple slices need to be set, multiple <code class=Ic>p</code> lines must be specified; one for each slice.</p><p class=Pp>These slice lines must occur after any geometry specification lines, if one is present.</p><p class=Pp>The <var class=Ar>type</var> is 165 for <span class=Ux>FreeBSD</span> slices. Specifying a slice type of zero is the same as clearing the slice and marking it as unused; however, dummy values (such as “0”) must still be specified for <var class=Ar>start</var> and <var class=Ar>length</var>.</p><p class=Pp>Note: the start offset will be rounded upwards to a head boundary if necessary, and the end offset will be rounded downwards to a cylinder boundary if necessary.</p><p class=Pp>Example: to clear slice 4 and mark it as unused:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>p 4 0 0 0</code></div><p class=Pp>Example: to set slice 1 to a <span class=Ux>FreeBSD</span> slice, starting at sector 1 for 2503871 sectors (note: these numbers will be rounded upwards and downwards to correspond to head and cylinder boundaries):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>p 1 165 1 2503871</code></div><p class=Pp>Example: to set slices 1, 2 and 4 to <span class=Ux>FreeBSD</span> slices, the first being 2 Gigabytes, the second being 10 Gigabytes and the forth being the remainder of the disk (again, numbers will be rounded appropriately):</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>p 1 165 63 2G</code></div><div class="Bd Bd-indent"><code class=Li>p 2 165 * 10G</code></div><div class="Bd Bd-indent"><code class=Li>p 3 0 0 0</code></div><div class="Bd Bd-indent"><code class=Li>p 4 165 * *</code></div></dd><dt><a class=permalink href=#a_2><code class=Ic id=a_2>a</code></a><var class=Ar>slice</var></dt><dd>Make <var class=Ar>slice</var> the active slice. Can occur anywhere in the config file, but only one must be present. <p class=Pp>Example: to make slice 1 the active slice:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>a 1</code></div></dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/boot/mbr</span></dt><dd>The default boot code.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=boot0cfg.8.html>boot0cfg(8)</a>, <a class=Xr href=bsdlabel.8.html>bsdlabel(8)</a>, <a class=Xr href=gpart.8.html>gpart(8)</a>, <a class=Xr href=newfs.8.html>newfs(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> A version of <code class=Nm>fdisk</code> first appeared in the Mach Operating System. It was subsequently ported to <span class=Ux>386BSD</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><code class=Nm>fdisk</code> for Mach Operating System was written by <span class=An>Robert Baron</span> &lt;<a class=Mt href=mailto:rvb@cs.cmu.edu>rvb@cs.cmu.edu</a>&gt;. It was ported to <span class=Ux>386BSD</span> by <span class=An>Julian Elischer</span> &lt;<a class=Mt href=mailto:julian@tfs.com>julian@tfs.com</a>&gt;. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The default boot code will not necessarily handle all slice types correctly, in particular those introduced since MS-DOS 6.x. <p class=Pp>The entire utility should be made more user-friendly.</p><p class=Pp>Most users new to <span class=Ux>FreeBSD</span> do not understand the difference between “slice” and “partition”, causing difficulty to adjust.</p><p class=Pp>You cannot use this command to completely dedicate a disk to <span class=Ux>FreeBSD</span>. The <a class=Xr href=bsdlabel.8.html>bsdlabel(8)</a> command must be used for this.</p></section></div><table class=foot><tr><td class=foot-date>October 5, 2016</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>