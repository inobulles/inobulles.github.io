<!DOCTYPE html>
<html><head><meta charset=utf-8><title>rrestore(8)</title><keywords content=man,rrestore></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>rrestore(8)</h1><table class=head><tr><td class=head-ltitle>RESTORE(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>RESTORE(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>restore</code>, <code class=Nm>rrestore</code> — <div class=Nd>restore files or file systems from backups made with dump</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>restore</code></td><td><code class=Fl>-i</code> [<code class=Fl>-dDhmNuvy</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-s</code><var class=Ar>fileno</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>restore</code></td><td><code class=Fl>-R</code> [<code class=Fl>-dDNuvy</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-s</code><var class=Ar>fileno</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>restore</code></td><td><code class=Fl>-r</code> [<code class=Fl>-dDNuvy</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-s</code><var class=Ar>fileno</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>restore</code></td><td><code class=Fl>-t</code> [<code class=Fl>-dDhNuvy</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-s</code><var class=Ar>fileno</var>] [<var class=Ar>file ...</var>]</td></tr></table><br><table class=Nm><tr><td><code class=Nm>restore</code></td><td><code class=Fl>-x</code> [<code class=Fl>-dDhmNuvy</code>] [<code class=Fl>-b</code><var class=Ar>blocksize</var>] [<code class=Fl>-f</code><var class=Ar>file</var> | <code class=Fl>-P</code><var class=Ar>pipecommand</var>] [<code class=Fl>-s</code><var class=Ar>fileno</var>] [<var class=Ar>file ...</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>restore</code> utility performs the inverse function of <a class=Xr href=dump.8.html>dump(8)</a>. A full backup of a file system may be restored and subsequent incremental backups layered on top of it. Single files and directory subtrees may be restored from full or partial backups. The <code class=Nm>restore</code> utility works across a network; to do this see the <code class=Fl>-f</code> and <code class=Fl>-P</code> flags described below. Other arguments to the command are file or directory names specifying the files that are to be restored. Unless the <code class=Fl>-h</code> flag is specified (see below), the appearance of a directory name refers to the files and (recursively) subdirectories of that directory. <p class=Pp><code class=Nm>restore</code> may also be invoked as <code class=Nm>rrestore</code>. The <span class=Ux>4.3BSD</span> option syntax is implemented for backward compatibility, but is not documented here.</p><p class=Pp>Exactly one of the following flags is required:</p><dl class=Bl-tag><dt><a class=permalink href=#i><code class=Fl id=i>-i</code></a></dt><dd>This mode allows interactive restoration of files from a dump. After reading in the directory information from the dump, <code class=Nm>restore</code> provides a shell like interface that allows the user to move around the directory tree selecting files to be extracted. The available commands are given below; for those commands that require an argument, the default is the current directory. <dl class=Bl-tag><dt><a class=permalink href=#add><code class=Ic id=add>add</code></a> [<var class=Ar>arg</var>]</dt><dd>The current directory or specified argument is added to the list of files to be extracted. If a directory is specified, then it and all its descendents are added to the extraction list (unless the <code class=Fl>-h</code> flag is specified on the command line). Files that are on the extraction list are prepended with a ``*'' when they are listed by <code class=Ic>ls</code>.</dd><dt><a class=permalink href=#cd><code class=Ic id=cd>cd</code></a><var class=Ar>arg</var></dt><dd>Change the current working directory to the specified argument.</dd><dt><a class=permalink href=#delete><code class=Ic id=delete>delete</code></a> [<var class=Ar>arg</var>]</dt><dd>The current directory or specified argument is deleted from the list of files to be extracted. If a directory is specified, then it and all its descendents are deleted from the extraction list (unless the <code class=Fl>-h</code> flag is specified on the command line). The most expedient way to extract most of the files from a directory is to add the directory to the extraction list and then delete those files that are not needed.</dd><dt><a class=permalink href=#extract><code class=Ic id=extract>extract</code></a></dt><dd>All the files that are on the extraction list are extracted from the dump. The <code class=Nm>restore</code> utility will ask which volume the user wishes to mount. The fastest way to extract a few files is to start with the last volume, and work towards the first volume.</dd><dt><a class=permalink href=#help><code class=Ic id=help>help</code></a></dt><dd>List a summary of the available commands.</dd><dt><a class=permalink href=#ls><code class=Ic id=ls>ls</code></a> [<var class=Ar>arg</var>]</dt><dd>List the current or specified directory. Entries that are directories are appended with a ``/''. Entries that have been marked for extraction are prepended with a ``*''. If the verbose flag is set the inode number of each entry is also listed.</dd><dt><a class=permalink href=#pwd><code class=Ic id=pwd>pwd</code></a></dt><dd>Print the full pathname of the current working directory.</dd><dt><a class=permalink href=#quit><code class=Ic id=quit>quit</code></a></dt><dd>Exit immediately, even if the extraction list is not empty.</dd><dt><a class=permalink href=#setmodes><code class=Ic id=setmodes>setmodes</code></a></dt><dd>All the directories that have been added to the extraction list have their owner, modes, and times set; nothing is extracted from the dump. This is useful for cleaning up after a restore has been prematurely aborted.</dd><dt><a class=permalink href=#verbose><code class=Ic id=verbose>verbose</code></a></dt><dd>The sense of the <code class=Fl>-v</code> flag is toggled. When set, the verbose flag causes the <code class=Ic>ls</code> command to list the inode numbers of all entries. It also causes <code class=Nm>restore</code> to print out information about each file as it is extracted.</dd><dt><a class=permalink href=#what><code class=Ic id=what>what</code></a></dt><dd>Display dump header information, which includes: date, level, label, and the file system and host dump was made from.</dd></dl></dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a></dt><dd>Request a particular tape of a multi volume set on which to restart a full restore (see the <code class=Fl>-r</code> flag below). This is useful if the restore has been interrupted.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Restore (rebuild a file system). The target file system should be made pristine with <a class=Xr href=newfs.8.html>newfs(8)</a>, mounted and the user <a class=Xr href=cd.1.html>cd(1)</a>'d into the pristine file system before starting the restoration of the initial level 0 backup. If the level 0 restores successfully, the <code class=Fl>-r</code> flag may be used to restore any necessary incremental backups on top of the level 0. The <code class=Fl>-r</code> flag precludes an interactive file extraction and can be detrimental to one's health if not used carefully (not to mention the disk). An example: <div class="Bd Pp Bd-indent"><pre>
newfs /dev/da0s1a
mount /dev/da0s1a /mnt
cd /mnt

restore rf /dev/sa0
    </pre></div><p class=Pp>Note that <code class=Nm>restore</code> leaves a file <span class=Pa>restoresymtable</span> in the root directory to pass information between incremental restore passes. This file should be removed when the last incremental has been restored.</p><p class=Pp>The <code class=Nm>restore</code> utility , in conjunction with <a class=Xr href=newfs.8.html>newfs(8)</a> and <a class=Xr href=dump.8.html>dump(8)</a>, may be used to modify file system parameters such as size or block size.</p></dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>The names of the specified files are listed if they occur on the backup. If no file argument is given, then the root directory is listed, which results in the entire content of the backup being listed, unless the <code class=Fl>-h</code> flag has been specified. Note that the <code class=Fl>-t</code> flag replaces the function of the old <a class=Xr href=dumpdir.8.html>dumpdir(8)</a> program.</dd><dt><a class=permalink href=#x><code class=Fl id=x>-x</code></a></dt><dd>The named files are read from the given media. If a named file matches a directory whose contents are on the backup and the <code class=Fl>-h</code> flag is not specified, the directory is recursively extracted. The owner, modification time, and mode are restored (if possible). If no file argument is given, then the root directory is extracted, which results in the entire content of the backup being extracted, unless the <code class=Fl>-h</code> flag has been specified.</dd></dl><p class=Pp>The following additional options may be specified:</p><dl class=Bl-tag><dt><a class=permalink href=#b><code class=Fl id=b>-b</code></a><var class=Ar>blocksize</var></dt><dd>The number of kilobytes per dump record. If the <code class=Fl>-b</code> option is not specified, <code class=Nm>restore</code> tries to determine the media block size dynamically.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Sends verbose debugging output to the standard error.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>This puts <code class=Nm>restore</code> into degraded mode, causing restore to operate less efficiently but to try harder to read corrupted backups.</dd><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a><var class=Ar>file</var></dt><dd>Read the backup from <var class=Ar>file</var>; <var class=Ar>file</var> may be a special device file like <span class=Pa>/dev/sa0</span> (a tape drive), <span class=Pa>/dev/da1c</span> (a disk drive), an ordinary file, or ‘<code class=Fl>-</code>’ (the standard input). If the name of the file is of the form “host:file”, or “user@host:file”, <code class=Nm>restore</code> reads from the named file on the remote host using <a class=Xr href=rmt.8.html>rmt(8)</a>.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a><var class=Ar>pipecommand</var></dt><dd>Use <a class=Xr href=popen.3.html>popen(3)</a> to execute the <a class=Xr href=sh.1.html>sh(1)</a> script string defined by <var class=Ar>pipecommand</var> as the input for every volume in the backup. This child pipeline's <code class=Dv>stdout</code> (<span class=Pa>/dev/fd/1</span>) is redirected to the <code class=Nm>restore</code> input stream, and the environment variable <code class=Ev>RESTORE_VOLUME</code> is set to the current volume number being read. The <var class=Ar>pipecommand</var> script is started each time a volume is loaded, as if it were a tape drive.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Extract the actual directory, rather than the files that it references. This prevents hierarchical restoration of complete subtrees from the dump.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a></dt><dd>Extract by inode numbers rather than by file name. This is useful if only a few files are being extracted, and one wants to avoid regenerating the complete pathname to the file.</dd><dt><a class=permalink href=#N><code class=Fl id=N>-N</code></a></dt><dd>Do the extraction normally, but do not actually write any changes to disk. This can be used to check the integrity of dump media or other test purposes.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>fileno</var></dt><dd>Read from the specified <var class=Ar>fileno</var> on a multi-file tape. File numbering starts at 1.</dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>When creating certain types of files, restore may generate a warning diagnostic if they already exist in the target directory. To prevent this, the <code class=Fl>-u</code> (unlink) flag causes restore to remove old entries before attempting to create new ones. This flag is recommended when using extended attributes to avoid improperly accumulating attributes on pre-existing files.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Normally <code class=Nm>restore</code> does its work silently. The <code class=Fl>-v</code> (verbose) flag causes it to type the name of each file it treats preceded by its file type.</dd><dt><a class=permalink href=#y><code class=Fl id=y>-y</code></a></dt><dd>Do not ask the user whether to abort the restore in the event of an error. Always try to skip over the bad block(s) and continue.</dd></dl></section><section class=Sh><h2 class=Sh id=ENVIRONMENT><a class=permalink href=#ENVIRONMENT>ENVIRONMENT</a></h2><dl class=Bl-tag><dt><a class=permalink href=#TAPE><code class=Ev id=TAPE>TAPE</code></a></dt><dd>Device from which to read backup.</dd><dt><a class=permalink href=#TMPDIR><code class=Ev id=TMPDIR>TMPDIR</code></a></dt><dd>Name of directory where temporary files are to be created.</dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/sa0</span></dt><dd>the default tape drive</dd><dt><span class=Pa>/tmp/rstdir*</span></dt><dd>file containing directories on the tape.</dd><dt><span class=Pa>/tmp/rstmode*</span></dt><dd>owner, mode, and time stamps for directories.</dd><dt><span class=Pa>./restoresymtable</span></dt><dd>information passed between incremental restores.</dd></dl></section><section class=Sh><h2 class=Sh id=DIAGNOSTICS><a class=permalink href=#DIAGNOSTICS>DIAGNOSTICS</a></h2> The <code class=Nm>restore</code> utility complains if it gets a read error. If <code class=Fl>-y</code> has been specified, or the user responds ‘<code class=Li>y</code>’, <code class=Nm>restore</code> will attempt to continue the restore. <p class=Pp>If a backup was made using more than one tape volume, <code class=Nm>restore</code> will notify the user when it is time to mount the next volume. If the <code class=Fl>-x</code> or <code class=Fl>-i</code> flag has been specified, <code class=Nm>restore</code> will also ask which volume the user wishes to mount. The fastest way to extract a few files is to start with the last volume, and work towards the first volume.</p><p class=Pp>There are numerous consistency checks that can be listed by <code class=Nm>restore</code>. Most checks are self-explanatory or can ``never happen''. Common errors are given below.</p><p class=Pp></p><dl class="Bl-tag Bl-compact"><dt>&lt;filename&gt;: not found on tape</dt><dd>The specified file name was listed in the tape directory, but was not found on the tape. This is caused by tape read errors while looking for the file, and from using a dump tape created on an active file system. <p class=Pp></p></dd><dt>expected next file &lt;inumber&gt;, got &lt;inumber&gt;</dt><dd>A file that was not listed in the directory showed up. This can occur when using a dump created on an active file system. <p class=Pp></p></dd><dt>Incremental dump too low</dt><dd>When doing incremental restore, a dump that was written before the previous incremental dump, or that has too low an incremental level has been loaded. <p class=Pp></p></dd><dt>Incremental dump too high</dt><dd>When doing incremental restore, a dump that does not begin its coverage where the previous incremental dump left off, or that has too high an incremental level has been loaded. <p class=Pp></p></dd><dt>Tape read error while restoring &lt;filename&gt;</dt><dd style="width: auto;"> </dd><dt>Tape read error while skipping over inode &lt;inumber&gt;</dt><dd style="width: auto;"> </dd><dt>Tape read error while trying to resynchronize</dt><dd>A tape (or other media) read error has occurred. If a file name is specified, then its contents are probably partially wrong. If an inode is being skipped or the tape is trying to resynchronize, then no extracted files have been corrupted, though files may not be found on the tape. <p class=Pp></p></dd><dt>resync restore, skipped &lt;num&gt; blocks</dt><dd>After a dump read error, <code class=Nm>restore</code> may have to resynchronize itself. This message lists the number of blocks that were skipped over.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=dump.8.html>dump(8)</a>, <a class=Xr href=mount.8.html>mount(8)</a>, <a class=Xr href=newfs.8.html>newfs(8)</a>, <a class=Xr href=rmt.8.html>rmt(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>restore</code> utility appeared in <span class=Ux>4.2BSD</span>. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The <code class=Nm>restore</code> utility can get confused when doing incremental restores from dumps that were made on active file systems without the <code class=Fl>-L</code> option (see <a class=Xr href=dump.8.html>dump(8)</a>). <p class=Pp>A level zero dump must be done after a full restore. Because restore runs in user code, it has no control over inode allocation; thus a full dump must be done to get a new set of directories reflecting the new inode numbering, even though the contents of the files is unchanged.</p><p class=Pp>To do a network restore, you have to run restore as root. This is due to the previous security history of dump and restore. (restore is written to be setuid root, but we are not certain all bugs are gone from the restore code - run setuid at your own risk.)</p><p class=Pp>The temporary files <span class=Pa>/tmp/rstdir*</span> and <span class=Pa>/tmp/rstmode*</span> are generated with a unique name based on the date of the dump and the process ID (see <a class=Xr href=mktemp.3.html>mktemp(3)</a>), except for when <code class=Fl>-r</code> or <code class=Fl>-R</code> is used. Because <code class=Fl>-R</code> allows you to restart a <code class=Fl>-r</code> operation that may have been interrupted, the temporary files should be the same across different processes. In all other cases, the files are unique because it is possible to have two different dumps started at the same time, and separate operations should not conflict with each other.</p></section></div><table class=foot><tr><td class=foot-date>October 12, 2006</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>