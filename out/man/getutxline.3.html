<!DOCTYPE html>
<html><head><meta charset=utf-8><title>getutxline(3)</title><keywords content=man,getutxline></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>getutxline(3)</h1><table class=head><tr><td class=head-ltitle>GETUTXENT(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>GETUTXENT(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>endutxent</code>, <code class=Nm>getutxent</code>, <code class=Nm>getutxid</code>, <code class=Nm>getutxline</code>, <code class=Nm>getutxuser</code>, <code class=Nm>pututxline</code>, <code class=Nm>setutxdb</code>, <code class=Nm>setutxent</code> — <div class=Nd>user accounting database functions</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Standard C Library (libc, -lc)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/utmpx.h.html>utmpx.h</a>&gt;</code><p class=Pp><var class=Ft>void</var><br><code class=Fn>endutxent</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p><p class=Pp><var class=Ft>struct utmpx *</var><br><code class=Fn>getutxent</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p><p class=Pp><var class=Ft>struct utmpx *</var><br><code class=Fn>getutxid</code>(<var class=Fa style="white-space: nowrap;">const struct utmpx *id</var>);</p><p class=Pp><var class=Ft>struct utmpx *</var><br><code class=Fn>getutxline</code>(<var class=Fa style="white-space: nowrap;">const struct utmpx *line</var>);</p><p class=Pp><var class=Ft>struct utmpx *</var><br><code class=Fn>getutxuser</code>(<var class=Fa style="white-space: nowrap;">const char *user</var>);</p><p class=Pp><var class=Ft>struct utmpx *</var><br><code class=Fn>pututxline</code>(<var class=Fa style="white-space: nowrap;">const struct utmpx *utmpx</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>setutxdb</code>(<var class=Fa style="white-space: nowrap;">int type</var>, <var class=Fa style="white-space: nowrap;">const char *file</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>setutxent</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> These functions operate on the user accounting database which stores records of various system activities, such as user login and logouts, but also system startups and shutdowns and modifications to the system's clock. The system stores these records in three databases, each having a different purpose: <dl class=Bl-tag><dt><span class=Pa>/var/run/utx.active</span></dt><dd>Log of currently active user login sessions. This file is similar to the traditional <span class=Pa>utmp</span> file. This file only contains process related entries, such as user login and logout records.</dd><dt><span class=Pa>/var/log/utx.lastlogin</span></dt><dd>Log of last user login entries per user. This file is similar to the traditional <span class=Pa>lastlog</span> file. This file only contains user login records for users who have at least logged in once.</dd><dt><span class=Pa>/var/log/utx.log</span></dt><dd>Log of all entries, sorted by date of addition. This file is similar to the traditional <span class=Pa>wtmp</span> file. This file may contain any type of record described below.</dd></dl><p class=Pp>Each entry in these databases is defined by the structure <var class=Vt>utmpx</var> found in the include file <code class=In>&lt;<a class=In href=../src/utmpx.h.html>utmpx.h</a>&gt;</code>:</p><div class="Bd Pp Bd-indent"><pre>
struct utmpx {
	short           ut_type;    /* Type of entry. */
	struct timeval  ut_tv;      /* Time entry was made. */
	char            ut_id[];    /* Record identifier. */
	pid_t           ut_pid;     /* Process ID. */
	char            ut_user[];  /* User login name. */
	char            ut_line[];  /* Device name. */
	char            ut_host[];  /* Remote hostname. */
};
</pre></div><p class=Pp>The <var class=Fa>ut_type</var> field indicates the type of the log entry, which can have one of the following values:</p><dl class=Bl-tag><dt><a class=permalink href=#EMPTY><code class=Dv id=EMPTY>EMPTY</code></a></dt><dd>No valid user accounting information.</dd><dt><a class=permalink href=#BOOT_TIME><code class=Dv id=BOOT_TIME>BOOT_TIME</code></a></dt><dd>Identifies time of system boot.</dd><dt><a class=permalink href=#SHUTDOWN_TIME><code class=Dv id=SHUTDOWN_TIME>SHUTDOWN_TIME</code></a></dt><dd>Identifies time of system shutdown.</dd><dt><a class=permalink href=#OLD_TIME><code class=Dv id=OLD_TIME>OLD_TIME</code></a></dt><dd>Identifies time when system clock changed.</dd><dt><a class=permalink href=#NEW_TIME><code class=Dv id=NEW_TIME>NEW_TIME</code></a></dt><dd>Identifies time after system clock changed.</dd><dt><a class=permalink href=#USER_PROCESS><code class=Dv id=USER_PROCESS>USER_PROCESS</code></a></dt><dd>Identifies a process.</dd><dt><a class=permalink href=#INIT_PROCESS><code class=Dv id=INIT_PROCESS>INIT_PROCESS</code></a></dt><dd>Identifies a process spawned by the init process.</dd><dt><a class=permalink href=#LOGIN_PROCESS><code class=Dv id=LOGIN_PROCESS>LOGIN_PROCESS</code></a></dt><dd>Identifies the session leader of a logged-in user.</dd><dt><a class=permalink href=#DEAD_PROCESS><code class=Dv id=DEAD_PROCESS>DEAD_PROCESS</code></a></dt><dd>Identifies a session leader who has exited.</dd></dl><p class=Pp>Entries of type <code class=Dv>INIT_PROCESS</code> and <code class=Dv>LOGIN_PROCESS</code> are not processed by this implementation.</p><p class=Pp>Other fields inside the structure are:</p><dl class=Bl-tag><dt><var class=Fa>ut_tv</var></dt><dd>The time the event occurred. This field is used for all types of entries, except <code class=Dv>EMPTY</code>.</dd><dt><var class=Fa>ut_id</var></dt><dd>An identifier that is used to refer to the entry. This identifier can be used to remove or replace a login entry by writing a new entry to the database containing the same value for <var class=Fa>ut_id</var>. This field is only applicable to entries of type <code class=Dv>USER_PROCESS</code>, <code class=Dv>INIT_PROCESS</code>, <code class=Dv>LOGIN_PROCESS</code> and <code class=Dv>DEAD_PROCESS</code>.</dd><dt><var class=Fa>ut_pid</var></dt><dd>The process identifier of the session leader of the login session. This field is only applicable to entries of type <code class=Dv>USER_PROCESS</code>, <code class=Dv>INIT_PROCESS</code>, <code class=Dv>LOGIN_PROCESS</code> and <code class=Dv>DEAD_PROCESS</code>.</dd><dt><var class=Fa>ut_user</var></dt><dd>The user login name corresponding with the login session. This field is only applicable to entries of type <code class=Dv>USER_PROCESS</code> and <code class=Dv>INIT_PROCESS</code>. For <code class=Dv>INIT_PROCESS</code> entries this entry typically contains the name of the login process.</dd><dt><var class=Fa>ut_line</var></dt><dd>The name of the TTY character device, without the leading <span class=Pa>/dev/</span> prefix, corresponding with the device used to facilitate the user login session. If no TTY character device is used, this field is left blank. This field is only applicable to entries of type <code class=Dv>USER_PROCESS</code> and <code class=Dv>LOGIN_PROCESS</code>.</dd><dt><var class=Fa>ut_host</var></dt><dd>The network hostname of the remote system, connecting to perform a user login. If the user login session is not performed across a network, this field is left blank. This field is only applicable to entries of type <code class=Dv>USER_PROCESS</code>.</dd></dl><p class=Pp>This implementation guarantees all inapplicable fields are discarded. The <var class=Fa>ut_user</var>, <var class=Fa>ut_line</var> and <var class=Fa>ut_host</var> fields of the structure returned by the library functions are also guaranteed to be null-terminated in this implementation.</p><p class=Pp>The <code class=Fn>getutxent</code>() function can be used to read the next entry from the user accounting database.</p><p class=Pp>The <code class=Fn>getutxid</code>() function searches for the next entry in the database of which the behaviour is based on the <var class=Fa>ut_type</var> field of <var class=Fa>id</var>. If <var class=Fa>ut_type</var> has a value of <code class=Dv>BOOT_TIME</code>, <code class=Dv>SHUTDOWN_TIME</code>, <code class=Dv>OLD_TIME</code> or <code class=Dv>NEW_TIME</code>, it will return the next entry whose <var class=Fa>ut_type</var> has an equal value. If <var class=Fa>ut_type</var> has a value of <code class=Dv>USER_PROCESS</code>, <code class=Dv>INIT_PROCESS</code>, <code class=Dv>LOGIN_PROCESS</code> or <code class=Dv>DEAD_PROCESS</code>, it will return the next entry whose <var class=Fa>ut_type</var> has one of the previously mentioned values and whose <var class=Fa>ut_id</var> is equal.</p><p class=Pp>The <code class=Fn>getutxline</code>() function searches for the next entry in the database whose <var class=Fa>ut_type</var> has a value of <code class=Dv>USER_PROCESS</code> or <code class=Dv>LOGIN_PROCESS</code> and whose <var class=Fa>ut_line</var> is equal to the same field in <var class=Fa>line</var>.</p><p class=Pp>The <code class=Fn>getutxuser</code>() function searches for the next entry in the database whose <var class=Fa>ut_type</var> has a value of <code class=Dv>USER_PROCESS</code> and whose <var class=Fa>ut_user</var> is equal to <var class=Fa>user</var>.</p><p class=Pp>The previously mentioned functions will automatically try to open the user accounting database if not already done so. The <code class=Fn>setutxdb</code>() and <code class=Fn>setutxent</code>() functions allow the database to be opened manually, causing the offset within the user accounting database to be rewound. The <code class=Fn>endutxent</code>() function closes the database.</p><p class=Pp>The <code class=Fn>setutxent</code>() database always opens the active sessions database. The <code class=Fn>setutxdb</code>() function opens the database identified by <var class=Fa>type</var>, whose value is either <code class=Dv>UTXDB_ACTIVE</code>, <code class=Dv>UTXDB_LASTLOGIN</code> or <code class=Dv>UTXDB_LOG</code>. It will open a custom file with filename <var class=Fa>file</var> instead of the system-default if <var class=Fa>file</var> is not null. Care must be taken that when using a custom filename, <var class=Fa>type</var> still has to match with the actual format, since each database may use its own file format.</p><p class=Pp>The <code class=Fn>pututxline</code>() function writes record <var class=Fa>utmpx</var> to the system-default user accounting databases. The value of <var class=Fa>ut_type</var> determines which databases are modified.</p><p class=Pp>Entries of type <code class=Dv>SHUTDOWN_TIME</code>, <code class=Dv>OLD_TIME</code> and <code class=Dv>NEW_TIME</code> will only be written to <span class=Pa>/var/log/utx.log</span>.</p><p class=Pp>Entries of type <code class=Dv>USER_PROCESS</code> will also be written to <span class=Pa>/var/run/utx.active</span> and <span class=Pa>/var/log/utx.lastlogin</span>.</p><p class=Pp>Entries of type <code class=Dv>DEAD_PROCESS</code> will only be written to <span class=Pa>/var/log/utx.log</span> and <span class=Pa>/var/run/utx.active</span> if a corresponding <code class=Dv>USER_PROCESS</code>, <code class=Dv>INIT_PROCESS</code> or <code class=Dv>LOGIN_PROCESS</code> entry whose <var class=Fa>ut_id</var> is equal has been found in the latter.</p><p class=Pp>In addition, entries of type <code class=Dv>BOOT_TIME</code> and <code class=Dv>SHUTDOWN_TIME</code> will cause all existing entries in <span class=Pa>/var/run/utx.active</span> to be discarded.</p><p class=Pp>All entries whose type has not been mentioned previously, are discarded by this implementation of <code class=Fn>pututxline</code>(). This implementation also ignores the value of <var class=Fa>ut_tv</var>.</p></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> The <code class=Fn>getutxent</code>(), <code class=Fn>getutxid</code>(), <code class=Fn>getutxline</code>(), and <code class=Fn>getutxuser</code>() functions return a pointer to an <var class=Vt>utmpx</var> structure that matches the mentioned constraints on success or <code class=Dv>NULL</code> when reaching the end-of-file or when an error occurs. <p class=Pp>The <code class=Fn>pututxline</code>() function returns a pointer to an <var class=Vt>utmpx</var> structure containing a copy of the structure written to disk upon success. It returns <code class=Dv>NULL</code> when the provided <var class=Vt>utmpx</var> is invalid, or <var class=Fa>ut_type</var> has a value of <code class=Dv>DEAD_PROCESS</code> and an entry with an identifier with a value equal to the field <var class=Fa>ut_id</var> was not found; the global variable <var class=Va>errno</var> is set to indicate the error.</p><p class=Pp>The <code class=Fn>setutxdb</code>() function returns 0 if the user accounting database was opened successfully. Otherwise, -1 is returned and the global variable <var class=Va>errno</var> is set to indicate the error.</p></section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> In addition to the error conditions described in <a class=Xr href=open.2.html>open(2)</a>, <a class=Xr href=fdopen.3.html>fdopen(3)</a>, <a class=Xr href=fopen.3.html>fopen(3)</a>, <a class=Xr href=fseek.3.html>fseek(3)</a>, the <code class=Fn>pututxline</code>() function can generate the following errors: <dl class=Bl-tag><dt>[<a class=permalink href=#ESRCH><code class=Er id=ESRCH>ESRCH</code></a>]</dt><dd>The value of <var class=Fa>ut_type</var> is DEAD_PROCESS, and the process entry could not be found.</dd><dt>[<a class=permalink href=#EINVAL><code class=Er id=EINVAL>EINVAL</code></a>]</dt><dd>The value of <var class=Fa>ut_type</var> is not supported by this implementation.</dd></dl> In addition to the error conditions described in <a class=Xr href=fopen.3.html>fopen(3)</a>, the <code class=Fn>setutxdb</code>() function can generate the following errors: <dl class=Bl-tag><dt>[<a class=permalink href=#EINVAL_2><code class=Er id=EINVAL_2>EINVAL</code></a>]</dt><dd>The <var class=Fa>type</var> argument contains a value not supported by this implementation.</dd><dt>[<a class=permalink href=#EFTYPE><code class=Er id=EFTYPE>EFTYPE</code></a>]</dt><dd>The file format is invalid.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=last.1.html>last(1)</a>, <a class=Xr href=write.1.html>write(1)</a>, <a class=Xr href=getpid.2.html>getpid(2)</a>, <a class=Xr href=gettimeofday.2.html>gettimeofday(2)</a>, <a class=Xr href=tty.4.html>tty(4)</a>, <a class=Xr href=ac.8.html>ac(8)</a>, <a class=Xr href=newsyslog.8.html>newsyslog(8)</a>, <a class=Xr href=utx.8.html>utx(8)</a></section><section class=Sh><h2 class=Sh id=STANDARDS><a class=permalink href=#STANDARDS>STANDARDS</a></h2> The <code class=Fn>endutxent</code>(), <code class=Fn>getutxent</code>(), <code class=Fn>getutxid</code>(), <code class=Fn>getutxline</code>() and <code class=Fn>setutxent</code>() functions are expected to conform to <span class=St>IEEE Std 1003.1-2008 (“POSIX.1”)</span>. <p class=Pp>The <code class=Fn>pututxline</code>() function deviates from the standard by writing its records to multiple database files, depending on its <var class=Fa>ut_type</var>. This prevents the need for special utility functions to update the other databases, such as the <code class=Fn>updlastlogx</code>() and <code class=Fn>updwtmpx</code>() functions which are available in other implementations. It also tries to replace <code class=Dv>DEAD_PROCESS</code> entries in the active sessions database when storing <code class=Dv>USER_PROCESS</code> entries and no entry with the same value for <var class=Fa>ut_id</var> has been found. The standard always requires a new entry to be allocated, which could cause an unbounded growth of the database.</p><p class=Pp>The <code class=Fn>getutxuser</code>() and <code class=Fn>setutxdb</code>() functions, the <var class=Fa>ut_host</var> field of the <var class=Vt>utmpx</var> structure and <code class=Dv>SHUTDOWN_TIME</code> are extensions.</p></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> These functions appeared in <span class=Ux>FreeBSD 9.0</span>. They replaced the <code class=In>&lt;<a class=In href=../src/utmp.h.html>utmp.h</a>&gt;</code> interface. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Ed Schouten</span> &lt;<a class=Mt href=mailto:ed@FreeBSD.org>ed@FreeBSD.org</a>&gt; </section></div><table class=foot><tr><td class=foot-date>October 27, 2011</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>