<!DOCTYPE html>
<html><head><meta charset=utf-8><title>archive_read_disk_set_symlink_hybrid(3)</title><keywords content=man,archive_read_disk_set_symlink_hybrid></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>archive_read_disk_set_symlink_hybrid(3)</h1><table class=head><tr><td class=head-ltitle>ARCHIVE_READ_DISK(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>ARCHIVE_READ_DISK(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>archive_read_disk_new</code>, <code class=Nm>archive_read_disk_set_behavior</code>, <code class=Nm>archive_read_disk_set_symlink_logical</code>, <code class=Nm>archive_read_disk_set_symlink_physical</code>, <code class=Nm>archive_read_disk_set_symlink_hybrid</code>, <code class=Nm>archive_read_disk_entry_from_file</code>, <code class=Nm>archive_read_disk_gname</code>, <code class=Nm>archive_read_disk_uname</code>, <code class=Nm>archive_read_disk_set_uname_lookup</code>, <code class=Nm>archive_read_disk_set_gname_lookup</code>, <code class=Nm>archive_read_disk_set_standard_lookup</code> — <div class=Nd>functions for reading objects from disk</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2> Streaming Archive Library (libarchive, -larchive) </section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/archive.h.html>archive.h</a>&gt;</code><p class=Pp><var class=Ft>struct archive *</var><br><code class=Fn>archive_read_disk_new</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_behavior</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>, <var class=Fa style="white-space: nowrap;">int</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_symlink_logical</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_symlink_physical</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_symlink_hybrid</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>);</p><p class=Pp><var class=Ft>const char *</var><br><code class=Fn>archive_read_disk_gname</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>, <var class=Fa style="white-space: nowrap;">gid_t</var>);</p><p class=Pp><var class=Ft>const char *</var><br><code class=Fn>archive_read_disk_uname</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>, <var class=Fa style="white-space: nowrap;">uid_t</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_gname_lookup</code>(<var class=Fa>struct archive *</var>, <var class=Fa>void *</var>, <var class=Fa>const char *(*lookup)(void *, gid_t)</var>, <var class=Fa>void (*cleanup)(void *)</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_uname_lookup</code>(<var class=Fa>struct archive *</var>, <var class=Fa>void *</var>, <var class=Fa>const char *(*lookup)(void *, uid_t)</var>, <var class=Fa>void (*cleanup)(void *)</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_set_standard_lookup</code>(<var class=Fa style="white-space: nowrap;">struct archive *</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>archive_read_disk_entry_from_file</code>(<var class=Fa>struct archive *</var>, <var class=Fa>struct archive_entry *</var>, <var class=Fa>int fd</var>, <var class=Fa>const struct stat *</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> These functions provide an API for reading information about objects on disk. In particular, they provide an interface for populating struct archive_entry objects. <dl class=Bl-tag><dt><code class=Fn>archive_read_disk_new</code>()</dt><dd>Allocates and initializes a struct archive object suitable for reading object information from disk.</dd><dt><code class=Fn>archive_read_disk_set_behavior</code>()</dt><dd>Configures various behavior options when reading entries from disk. The flags field consists of a bitwise OR of one or more of the following values: <dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#ARCHIVE_READDISK_HONOR_NODUMP><code class=Cm id=ARCHIVE_READDISK_HONOR_NODUMP>ARCHIVE_READDISK_HONOR_NODUMP</code></a></dt><dd>Skip files and directories with the nodump file attribute (file flag) set. By default, the nodump file attribute is ignored.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_MAC_COPYFILE><code class=Cm id=ARCHIVE_READDISK_MAC_COPYFILE>ARCHIVE_READDISK_MAC_COPYFILE</code></a></dt><dd>Mac OS X specific. Read metadata (ACLs and extended attributes) with <a class=Xr href=copyfile.3.html>copyfile(3)</a>. By default, metadata is read using <a class=Xr href=copyfile.3.html>copyfile(3)</a>.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_NO_ACL><code class=Cm id=ARCHIVE_READDISK_NO_ACL>ARCHIVE_READDISK_NO_ACL</code></a></dt><dd>Do not read Access Control Lists. By default, ACLs are read from disk.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_NO_FFLAGS><code class=Cm id=ARCHIVE_READDISK_NO_FFLAGS>ARCHIVE_READDISK_NO_FFLAGS</code></a></dt><dd>Do not read file attributes (file flags). By default, file attributes are read from disk. See <a class=Xr href=chattr.1.html>chattr(1)</a> (Linux) or <a class=Xr href=chflags.1.html>chflags(1)</a> (FreeBSD, Mac OS X) for more information on file attributes.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_NO_TRAVERSE_MOUNTS><code class=Cm id=ARCHIVE_READDISK_NO_TRAVERSE_MOUNTS>ARCHIVE_READDISK_NO_TRAVERSE_MOUNTS</code></a></dt><dd>Do not traverse mount points. By default, mount points are traversed.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_NO_XATTR><code class=Cm id=ARCHIVE_READDISK_NO_XATTR>ARCHIVE_READDISK_NO_XATTR</code></a></dt><dd>Do not read extended file attributes (xattrs). By default, extended file attributes are read from disk. See <a class=Xr href=xattr.7.html>xattr(7)</a> (Linux), <a class=Xr href=xattr.2.html>xattr(2)</a> (Mac OS X), or <a class=Xr href=getextattr.8.html>getextattr(8)</a> (FreeBSD) for more information on extended file attributes.</dd><dt><a class=permalink href=#ARCHIVE_READDISK_RESTORE_ATIME><code class=Cm id=ARCHIVE_READDISK_RESTORE_ATIME>ARCHIVE_READDISK_RESTORE_ATIME</code></a></dt><dd>Restore access time of traversed files. By default, access time of traversed files is not restored.</dd></dl></dd><dt><code class=Fn>archive_read_disk_set_symlink_logical</code>(), <code class=Fn>archive_read_disk_set_symlink_physical</code>(), <code class=Fn>archive_read_disk_set_symlink_hybrid</code>()</dt><dd>This sets the mode used for handling symbolic links. The “logical” mode follows all symbolic links. The “physical” mode does not follow any symbolic links. The “hybrid” mode currently behaves identically to the “logical” mode.</dd><dt><code class=Fn>archive_read_disk_gname</code>(), <code class=Fn>archive_read_disk_uname</code>()</dt><dd>Returns a user or group name given a gid or uid value. By default, these always return a NULL string.</dd><dt><code class=Fn>archive_read_disk_set_gname_lookup</code>(), <code class=Fn>archive_read_disk_set_uname_lookup</code>()</dt><dd>These allow you to override the functions used for user and group name lookups. You may also provide a void * pointer to a private data structure and a cleanup function for that data. The cleanup function will be invoked when the struct archive object is destroyed or when new lookup functions are registered.</dd><dt><code class=Fn>archive_read_disk_set_standard_lookup</code>()</dt><dd>This convenience function installs a standard set of user and group name lookup functions. These functions use <a class=Xr href=getpwuid.3.html>getpwuid(3)</a> and <a class=Xr href=getgrgid.3.html>getgrgid(3)</a> to convert ids to names, defaulting to NULL if the names cannot be looked up. These functions also implement a simple memory cache to reduce the number of calls to <a class=Xr href=getpwuid.3.html>getpwuid(3)</a> and <a class=Xr href=getgrgid.3.html>getgrgid(3)</a>.</dd><dt><code class=Fn>archive_read_disk_entry_from_file</code>()</dt><dd>Populates a struct archive_entry object with information about a particular file. The archive_entry object must have already been created with <a class=Xr href=archive_entry_new.3.html>archive_entry_new(3)</a> and at least one of the source path or path fields must already be set. (If both are set, the source path will be used.) <p class=Pp>Information is read from disk using the path name from the struct archive_entry object. If a file descriptor is provided, some information will be obtained using that file descriptor, on platforms that support the appropriate system calls.</p><p class=Pp>If a pointer to a struct stat is provided, information from that structure will be used instead of reading from the disk where appropriate. This can provide performance benefits in scenarios where struct stat information has already been read from the disk as a side effect of some other operation. (For example, directory traversal libraries often provide this information.)</p><p class=Pp>Where necessary, user and group ids are converted to user and group names using the currently-registered lookup functions above. This affects the file ownership fields and ACL values in the struct archive_entry object.</p></dd></dl> More information about the <var class=Va>struct archive</var> object and the overall design of the library can be found in the <a class=Xr href=libarchive.3.html>libarchive(3)</a> overview. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> The following illustrates basic usage of the library by showing how to use it to copy an item on disk into an archive. <div class="Bd Pp Bd-indent"><pre>
void
file_to_archive(struct archive *a, const char *name)
{
  char buff[8192];
  size_t bytes_read;
  struct archive *ard;
  struct archive_entry *entry;
  int fd;

  ard = archive_read_disk_new();
  archive_read_disk_set_standard_lookup(ard);
  entry = archive_entry_new();
  fd = open(name, O_RDONLY);
  if (fd &lt; 0)
     return;
  archive_entry_copy_pathname(entry, name);
  archive_read_disk_entry_from_file(ard, entry, fd, NULL);
  archive_write_header(a, entry);
  while ((bytes_read = read(fd, buff, sizeof(buff))) &gt; 0)
    archive_write_data(a, buff, bytes_read);
  archive_write_finish_entry(a);
  archive_read_free(ard);
  archive_entry_free(entry);
}
</pre></div></section><section class=Sh><h2 class=Sh id=RETURN_VALUES><a class=permalink href=#RETURN_VALUES>RETURN VALUES</a></h2> Most functions return <code class=Cm>ARCHIVE_OK</code> (zero) on success, or one of several negative error codes for errors. Specific error codes include: <code class=Cm>ARCHIVE_RETRY</code> for operations that might succeed if retried, <code class=Cm>ARCHIVE_WARN</code> for unusual conditions that do not prevent further operations, and <code class=Cm>ARCHIVE_FATAL</code> for serious errors that make remaining operations impossible. <p class=Pp><code class=Fn>archive_read_disk_new</code>() returns a pointer to a newly-allocated struct archive object or NULL if the allocation failed for any reason.</p><p class=Pp><code class=Fn>archive_read_disk_gname</code>() and <code class=Fn>archive_read_disk_uname</code>() return const char * pointers to the textual name or NULL if the lookup failed for any reason. The returned pointer points to internal storage that may be reused on the next call to either of these functions; callers should copy the string if they need to continue accessing it.</p></section><section class=Sh><h2 class=Sh id=ERRORS><a class=permalink href=#ERRORS>ERRORS</a></h2> Detailed error codes and textual descriptions are available from the <code class=Fn>archive_errno</code>() and <code class=Fn>archive_error_string</code>() functions. </section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=tar.1.html>tar(1)</a>, <a class=Xr href=archive_read.3.html>archive_read(3)</a>, <a class=Xr href=archive_util.3.html>archive_util(3)</a>, <a class=Xr href=archive_write.3.html>archive_write(3)</a>, <a class=Xr href=archive_write_disk.3.html>archive_write_disk(3)</a>, <a class=Xr href=libarchive.3.html>libarchive(3)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>libarchive</code> library first appeared in <span class=Ux>FreeBSD 5.3</span>. The <code class=Nm>archive_read_disk</code> interface was added to <code class=Nm>libarchive 2.6</code> and first appeared in <span class=Ux>FreeBSD 8.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The <code class=Nm>libarchive</code> library was written by <span class=An>Tim Kientzle</span> ⟨kientzle@FreeBSD.org⟩. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The “standard” user name and group name lookup functions are not the defaults because <a class=Xr href=getgrgid.3.html>getgrgid(3)</a> and <a class=Xr href=getpwuid.3.html>getpwuid(3)</a> are sometimes too large for particular applications. The current design allows the application author to use a more compact implementation when appropriate. <p class=Pp>The full list of metadata read from disk by <code class=Fn>archive_read_disk_entry_from_file</code>() is necessarily system-dependent.</p><p class=Pp>The <code class=Fn>archive_read_disk_entry_from_file</code>() function reads as much information as it can from disk. Some method should be provided to limit this so that clients who do not need ACLs, for instance, can avoid the extra work needed to look up such information.</p><p class=Pp>This API should provide a set of methods for walking a directory tree. That would make it a direct parallel of the <a class=Xr href=archive_read.3.html>archive_read(3)</a> API. When such methods are implemented, the “hybrid” symbolic link mode will make sense.</p></section></div><table class=foot><tr><td class=foot-date>April 3, 2017</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>