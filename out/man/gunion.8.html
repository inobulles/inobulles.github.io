<!DOCTYPE html>
<html><head><meta charset=utf-8><title>gunion(8)</title><keywords content=man,gunion></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>gunion(8)</h1><table class=head><tr><td class=head-ltitle>GUNION(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>GUNION(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>gunion</code> — <div class=Nd>control utility for UNION GEOM class</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>create</code> [<code class=Fl>-v</code>] [<code class=Fl>-o</code><var class=Ar>offset</var>] [<code class=Fl>-s</code><var class=Ar>size</var>] [<code class=Fl>-S</code><var class=Ar>secsize</var>] [<code class=Fl>-Z</code><var class=Ar>gunionname</var>] <var class=Ar>upperdev lowerdev</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>destroy</code> [<code class=Fl>-fv</code>] <var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>reset</code> [<code class=Fl>-v</code>] <var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>revert</code> [<code class=Fl>-v</code>] <var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>commit</code> [<code class=Fl>-frv</code>] <var class=Ar>prov ...</var></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>list</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>status</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>load</code></td></tr></table><br><table class=Nm><tr><td><code class=Nm>gunion</code></td><td><code class=Cm>unload</code></td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>gunion</code> utility is used to track changes to a read-only disk on a writable disk. Logically, a writable disk is placed over a read-only disk. Write requests are intercepted and stored on the writable disk. Read requests are first checked to see if they have been written on the top (writable disk) and if found are returned. If they have not been written on the top disk, then they are read from the lower disk. <p class=Pp>The <code class=Nm>gunion</code> utility can be especially useful if you have a large disk with a corrupted filesystem that you are unsure of how to repair. You can use <code class=Nm>gunion</code> to place another disk over the corrupted disk and then attempt to repair the filesystem. If the repair fails, you can revert all the changes in the upper disk and be back to the unchanged state of the lower disk thus allowing you to try another approach to repairing it. If the repair is successful you can request that all the writes recorded on the top disk be written to the lower disk.</p><p class=Pp>Another use of the <code class=Nm>gunion</code> utility is to try out upgrades to your system. Place the upper disk over the disk holding your filesystem that is to be upgraded and then run the upgrade on it. If it works, commit it; if it fails, revert the upgrade. An example is given below.</p><p class=Pp>The upper disk must be at least the size of the disk that it covers. The union metadata exists only for the period of time that the union is instantiated, so it is important to commit the updates before destroying the union. If the top disk is about 2.5 percent larger for 512 byte sector disks (or 0.5 percent larger for 4K sector disks) than the disk that it covers, it is posible (thought not currently implemented) to save the union metadata between instantiations of the union device.</p><p class=Pp>If you do not have physical media available to use for the upper layer, the <a class=Xr href=md.4.html>md(4)</a> disk can be used instead. When used in <code class=Cm>swap</code> mode the changes are all held in buffer memory. Pages get pushed out to the swap when the system is under memory pressure, otherwise they stay in the operating memory. If long-term persistance is desired, <code class=Cm>vnode</code> mode can be used in which a regular file is used as backing store. The disk space used by the file is based on the amount of data that is written to the top device.</p><p class=Pp>The first argument to <code class=Nm>gunion</code> indicates an action to be performed:</p><dl class=Bl-tag><dt><a class=permalink href=#create><code class=Cm id=create>create</code></a></dt><dd>Set up a union provider on the two given devices. The first device given is used as the top device and must be writable. The second device given is used as the bottom device and need only be readable. The second device may be mounted read-only but it is recommended that it be unmounted and accessed only through a mount of the union device. If the operation succeeds, the new provider should appear with name <span class=Pa>/dev/</span>⟨<var class=Ar>upperdev</var>⟩-⟨<var class=Ar>lowerdev</var>⟩<span class=Pa>.union</span>. An alternate name can be specified with the <code class=Fl>-Z</code> flag. The kernel module <span class=Pa>geom_union.ko</span> will be loaded if it is not loaded already. <p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a><var class=Ar>offset</var></dt><dd>Where to begin on the original provider. The default is to start at the beginning of the disk (i.e., at offset 0). This option may be used to skip over partitioning information stored at the beginning of a disk. The offset must be a multiple of the sector size.</dd><dt><a class=permalink href=#s><code class=Fl id=s>-s</code></a><var class=Ar>size</var></dt><dd>Size of the transparent provider. The default is to be the same size as the lower disk. Any extra space at the end of the upper disk may be used to store union metadata.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a><var class=Ar>secsize</var></dt><dd>Sector size of the transparent provider. The default is to be the same sector size as the lower disk.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>Be more verbose.</dd><dt><a class=permalink href=#Z><code class=Fl id=Z>-Z</code></a><var class=Ar>gunionname</var></dt><dd>The name of the new provider. The suffix “.union” will be appended to the provider name.</dd></dl></dd><dt><a class=permalink href=#destroy><code class=Cm id=destroy>destroy</code></a></dt><dd>Turn off the given union providers. <p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#f><code class=Fl id=f>-f</code></a></dt><dd>Force the removal of the specified provider.</dd><dt><a class=permalink href=#v_2><code class=Fl id=v_2>-v</code></a></dt><dd>Be more verbose.</dd></dl></dd><dt><a class=permalink href=#revert><code class=Cm id=revert>revert</code></a></dt><dd>Discard all the changes made in the top layer thus reverting to the original state of the lower device. The union device may not be mounted or otherwise in use when a <code class=Cm>revert</code> operation is being done.</dd><dt><a class=permalink href=#commit><code class=Cm id=commit>commit</code></a></dt><dd>Write all the changes made in the top device to the lower device thus committing the lower device to have the same data as the union. <p class=Pp>Additional options include:</p><dl class=Bl-tag><dt><a class=permalink href=#f_2><code class=Fl id=f_2>-f</code></a></dt><dd>The <code class=Cm>commit</code> command will not allow the lower device to be mounted or otherwise in use while the <code class=Cm>commit</code> operation is being done. However, the <code class=Fl>-f</code> flag may be specified to allow the lower device to be mounted read-only. To prevent a filesystem panic on the mounted lower-device filesystem, immediately after the <code class=Cm>commit</code> operation finishes the lower-device filesystem should be unmounted and then remounted to update its metadata state. If the lower-device filesystem is currently being used as the root filesystem then the <code class=Fl>-r</code> flag should be specified to reboot the system at the completion of the <code class=Cm>commit</code> operation.</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Reboot the system at the completion of the <code class=Cm>commit</code> operation.</dd><dt><a class=permalink href=#v_3><code class=Fl id=v_3>-v</code></a></dt><dd>Be more verbose.</dd></dl></dd><dt><a class=permalink href=#reset><code class=Cm id=reset>reset</code></a></dt><dd>Reset statistics for the given union providers.</dd><dt><a class=permalink href=#list><code class=Cm id=list>list</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#status><code class=Cm id=status>status</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#load><code class=Cm id=load>load</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd><dt><a class=permalink href=#unload><code class=Cm id=unload>unload</code></a></dt><dd>See <a class=Xr href=geom.8.html>geom(8)</a>.</dd></dl></section><section class=Sh><h2 class=Sh id=EXIT_STATUS><a class=permalink href=#EXIT_STATUS>EXIT STATUS</a></h2> Exit status is 0 on success, and 1 if the command fails. </section><section class=Sh><h2 class=Sh id=EXAMPLES><a class=permalink href=#EXAMPLES>EXAMPLES</a></h2> The following example shows how to create and destroy a union provider with disks <span class=Pa>/dev/da0p1</span> as the read-only disk on the bottom and <span class=Pa>/dev/md0</span> as the wriable disk on the top. <div class="Bd Pp Bd-indent"><pre>
gunion create -v md0 da0p1
mount /dev/md0-da0p1.union /mnt
</pre></div><p class=Pp>Proceed to make changes in /mnt filesystem. If they are successful and you want to keep them.</p><div class="Bd Pp Bd-indent"><pre>
umount /mnt
gunion commit -v md0-da0p1.union
</pre></div><p class=Pp>If they are unsuccessful and you want to roll back.</p><div class="Bd Pp Bd-indent"><pre>
umount /mnt
gunion revert -v md0-da0p1.union
</pre></div><p class=Pp>When done eliminate the union.</p><div class="Bd Pp Bd-indent"><pre>
umount /mnt
gunion destroy -v md0-da0p1.union
</pre></div><p class=Pp>All uncommitted changes will be discarded when the union is destroyed.</p><p class=Pp>If you use the name of the full disk, for example <span class=Pa>da0</span> and it is labelled, then a union name will appear for the disk as <span class=Pa>md0-da0.union</span> as well as for each partition on the disk as <span class=Pa>md0-da0p1.union</span>, <span class=Pa>md0-da0p2.union</span>, etc. A commit operation can be done only on <span class=Pa>md0-da0.union</span> and will commit changes to all the partitions. If partition level commits are desired, then a union must be created for each partition.</p><p class=Pp>The traffic statistics for the given union providers can be obtained with the <code class=Cm>list</code> command. The example below shows the number of bytes written with <a class=Xr href=newfs.8.html>newfs(8)</a>:</p><div class="Bd Pp Bd-indent"><pre>
gunion create md0 da0p1
newfs /dev/md0-da0p1.union
gunion list
</pre></div></section><section class=Sh><h2 class=Sh id=SYSCTL_VARIABLES><a class=permalink href=#SYSCTL_VARIABLES>SYSCTL VARIABLES</a></h2> The following <a class=Xr href=sysctl.8.html>sysctl(8)</a> variables can be used to control the behavior of the <code class=Nm>UNION</code> GEOM class. The default value is shown next to each variable. <dl class=Bl-tag><dt><var class=Va>kern.geom.union.debug</var>: <span class=No>0</span></dt><dd>Debug level of the <code class=Nm>UNION</code> GEOM class. This can be set to a number between 0 and 4 inclusive. If set to 0, no debug information is printed. If set to 1, all the verbose messages are logged. If set to 2, addition error-related information is logged. If set to 3, mapping operations are logged. If set to 4, the maximum amount of debug information is printed.</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=geom.4.html>geom(4)</a>, <a class=Xr href=geom.8.html>geom(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>gunion</code> utility appeared in <span class=Ux>FreeBSD 14.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2><span class=An>Marshall Kirk McKusick</span> &lt;<a class=Mt href=mailto:mckusick@mckusick.com>mckusick@mckusick.com</a>&gt; </section></div><table class=foot><tr><td class=foot-date>January 19, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>