<!DOCTYPE html>
<html><head><meta charset=utf-8><title>ftpd(8)</title><keywords content=man,ftpd></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>ftpd(8)</h1><table class=head><tr><td class=head-ltitle>FTPD(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>FTPD(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>ftpd</code> — <div class=Nd>Internet File Transfer Protocol server</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>ftpd</code></td><td>[<code class=Fl>-468ABDdEhMmOoRrSUvW</code>] [<code class=Fl>-l</code> [<code class=Fl>-l</code>]] [<code class=Fl>-a</code><var class=Ar>address</var>] [<code class=Fl>-P</code><var class=Ar>port</var>] [<code class=Fl>-p</code><var class=Ar>file</var>] [<code class=Fl>-T</code><var class=Ar>maxtimeout</var>] [<code class=Fl>-t</code><var class=Ar>timeout</var>] [<code class=Fl>-u</code><var class=Ar>umask</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>ftpd</code> utility is the Internet File Transfer Protocol server process. The server uses the TCP protocol and listens at the port specified with the <code class=Fl>-P</code> option or in the “ftp” service specification; see <a class=Xr href=services.5.html>services(5)</a>. <p class=Pp>Available options:</p><dl class=Bl-tag><dt><a class=permalink href=#4><code class=Fl id=4>-4</code></a></dt><dd>When <code class=Fl>-D</code> is specified, accept connections via <code class=Dv>AF_INET</code> socket.</dd><dt><a class=permalink href=#6><code class=Fl id=6>-6</code></a></dt><dd>When <code class=Fl>-D</code> is specified, accept connections via <code class=Dv>AF_INET6</code> socket.</dd><dt><a class=permalink href=#8><code class=Fl id=8>-8</code></a></dt><dd>Enable transparent UTF-8 mode. RFC 2640 compliant clients will be told that the character encoding used by the server is UTF-8, which is the only effect of the option. <p class=Pp>This option does not enable any encoding conversion for server file names; it implies instead that the names of files on the server are encoded in UTF-8. As for files uploaded via FTP, it is the duty of the RFC 2640 compliant client to convert their names from the client's local encoding to UTF-8. FTP command names and own <code class=Nm>ftpd</code> messages are always encoded in ASCII, which is a subset of UTF-8. Hence no need for server-side conversion at all.</p></dd><dt><a class=permalink href=#A><code class=Fl id=A>-A</code></a></dt><dd>Allow only anonymous ftp access.</dd><dt><a class=permalink href=#a><code class=Fl id=a>-a</code></a></dt><dd>When <code class=Fl>-D</code> is specified, accept connections only on the specified <var class=Ar>address</var>.</dd><dt><a class=permalink href=#B><code class=Fl id=B>-B</code></a></dt><dd>With this option set, <code class=Nm>ftpd</code> sends authentication success and failure messages to the <a class=Xr href=blacklistd.8.html>blacklistd(8)</a> daemon. If this option is not specified, no communcation with the <a class=Xr href=blacklistd.8.html>blacklistd(8)</a> daemon is attempted.</dd><dt><a class=permalink href=#D><code class=Fl id=D>-D</code></a></dt><dd>With this option set, <code class=Nm>ftpd</code> will detach and become a daemon, accepting connections on the FTP port and forking children processes to handle them. This is lower overhead than starting <code class=Nm>ftpd</code> from <a class=Xr href=inetd.8.html>inetd(8)</a> and is thus useful on busy servers to reduce load.</dd><dt><a class=permalink href=#d><code class=Fl id=d>-d</code></a></dt><dd>Debugging information is written to the syslog using <code class=Dv>LOG_FTP</code>.</dd><dt><a class=permalink href=#E><code class=Fl id=E>-E</code></a></dt><dd>Disable the EPSV command. This is useful for servers behind older firewalls.</dd><dt><a class=permalink href=#h><code class=Fl id=h>-h</code></a></dt><dd>Disable printing host-specific information, such as the server software version or hostname, in server messages.</dd><dt><a class=permalink href=#l><code class=Fl id=l>-l</code></a></dt><dd>Each successful and failed <a class=Xr href=ftp.1.html>ftp(1)</a> session is logged using syslog with a facility of <code class=Dv>LOG_FTP</code>. If this option is specified twice, the retrieve (get), store (put), append, delete, make directory, remove directory and rename operations and their filename arguments are also logged. By default, <a class=Xr href=syslogd.8.html>syslogd(8)</a> logs these to <span class=Pa>/var/log/xferlog</span>.</dd><dt><a class=permalink href=#M><code class=Fl id=M>-M</code></a></dt><dd>Prevent anonymous users from creating directories.</dd><dt><a class=permalink href=#m><code class=Fl id=m>-m</code></a></dt><dd>Permit anonymous users to overwrite or modify existing files if allowed by file system permissions. By default, anonymous users cannot modify existing files; in particular, files to upload will be created under a unique name.</dd><dt><a class=permalink href=#O><code class=Fl id=O>-O</code></a></dt><dd>Put server in write-only mode for anonymous users only. RETR is disabled for anonymous users, preventing anonymous downloads. This has no effect if <code class=Fl>-o</code> is also specified.</dd><dt><a class=permalink href=#o><code class=Fl id=o>-o</code></a></dt><dd>Put server in write-only mode. RETR is disabled, preventing downloads.</dd><dt><a class=permalink href=#P><code class=Fl id=P>-P</code></a></dt><dd>When <code class=Fl>-D</code> is specified, accept connections at <var class=Ar>port</var>, specified as a numeric value or service name, instead of at the default “ftp” port.</dd><dt><a class=permalink href=#p><code class=Fl id=p>-p</code></a></dt><dd>When <code class=Fl>-D</code> is specified, write the daemon's process ID to <var class=Ar>file</var> instead of the default pid file, <span class=Pa>/var/run/ftpd.pid</span>.</dd><dt><a class=permalink href=#R><code class=Fl id=R>-R</code></a></dt><dd>With this option set, <code class=Nm>ftpd</code> will revert to historical behavior with regard to security checks on user operations and restrictions on PORT requests. Currently, <code class=Nm>ftpd</code> will only honor PORT commands directed to unprivileged ports on the remote user's host (which violates the FTP protocol specification but closes some security holes).</dd><dt><a class=permalink href=#r><code class=Fl id=r>-r</code></a></dt><dd>Put server in read-only mode. All commands which may modify the local file system are disabled.</dd><dt><a class=permalink href=#S><code class=Fl id=S>-S</code></a></dt><dd>With this option set, <code class=Nm>ftpd</code> logs all anonymous file downloads to the file <span class=Pa>/var/log/ftpd</span> when this file exists.</dd><dt><a class=permalink href=#T><code class=Fl id=T>-T</code></a></dt><dd>A client may also request a different timeout period; the maximum period allowed may be set to <var class=Ar>timeout</var> seconds with the <code class=Fl>-T</code> option. The default limit is 2 hours.</dd><dt><a class=permalink href=#t><code class=Fl id=t>-t</code></a></dt><dd>The inactivity timeout period is set to <var class=Ar>timeout</var> seconds (the default is 15 minutes).</dd><dt><a class=permalink href=#U><code class=Fl id=U>-U</code></a></dt><dd>This option instructs ftpd to use data ports in the range of <code class=Dv>IP_PORTRANGE_DEFAULT</code> instead of in the range of <code class=Dv>IP_PORTRANGE_HIGH</code>. Such a change may be useful for some specific firewall configurations; see <a class=Xr href=ip.4.html>ip(4)</a> for more information. <p class=Pp>Note that option is a virtual no-op in <span class=Ux>FreeBSD 5.0</span> and above; both port ranges are identical by default.</p></dd><dt><a class=permalink href=#u><code class=Fl id=u>-u</code></a></dt><dd>The default file creation mode mask is set to <var class=Ar>umask</var>, which is expected to be an octal numeric value. Refer to <a class=Xr href=umask.2.html>umask(2)</a> for details. This option may be overridden by <a class=Xr href=login.conf.5.html>login.conf(5)</a>.</dd><dt><a class=permalink href=#v><code class=Fl id=v>-v</code></a></dt><dd>A synonym for <code class=Fl>-d</code>.</dd><dt><a class=permalink href=#W><code class=Fl id=W>-W</code></a></dt><dd>Do not log FTP sessions to the user accounting database.</dd></dl><p class=Pp>The file <span class=Pa>/var/run/nologin</span> can be used to disable ftp access. If the file exists, <code class=Nm>ftpd</code> displays it and exits. If the file <span class=Pa>/etc/ftpwelcome</span> exists, <code class=Nm>ftpd</code> prints it before issuing the “ready” message. If the file <span class=Pa>/etc/ftpmotd</span> exists, <code class=Nm>ftpd</code> prints it after a successful login. Note the motd file used is the one relative to the login environment. This means the one in <span class=Pa>~ftp/etc</span> in the anonymous user's case.</p><p class=Pp>The ftp server currently supports the following ftp requests. The case of the requests is ignored. Requests marked [RW] are disabled if <code class=Fl>-r</code> is specified.</p><table class="Bl-column Bd-indent"><tr><td><b class=Sy>Request</b></td><td><b class=Sy>Description</b></td></tr><tr><td>ABOR</td><td>abort previous command</td></tr><tr><td>ACCT</td><td>specify account (ignored)</td></tr><tr><td>ALLO</td><td>allocate storage (vacuously)</td></tr><tr><td>APPE</td><td>append to a file [RW]</td></tr><tr><td>CDUP</td><td>change to parent of current working directory</td></tr><tr><td>CWD</td><td>change working directory</td></tr><tr><td>DELE</td><td>delete a file [RW]</td></tr><tr><td>EPRT</td><td>specify data connection port, multiprotocol</td></tr><tr><td>EPSV</td><td>prepare for server-to-server transfer, multiprotocol</td></tr><tr><td>FEAT</td><td>give information on extended features of server</td></tr><tr><td>HELP</td><td>give help information</td></tr><tr><td>LIST</td><td>give list files in a directory (“<code class=Li>ls -lgA</code>”)</td></tr><tr><td>LPRT</td><td>specify data connection port, multiprotocol</td></tr><tr><td>LPSV</td><td>prepare for server-to-server transfer, multiprotocol</td></tr><tr><td>MDTM</td><td>show last modification time of file</td></tr><tr><td>MKD</td><td>make a directory [RW]</td></tr><tr><td>MODE</td><td>specify data transfer <i class=Em>mode</i></td></tr><tr><td>NLST</td><td>give name list of files in directory</td></tr><tr><td>NOOP</td><td>do nothing</td></tr><tr><td>PASS</td><td>specify password</td></tr><tr><td>PASV</td><td>prepare for server-to-server transfer</td></tr><tr><td>PORT</td><td>specify data connection port</td></tr><tr><td>PWD</td><td>print the current working directory</td></tr><tr><td>QUIT</td><td>terminate session</td></tr><tr><td>REST</td><td>restart incomplete transfer</td></tr><tr><td>RETR</td><td>retrieve a file</td></tr><tr><td>RMD</td><td>remove a directory [RW]</td></tr><tr><td>RNFR</td><td>specify rename-from file name [RW]</td></tr><tr><td>RNTO</td><td>specify rename-to file name [RW]</td></tr><tr><td>SITE</td><td>non-standard commands (see next section)</td></tr><tr><td>SIZE</td><td>return size of file</td></tr><tr><td>STAT</td><td>return status of server</td></tr><tr><td>STOR</td><td>store a file [RW]</td></tr><tr><td>STOU</td><td>store a file with a unique name [RW]</td></tr><tr><td>STRU</td><td>specify data transfer <i class=Em>structure</i></td></tr><tr><td>SYST</td><td>show operating system type of server system</td></tr><tr><td>TYPE</td><td>specify data transfer <i class=Em>type</i></td></tr><tr><td>USER</td><td>specify user name</td></tr><tr><td>XCUP</td><td>change to parent of current working directory (deprecated)</td></tr><tr><td>XCWD</td><td>change working directory (deprecated)</td></tr><tr><td>XMKD</td><td>make a directory (deprecated) [RW]</td></tr><tr><td>XPWD</td><td>print the current working directory (deprecated)</td></tr><tr><td>XRMD</td><td>remove a directory (deprecated) [RW]</td></tr></table><p class=Pp>The following non-standard or <span class=Ux>UNIX</span> specific commands are supported by the SITE request.</p><table class="Bl-column Bd-indent"><tr><td><b class=Sy>Request</b></td><td><b class=Sy>Description</b></td></tr><tr><td>UMASK</td><td>change umask, e.g. ``SITE UMASK 002''</td></tr><tr><td>IDLE</td><td>set idle-timer, e.g. ``SITE IDLE 60''</td></tr><tr><td>CHMOD</td><td>change mode of a file [RW], e.g. ``SITE CHMOD 755 filename''</td></tr><tr><td>MD5</td><td>report the files MD5 checksum, e.g. ``SITE MD5 filename''</td></tr><tr><td>HELP</td><td>give help information</td></tr></table><p class=Pp>Note: SITE requests are disabled in case of anonymous logins.</p><p class=Pp>The remaining ftp requests specified in Internet RFC 959 are recognized, but not implemented. MDTM and SIZE are not specified in RFC 959, but will appear in the next updated FTP RFC. To avoid possible denial-of-service attacks, SIZE requests against files larger than 10240 bytes will be denied if the current transfer type is ASCII.</p><p class=Pp>The ftp server will abort an active file transfer only when the ABOR command is preceded by a Telnet "Interrupt Process" (IP) signal and a Telnet "Synch" signal in the command Telnet stream, as described in Internet RFC 959. If a STAT command is received during a data transfer, preceded by a Telnet IP and Synch, transfer status will be returned.</p><p class=Pp>The <code class=Nm>ftpd</code> utility interprets file names according to the “globbing” conventions used by <a class=Xr href=csh.1.html>csh(1)</a>. This allows users to utilize the metacharacters “<code class=Li>*?[]{}~</code>”.</p><p class=Pp>The <code class=Nm>ftpd</code> utility authenticates users according to six rules.</p><ol class="Bl-enum Bd-indent"><li>The login name must be in the password data base and not have a null password. In this case a password must be provided by the client before any file operations may be performed. If the user has an OPIE key, the response from a successful USER command will include an OPIE challenge. The client may choose to respond with a PASS command giving either a standard password or an OPIE one-time password. The server will automatically determine which type of password it has been given and attempt to authenticate accordingly. See <a class=Xr href=opie.4.html>opie(4)</a> for more information on OPIE authentication.</li><li>The login name must not appear in the file <span class=Pa>/etc/ftpusers</span>.</li><li>The login name must not be a member of a group specified in the file <span class=Pa>/etc/ftpusers</span>. Entries in this file interpreted as group names are prefixed by an "at" ‘<code class=Li>@</code>’ sign.</li><li>The user must have a standard shell returned by <a class=Xr href=getusershell.3.html>getusershell(3)</a>.</li><li>If the user name appears in the file <span class=Pa>/etc/ftpchroot</span>, or the user is a member of a group with a group entry in this file, i.e., one prefixed with ‘<code class=Li>@</code>’, the session's root will be changed to the directory specified in this file or to the user's login directory by <a class=Xr href=chroot.2.html>chroot(2)</a> as for an “anonymous” or “ftp” account (see next item). See <a class=Xr href=ftpchroot.5.html>ftpchroot(5)</a> for a detailed description of the format of this file. This facility may also be triggered by enabling the boolean "ftp-chroot" capability in <a class=Xr href=login.conf.5.html>login.conf(5)</a>. However, the user must still supply a password. This feature is intended as a compromise between a fully anonymous account and a fully privileged account. The account should also be set up as for an anonymous account.</li><li>If the user name is “anonymous” or “ftp”, an anonymous ftp account must be present in the password file (user “ftp”). In this case the user is allowed to log in by specifying any password (by convention an email address for the user should be used as the password). When the <code class=Fl>-S</code> option is set, all transfers are logged as well.</li></ol><p class=Pp>In the last case, <code class=Nm>ftpd</code> takes special measures to restrict the client's access privileges. The server performs a <a class=Xr href=chroot.2.html>chroot(2)</a> to the home directory of the “ftp” user. As a special case if the “ftp” user's home directory pathname contains the <span class=Pa>/./</span> separator, <code class=Nm>ftpd</code> uses its left-hand side as the name of the directory to do <a class=Xr href=chroot.2.html>chroot(2)</a> to, and its right-hand side to change the current directory to afterwards. A typical example for this case would be <span class=Pa>/var/spool/ftp/./pub</span>. In order that system security is not breached, it is recommended that the “ftp” subtree be constructed with care, following these rules:</p><div class=Bd-indent><dl class=Bl-tag><dt><span class=Pa>~ftp</span></dt><dd>Make the home directory owned by “root” and unwritable by anyone.</dd><dt><span class=Pa>~ftp/etc</span></dt><dd>Make this directory owned by “root” and unwritable by anyone (mode 555). The files pwd.db (see <a class=Xr href=passwd.5.html>passwd(5)</a>) and <a class=Xr href=group.5.html>group(5)</a> must be present for the <a class=Xr href=ls.1.html>ls(1)</a> command to be able to produce owner names rather than numbers. The password field in <a class=Xr href=passwd.5.html>passwd(5)</a> is not used, and should not contain real passwords. The file <span class=Pa>ftpmotd</span>, if present, will be printed after a successful login. These files should be mode 444.</dd><dt><span class=Pa>~ftp/pub</span></dt><dd>This directory and the subdirectories beneath it should be owned by the users and groups responsible for placing files in them, and be writable only by them (mode 755 or 775). They should <i class=Em>not</i> be owned or writable by “ftp” or its group, otherwise guest users can fill the drive with unwanted files.</dd></dl></div><p class=Pp>If the system has multiple IP addresses, <code class=Nm>ftpd</code> supports the idea of virtual hosts, which provides the ability to define multiple anonymous ftp areas, each one allocated to a different internet address. The file <span class=Pa>/etc/ftphosts</span> contains information pertaining to each of the virtual hosts. Each host is defined on its own line which contains a number of fields separated by whitespace:</p><div class=Bd-indent><dl class=Bl-tag><dt>hostname</dt><dd>Contains the hostname or IP address of the virtual host.</dd><dt>user</dt><dd>Contains a user record in the system password file. As with normal anonymous ftp, this user's access uid, gid and group memberships determine file access to the anonymous ftp area. The anonymous ftp area (to which any user is chrooted on login) is determined by the home directory defined for the account. User id and group for any ftp account may be the same as for the standard ftp user.</dd><dt>statfile</dt><dd>File to which all file transfers are logged, which defaults to <span class=Pa>/var/log/ftpd</span>.</dd><dt>welcome</dt><dd>This file is the welcome message displayed before the server ready prompt. It defaults to <span class=Pa>/etc/ftpwelcome</span>.</dd><dt>motd</dt><dd>This file is displayed after the user logs in. It defaults to <span class=Pa>/etc/ftpmotd</span>.</dd></dl></div><p class=Pp>Lines beginning with a '#' are ignored and can be used to include comments.</p><p class=Pp>Defining a virtual host for the primary IP address or hostname changes the default for ftp logins to that address. The 'user', 'statfile', 'welcome' and 'motd' fields may be left blank, or a single hyphen '-' used to indicate that the default value is to be used.</p><p class=Pp>As with any anonymous login configuration, due care must be given to setup and maintenance to guard against security related problems.</p><p class=Pp>The <code class=Nm>ftpd</code> utility has internal support for handling remote requests to list files, and will not execute <span class=Pa>/bin/ls</span> in either a chrooted or non-chrooted environment. The <span class=Pa>~/bin/ls</span> executable need not be placed into the chrooted tree, nor need the <span class=Pa>~/bin</span> directory exist.</p></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/etc/ftpusers</span></dt><dd>List of unwelcome/restricted users.</dd><dt><span class=Pa>/etc/ftpchroot</span></dt><dd>List of normal users who should be chroot'd.</dd><dt><span class=Pa>/etc/ftphosts</span></dt><dd>Virtual hosting configuration file.</dd><dt><span class=Pa>/etc/ftpwelcome</span></dt><dd>Welcome notice.</dd><dt><span class=Pa>/etc/ftpmotd</span></dt><dd>Welcome notice after login.</dd><dt><span class=Pa>/var/run/ftpd.pid</span></dt><dd>Default pid file for daemon mode.</dd><dt><span class=Pa>/var/run/nologin</span></dt><dd>Displayed and access refused.</dd><dt><span class=Pa>/var/log/ftpd</span></dt><dd>Log file for anonymous transfers.</dd><dt><span class=Pa>/var/log/xferlog</span></dt><dd>Default place for session logs.</dd><dt><span class=Pa>/var/spool/ftp</span></dt><dd>Recommended directory for the FTP root directory (the home directory of the ftp user).</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=ftp.1.html>ftp(1)</a>, <a class=Xr href=umask.2.html>umask(2)</a>, <a class=Xr href=getusershell.3.html>getusershell(3)</a>, <a class=Xr href=opie.4.html>opie(4)</a>, <a class=Xr href=ftpchroot.5.html>ftpchroot(5)</a>, <a class=Xr href=login.conf.5.html>login.conf(5)</a>, <a class=Xr href=inetd.8.html>inetd(8)</a>, <a class=Xr href=syslogd.8.html>syslogd(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>ftpd</code> utility appeared in <span class=Ux>4.2BSD</span>. IPv6 support was added in WIDE Hydrangea IPv6 stack kit. </section><section class=Sh><h2 class=Sh id=BUGS><a class=permalink href=#BUGS>BUGS</a></h2> The server must run as the super-user to create sockets with privileged port numbers. It maintains an effective user id of the logged in user, reverting to the super-user only when binding addresses to sockets. The possible security holes have been extensively scrutinized, but are possibly incomplete. </section></div><table class=foot><tr><td class=foot-date>June 28, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>