<!DOCTYPE html>
<html><head><meta charset=utf-8><title>fdc(4)</title><keywords content=man,fdc></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>fdc(4)</h1><table class=head><tr><td class=head-ltitle>FDC(4)</td><td class=head-vol>FreeBSD Kernel Interfaces Manual</td><td class=head-rtitle>FDC(4)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>fdc</code> — <div class=Nd>PC architecture floppy disk controller driver</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=Cd>device fdc</code><p class=Pp>In <span class=Pa>/boot/device.hints</span>: <br><code class=Cd>hint.fdc.0.at="isa"</code><br><code class=Cd>hint.fdc.0.port="0x3F0"</code><br><code class=Cd>hint.fdc.0.irq="6"</code><br><code class=Cd>hint.fdc.0.drq="2"</code><br><code class=Cd>hint.fdc.0.flags="0x0"</code><br><code class=Cd>hint.fd.0.at="fdc0"</code><br><code class=Cd>hint.fd.0.drive="0"</code><br><code class=Cd>hint.fd.0.flags="0x0"</code><br><code class=Cd>hint.fd.1.at="fdc0"</code><br><code class=Cd>hint.fd.1.drive="1"</code><br><code class=Cd>hint.fd.1.flags="0x0"</code></p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2><section class=Ss><h2 class=Ss id=Device_Usage><a class=permalink href=#Device_Usage>Device Usage</a></h2> This driver provides access to floppy disk drives. Floppy disks using either FM (single-density) or MFM (double or high-density) recording can be handled. <p class=Pp>Floppy disk controllers can connect up to four drives each. The <code class=Nm>fdc</code> driver can currently handle up to two drives per controller (or four drives on ACPI). Upon driver initialization, an attempt is made to find out the type of the floppy controller in use. The known controller types are either the original NE765 or i8272 chips, or alternatively <i class=Em>enhanced</i> controllers that are compatible with the NE72065 or i82077 chips. These enhanced controllers (among other enhancements) implement a FIFO for floppy data transfers that will automatically be enabled once an enhanced chip has been detected. This FIFO activation can be disabled using the per-controller flags value of <var class=Ar>0x1</var>.</p><p class=Pp>By default, this driver creates a single device node <span class=Pa>/dev/fd</span><var class=Ar>N</var> for each attached drive with number <var class=Ar>N</var>. For historical reasons, device nodes that use a trailing UFS-style partition letter (ranging from ‘a’ through ‘h’) can also be accessed, which will be implemented as symbolic links to the main device node.</p><p class=Pp>Accessing the main device node will attempt to autodetect the density of the available medium for multi-density devices. Thus it is possible to use either a 720 KB medium or a 1440 KB medium in a high-density 3.5 inch standard floppy drive. Normally, this autodetection will only happen once at the first call to <a class=Xr href=open.2.html>open(2)</a> for the device after inserting the medium. This assumes the drive offers proper changeline support so media changes can be detected by the driver. To indicate a drive that does not have the changeline support, this can be overridden using the per-drive device flags value of <var class=Ar>0x10</var> (causing each call to <a class=Xr href=open.2.html>open(2)</a> to perform the autodetection).</p><p class=Pp>When trying to use a floppy device with special-density media, other device nodes can be created, of the form <span class=Pa>/dev/fd</span><var class=Ar>N</var>.<var class=Ar>MMMM</var>, where <var class=Ar>N</var> is the drive number, and <var class=Ar>MMMM</var> is a number between one and four digits describing the device density. Up to 15 additional subdevices per drive can be created that way. The administrator is free to decide on a policy how to assign these numbers. The two common policies are to either implement subdevices numbered 1 through 15, or to use a number that describes the medium density in kilobytes. Initially, each of those devices will be configured to the maximal density that is possible for the drive type (like 1200 KB for 5.25 inch HD drives or 1440 KB for 3.5 inch HD drives). The desired density to be used on that subdevice needs to be configured using <a class=Xr href=fdcontrol.8.html>fdcontrol(8)</a>.</p><p class=Pp>Drive types are configured using the lower four bits of the per-drive device flags. The following values can be specified:</p><div class=Bd-indent><dl class=Bl-tag><dt><var class=Ar>1</var></dt><dd>5.25 inch double-density device with 40 cylinders (360 KB native capacity)</dd><dt><var class=Ar>2</var></dt><dd>5.25 inch high-density device with 80 cylinders (1200 KB native capacity)</dd><dt><var class=Ar>3</var></dt><dd>3.5 inch double-density device with 80 cylinders (720 KB native capacity)</dd><dt><var class=Ar>4</var></dt><dd>3.5 inch high-density device with 80 cylinders (1440 KB native capacity)</dd><dt><var class=Ar>5</var></dt><dd>3.5 inch extra-density device with 80 cylinders (2880 KB native capacity, usage currently restricted to at most 1440 KB media)</dd><dt><var class=Ar>6</var></dt><dd>Same as type 5, available for compatibility with some BIOSes</dd></dl></div><p class=Pp>On IA32 architectures, the drive type can be specified as 0 for the drives. In that case, the CMOS configuration memory will be consulted to obtain the value for that drive. The ACPI probe automatically determines these values via the _FDE and _FDI methods, but this can be overridden by specifying a drive type hint.</p><p class=Pp>Normally, each configured drive will be probed at initialization time, using a short seek sequence. This is intended to find out about drives that have been configured but are actually missing or otherwise not responding. (The ACPI probe method does not perform this seek.) In some environments (like laptops with detachable drives), it might be desirable to bypass this drive probe, and pretend a drive to be there so the driver autoconfiguration will work even if the drive is currently not present. For that purpose, a per-drive device flags value of <var class=Ar>0x20</var> needs to be specified.</p></section><section class=Ss><h2 class=Ss id=Programming_Interface><a class=permalink href=#Programming_Interface>Programming Interface</a></h2> In addition to the normal read and write functionality, the <code class=Nm>fdc</code> driver offers a number of configurable options using <a class=Xr href=ioctl.2.html>ioctl(2)</a>. In order to access any of this functionality, programmers need to include the header file <code class=In>&lt;<a class=In href=../src/sys/fdcio.h.html>sys/fdcio.h</a>&gt;</code> into their programs. The call to <a class=Xr href=open.2.html>open(2)</a> can be performed in two possible ways. When opening the device without the <code class=Dv>O_NONBLOCK</code> flag set, the device is opened in a normal way, which would cause the main device nodes to perform automatic media density selection, and which will yield a file descriptor that is fully available for any I/O operation or any of the following <a class=Xr href=ioctl.2.html>ioctl(2)</a> commands. <p class=Pp>When opening the device with <code class=Dv>O_NONBLOCK</code> set, automatic media density selection will be bypassed, and the device remains in a half-opened state. No actual I/O operations are possible, but many of the <a class=Xr href=ioctl.2.html>ioctl(2)</a> commands described below can be performed. This mode is intended for access to the device without the requirement to have an accessible media present, like for status inquiries to the drive, or in order to format a medium. <code class=Dv>O_NONBLOCK</code> needs to be cleared before I/O operations are possible on the descriptor, which requires a prior specification of the density using the <code class=Dv>FD_STYPE</code> command (see below). Operations that are not allowed on the half-opened descriptor will cause an error value of <code class=Er>EAGAIN</code>.</p><p class=Pp>The following <a class=Xr href=ioctl.2.html>ioctl(2)</a> commands are currently available:</p><dl class=Bl-tag><dt><a class=permalink href=#FD_FORM><code class=Dv id=FD_FORM>FD_FORM</code></a></dt><dd>Used to format a floppy disk medium. Third argument is a pointer to a <var class=Vt>struct fd_formb</var> specifying which track to format, and which parameters to fill into the ID fields of the floppy disk medium.</dd><dt><a class=permalink href=#FD_GTYPE><code class=Dv id=FD_GTYPE>FD_GTYPE</code></a></dt><dd>Returns the current density definition record for the selected device. Third argument is a pointer to <var class=Vt>struct fd_type</var>.</dd><dt><a class=permalink href=#FD_STYPE><code class=Dv id=FD_STYPE>FD_STYPE</code></a></dt><dd>Adjusts the density definition of the selected device. Third argument is a pointer to <var class=Vt>struct fd_type</var>. For the fixed-density subdevices (1 through 15 per drive), this operation is restricted to a process with superuser privileges. For the auto-selecting subdevice 0, the operation is temporarily allowed to any process, but this setting will be lost again upon the next autoselection. This can be used when formatting a new medium (which will require to open the device using <code class=Dv>O_NONBLOCK</code>, and thus to later adjust the density using <code class=Dv>FD_STYPE</code>).</dd><dt><a class=permalink href=#FD_GOPTS><code class=Dv id=FD_GOPTS>FD_GOPTS</code></a></dt><dd>Obtain the current drive options. Third argument is a pointer to <var class=Vt>int</var>, containing a bitwise union of the following possible flag values: <dl class=Bl-tag><dt><a class=permalink href=#FDOPT_NORETRY><code class=Dv id=FDOPT_NORETRY>FDOPT_NORETRY</code></a></dt><dd>Do not automatically retry operations upon failure.</dd><dt><a class=permalink href=#FDOPT_NOERRLOG><code class=Dv id=FDOPT_NOERRLOG>FDOPT_NOERRLOG</code></a></dt><dd>Do not cause “hard error” kernel logs for failed I/O operations.</dd><dt><a class=permalink href=#FDOPT_NOERROR><code class=Dv id=FDOPT_NOERROR>FDOPT_NOERROR</code></a></dt><dd>Do not indicate I/O errors when returning from <a class=Xr href=read.2.html>read(2)</a> or <a class=Xr href=write.2.html>write(2)</a> system calls. The caller is assumed to use <code class=Dv>FD_GSTAT</code> calls in order to inquire about the success of each operation. This is intended to allow even erroneous data from bad blocks to be retrieved using normal I/O operations.</dd><dt><a class=permalink href=#FDOPT_AUTOSEL><code class=Dv id=FDOPT_AUTOSEL>FDOPT_AUTOSEL</code></a></dt><dd>Device performs automatic density selection. Unlike the above flags, this one is read-only.</dd></dl></dd><dt><a class=permalink href=#FD_SOPTS><code class=Dv id=FD_SOPTS>FD_SOPTS</code></a></dt><dd>Set device options, see above for their meaning. Third argument is a pointer to <var class=Vt>int</var>. Drive options will always be cleared when closing the descriptor.</dd><dt><a class=permalink href=#FD_CLRERR><code class=Dv id=FD_CLRERR>FD_CLRERR</code></a></dt><dd>Clear the internal low-level error counter. Normally, controller-level I/O errors are only logged up to <code class=Dv>FDC_ERRMAX</code> errors (currently defined to 100). This command resets the counter. Requires superuser privileges.</dd><dt><a class=permalink href=#FD_READID><code class=Dv id=FD_READID>FD_READID</code></a></dt><dd>Read one sector ID field from the floppy disk medium. Third argument is a pointer to <var class=Vt>struct fdc_readid</var>, where the read data will be returned. Can be used to analyze a floppy disk medium.</dd><dt><a class=permalink href=#FD_GSTAT><code class=Dv id=FD_GSTAT>FD_GSTAT</code></a></dt><dd>Return the recent floppy disk controller status, if available. Third argument is a pointer to <var class=Vt>struct fdc_status</var>, where the status registers (ST0, ST1, ST2, C, H, R, and N) are being returned. <code class=Er>EINVAL</code> will be caused if no recent status is available.</dd><dt><a class=permalink href=#FD_GDTYPE><code class=Dv id=FD_GDTYPE>FD_GDTYPE</code></a></dt><dd>Returns the floppy disk drive type. Third argument is a pointer to <var class=Vt>enum fd_drivetype</var>. This type is the same as being used in the per-drive configuration flags, or in the CMOS configuration data or ACPI namespace on IA32 systems.</dd></dl></section></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/fd*</span></dt><dd>floppy disk device nodes</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=fdread.1.html>fdread(1)</a>, <a class=Xr href=fdwrite.1.html>fdwrite(1)</a>, <a class=Xr href=ioctl.2.html>ioctl(2)</a>, <a class=Xr href=open.2.html>open(2)</a>, <a class=Xr href=read.2.html>read(2)</a>, <a class=Xr href=write.2.html>write(2)</a>, <a class=Xr href=fdcontrol.8.html>fdcontrol(8)</a>, <a class=Xr href=fdformat.8.html>fdformat(8)</a></section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This man page was initially written by <span class=An>Wilko Bulte</span>, and later vastly rewritten by <span class=An>Jörg Wunsch</span>. </section></div><table class=foot><tr><td class=foot-date>April 7, 2017</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>