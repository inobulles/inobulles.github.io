<!DOCTYPE html>
<html><head><meta charset=utf-8><title>ppp(8)</title><keywords content=man,ppp></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>ppp(8)</h1><table class=head><tr><td class=head-ltitle>PPP(8)</td><td class=head-vol>FreeBSD System Manager's Manual</td><td class=head-rtitle>PPP(8)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>ppp</code> — <div class=Nd>Point to Point Protocol (a.k.a. user-ppp)</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><table class=Nm><tr><td><code class=Nm>ppp</code></td><td>[<code class=Fl>-</code><var class=Va>mode</var>] [<code class=Fl>-nat</code>] [<code class=Fl>-quiet</code>] [<code class=Fl>-unit</code><var class=Ar>N</var>] [<var class=Ar>system ...</var>]</td></tr></table></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> This is a user process <i class=Em>PPP</i> software package. Sometimes, <i class=Em>PPP</i> is implemented as a part of the kernel (e.g., as managed by <code class=Nm>pppd</code>) and it is thus somewhat hard to debug and/or modify its behaviour. However, in this implementation <i class=Em>PPP</i> is done as a user process with the help of the tunnel device driver (tun). <p class=Pp>The <code class=Fl>-nat</code> flag does the equivalent of a “nat enable yes”, enabling <code class=Nm>ppp</code><span class=No>'s</span> network address translation features. This allows <code class=Nm>ppp</code> to act as a NAT or masquerading engine for all machines on an internal LAN. Refer to <a class=Xr href=libalias.3.html>libalias(3)</a> for details on the technical side of the NAT engine. Refer to the <a class=Sx href=#NETWORK_ADDRESS_TRANSLATION_(PACKET_ALIASING)>NETWORK ADDRESS TRANSLATION (PACKET ALIASING)</a> section of this manual page for details on how to configure NAT in <code class=Nm>ppp</code>.</p><p class=Pp>The <code class=Fl>-quiet</code> flag tells <code class=Nm>ppp</code> to be silent at startup rather than displaying the mode and interface to standard output.</p><p class=Pp>The <code class=Fl>-unit</code> flag tells <code class=Nm>ppp</code> to only attempt to open <span class=Pa>/dev/tun</span><var class=Ar>N</var>. Normally, <code class=Nm>ppp</code> will start with a value of 0 for <var class=Ar>N</var>, and keep trying to open a tunnel device by incrementing the value of <var class=Ar>N</var> by one each time until it succeeds. If it fails three times in a row because the device file is missing, it gives up.</p><p class=Pp>The following <var class=Va>mode</var><span class=No>s</span> are understood by <code class=Nm>ppp</code>:</p><div class=Bd-indent><dl class=Bl-tag><dt><a class=permalink href=#auto><code class=Fl id=auto>-auto</code></a></dt><dd><code class=Nm>ppp</code> opens the tun interface, configures it then goes into the background. The link is not brought up until outgoing data is detected on the tun interface at which point <code class=Nm>ppp</code> attempts to bring up the link. Packets received (including the first one) while <code class=Nm>ppp</code> is trying to bring the link up will remain queued for a default of 2 minutes. See the “set choked” command below. <p class=Pp>In <code class=Fl>-auto</code> mode, at least one “system” must be given on the command line (see below) and a “set ifaddr” must be done in the system profile that specifies a peer IP address to use when configuring the interface. Something like “10.0.0.1/0” is usually appropriate. See the “pmdemand” system in <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span> for an example.</p></dd><dt><a class=permalink href=#background><code class=Fl id=background>-background</code></a></dt><dd>Here, <code class=Nm>ppp</code> attempts to establish a connection with the peer immediately. If it succeeds, <code class=Nm>ppp</code> goes into the background and the parent process returns an exit code of 0. If it fails, <code class=Nm>ppp</code> exits with a non-zero result.</dd><dt><a class=permalink href=#foreground><code class=Fl id=foreground>-foreground</code></a></dt><dd>In foreground mode, <code class=Nm>ppp</code> attempts to establish a connection with the peer immediately, but never becomes a daemon. The link is created in background mode. This is useful if you wish to control <code class=Nm>ppp</code><span class=No>'s</span> invocation from another process.</dd><dt><a class=permalink href=#direct><code class=Fl id=direct>-direct</code></a></dt><dd>This is used for communicating over an already established connection, usually when receiving incoming connections accepted by <a class=Xr href=getty.8.html>getty(8)</a>. <code class=Nm>ppp</code> ignores the “set device” line and uses descriptor 0 as the link. <code class=Nm>ppp</code> will also ignore any configured chat scripts unless the “force-scripts” option has been enabled. <p class=Pp>If callback is configured, <code class=Nm>ppp</code> will use the “set device” information when dialing back.</p><p class=Pp>When run in <code class=Fl>-direct</code> mode, <code class=Nm>ppp</code> will behave slightly differently if descriptor 0 was created by <a class=Xr href=pipe.2.html>pipe(2)</a>. As pipes are not bi-directional, ppp will redirect all writes to descriptor 1 (standard output), leaving only reads acting on descriptor 0. No special action is taken if descriptor 0 was created by <a class=Xr href=socketpair.2.html>socketpair(2)</a>.</p></dd><dt><a class=permalink href=#dedicated><code class=Fl id=dedicated>-dedicated</code></a></dt><dd>This option is designed for machines connected with a dedicated wire. <code class=Nm>ppp</code> will always keep the device open and will ignore any configured chat scripts unless the “force-scripts” option has been enabled.</dd><dt><a class=permalink href=#ddial><code class=Fl id=ddial>-ddial</code></a></dt><dd>This mode is equivalent to <code class=Fl>-auto</code> mode except that <code class=Nm>ppp</code> will bring the link back up any time it is dropped for any reason.</dd><dt><a class=permalink href=#interactive><code class=Fl id=interactive>-interactive</code></a></dt><dd>This is a no-op, and gives the same behaviour as if none of the above modes have been specified. <code class=Nm>ppp</code> loads any sections specified on the command line then provides an interactive prompt.</dd></dl></div><p class=Pp>One or more configuration entries or systems (as specified in <span class=Pa>/etc/ppp/ppp.conf</span>) may also be specified on the command line. <code class=Nm>ppp</code> will read the “default” system from <span class=Pa>/etc/ppp/ppp.conf</span> at startup, followed by each of the systems specified on the command line.</p></section><section class=Sh><h2 class=Sh id=Major_Features><a class=permalink href=#Major_Features>Major Features</a></h2><dl class=Bl-diag><dt>Provides an interactive user interface.</dt><dd>Using its command mode, the user can easily enter commands to establish the connection with the remote end, check the status of connection and close the connection. All functions can also be optionally password protected for security.</dd><dt>Supports both manual and automatic dialing.</dt><dd>Interactive mode has a “term” command which enables you to talk to the device directly. When you are connected to the remote peer and it starts to talk <i class=Em>PPP</i>, <code class=Nm>ppp</code> detects it and switches to packet mode automatically. Once you have determined the proper sequence for connecting with the remote host, you can write a chat script to {define} the necessary dialing and login procedure for later convenience.</dd><dt>Supports on-demand dialup capability.</dt><dd>By using <code class=Fl>-auto</code> mode, <code class=Nm>ppp</code> will act as a daemon and wait for a packet to be sent over the <i class=Em>PPP</i> link. When this happens, the daemon automatically dials and establishes the connection. In almost the same manner <code class=Fl>-ddial</code> mode (direct-dial mode) also automatically dials and establishes the connection. However, it differs in that it will dial the remote site any time it detects the link is down, even if there are no packets to be sent. This mode is useful for full-time connections where we worry less about line charges and more about being connected full time. A third <code class=Fl>-dedicated</code> mode is also available. This mode is targeted at a dedicated link between two machines. <code class=Nm>ppp</code> will never voluntarily quit from dedicated mode - you must send it the “quit all” command via its diagnostic socket. A <code class=Dv>SIGHUP</code> will force an LCP renegotiation, and a <code class=Dv>SIGTERM</code> will force it to exit.</dd><dt>Supports client callback.</dt><dd><code class=Nm>ppp</code> can use either the standard LCP callback protocol or the Microsoft CallBack Control Protocol (https://winprotocoldoc.blob.core.windows.net/productionwindowsarchives/MS-CBCP/[MS-CBCP].pdf).</dd><dt>Supports NAT or packet aliasing.</dt><dd>Packet aliasing (a.k.a. IP masquerading) allows computers on a private, unregistered network to access the Internet. The <i class=Em>PPP</i> host acts as a masquerading gateway. IP addresses as well as TCP and UDP port numbers are NAT'd for outgoing packets and de-NAT'd for returning packets.</dd><dt>Supports background PPP connections.</dt><dd>In background mode, if <code class=Nm>ppp</code> successfully establishes the connection, it will become a daemon. Otherwise, it will exit with an error. This allows the setup of scripts that wish to execute certain commands only if the connection is successfully established.</dd><dt>Supports server-side PPP connections.</dt><dd>In direct mode, <code class=Nm>ppp</code> acts as server which accepts incoming <i class=Em>PPP</i> connections on stdin/stdout.</dd><dt>Supports PAP and CHAP (rfc 1994, 2433 and 2759) authentication.</dt><dd>With PAP or CHAP, it is possible to skip the Unix style <a class=Xr href=login.1.html>login(1)</a> procedure, and use the <i class=Em>PPP</i> protocol for authentication instead. If the peer requests Microsoft CHAP authentication and <code class=Nm>ppp</code> is compiled with DES support, an appropriate MD4/DES response will be made.</dd><dt>Supports RADIUS (rfc 2138 &amp; 2548) authentication.</dt><dd>An extension to PAP and CHAP, <i class=Em>R</i><span class=No>emote</span><i class=Em>A</i><span class=No>ccess</span><i class=Em>D</i><span class=No>ial</span><i class=Em>I</i><span class=No>n</span><i class=Em>U</i><span class=No>ser</span><i class=Em>S</i><span class=No>ervice</span> allows authentication information to be stored in a central or distributed database along with various per-user framed connection characteristics. If <a class=Xr href=libradius.3.html>libradius(3)</a> is available at compile time, <code class=Nm>ppp</code> will use it to make <i class=Em>RADIUS</i> requests when configured to do so.</dd><dt>Supports Proxy Arp.</dt><dd><code class=Nm>ppp</code> can be configured to make one or more proxy arp entries on behalf of the peer. This allows routing from the peer to the LAN without configuring each machine on that LAN.</dd><dt>Supports packet filtering.</dt><dd>User can {define} four kinds of filters: the <i class=Em>in</i> filter for incoming packets, the <i class=Em>out</i> filter for outgoing packets, the <i class=Em>dial</i> filter to {define} a dialing trigger packet and the <i class=Em>alive</i> filter for keeping a connection alive with the trigger packet.</dd><dt>Tunnel driver supports bpf.</dt><dd>The user can use <a class=Xr href=tcpdump.1.html>tcpdump(1)</a> to check the packet flow over the <i class=Em>PPP</i> link.</dd><dt>Supports PPP over TCP and PPP over UDP.</dt><dd>If a device name is specified as <i class=Em>host</i>:<i class=Em>port</i>[/tcp|udp], <code class=Nm>ppp</code> will open a TCP or UDP connection for transporting data rather than using a conventional serial device. UDP connections force <code class=Nm>ppp</code> into synchronous mode.</dd><dt>Supports PPP over Ethernet (rfc 2516).</dt><dd>If <code class=Nm>ppp</code> is given a device specification of the format <span class=No>PPPoE:</span><var class=Ar>iface</var>[:<var class=Ar>provider</var>]and if <a class=Xr href=netgraph.4.html>netgraph(4)</a> is available, <code class=Nm>ppp</code> will attempt talk <i class=Em>PPP</i> over Ethernet to <var class=Ar>provider</var> using the <var class=Ar>iface</var> network interface. <p class=Pp>On systems that do not support <a class=Xr href=netgraph.4.html>netgraph(4)</a>, an external program such as <a class=Xr href=pppoed.8.html>pppoed(8)</a> may be used.</p></dd><dt>Supports IETF draft Predictor-1 (rfc 1978) and DEFLATE (rfc 1979) compression.</dt><dd><code class=Nm>ppp</code> supports not only VJ-compression but also Predictor-1 and DEFLATE compression. Normally, a modem has built-in compression (e.g., v42.bis) and the system may receive higher data rates from it as a result of such compression. While this is generally a good thing in most other situations, this higher speed data imposes a penalty on the system by increasing the number of serial interrupts the system has to process in talking to the modem and also increases latency. Unlike VJ-compression, Predictor-1 and DEFLATE compression pre-compresses <i class=Em>all</i> network traffic flowing through the link, thus reducing overheads to a minimum.</dd><dt>Supports Microsoft's IPCP extensions (rfc 1877).</dt><dd>Name Server Addresses and NetBIOS Name Server Addresses can be negotiated with clients using the Microsoft <i class=Em>PPP</i> stack (i.e., Win95, WinNT)</dd><dt>Supports Multi-link PPP (rfc 1990)</dt><dd>It is possible to configure <code class=Nm>ppp</code> to open more than one physical connection to the peer, combining the bandwidth of all links for better throughput.</dd><dt>Supports MPPE (draft-ietf-pppext-mppe)</dt><dd>MPPE is Microsoft Point to Point Encryption scheme. It is possible to configure <code class=Nm>ppp</code> to participate in Microsoft's Windows VPN. For now, <code class=Nm>ppp</code> can only get encryption keys from CHAP 81 authentication. <code class=Nm>ppp</code> must be compiled with DES for MPPE to operate.</dd><dt>Supports IPV6CP (rfc 2023).</dt><dd>An IPv6 connection can be made in addition to or instead of the normal IPv4 connection.</dd></dl></section><section class=Sh><h2 class=Sh id=PERMISSIONS><a class=permalink href=#PERMISSIONS>PERMISSIONS</a></h2><code class=Nm>ppp</code> is installed as user <code class=Dv>root</code> and group <code class=Dv>network</code>, with permissions <code class=Dv>04554</code>. By default, <code class=Nm>ppp</code> will not run if the invoking user id is not zero. This may be overridden by using the “allow users” command in <span class=Pa>/etc/ppp/ppp.conf</span>. When running as a normal user, <code class=Nm>ppp</code> switches to user id 0 in order to alter the system routing table, set up system lock files and read the ppp configuration files. All external commands (executed via the "shell" or "!bg" commands) are executed as the user id that invoked <code class=Nm>ppp</code>. Refer to the ‘ID0’ logging facility if you are interested in what exactly is done as user id zero. </section><section class=Sh><h2 class=Sh id=GETTING_STARTED><a class=permalink href=#GETTING_STARTED>GETTING STARTED</a></h2> When you first run <code class=Nm>ppp</code> you may need to deal with some initial configuration details. <ul class=Bl-bullet><li>Make sure that your system has a group named “network” in the <span class=Pa>/etc/group</span> file and that the group contains the names of all users expected to use <code class=Nm>ppp</code>. Refer to the <a class=Xr href=group.5.html>group(5)</a> manual page for details. Each of these users must also be given access using the “allow users” command in <span class=Pa>/etc/ppp/ppp.conf</span>.</li><li>Create a log file. <code class=Nm>ppp</code> uses <a class=Xr href=syslog.3.html>syslog(3)</a> to log information. A common log file name is <span class=Pa>/var/log/ppp.log</span>. To make output go to this file, put the following lines in the <span class=Pa>/etc/syslog.conf</span> file: <div class="Bd Pp Bd-indent"><pre>
!ppp
*.*&lt;TAB&gt;/var/log/ppp.log
    </pre></div><p class=Pp>It is possible to have more than one <i class=Em>PPP</i> log file by creating a link to the <code class=Nm>ppp</code> executable:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li># cd /usr/sbin</code></div><div class="Bd Bd-indent"><code class=Li># ln ppp ppp0</code></div><p class=Pp>and using</p><div class="Bd Pp Bd-indent"><pre>
!ppp0
*.*&lt;TAB&gt;/var/log/ppp0.log
    </pre></div><p class=Pp>in <span class=Pa>/etc/syslog.conf</span>. Do not forget to send a <code class=Dv>HUP</code> signal to <a class=Xr href=syslogd.8.html>syslogd(8)</a> after altering <span class=Pa>/etc/syslog.conf</span>.</p></li><li>Although not strictly relevant to <code class=Nm>ppp</code><span class=No>'s</span> operation, you should configure your resolver so that it works correctly. This can be done by configuring a local DNS resolver or by adding the correct ‘nameserver’ lines to the file <span class=Pa>/etc/resolv.conf</span>. Refer to the <a class=Xr href=resolv.conf.5.html>resolv.conf(5)</a> manual page for details. <p class=Pp>Alternatively, if the peer supports it, <code class=Nm>ppp</code> can be configured to ask the peer for the nameserver address(es) and to update <span class=Pa>/etc/resolv.conf</span> automatically. Refer to the “enable dns” and “resolv” commands below for details.</p></li></ul></section><section class=Sh><h2 class=Sh id=MANUAL_DIALING><a class=permalink href=#MANUAL_DIALING>MANUAL DIALING</a></h2> In the following examples, we assume that your machine name is <code class=Dv>awfulhak</code>. when you invoke <code class=Nm>ppp</code> (see <a class=Sx href=#PERMISSIONS>PERMISSIONS</a> above) with no arguments, you are presented with a prompt: <div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt;
</pre></div><p class=Pp>The ‘ON’ part of your prompt should always be in upper case. If it is in lower case, it means that you must supply a password using the “passwd” command. This only ever happens if you connect to a running version of <code class=Nm>ppp</code> and have not authenticated yourself using the correct password.</p><p class=Pp>You can start by specifying the device name and speed:</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; set device /dev/cuau0
ppp ON awfulhak&gt; set speed 38400
</pre></div><p class=Pp>Normally, hardware flow control (CTS/RTS) is used. However, under certain circumstances (as may happen when you are connected directly to certain PPP-capable terminal servers), this may result in <code class=Nm>ppp</code> hanging as soon as it tries to write data to your communications link as it is waiting for the CTS (clear to send) signal - which will never come. Thus, if you have a direct line and cannot seem to make a connection, try turning CTS/RTS off with “set ctsrts off”. If you need to do this, check the “set accmap” description below too - you will probably need to “set accmap 000a0000”.</p><p class=Pp>Usually, parity is set to “none”, and this is <code class=Nm>ppp</code><span class=No>'s</span> default. Parity is a rather archaic error checking mechanism that is no longer used because modern modems do their own error checking, and most link-layer protocols (that is what <code class=Nm>ppp</code> is) use much more reliable checking mechanisms. Parity has a relatively huge overhead (a 12.5% increase in traffic) and as a result, it is always disabled (set to “none”) when <code class=Dv>PPP</code> is opened. However, some ISPs (Internet Service Providers) may use specific parity settings at connection time (before <code class=Dv>PPP</code> is opened). Notably, Compuserve insist on even parity when logging in:</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; set parity even
</pre></div><p class=Pp>You can now see what your current device settings look like:</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; show physical
Name: deflink
 State:           closed
 Device:          N/A
 Link Type:       interactive
 Connect Count:   0
 Queued Packets:  0
 Phone Number:    N/A

Defaults:
 Device List:     /dev/cuau0
 Characteristics: 38400bps, cs8, even parity, CTS/RTS on

Connect time: 0 secs
0 octets in, 0 octets out
Overall 0 bytes/sec
ppp ON awfulhak&gt;
</pre></div><p class=Pp>The term command can now be used to talk directly to the device:</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; term
at
OK
atdt123456
CONNECT
login: myispusername
Password: myisppassword
Protocol: ppp
</pre></div><p class=Pp>When the peer starts to talk in <i class=Em>PPP</i>, <code class=Nm>ppp</code> detects this automatically and returns to command mode.</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt;               # No link has been established
Ppp ON awfulhak&gt;               # We've connected &amp; finished LCP
PPp ON awfulhak&gt;               # We've authenticated
PPP ON awfulhak&gt;               # We've agreed IP numbers
</pre></div><p class=Pp>If it does not, it is probable that the peer is waiting for your end to start negotiating. To force <code class=Nm>ppp</code> to start sending <i class=Em>PPP</i> configuration packets to the peer, use the “~p” command to drop out of terminal mode and enter packet mode.</p><p class=Pp>If you never even receive a login prompt, it is quite likely that the peer wants to use PAP or CHAP authentication instead of using Unix-style login/password authentication. To set things up properly, drop back to the prompt and set your authentication name and key, then reconnect:</p><div class="Bd Pp Bd-indent"><pre>
~.
ppp ON awfulhak&gt; set authname myispusername
ppp ON awfulhak&gt; set authkey myisppassword
ppp ON awfulhak&gt; term
at
OK
atdt123456
CONNECT
</pre></div><p class=Pp>You may need to tell ppp to initiate negotiations with the peer here too:</p><div class="Bd Pp Bd-indent"><pre>
~p
ppp ON awfulhak&gt;               # No link has been established
Ppp ON awfulhak&gt;               # We've connected &amp; finished LCP
PPp ON awfulhak&gt;               # We've authenticated
PPP ON awfulhak&gt;               # We've agreed IP numbers
</pre></div><p class=Pp>You are now connected! Note that ‘PPP’ in the prompt has changed to capital letters to indicate that you have a peer connection. If only some of the three Ps go uppercase, wait until either everything is uppercase or lowercase. If they revert to lowercase, it means that <code class=Nm>ppp</code> could not successfully negotiate with the peer. A good first step for troubleshooting at this point would be to</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; set log local phase lcp ipcp
</pre></div><p class=Pp>and try again. Refer to the “set log” command description below for further details. If things fail at this point, it is quite important that you turn logging on and try again. It is also important that you note any prompt changes and report them to anyone trying to help you.</p><p class=Pp>When the link is established, the show command can be used to see how things are going:</p><div class="Bd Pp Bd-indent"><pre>
PPP ON awfulhak&gt; show physical
* Modem related information is shown here *
PPP ON awfulhak&gt; show ccp
* CCP (compression) related information is shown here *
PPP ON awfulhak&gt; show lcp
* LCP (line control) related information is shown here *
PPP ON awfulhak&gt; show ipcp
* IPCP (IP) related information is shown here *
PPP ON awfulhak&gt; show ipv6cp
* IPV6CP (IPv6) related information is shown here *
PPP ON awfulhak&gt; show link
* Link (high level) related information is shown here *
PPP ON awfulhak&gt; show bundle
* Logical (high level) connection related information is shown here *
</pre></div><p class=Pp>At this point, your machine has a host route to the peer. This means that you can only make a connection with the host on the other side of the link. If you want to add a default route entry (telling your machine to send all packets without another routing entry to the other side of the <i class=Em>PPP</i> link), enter the following command:</p><div class="Bd Pp Bd-indent"><pre>
PPP ON awfulhak&gt; add default HISADDR
</pre></div><p class=Pp>The string ‘HISADDR’ represents the IP address of the connected peer. If the “add” command fails due to an existing route, you can overwrite the existing route using:</p><div class="Bd Pp Bd-indent"><pre>
PPP ON awfulhak&gt; add! default HISADDR
</pre></div><p class=Pp>This command can also be executed before actually making the connection. If a new IP address is negotiated at connection time, <code class=Nm>ppp</code> will update your default route accordingly.</p><p class=Pp>You can now use your network applications (ping, telnet, ftp, etc.) in other windows or terminals on your machine. If you wish to reuse the current terminal, you can put <code class=Nm>ppp</code> into the background using your standard shell suspend and background commands (usually “^Z” followed by “bg”).</p><p class=Pp>Refer to the <a class=Sx href=#PPP_COMMAND_LIST>PPP COMMAND LIST</a> section for details on all available commands.</p></section><section class=Sh><h2 class=Sh id=AUTOMATIC_DIALING><a class=permalink href=#AUTOMATIC_DIALING>AUTOMATIC DIALING</a></h2> To use automatic dialing, you must prepare some Dial and Login chat scripts. See the example definitions in <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span> (the format of <span class=Pa>/etc/ppp/ppp.conf</span> is pretty simple). Each line contains one comment, inclusion, label or command: <ul class=Bl-bullet><li>A line starting with a (“#”) character is treated as a comment line. Leading whitespace are ignored when identifying comment lines.</li><li>An inclusion is a line beginning with the word ‘{!include}’. It must have one argument - the file to {include}. You may wish to “{!include} ~/.ppp.conf” for compatibility with older versions of <code class=Nm>ppp</code>.</li><li>A label name starts in the first column and is followed by a colon (“:”).</li><li>A command line must contain a space or tab in the first column.</li><li>A string starting with the “$” character is substituted with the value of the environment variable by the same name. Likewise, a string starting with the “~” character is substituted with the full path to the home directory of the user account by the same name, and the “~” character by itself is substituted with the full path to the home directory of the current user. If you want to include a literal “$” or “~” character in a command or argument, enclose them in double quotes, e.g., <div class="Bd Pp Bd-indent"><pre>
set password "pa$ss~word"
    </pre></div></li></ul><p class=Pp>The <span class=Pa>/etc/ppp/ppp.conf</span> file should consist of at least a “default” section. This section is always executed. It should also contain one or more sections, named according to their purpose, for example, “MyISP” would represent your ISP, and “ppp-in” would represent an incoming <code class=Nm>ppp</code> configuration. You can now specify the destination label name when you invoke <code class=Nm>ppp</code>. Commands associated with the “default” label are executed, followed by those associated with the destination label provided. When <code class=Nm>ppp</code> is started with no arguments, the “default” section is still executed. The load command can be used to manually load a section from the <span class=Pa>/etc/ppp/ppp.conf</span> file:</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; load MyISP
</pre></div><p class=Pp>Note, no action is taken by <code class=Nm>ppp</code> after a section is loaded, whether it is the result of passing a label on the command line or using the “load” command. Only the commands specified for that label in the configuration file are executed. However, when invoking <code class=Nm>ppp</code> with the <code class=Fl>-background</code>, <code class=Fl>-ddial</code>, or <code class=Fl>-dedicated</code> switches, the link mode tells <code class=Nm>ppp</code> to establish a connection. Refer to the “set mode” command below for further details.</p><p class=Pp>Once the connection is made, the ‘ppp’ portion of the prompt will change to ‘PPP’:</p><div class="Bd Pp Bd-indent"><pre>
# ppp MyISP
...
ppp ON awfulhak&gt; dial
Ppp ON awfulhak&gt;
PPp ON awfulhak&gt;
PPP ON awfulhak&gt;
</pre></div><p class=Pp>The Ppp prompt indicates that <code class=Nm>ppp</code> has entered the authentication phase. The PPp prompt indicates that <code class=Nm>ppp</code> has entered the network phase. The PPP prompt indicates that <code class=Nm>ppp</code> has successfully negotiated a network layer protocol and is in a usable state.</p><p class=Pp>If the <span class=Pa>/etc/ppp/ppp.linkup</span> file is available, its contents are executed when the <i class=Em>PPP</i> connection is established. See the provided “pmdemand” example in <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span> which runs a script in the background after the connection is established (refer to the “shell” and “bg” commands below for a description of possible substitution strings). Similarly, when a connection is closed, the contents of the <span class=Pa>/etc/ppp/ppp.linkdown</span> file are executed. Both of these files have the same format as <span class=Pa>/etc/ppp/ppp.conf</span>.</p><p class=Pp>In previous versions of <code class=Nm>ppp</code>, it was necessary to re-add routes such as the default route in the <span class=Pa>ppp.linkup</span> file. <code class=Nm>ppp</code> supports ‘sticky routes’, where all routes that contain the <code class=Dv>HISADDR</code>, <code class=Dv>MYADDR</code>, <code class=Dv>HISADDR6</code> or <code class=Dv>MYADDR6</code> literals will automatically be updated when the values of these variables change.</p></section><section class=Sh><h2 class=Sh id=BACKGROUND_DIALING><a class=permalink href=#BACKGROUND_DIALING>BACKGROUND DIALING</a></h2> If you want to establish a connection using <code class=Nm>ppp</code> non-interactively (such as from a <a class=Xr href=crontab.5.html>crontab(5)</a> entry or an <a class=Xr href=at.1.html>at(1)</a> job) you should use the <code class=Fl>-background</code> option. When <code class=Fl>-background</code> is specified, <code class=Nm>ppp</code> attempts to establish the connection immediately. If multiple phone numbers are specified, each phone number will be tried once. If the attempt fails, <code class=Nm>ppp</code> exits immediately with a non-zero exit code. If it succeeds, then <code class=Nm>ppp</code> becomes a daemon, and returns an exit status of zero to its caller. The daemon exits automatically if the connection is dropped by the remote system, or it receives a <code class=Dv>TERM</code> signal. </section><section class=Sh><h2 class=Sh id=DIAL_ON_DEMAND><a class=permalink href=#DIAL_ON_DEMAND>DIAL ON DEMAND</a></h2> Demand dialing is enabled with the <code class=Fl>-auto</code> or <code class=Fl>-ddial</code> options. You must also specify the destination label in <span class=Pa>/etc/ppp/ppp.conf</span> to use. It must contain the “set ifaddr” command to {define} the remote peers IP address. (refer to <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span>) <div class="Bd Pp Bd-indent"><pre>
# ppp -auto pmdemand
</pre></div><p class=Pp>When <code class=Fl>-auto</code> or <code class=Fl>-ddial</code> is specified, <code class=Nm>ppp</code> runs as a daemon but you can still configure or examine its configuration by using the “set server” command in <span class=Pa>/etc/ppp/ppp.conf</span>, (for example, “<code class=Li>set server +3000 mypasswd</code>”) and connecting to the diagnostic port as follows:</p><div class="Bd Pp Bd-indent"><pre>
# pppctl 3000	(assuming tun0)
Password:
PPP ON awfulhak&gt; show who
tcp (127.0.0.1:1028) *
</pre></div><p class=Pp>The “show who” command lists users that are currently connected to <code class=Nm>ppp</code> itself. If the diagnostic socket is closed or changed to a different socket, all connections are immediately dropped.</p><p class=Pp>In <code class=Fl>-auto</code> mode, when an outgoing packet is detected, <code class=Nm>ppp</code> will perform the dialing action (chat script) and try to connect with the peer. In <code class=Fl>-ddial</code> mode, the dialing action is performed any time the line is found to be down. If the connect fails, the default behaviour is to wait 30 seconds and then attempt to connect when another outgoing packet is detected. This behaviour can be changed using the “set redial” command:</p><p class=Pp><span class=No>set redial</span><var class=Ar>secs</var>[+<var class=Ar>inc</var>[-<var class=Ar>max</var>]][.<var class=Ar>next</var>] [<var class=Ar>attempts</var>]</p><p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><var class=Ar>secs</var></dt><dd>is the number of seconds to wait before attempting to connect again. If the argument is the literal string ‘<code class=Li>random</code>’, the delay period is a random value between 1 and 30 seconds inclusive.</dd><dt><var class=Ar>inc</var></dt><dd>is the number of seconds that <var class=Ar>secs</var> should be incremented each time a new dial attempt is made. The timeout reverts to <var class=Ar>secs</var> only after a successful connection is established. The default value for <var class=Ar>inc</var> is zero.</dd><dt><var class=Ar>max</var></dt><dd>is the maximum number of times <code class=Nm>ppp</code> should increment <var class=Ar>secs</var>. The default value for <var class=Ar>max</var> is 10.</dd><dt><var class=Ar>next</var></dt><dd>is the number of seconds to wait before attempting to dial the next number in a list of numbers (see the “set phone” command). The default is 3 seconds. Again, if the argument is the literal string ‘<code class=Li>random</code>’, the delay period is a random value between 1 and 30 seconds.</dd><dt><var class=Ar>attempts</var></dt><dd>is the maximum number of times to try to connect for each outgoing packet that triggers a dial. The previous value is unchanged if this parameter is omitted. If a value of zero is specified for <var class=Ar>attempts</var>, <code class=Nm>ppp</code> will keep trying until a connection is made.</dd></dl><p class=Pp>So, for example:</p><div class="Bd Pp Bd-indent"><pre>
set redial 10.3 4
</pre></div><p class=Pp>will attempt to connect 4 times for each outgoing packet that causes a dial attempt with a 3 second delay between each number and a 10 second delay after all numbers have been tried. If multiple phone numbers are specified, the total number of attempts is still 4 (it does not attempt each number 4 times).</p><p class=Pp>Alternatively,</p><div class="Bd Pp Bd-indent"><pre>
set redial 10+10-5.3 20
</pre></div><p class=Pp>tells <code class=Nm>ppp</code> to attempt to connect 20 times. After the first attempt, <code class=Nm>ppp</code> pauses for 10 seconds. After the next attempt it pauses for 20 seconds and so on until after the sixth attempt it pauses for 1 minute. The next 14 pauses will also have a duration of one minute. If <code class=Nm>ppp</code> connects, disconnects and fails to connect again, the timeout starts again at 10 seconds.</p><p class=Pp>Modifying the dial delay is very useful when running <code class=Nm>ppp</code> in <code class=Fl>-auto</code> mode on both ends of the link. If each end has the same timeout, both ends wind up calling each other at the same time if the link drops and both ends have packets queued. At some locations, the serial link may not be reliable, and carrier may be lost at inappropriate times. It is possible to have <code class=Nm>ppp</code> redial should carrier be unexpectedly lost during a session.</p><div class="Bd Pp Bd-indent"><pre>
set reconnect timeout ntries
</pre></div><p class=Pp>This command tells <code class=Nm>ppp</code> to re-establish the connection <var class=Ar>ntries</var> times on loss of carrier with a pause of <var class=Ar>timeout</var> seconds before each try. For example,</p><div class="Bd Pp Bd-indent"><pre>
set reconnect 3 5
</pre></div><p class=Pp>tells <code class=Nm>ppp</code> that on an unexpected loss of carrier, it should wait <var class=Ar>3</var> seconds before attempting to reconnect. This may happen up to <var class=Ar>5</var> times before <code class=Nm>ppp</code> gives up. The default value of ntries is zero (no reconnect). Care should be taken with this option. If the local timeout is slightly longer than the remote timeout, the reconnect feature will always be triggered (up to the given number of times) after the remote side times out and hangs up. NOTE: In this context, losing too many LQRs constitutes a loss of carrier and will trigger a reconnect. If the <code class=Fl>-background</code> flag is specified, all phone numbers are dialed at most once until a connection is made. The next number redial period specified with the “set redial” command is honoured, as is the reconnect tries value. If your redial value is less than the number of phone numbers specified, not all the specified numbers will be tried. To terminate the program, type</p><div class="Bd Pp Bd-indent"><pre>
PPP ON awfulhak&gt; close
ppp ON awfulhak&gt; quit all
</pre></div><p class=Pp>A simple “quit” command will terminate the <a class=Xr href=pppctl.8.html>pppctl(8)</a> or <a class=Xr href=telnet.1.html>telnet(1)</a> connection but not the <code class=Nm>ppp</code> program itself. You must use “quit all” to terminate <code class=Nm>ppp</code> as well.</p></section><section class=Sh><h2 class=Sh id=RECEIVING_INCOMING_PPP_CONNECTIONS_(Method_1)><a class=permalink href=#RECEIVING_INCOMING_PPP_CONNECTIONS_(Method_1)>RECEIVING INCOMING PPP CONNECTIONS (Method 1)</a></h2> To handle an incoming <i class=Em>PPP</i> connection request, follow these steps: <ol class=Bl-enum><li>Make sure the modem and (optionally) <span class=Pa>/etc/rc.serial</span> is configured correctly. <ul class="Bl-bullet Bl-compact"><li>Use Hardware Handshake (CTS/RTS) for flow control.</li><li>Modem should be set to NO echo back (ATE0) and NO results string (ATQ1).</li></ul></li><li>Edit <span class=Pa>/etc/ttys</span> to enable a <a class=Xr href=getty.8.html>getty(8)</a> on the port where the modem is attached. For example: <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ttyd1 “/usr/libexec/getty std.38400” dialup on secure</code></div><p class=Pp>Do not forget to send a <code class=Dv>HUP</code> signal to the <a class=Xr href=init.8.html>init(8)</a> process to start the <a class=Xr href=getty.8.html>getty(8)</a>:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li># kill -HUP 1</code></div><p class=Pp>It is usually also necessary to train your modem to the same DTR speed as the getty:</p><div class="Bd Pp Bd-indent"><pre>
# ppp
ppp ON awfulhak&gt; set device /dev/cuau1
ppp ON awfulhak&gt; set speed 38400
ppp ON awfulhak&gt; term
deflink: Entering terminal mode on /dev/cuau1
Type `~?' for help
at
OK
at
OK
atz
OK
at
OK
~.
ppp ON awfulhak&gt; quit
    </pre></div></li><li>Create a <span class=Pa>/usr/local/bin/ppplogin</span> file with the following contents: <div class="Bd Pp Bd-indent"><pre>
#! /bin/sh
exec /usr/sbin/ppp -direct incoming
    </pre></div><p class=Pp>Direct mode (<code class=Fl>-direct</code>) lets <code class=Nm>ppp</code> work with stdin and stdout. You can also use <a class=Xr href=pppctl.8.html>pppctl(8)</a> to connect to a configured diagnostic port, in the same manner as with client-side <code class=Nm>ppp</code>.</p><p class=Pp>Here, the <var class=Ar>incoming</var> section must be set up in <span class=Pa>/etc/ppp/ppp.conf</span>.</p><p class=Pp>Make sure that the <var class=Ar>incoming</var> section contains the “allow users” command as appropriate.</p></li><li>Prepare an account for the incoming user. <div class="Bd Pp"><pre>
ppp:xxxx:66:66:PPP Login User:/home/ppp:/usr/local/bin/ppplogin
    </pre></div><p class=Pp>Refer to the manual entries for <a class=Xr href=adduser.8.html>adduser(8)</a> and <a class=Xr href=vipw.8.html>vipw(8)</a> for details.</p></li><li>Support for IPCP Domain Name Server and NetBIOS Name Server negotiation can be enabled using the “accept dns” and “set nbns” commands. Refer to their descriptions below.</li></ol></section><section class=Sh><h2 class=Sh id=RECEIVING_INCOMING_PPP_CONNECTIONS_(Method_2)><a class=permalink href=#RECEIVING_INCOMING_PPP_CONNECTIONS_(Method_2)>RECEIVING INCOMING PPP CONNECTIONS (Method 2)</a></h2> This method differs in that we use <code class=Nm>ppp</code> to authenticate the connection rather than <a class=Xr href=login.1.html>login(1)</a>: <ol class=Bl-enum><li>Configure your default section in <span class=Pa>/etc/gettytab</span> with automatic ppp recognition by specifying the “pp” capability: <div class="Bd Pp"><pre>
default:\
	:pp=/usr/local/bin/ppplogin:\
	.....
    </pre></div></li><li>Configure your serial device(s), enable a <a class=Xr href=getty.8.html>getty(8)</a> and create <span class=Pa>/usr/local/bin/ppplogin</span> as in the first three steps for method 1 above.</li><li>Add either “enable chap” or “enable pap” (or both) to <span class=Pa>/etc/ppp/ppp.conf</span> under the ‘incoming’ label (or whatever label <span class=Pa>ppplogin</span> uses).</li><li>Create an entry in <span class=Pa>/etc/ppp/ppp.secret</span> for each incoming user: <div class="Bd Pp"><pre>
Pfred&lt;TAB&gt;xxxx
Pgeorge&lt;TAB&gt;yyyy
    </pre></div></li></ol><p class=Pp>Now, as soon as <a class=Xr href=getty.8.html>getty(8)</a> detects a ppp connection (by recognising the HDLC frame headers), it runs “/usr/local/bin/ppplogin”.</p><p class=Pp>It is <i class=Em>VITAL</i> that either PAP or CHAP are enabled as above. If they are not, you are allowing anybody to establish a ppp session with your machine <i class=Em>without</i> a password, opening yourself up to all sorts of potential attacks.</p></section><section class=Sh><h2 class=Sh id=AUTHENTICATING_INCOMING_CONNECTIONS><a class=permalink href=#AUTHENTICATING_INCOMING_CONNECTIONS>AUTHENTICATING INCOMING CONNECTIONS</a></h2> Normally, the receiver of a connection requires that the peer authenticates itself. This may be done using <a class=Xr href=login.1.html>login(1)</a>, but alternatively, you can use PAP or CHAP. CHAP is the more secure of the two, but some clients may not support it. Once you decide which you wish to use, add the command ‘enable chap’ or ‘enable pap’ to the relevant section of <span class=Pa>ppp.conf</span>. <p class=Pp>You must then configure the <span class=Pa>/etc/ppp/ppp.secret</span> file. This file contains one line per possible client, each line containing up to five fields:</p><p class=Pp><var class=Ar>name</var><var class=Ar>key</var> [<var class=Ar>hisaddr</var> [<var class=Ar>label</var> [<var class=Ar>callback-number</var>]]]</p><p class=Pp>The <var class=Ar>name</var> and <var class=Ar>key</var> specify the client username and password. If <var class=Ar>key</var> is “*” and PAP is being used, <code class=Nm>ppp</code> will look up the password database (<a class=Xr href=passwd.5.html>passwd(5)</a>) when authenticating. If the client does not offer a suitable response based on any <var class=Ar>name</var><span class=No>/</span><var class=Ar>key</var> combination in <span class=Pa>ppp.secret</span>, authentication fails.</p><p class=Pp>If authentication is successful, <var class=Ar>hisaddr</var> (if specified) is used when negotiating IP numbers. See the “set ifaddr” command for details.</p><p class=Pp>If authentication is successful and <var class=Ar>label</var> is specified, the current system label is changed to match the given <var class=Ar>label</var>. This will change the subsequent parsing of the <span class=Pa>ppp.linkup</span> and <span class=Pa>ppp.linkdown</span> files.</p><p class=Pp>If authentication is successful and <var class=Ar>callback-number</var> is specified and “set callback” has been used in <span class=Pa>ppp.conf</span>, the client will be called back on the given number. If CBCP is being used, <var class=Ar>callback-number</var> may also contain a list of numbers or a “*”, as if passed to the “set cbcp” command. The value will be used in <code class=Nm>ppp</code><span class=No>'s</span> subsequent CBCP phase.</p></section><section class=Sh><h2 class=Sh id=PPP_OVER_TCP_and_UDP_(a.k.a_Tunnelling)><a class=permalink href=#PPP_OVER_TCP_and_UDP_(a.k.a_Tunnelling)>PPP OVER TCP and UDP (a.k.a Tunnelling)</a></h2> Instead of running <code class=Nm>ppp</code> over a serial link, it is possible to use a TCP connection instead by specifying the host, port and protocol as the device: <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>set device ui-gate:6669/tcp</code></div><p class=Pp>Instead of opening a serial device, <code class=Nm>ppp</code> will open a TCP connection to the given machine on the given socket. It should be noted however that <code class=Nm>ppp</code> does not use the telnet protocol and will be unable to negotiate with a telnet server. You should set up a port for receiving this <i class=Em>PPP</i> connection on the receiving machine (ui-gate). This is done by first updating <span class=Pa>/etc/services</span> to name the service:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ppp-in 6669/tcp # Incoming PPP connections over TCP</code></div><p class=Pp>and updating <span class=Pa>/etc/inetd.conf</span> to tell <a class=Xr href=inetd.8.html>inetd(8)</a> how to deal with incoming connections on that port:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>ppp-in stream tcp nowait root /usr/sbin/ppp ppp -direct ppp-in</code></div><p class=Pp>Do not forget to send a <code class=Dv>HUP</code> signal to <a class=Xr href=inetd.8.html>inetd(8)</a> after you have updated <span class=Pa>/etc/inetd.conf</span>. Here, we use a label named “ppp-in”. The entry in <span class=Pa>/etc/ppp/ppp.conf</span> on ui-gate (the receiver) should contain the following:</p><div class="Bd Pp Bd-indent"><pre>
ppp-in:
 set timeout 0
 set ifaddr 10.0.4.1 10.0.4.2
</pre></div><p class=Pp>and the entry in <span class=Pa>/etc/ppp/ppp.linkup</span> should contain:</p><div class="Bd Pp Bd-indent"><pre>
ppp-in:
 add 10.0.1.0/24 HISADDR
</pre></div><p class=Pp>It is necessary to put the “add” command in <span class=Pa>ppp.linkup</span> to ensure that the route is only added after <code class=Nm>ppp</code> has negotiated and assigned addresses to its interface.</p><p class=Pp>You may also want to enable PAP or CHAP for security. To enable PAP, add the following line:</p><div class="Bd Pp Bd-indent"><pre>
 enable PAP
</pre></div><p class=Pp>You will also need to create the following entry in <span class=Pa>/etc/ppp/ppp.secret</span>:</p><div class="Bd Pp Bd-indent"><pre>
MyAuthName MyAuthPasswd
</pre></div><p class=Pp>If <var class=Ar>MyAuthPasswd</var> is a “*”, the password is looked up in the <a class=Xr href=passwd.5.html>passwd(5)</a> database.</p><p class=Pp>The entry in <span class=Pa>/etc/ppp/ppp.conf</span> on awfulhak (the initiator) should contain the following:</p><div class="Bd Pp Bd-indent"><pre>
ui-gate:
 set escape 0xff
 set device ui-gate:ppp-in/tcp
 set dial
 set timeout 30
 set log Phase Chat Connect hdlc LCP IPCP IPV6CP CCP tun
 set ifaddr 10.0.4.2 10.0.4.1
</pre></div><p class=Pp>with the route setup in <span class=Pa>/etc/ppp/ppp.linkup</span>:</p><div class="Bd Pp Bd-indent"><pre>
ui-gate:
 add 10.0.2.0/24 HISADDR
</pre></div><p class=Pp>Again, if you are enabling PAP, you will also need this in the <span class=Pa>/etc/ppp/ppp.conf</span> profile:</p><div class="Bd Pp Bd-indent"><pre>
 set authname MyAuthName
 set authkey MyAuthKey
</pre></div><p class=Pp>We are assigning the address of 10.0.4.1 to ui-gate, and the address 10.0.4.2 to awfulhak. To open the connection, just type</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>awfulhak # ppp -background ui-gate</code></div><p class=Pp>The result will be an additional "route" on awfulhak to the 10.0.2.0/24 network via the TCP connection, and an additional "route" on ui-gate to the 10.0.1.0/24 network. The networks are effectively bridged - the underlying TCP connection may be across a public network (such as the Internet), and the <i class=Em>PPP</i> traffic is conceptually encapsulated (although not packet by packet) inside the TCP stream between the two gateways.</p><p class=Pp>The major disadvantage of this mechanism is that there are two "guaranteed delivery" mechanisms in place - the underlying TCP stream and whatever protocol is used over the <i class=Em>PPP</i> link - probably TCP again. If packets are lost, both levels will get in each others way trying to negotiate sending of the missing packet.</p><p class=Pp>To avoid this overhead, it is also possible to do all this using UDP instead of TCP as the transport by simply changing the protocol from "tcp" to "udp". When using UDP as a transport, <code class=Nm>ppp</code> will operate in synchronous mode. This is another gain as the incoming data does not have to be rearranged into packets.</p><p class=Pp>Care should be taken when adding a default route through a tunneled setup like this. It is quite common for the default route (added in <span class=Pa>/etc/ppp/ppp.linkup</span>) to end up routing the link's TCP connection through the tunnel, effectively garrotting the connection. To avoid this, make sure you add a static route for the benefit of the link:</p><div class="Bd Pp Bd-indent"><pre>
ui-gate:
 set escape 0xff
 set device ui-gate:ppp-in/tcp
 add ui-gate x.x.x.x
 .....
</pre></div><p class=Pp>where “x.x.x.x” is the IP number that your route to “ui-gate” would normally use.</p><p class=Pp>When routing your connection across a public network such as the Internet, it is preferable to encrypt the data. This can be done with the help of the MPPE protocol, although currently this means that you will not be able to also compress the traffic as MPPE is implemented as a compression layer (thank Microsoft for this). To enable MPPE encryption, add the following lines to <span class=Pa>/etc/ppp/ppp.conf</span> on the server:</p><div class="Bd Pp Bd-indent"><pre>
  enable MSCHAPv2
  disable deflate pred1
  deny deflate pred1
</pre></div><p class=Pp>ensuring that you have put the requisite entry in <span class=Pa>/etc/ppp/ppp.secret</span> (MSCHAPv2 is challenge based, so <a class=Xr href=passwd.5.html>passwd(5)</a> cannot be used)</p><p class=Pp>MSCHAPv2 and MPPE are accepted by default, so the client end should work without any additional changes (although ensure you have “set authname” and “set authkey” in your profile).</p></section><section class=Sh><h2 class=Sh id=NETWORK_ADDRESS_TRANSLATION_(PACKET_ALIASING)><a class=permalink href=#NETWORK_ADDRESS_TRANSLATION_(PACKET_ALIASING)>NETWORK ADDRESS TRANSLATION (PACKET ALIASING)</a></h2> The <code class=Fl>-nat</code> command line option enables network address translation (a.k.a. packet aliasing). This allows the <code class=Nm>ppp</code> host to act as a masquerading gateway for other computers over a local area network. Outgoing IP packets are NAT'd so that they appear to come from the <code class=Nm>ppp</code> host, and incoming packets are de-NAT'd so that they are routed to the correct machine on the local area network. NAT allows computers on private, unregistered subnets to have Internet access, although they are invisible from the outside world. In general, correct <code class=Nm>ppp</code> operation should first be verified with network address translation disabled. Then, the <code class=Fl>-nat</code> option should be switched on, and network applications (web browser, <a class=Xr href=telnet.1.html>telnet(1)</a>, <a class=Xr href=ftp.1.html>ftp(1)</a>, <a class=Xr href=ping.8.html>ping(8)</a>, <a class=Xr href=traceroute.8.html>traceroute(8)</a>) should be checked on the <code class=Nm>ppp</code> host. Finally, the same or similar applications should be checked on other computers in the LAN. If network applications work correctly on the <code class=Nm>ppp</code> host, but not on other machines in the LAN, then the masquerading software is working properly, but the host is either not forwarding or possibly receiving IP packets. Check that IP forwarding is enabled in <span class=Pa>/etc/rc.conf</span> and that other machines have designated the <code class=Nm>ppp</code> host as the gateway for the LAN. When starting <code class=Nm>ppp</code> with the provided rc script, the default is to enable NAT; see <var class=Va>ppp_nat</var> in <a class=Xr href=rc.conf.5.html>rc.conf(5)</a> and <span class=Pa>/etc/defaults/rc.conf</span>. </section><section class=Sh><h2 class=Sh id=PACKET_FILTERING><a class=permalink href=#PACKET_FILTERING>PACKET FILTERING</a></h2> This implementation supports packet filtering. There are four kinds of filters: the <i class=Em>in</i> filter, the <i class=Em>out</i> filter, the <i class=Em>dial</i> filter and the <i class=Em>alive</i> filter. Here are the basics: <ul class=Bl-bullet><li>A filter definition has the following syntax: <p class=Pp>set filter <var class=Ar>name</var><var class=Ar>rule-no</var><var class=Ar>action</var> [!] [[host] <var class=Ar>src_addr</var>[/<var class=Ar>width</var>] [<var class=Ar>dst_addr</var>[/<var class=Ar>width</var>]]] [<var class=Ar>proto</var> [src <var class=Ar>cmp port</var>] [dst <var class=Ar>cmp port</var>] [estab] [syn] [finrst] [timeout <var class=Ar>secs</var>]]</p><ol class=Bl-enum><li><var class=Ar>Name</var> should be one of ‘in’, ‘out’, ‘dial’ or ‘alive’.</li><li><var class=Ar>Rule-no</var> is a numeric value between ‘0’ and ‘39’ specifying the rule number. Rules are specified in numeric order according to <var class=Ar>rule-no</var>, but only if rule ‘0’ is defined.</li><li><var class=Ar>Action</var> may be specified as ‘permit’ or ‘deny’, in which case, if a given packet matches the rule, the associated action is taken immediately. <var class=Ar>Action</var> can also be specified as ‘clear’ to clear the action associated with that particular rule, or as a new rule number greater than the current rule. In this case, if a given packet matches the current rule, the packet will next be matched against the new rule number (rather than the next rule number). <p class=Pp>The <var class=Ar>action</var> may optionally be followed with an exclamation mark (“!”), telling <code class=Nm>ppp</code> to reverse the sense of the following match.</p></li><li>[<var class=Ar>src_addr</var>[/<var class=Ar>width</var>]] and [<var class=Ar>dst_addr</var>[/<var class=Ar>width</var>]] are the source and destination IP number specifications. If [/<var class=Ar>width</var>] is specified, it gives the number of relevant netmask bits, allowing the specification of an address range. <p class=Pp>Either <var class=Ar>src_addr</var> or <var class=Ar>dst_addr</var> may be given the values <code class=Dv>MYADDR</code>, <code class=Dv>HISADDR</code>, <code class=Dv>MYADDR6</code> or <code class=Dv>HISADDR6</code> (refer to the description of the “bg” command for a description of these values). When these values are used, the filters will be updated any time the values change. This is similar to the behaviour of the “add” command below.</p></li><li><var class=Ar>Proto</var> may be any protocol from <a class=Xr href=protocols.5.html>protocols(5)</a>.</li><li><var class=Ar>Cmp</var> is one of ‘lt’, ‘eq’ or ‘gt’, meaning less-than, equal and greater-than respectively. <var class=Ar>Port</var> can be specified as a numeric port or by service name from <span class=Pa>/etc/services</span>.</li><li>The ‘estab’, ‘syn’, and ‘finrst’ flags are only allowed when <var class=Ar>proto</var> is set to ‘tcp’, and represent the TH_ACK, TH_SYN and TH_FIN or TH_RST TCP flags respectively.</li><li>The timeout value adjusts the current idle timeout to at least <var class=Ar>secs</var> seconds. If a timeout is given in the alive filter as well as in the in/out filter, the in/out value is used. If no timeout is given, the default timeout (set using <code class=Ic>set timeout</code> and defaulting to 180 seconds) is used.</li></ol></li><li>Each filter can hold up to 40 rules, starting from rule 0. The entire rule set is not effective until rule 0 is defined, i.e., the default is to allow everything through.</li><li>If no rule in a defined set of rules matches a packet, that packet will be discarded (blocked). If there are no rules in a given filter, the packet will be permitted.</li><li>It is possible to filter based on the payload of UDP frames where those frames contain a <i class=Em>PROTO_IP</i><i class=Em>PPP</i> frame header. See the <var class=Ar>filter-decapsulation</var> option below for further details.</li><li>Use “set filter <var class=Ar>name</var><span class=No>-1</span>” to flush all rules.</li></ul><p class=Pp>See <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span>.</p></section><section class=Sh><h2 class=Sh id=SETTING_THE_IDLE_TIMER><a class=permalink href=#SETTING_THE_IDLE_TIMER>SETTING THE IDLE TIMER</a></h2> To check/set the idle timer, use the “show bundle” and “set timeout” commands: <div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; set timeout 600
</pre></div><p class=Pp>The timeout period is measured in seconds, the default value for which is 180 seconds (or 3 min). To disable the idle timer function, use the command</p><div class="Bd Pp Bd-indent"><pre>
ppp ON awfulhak&gt; set timeout 0
</pre></div><p class=Pp>In <code class=Fl>-ddial</code> and <code class=Fl>-dedicated</code> modes, the idle timeout is ignored. In <code class=Fl>-auto</code> mode, when the idle timeout causes the <i class=Em>PPP</i> session to be closed, the <code class=Nm>ppp</code> program itself remains running. Another trigger packet will cause it to attempt to re-establish the link.</p></section><section class=Sh><h2 class=Sh id=PREDICTOR-1_and_DEFLATE_COMPRESSION><a class=permalink href=#PREDICTOR-1_and_DEFLATE_COMPRESSION>PREDICTOR-1 and DEFLATE COMPRESSION</a></h2><code class=Nm>ppp</code> supports both Predictor type 1 and deflate compression. By default, <code class=Nm>ppp</code> will attempt to use (or be willing to accept) both compression protocols when the peer agrees (or requests them). The deflate protocol is preferred by <code class=Nm>ppp</code>. Refer to the “disable” and “deny” commands if you wish to disable this functionality. <p class=Pp>It is possible to use a different compression algorithm in each direction by using only one of “disable deflate” and “deny deflate” (assuming that the peer supports both algorithms).</p><p class=Pp>By default, when negotiating DEFLATE, <code class=Nm>ppp</code> will use a window size of 15. Refer to the “set deflate” command if you wish to change this behaviour.</p><p class=Pp>A special algorithm called DEFLATE24 is also available, and is disabled and denied by default. This is exactly the same as DEFLATE except that it uses CCP ID 24 to negotiate. This allows <code class=Nm>ppp</code> to successfully negotiate DEFLATE with <code class=Nm>pppd</code> version 2.3.*.</p></section><section class=Sh><h2 class=Sh id=CONTROLLING_IP_ADDRESS><a class=permalink href=#CONTROLLING_IP_ADDRESS>CONTROLLING IP ADDRESS</a></h2> For IPv4, <code class=Nm>ppp</code> uses IPCP to negotiate IP addresses. Each side of the connection specifies the IP address that it is willing to use, and if the requested IP address is acceptable then <code class=Nm>ppp</code> returns an ACK to the requester. Otherwise, <code class=Nm>ppp</code> returns NAK to suggest that the peer use a different IP address. When both sides of the connection agree to accept the received request (and send an ACK), IPCP is set to the open state and a network level connection is established. To control this IPCP behaviour, this implementation has the “set ifaddr” command for defining the local and remote IP address: <div class="Bd Pp Bd-indent"><span class=No>set ifaddr</span> [<var class=Ar>src_addr</var>[/<var class=Ar>nn</var>] [<var class=Ar>dst_addr</var>[/<var class=Ar>nn</var>] [<var class=Ar>netmask</var> [<var class=Ar>trigger_addr</var>]]]]</div><p class=Pp>where, ‘src_addr’ is the IP address that the local side is willing to use, ‘dst_addr’ is the IP address which the remote side should use and ‘netmask’ is the netmask that should be used. ‘Src_addr’ defaults to the current <a class=Xr href=hostname.1.html>hostname(1)</a>, ‘dst_addr’ defaults to 0.0.0.0, and ‘netmask’ defaults to whatever mask is appropriate for ‘src_addr’. It is only possible to make ‘netmask’ smaller than the default. The usual value is 255.255.255.255, as most kernels ignore the netmask of a POINTOPOINT interface.</p><p class=Pp>Some incorrect <i class=Em>PPP</i> implementations require that the peer negotiates a specific IP address instead of ‘src_addr’. If this is the case, ‘trigger_addr’ may be used to specify this IP number. This will not affect the routing table unless the other side agrees with this proposed number.</p><div class="Bd Pp Bd-indent"><pre>
set ifaddr 192.244.177.38 192.244.177.2 255.255.255.255 0.0.0.0
</pre></div><p class=Pp>The above specification means:</p><p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>I will first suggest that my IP address should be 0.0.0.0, but I will only accept an address of 192.244.177.38.</li><li>I strongly insist that the peer uses 192.244.177.2 as his own address and will not permit the use of any IP address but 192.244.177.2. When the peer requests another IP address, I will always suggest that it uses 192.244.177.2.</li><li>The routing table entry will have a netmask of 0xffffffff.</li></ul><p class=Pp>This is all fine when each side has a pre-determined IP address, however it is often the case that one side is acting as a server which controls all IP addresses and the other side should go along with it. In order to allow more flexible behaviour, the “set ifaddr” command allows the user to specify IP addresses more loosely:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>set ifaddr 192.244.177.38/24 192.244.177.2/20</code></div><p class=Pp>A number followed by a slash (“/”) represents the number of bits significant in the IP address. The above example means:</p><p class=Pp></p><ul class="Bl-bullet Bl-compact"><li>I would like to use 192.244.177.38 as my address if it is possible, but I will also accept any IP address between 192.244.177.0 and 192.244.177.255.</li><li>I would like to make him use 192.244.177.2 as his own address, but I will also permit him to use any IP address between 192.244.176.0 and 192.244.191.255.</li><li>As you may have already noticed, 192.244.177.2 is equivalent to saying 192.244.177.2/32.</li><li>As an exception, 0 is equivalent to 0.0.0.0/0, meaning that I have no preferred IP address and will obey the remote peers selection. When using zero, no routing table entries will be made until a connection is established.</li><li>192.244.177.2/0 means that I will accept/permit any IP address but I will suggest that 192.244.177.2 be used first.</li></ul><p class=Pp>When negotiating IPv6 addresses, no control is given to the user. IPV6CP negotiation is fully automatic.</p></section><section class=Sh><h2 class=Sh id=CONNECTING_WITH_YOUR_INTERNET_SERVICE_PROVIDER><a class=permalink href=#CONNECTING_WITH_YOUR_INTERNET_SERVICE_PROVIDER>CONNECTING WITH YOUR INTERNET SERVICE PROVIDER</a></h2> The following steps should be taken when connecting to your ISP: <ol class=Bl-enum><li>Describe your providers phone number(s) in the dial script using the “set phone” command. This command allows you to set multiple phone numbers for dialing and redialing separated by either a pipe (“|”) or a colon (“:”): <div class="Bd Pp Bd-indent"><span class=No>set phone</span><var class=Ar>telno</var>[|<var class=Ar>backupnumber</var>]...[:<var class=Ar>nextnumber</var>]...</div><p class=Pp>Numbers after the first in a pipe-separated list are only used if the previous number was used in a failed dial or login script. Numbers separated by a colon are used sequentially, irrespective of what happened as a result of using the previous number. For example:</p><div class="Bd Pp Bd-indent"><pre>
set phone "1234567|2345678:3456789|4567890"
    </pre></div><p class=Pp>Here, the 1234567 number is attempted. If the dial or login script fails, the 2345678 number is used next time, but *only* if the dial or login script fails. On the dial after this, the 3456789 number is used. The 4567890 number is only used if the dial or login script using the 3456789 fails. If the login script of the 2345678 number fails, the next number is still the 3456789 number. As many pipes and colons can be used as are necessary (although a given site would usually prefer to use either the pipe or the colon, but not both). The next number redial timeout is used between all numbers. When the end of the list is reached, the normal redial period is used before starting at the beginning again. The selected phone number is substituted for the \\T string in the “set dial” command (see below).</p></li><li>Set up your redial requirements using “set redial”. For example, if you have a bad telephone line or your provider is usually engaged (not so common these days), you may want to specify the following: <div class="Bd Pp Bd-indent"><pre>
set redial 10 4
    </pre></div><p class=Pp>This says that up to 4 phone calls should be attempted with a pause of 10 seconds before dialing the first number again.</p></li><li>Describe your login procedure using the “set dial” and “set login” commands. The “set dial” command is used to talk to your modem and establish a link with your ISP, for example: <div class="Bd Pp Bd-indent"><pre>
set dial "ABORT BUSY ABORT NO\\sCARRIER TIMEOUT 4 \"\" \
  ATZ OK-ATZ-OK ATDT\\T TIMEOUT 60 CONNECT"
    </pre></div><p class=Pp>This modem "chat" string means:</p><ul class=Bl-bullet><li>Abort if the string "BUSY" or "NO CARRIER" are received.</li><li>Set the timeout to 4 seconds.</li><li>Expect nothing.</li><li>Send ATZ.</li><li>Expect OK. If that is not received within the 4 second timeout, send ATZ and expect OK.</li><li>Send ATDTxxxxxxx where xxxxxxx is the next number in the phone list from above.</li><li>Set the timeout to 60.</li><li>Wait for the CONNECT string.</li></ul><p class=Pp>Once the connection is established, the login script is executed. This script is written in the same style as the dial script, but care should be taken to avoid having your password logged:</p><div class="Bd Pp Bd-indent"><pre>
set authkey MySecret
set login "TIMEOUT 15 login:-\\r-login: awfulhak \
  word: \\P ocol: PPP HELLO"
    </pre></div><p class=Pp>This login "chat" string means:</p><ul class=Bl-bullet><li>Set the timeout to 15 seconds.</li><li>Expect "login:". If it is not received, send a carriage return and expect "login:" again.</li><li>Send "awfulhak"</li><li>Expect "word:" (the tail end of a "Password:" prompt).</li><li>Send whatever our current <var class=Ar>authkey</var> value is set to.</li><li>Expect "ocol:" (the tail end of a "Protocol:" prompt).</li><li>Send "PPP".</li><li>Expect "HELLO".</li></ul><p class=Pp>The “set authkey” command is logged specially. When <var class=Ar>command</var> or <var class=Ar>chat</var> logging is enabled, the actual password is not logged; ‘********’ is logged instead.</p><p class=Pp>Login scripts vary greatly between ISPs. If you are setting one up for the first time, <i class=Em>ENABLE CHAT LOGGING</i> so that you can see if your script is behaving as you expect.</p></li><li>Use “set device” and “set speed” to specify your serial line and speed, for example: <div class="Bd Pp Bd-indent"><pre>
set device /dev/cuau0
set speed 115200
    </pre></div><p class=Pp>Cuad0 is the first serial port on <span class=Ux>FreeBSD</span>. If you are running <code class=Nm>ppp</code> on <span class=Ux>OpenBSD</span>, cua00 is the first. A speed of 115200 should be specified if you have a modem capable of bit rates of 28800 or more. In general, the serial speed should be about four times the modem speed.</p></li><li>Use the “set ifaddr” command to {define} the IP address. <ul class=Bl-bullet><li>If you know what IP address your provider uses, then use it as the remote address (dst_addr), otherwise choose something like 10.0.0.2/0 (see below).</li><li>If your provider has assigned a particular IP address to you, then use it as your address (src_addr).</li><li>If your provider assigns your address dynamically, choose a suitably unobtrusive and unspecific IP number as your address. 10.0.0.1/0 would be appropriate. The bit after the / specifies how many bits of the address you consider to be important, so if you wanted to insist on something in the class C network 1.2.3.0, you could specify 1.2.3.1/24.</li><li>If you find that your ISP accepts the first IP number that you suggest, specify third and forth arguments of “0.0.0.0”. This will force your ISP to assign a number. (The third argument will be ignored as it is less restrictive than the default mask for your ‘src_addr’).</li></ul><p class=Pp>An example for a connection where you do not know your IP number or your ISPs IP number would be:</p><div class="Bd Pp Bd-indent"><pre>
set ifaddr 10.0.0.1/0 10.0.0.2/0 0.0.0.0 0.0.0.0
    </pre></div></li><li>In most cases, your ISP will also be your default router. If this is the case, add the line <div class="Bd Pp Bd-indent"><pre>
add default HISADDR
    </pre></div><p class=Pp>to <span class=Pa>/etc/ppp/ppp.conf</span> (or to <span class=Pa>/etc/ppp/ppp.linkup</span> for setups that do not use <code class=Fl>-auto</code> mode).</p><p class=Pp>This tells <code class=Nm>ppp</code> to add a default route to whatever the peer address is (10.0.0.2 in this example). This route is ‘sticky’, meaning that should the value of <code class=Dv>HISADDR</code> change, the route will be updated accordingly.</p></li><li>If your provider requests that you use PAP/CHAP authentication methods, add the next lines to your <span class=Pa>/etc/ppp/ppp.conf</span> file: <div class="Bd Pp Bd-indent"><pre>
set authname MyName
set authkey MyPassword
    </pre></div><p class=Pp>Both are accepted by default, so <code class=Nm>ppp</code> will provide whatever your ISP requires.</p><p class=Pp>It should be noted that a login script is rarely (if ever) required when PAP or CHAP are in use.</p></li><li>Ask your ISP to authenticate your nameserver address(es) with the line <div class="Bd Pp Bd-indent"><pre>
enable dns
    </pre></div><p class=Pp>Do <i class=Em>NOT</i> do this if you are running a local DNS unless you also either use “resolv readonly” or have “resolv restore” in <span class=Pa>/etc/ppp/ppp.linkdown</span>, as <code class=Nm>ppp</code> will simply circumvent its use by entering some nameserver lines in <span class=Pa>/etc/resolv.conf</span>.</p></li></ol><p class=Pp>Please refer to <span class=Pa>/usr/share/examples/ppp/ppp.conf.sample</span> and <span class=Pa>/usr/share/examples/ppp/ppp.linkup.sample</span> for some real examples. The pmdemand label should be appropriate for most ISPs.</p></section><section class=Sh><h2 class=Sh id=LOGGING_FACILITY><a class=permalink href=#LOGGING_FACILITY>LOGGING FACILITY</a></h2><code class=Nm>ppp</code> is able to generate the following log info either via <a class=Xr href=syslog.3.html>syslog(3)</a> or directly to the screen: <p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#All><code class=Li id=All>All</code></a></dt><dd>Enable all logging facilities. This generates a lot of log. The most common use of 'all' is as a basis, where you remove some facilities after enabling 'all' ('debug' and 'timer' are usually best disabled.)</dd><dt><a class=permalink href=#Async><code class=Li id=Async>Async</code></a></dt><dd>Dump async level packet in hex.</dd><dt><a class=permalink href=#CBCP><code class=Li id=CBCP>CBCP</code></a></dt><dd>Generate CBCP (CallBack Control Protocol) logs.</dd><dt><a class=permalink href=#CCP><code class=Li id=CCP>CCP</code></a></dt><dd>Generate a CCP packet trace.</dd><dt><a class=permalink href=#Chat><code class=Li id=Chat>Chat</code></a></dt><dd>Generate ‘dial’, ‘login’, ‘logout’ and ‘hangup’ chat script trace logs.</dd><dt><a class=permalink href=#Command><code class=Li id=Command>Command</code></a></dt><dd>Log commands executed either from the command line or any of the configuration files.</dd><dt><a class=permalink href=#Connect><code class=Li id=Connect>Connect</code></a></dt><dd>Log Chat lines containing the string "CONNECT".</dd><dt><a class=permalink href=#Debug><code class=Li id=Debug>Debug</code></a></dt><dd>Log debug information.</dd><dt><a class=permalink href=#DNS><code class=Li id=DNS>DNS</code></a></dt><dd>Log DNS QUERY packets.</dd><dt><a class=permalink href=#Filter><code class=Li id=Filter>Filter</code></a></dt><dd>Log packets permitted by the dial filter and denied by any filter.</dd><dt><a class=permalink href=#HDLC><code class=Li id=HDLC>HDLC</code></a></dt><dd>Dump HDLC packet in hex.</dd><dt><a class=permalink href=#ID0><code class=Li id=ID0>ID0</code></a></dt><dd>Log all function calls specifically made as user id 0.</dd><dt><a class=permalink href=#IPCP><code class=Li id=IPCP>IPCP</code></a></dt><dd>Generate an IPCP packet trace.</dd><dt><a class=permalink href=#LCP><code class=Li id=LCP>LCP</code></a></dt><dd>Generate an LCP packet trace.</dd><dt><a class=permalink href=#LQM><code class=Li id=LQM>LQM</code></a></dt><dd>Generate LQR reports.</dd><dt><a class=permalink href=#Phase><code class=Li id=Phase>Phase</code></a></dt><dd>Phase transition log output.</dd><dt><a class=permalink href=#Physical><code class=Li id=Physical>Physical</code></a></dt><dd>Dump physical level packet in hex.</dd><dt><a class=permalink href=#Radius><code class=Li id=Radius>Radius</code></a></dt><dd>Dump RADIUS information. RADIUS information resulting from the link coming up or down is logged at “Phase” level unless “Radius” logging is enabled. This log level is most useful for monitoring RADIUS alive information.</dd><dt><a class=permalink href=#Sync><code class=Li id=Sync>Sync</code></a></dt><dd>Dump sync level packet in hex.</dd><dt><a class=permalink href=#TCP/IP><code class=Li id=TCP/IP>TCP/IP</code></a></dt><dd>Dump all TCP/IP packets.</dd><dt><a class=permalink href=#Timer><code class=Li id=Timer>Timer</code></a></dt><dd>Log timer manipulation.</dd><dt><a class=permalink href=#TUN><code class=Li id=TUN>TUN</code></a></dt><dd>Include the tun device on each log line.</dd><dt><a class=permalink href=#Warning><code class=Li id=Warning>Warning</code></a></dt><dd>Output to the terminal device. If there is currently no terminal, output is sent to the log file using syslogs <code class=Dv>LOG_WARNING</code>.</dd><dt><a class=permalink href=#Error><code class=Li id=Error>Error</code></a></dt><dd>Output to both the terminal device and the log file using syslogs <code class=Dv>LOG_ERROR</code>.</dd><dt><a class=permalink href=#Alert><code class=Li id=Alert>Alert</code></a></dt><dd>Output to the log file using <code class=Dv>LOG_ALERT</code>.</dd></dl></div><p class=Pp>The “set log” command allows you to set the logging output level. Multiple levels can be specified on a single command line. The default is equivalent to “set log Phase”.</p><p class=Pp>It is also possible to log directly to the screen. The syntax is the same except that the word “local” should immediately follow “set log”. The default is “set log local” (i.e., only the un-maskable warning, error and alert output).</p><p class=Pp>If The first argument to “set log [local]” begins with a ‘+’ or a ‘-’ character, the current log levels are not cleared, for example:</p><div class="Bd Pp Bd-indent"><pre>
PPP ON awfulhak&gt; set log phase
PPP ON awfulhak&gt; show log
Log:   Phase Warning Error Alert
Local: Warning Error Alert
PPP ON awfulhak&gt; set log +tcp/ip -warning
PPP ON awfulhak&gt; set log local +command
PPP ON awfulhak&gt; show log
Log:   Phase TCP/IP Warning Error Alert
Local: Command Warning Error Alert
</pre></div><p class=Pp>Log messages of level Warning, Error and Alert are not controllable using “set log [local]”.</p><p class=Pp>The <var class=Ar>Warning</var> level is special in that it will not be logged if it can be displayed locally.</p></section><section class=Sh><h2 class=Sh id=SIGNAL_HANDLING><a class=permalink href=#SIGNAL_HANDLING>SIGNAL HANDLING</a></h2><code class=Nm>ppp</code> deals with the following signals: <dl class=Bl-tag><dt>INT</dt><dd>Receipt of this signal causes the termination of the current connection (if any). This will cause <code class=Nm>ppp</code> to exit unless it is in <code class=Fl>-auto</code> or <code class=Fl>-ddial</code> mode.</dd><dt>HUP, TERM &amp; QUIT</dt><dd>These signals tell <code class=Nm>ppp</code> to exit.</dd><dt>USR1</dt><dd>This signal, tells <code class=Nm>ppp</code> to re-open any existing server socket, dropping all existing diagnostic connections. Sockets that could not previously be opened will be retried.</dd><dt>USR2</dt><dd>This signal, tells <code class=Nm>ppp</code> to close any existing server socket, dropping all existing diagnostic connections. <code class=Dv>SIGUSR1</code> can still be used to re-open the socket.</dd></dl></section><section class=Sh><h2 class=Sh id=MULTI_LINK_PPP><a class=permalink href=#MULTI_LINK_PPP>MULTI-LINK PPP</a></h2> If you wish to use more than one physical link to connect to a <i class=Em>PPP</i> peer, that peer must also understand the <i class=Em>MULTI-LINK PPP</i> protocol. Refer to RFC 1990 for specification details. <p class=Pp>The peer is identified using a combination of his “endpoint discriminator” and his “authentication id”. Either or both of these may be specified. It is recommended that at least one is specified, otherwise there is no way of ensuring that all links are actually connected to the same peer program, and some confusing lock-ups may result. Locally, these identification variables are specified using the “set enddisc” and “set authname” commands. The ‘authname’ (and ‘authkey’) must be agreed in advance with the peer.</p><p class=Pp>Multi-link capabilities are enabled using the “set mrru” command (set maximum reconstructed receive unit). Once multi-link is enabled, <code class=Nm>ppp</code> will attempt to negotiate a multi-link connection with the peer.</p><p class=Pp>By default, only one ‘link’ is available (called ‘deflink’). To create more links, the “clone” command is used. This command will clone existing links, where all characteristics are the same except:</p><ol class=Bl-enum><li>The new link has its own name as specified on the “clone” command line.</li><li>The new link is an ‘interactive’ link. Its mode may subsequently be changed using the “set mode” command.</li><li>The new link is in a ‘closed’ state.</li></ol><p class=Pp>A summary of all available links can be seen using the “show links” command.</p><p class=Pp>Once a new link has been created, command usage varies. All link specific commands must be prefixed with the “link <var class=Ar>name</var>” command, specifying on which link the command is to be applied. When only a single link is available, <code class=Nm>ppp</code> is smart enough not to require the “link <var class=Ar>name</var>” prefix.</p><p class=Pp>Some commands can still be used without specifying a link - resulting in an operation at the ‘bundle’ level. For example, once two or more links are available, the command “show ccp” will show CCP configuration and statistics at the multi-link level, and “link deflink show ccp” will show the same information at the “deflink” link level.</p><p class=Pp>Armed with this information, the following configuration might be used:</p><div class="Bd Pp Bd-indent"><pre>
mp:
 set timeout 0
 set log phase chat
 set device /dev/cuau0 /dev/cuau1 /dev/cuau2
 set phone "123456789"
 set dial "ABORT BUSY ABORT NO\sCARRIER TIMEOUT 5 \"\" ATZ \
           OK-AT-OK \\dATDT\\T TIMEOUT 45 CONNECT"
 set login
 set ifaddr 10.0.0.1/0 10.0.0.2/0 0.0.0.0 0.0.0.0
 set authname ppp
 set authkey ppppassword

 set mrru 1500
 clone 1,2,3		# Create 3 new links - duplicates of the default
 link deflink remove	# Delete the default link (called ``deflink'')
</pre></div><p class=Pp>Note how all cloning is done at the end of the configuration. Usually, the link will be configured first, then cloned. If you wish all links to be up all the time, you can add the following line to the end of your configuration.</p><div class="Bd Pp Bd-indent"><pre>
  link 1,2,3 set mode ddial
</pre></div><p class=Pp>If you want the links to dial on demand, this command could be used:</p><div class="Bd Pp Bd-indent"><pre>
  link * set mode auto
</pre></div><p class=Pp>Links may be tied to specific names by removing the “set device” line above, and specifying the following after the “clone” command:</p><div class="Bd Pp Bd-indent"><pre>
 link 1 set device /dev/cuau0
 link 2 set device /dev/cuau1
 link 3 set device /dev/cuau2
</pre></div><p class=Pp>Use the “help” command to see which commands require context (using the “link” command), which have optional context and which should not have any context.</p><p class=Pp>When <code class=Nm>ppp</code> has negotiated <i class=Em>MULTI-LINK</i> mode with the peer, it creates a local domain socket in the <span class=Pa>/var/run</span> directory. This socket is used to pass link information (including the actual link file descriptor) between different <code class=Nm>ppp</code> invocations. This facilitates <code class=Nm>ppp</code><span class=No>'s</span> ability to be run from a <a class=Xr href=getty.8.html>getty(8)</a> or directly from <span class=Pa>/etc/gettydefs</span> (using the ‘pp=’ capability), without needing to have initial control of the serial line. Once <code class=Nm>ppp</code> negotiates multi-link mode, it will pass its open link to any already running process. If there is no already running process, <code class=Nm>ppp</code> will act as the master, creating the socket and listening for new connections.</p></section><section class=Sh><h2 class=Sh id=PPP_COMMAND_LIST><a class=permalink href=#PPP_COMMAND_LIST>PPP COMMAND LIST</a></h2> This section lists the available commands and their effect. They are usable either from an interactive <code class=Nm>ppp</code> session, from a configuration file or from a <a class=Xr href=pppctl.8.html>pppctl(8)</a> or <a class=Xr href=telnet.1.html>telnet(1)</a> session. <dl class=Bl-tag><dt>accept|deny|enable|disable <var class=Ar>option....</var></dt><dd>These directives tell <code class=Nm>ppp</code> how to negotiate the initial connection with the peer. Each “option” has a default of either accept or deny and enable or disable. “Accept” means that the option will be ACK'd if the peer asks for it. “Deny” means that the option will be NAK'd if the peer asks for it. “Enable” means that the option will be requested by us. “Disable” means that the option will not be requested by us. <p class=Pp>“Option” may be one of the following:</p><dl class=Bl-tag><dt>acfcomp</dt><dd>Default: Enabled and Accepted. ACFComp stands for Address and Control Field Compression. Non LCP packets will usually have an address field of 0xff (the All-Stations address) and a control field of 0x03 (the Unnumbered Information command). If this option is negotiated, these two bytes are simply not sent, thus minimising traffic. <p class=Pp>See <span class=Pa>rfc1662</span> for details.</p></dd><dt>chap[05]</dt><dd>Default: Disabled and Accepted. CHAP stands for Challenge Handshake Authentication Protocol. Only one of CHAP and PAP (below) may be negotiated. With CHAP, the authenticator sends a "challenge" message to its peer. The peer uses a one-way hash function to encrypt the challenge and sends the result back. The authenticator does the same, and compares the results. The advantage of this mechanism is that no passwords are sent across the connection. A challenge is made when the connection is first made. Subsequent challenges may occur. If you want to have your peer authenticate itself, you must “enable chap”. in <span class=Pa>/etc/ppp/ppp.conf</span>, and have an entry in <span class=Pa>/etc/ppp/ppp.secret</span> for the peer. <p class=Pp>When using CHAP as the client, you need only specify “AuthName” and “AuthKey” in <span class=Pa>/etc/ppp/ppp.conf</span>. CHAP is accepted by default. Some <i class=Em>PPP</i> implementations use "MS-CHAP" rather than MD5 when encrypting the challenge. MS-CHAP is a combination of MD4 and DES. If <code class=Nm>ppp</code> was built on a machine with DES libraries available, it will respond to MS-CHAP authentication requests, but will never request them.</p></dd><dt>deflate</dt><dd>Default: Enabled and Accepted. This option decides if deflate compression will be used by the Compression Control Protocol (CCP). This is the same algorithm as used by the <a class=Xr href=gzip.1.html>gzip(1)</a> program. Note: There is a problem negotiating <var class=Ar>deflate</var> capabilities with <code class=Nm>pppd</code> - a <i class=Em>PPP</i> implementation available under many operating systems. <code class=Nm>pppd</code> (version 2.3.1) incorrectly attempts to negotiate <var class=Ar>deflate</var> compression using type <i class=Em>24</i> as the CCP configuration type rather than type <i class=Em>26</i> as specified in <span class=Pa>rfc1979</span>. Type <var class=Ar>24</var> is actually specified as “PPP Magna-link Variable Resource Compression” in <span class=Pa>rfc1975</span>! <code class=Nm>ppp</code> is capable of negotiating with <code class=Nm>pppd</code>, but only if “deflate24” is <var class=Ar>enable</var><span class=No>d</span> and <var class=Ar>accept</var><span class=No>ed</span>.</dd><dt>deflate24</dt><dd>Default: Disabled and Denied. This is a variance of the <var class=Ar>deflate</var> option, allowing negotiation with the <code class=Nm>pppd</code> program. Refer to the <var class=Ar>deflate</var> section above for details. It is disabled by default as it violates <span class=Pa>rfc1975</span>.</dd><dt>dns</dt><dd>Default: Disabled and Denied. This option allows DNS negotiation. <p class=Pp>If “enable<span class=No>d,</span>” <code class=Nm>ppp</code> will request that the peer confirms the entries in <span class=Pa>/etc/resolv.conf</span>. If the peer NAKs our request (suggesting new IP numbers), <span class=Pa>/etc/resolv.conf</span> is updated and another request is sent to confirm the new entries.</p><p class=Pp>If “accept<span class=No>ed,</span>” <code class=Nm>ppp</code> will answer any DNS queries requested by the peer rather than rejecting them. The answer is taken from <span class=Pa>/etc/resolv.conf</span> unless the “set dns” command is used as an override.</p></dd><dt>enddisc</dt><dd>Default: Enabled and Accepted. This option allows control over whether we negotiate an endpoint discriminator. We only send our discriminator if “set enddisc” is used and <var class=Ar>enddisc</var> is enabled. We reject the peers discriminator if <var class=Ar>enddisc</var> is denied.</dd><dt>LANMan|chap80lm</dt><dd>Default: Disabled and Accepted. The use of this authentication protocol is discouraged as it partially violates the authentication protocol by implementing two different mechanisms (LANMan &amp; NT) under the guise of a single CHAP type (0x80). “LANMan” uses a simple DES encryption mechanism and is the least secure of the CHAP alternatives (although is still more secure than PAP). <p class=Pp>Refer to the “MSChap” description below for more details.</p></dd><dt>lqr</dt><dd>Default: Disabled and Accepted. This option decides if Link Quality Requests will be sent or accepted. LQR is a protocol that allows <code class=Nm>ppp</code> to determine that the link is down without relying on the modems carrier detect. When LQR is enabled, <code class=Nm>ppp</code> sends the <i class=Em>QUALPROTO</i> option (see “set lqrperiod” below) as part of the LCP request. If the peer agrees, both sides will exchange LQR packets at the agreed frequency, allowing detailed link quality monitoring by enabling LQM logging. If the peer does not agree, and if the “echo” option is enabled, <code class=Nm>ppp</code> will send <i class=Em>LCP ECHO</i> requests instead. These packets pass no information of interest, but they <i class=Em>MUST</i> be replied to by the peer. <p class=Pp>Whether using <i class=Em>LQR</i> or <i class=Em>LCP ECHO</i>, <code class=Nm>ppp</code> will abruptly drop the connection if 5 unacknowledged packets have been sent rather than sending a 6th. A message is logged at the <i class=Em>PHASE</i> level, and any appropriate “reconnect” values are honoured as if the peer were responsible for dropping the connection.</p><p class=Pp>Refer to the “enable echo” command description for differences in behaviour prior to <code class=Nm>ppp</code> version 3.4.2.</p></dd><dt>mppe</dt><dd>Default: Enabled and Accepted. This is Microsoft Point to Point Encryption scheme. MPPE key size can be 40-, 56- and 128-bits. Refer to “set mppe” command.</dd><dt>MSChapV2|chap81</dt><dd>Default: Disabled and Accepted. It is very similar to standard CHAP (type 0x05) except that it issues challenges of a fixed 16 bytes in length and uses a combination of MD4, SHA-1 and DES to encrypt the challenge rather than using the standard MD5 mechanism.</dd><dt>MSChap|chap80nt</dt><dd>Default: Disabled and Accepted. The use of this authentication protocol is discouraged as it partially violates the authentication protocol by implementing two different mechanisms (LANMan &amp; NT) under the guise of a single CHAP type (0x80). It is very similar to standard CHAP (type 0x05) except that it issues challenges of a fixed 8 bytes in length and uses a combination of MD4 and DES to encrypt the challenge rather than using the standard MD5 mechanism. CHAP type 0x80 for LANMan is also supported - see “enable LANMan” for details. <p class=Pp>Because both “LANMan” and “NT” use CHAP type 0x80, when acting as authenticator with both “enable<span class=No>d</span>”, <code class=Nm>ppp</code> will rechallenge the peer up to three times if it responds using the wrong one of the two protocols. This gives the peer a chance to attempt using both protocols.</p><p class=Pp>Conversely, when <code class=Nm>ppp</code> acts as the authenticatee with both protocols “accept<span class=No>ed</span>”, the protocols are used alternately in response to challenges.</p><p class=Pp>Note: If only LANMan is enabled, <code class=Nm>pppd</code> (version 2.3.5) misbehaves when acting as authenticatee. It provides both the NT and the LANMan answers, but also suggests that only the NT answer should be used.</p></dd><dt>pap</dt><dd>Default: Disabled and Accepted. PAP stands for Password Authentication Protocol. Only one of PAP and CHAP (above) may be negotiated. With PAP, the ID and Password are sent repeatedly to the peer until authentication is acknowledged or the connection is terminated. This is a rather poor security mechanism. It is only performed when the connection is first established. If you want to have your peer authenticate itself, you must “enable pap”. in <span class=Pa>/etc/ppp/ppp.conf</span>, and have an entry in <span class=Pa>/etc/ppp/ppp.secret</span> for the peer (although see the “passwdauth” and “set radius” options below). <p class=Pp>When using PAP as the client, you need only specify “AuthName” and “AuthKey” in <span class=Pa>/etc/ppp/ppp.conf</span>. PAP is accepted by default.</p></dd><dt>pred1</dt><dd>Default: Enabled and Accepted. This option decides if Predictor 1 compression will be used by the Compression Control Protocol (CCP).</dd><dt>protocomp</dt><dd>Default: Enabled and Accepted. This option is used to negotiate PFC (Protocol Field Compression), a mechanism where the protocol field number is reduced to one octet rather than two.</dd><dt>shortseq</dt><dd>Default: Enabled and Accepted. This option determines if <code class=Nm>ppp</code> will request and accept requests for short (12 bit) sequence numbers when negotiating multi-link mode. This is only applicable if our MRRU is set (thus enabling multi-link).</dd><dt>vjcomp</dt><dd>Default: Enabled and Accepted. This option determines if Van Jacobson header compression will be used.</dd></dl><p class=Pp>The following options are not actually negotiated with the peer. Therefore, accepting or denying them makes no sense.</p><dl class=Bl-tag><dt>echo</dt><dd>Default: Disabled. When this option is enabled, <code class=Nm>ppp</code> will send <i class=Em>LCP ECHO</i> requests to the peer at the frequency defined by “echoperiod”. Note, <i class=Em>LQR</i> requests will supersede <i class=Em>LCP ECHO</i> requests if enabled and negotiated. See “set lqrperiod” below for details. <p class=Pp>Prior to <code class=Nm>ppp</code> version 3.4.2, “echo” was considered enabled if lqr was enabled and negotiated, otherwise it was considered disabled. For the same behaviour, it is now necessary to “enable lqr echo” rather than just “enable lqr”.</p></dd><dt>filter-decapsulation</dt><dd>Default: Disabled. When this option is enabled, <code class=Nm>ppp</code> will examine UDP frames to see if they actually contain a <i class=Em>PPP</i> frame as their payload. If this is the case, all filters will operate on the payload rather than the actual packet. <p class=Pp>This is useful if you want to send PPPoUDP traffic over a <i class=Em>PPP</i> link, but want that link to do smart things with the real data rather than the UDP wrapper.</p><p class=Pp>The UDP frame payload must not be compressed in any way, otherwise <code class=Nm>ppp</code> will not be able to interpret it. It is therefore recommended that you <code class=Ic>disable vj pred1 deflate</code> and <code class=Ic>deny vj pred1 deflate</code> in the configuration for the <code class=Nm>ppp</code> invocation with the udp link.</p></dd><dt>force-scripts</dt><dd>Default: Disabled. Forces execution of the configured chat scripts in <code class=Dv>direct</code> and <code class=Dv>dedicated</code> modes.</dd><dt>idcheck</dt><dd>Default: Enabled. When <code class=Nm>ppp</code> exchanges low-level LCP, CCP and IPCP configuration traffic, the <i class=Em>Identifier</i> field of any replies is expected to be the same as that of the request. By default, <code class=Nm>ppp</code> drops any reply packets that do not contain the expected identifier field, reporting the fact at the respective log level. If <var class=Ar>idcheck</var> is disabled, <code class=Nm>ppp</code> will ignore the identifier field.</dd><dt>iface-alias</dt><dd>Default: Enabled if <code class=Fl>-nat</code> is specified. This option simply tells <code class=Nm>ppp</code> to add new interface addresses to the interface rather than replacing them. The option can only be enabled if network address translation is enabled (“nat enable yes”). <p class=Pp>With this option enabled, <code class=Nm>ppp</code> will pass traffic for old interface addresses through the NAT engine (see <a class=Xr href=libalias.3.html>libalias(3)</a>), resulting in the ability (in <code class=Fl>-auto</code> mode) to properly connect the process that caused the PPP link to come up in the first place.</p><p class=Pp>Disabling NAT with “nat enable no” will also disable ‘iface-alias’.</p></dd><dt>ipcp</dt><dd>Default: Enabled. This option allows <code class=Nm>ppp</code> to attempt to negotiate IP control protocol capabilities and if successful to exchange IP datagrams with the peer.</dd><dt>ipv6cp</dt><dd>Default: Enabled. This option allows <code class=Nm>ppp</code> to attempt to negotiate IPv6 control protocol capabilities and if successful to exchange IPv6 datagrams with the peer.</dd><dt>keep-session</dt><dd>Default: Disabled. When <code class=Nm>ppp</code> runs as a Multi-link server, a different <code class=Nm>ppp</code> instance initially receives each connection. After determining that the link belongs to an already existing bundle (controlled by another <code class=Nm>ppp</code> invocation), <code class=Nm>ppp</code> will transfer the link to that process. <p class=Pp>If the link is a tty device or if this option is enabled, <code class=Nm>ppp</code> will not exit, but will change its process name to “session owner” and wait for the controlling <code class=Nm>ppp</code> to finish with the link and deliver a signal back to the idle process. This prevents the confusion that results from <code class=Nm>ppp</code><span class=No>'s</span> parent considering the link resource available again.</p><p class=Pp>For tty devices that have entries in <span class=Pa>/etc/ttys</span>, this is necessary to prevent another <a class=Xr href=getty.8.html>getty(8)</a> from being started, and for program links such as <a class=Xr href=sshd.8.html>sshd(8)</a>, it prevents <a class=Xr href=sshd.8.html>sshd(8)</a> from exiting due to the death of its child. As <code class=Nm>ppp</code> cannot determine its parents requirements (except for the tty case), this option must be enabled manually depending on the circumstances.</p></dd><dt>loopback</dt><dd>Default: Enabled. When <var class=Ar>loopback</var> is enabled, <code class=Nm>ppp</code> will automatically loop back packets being sent out with a destination address equal to that of the <i class=Em>PPP</i> interface. If disabled, <code class=Nm>ppp</code> will send the packet, probably resulting in an ICMP redirect from the other end. It is convenient to have this option enabled when the interface is also the default route as it avoids the necessity of a loopback route.</dd><dt>NAS-IP-Address</dt><dd>Default: Enabled. This option controls whether <code class=Nm>ppp</code> sends the “NAS-IP-Address” attribute to the RADIUS server when RADIUS is in use (see “set radius”). <p class=Pp>Note, at least one of “NAS-IP-Address” and “NAS-Identifier” must be enabled.</p><p class=Pp>Versions of <code class=Nm>ppp</code> prior to version 3.4.1 did not send the “NAS-IP-Address” attribute as it was reported to break the Radiator RADIUS server. As the latest rfc (2865) no longer hints that only one of “NAS-IP-Address” and “NAS-Identifier” should be sent (as rfc 2138 did), <code class=Nm>ppp</code> now sends both and leaves it up to the administrator that chooses to use bad RADIUS implementations to “disable NAS-IP-Address”.</p></dd><dt>NAS-Identifier</dt><dd>Default: Enabled. This option controls whether <code class=Nm>ppp</code> sends the “NAS-Identifier” attribute to the RADIUS server when RADIUS is in use (see “set radius”). <p class=Pp>Note, at least one of “NAS-IP-Address” and “NAS-Identifier” must be enabled.</p></dd><dt>passwdauth</dt><dd>Default: Disabled. Enabling this option will tell the PAP authentication code to use the password database (see <a class=Xr href=passwd.5.html>passwd(5)</a>) to authenticate the caller if they cannot be found in the <span class=Pa>/etc/ppp/ppp.secret</span> file. <span class=Pa>/etc/ppp/ppp.secret</span> is always checked first. If you wish to use passwords from <a class=Xr href=passwd.5.html>passwd(5)</a>, but also to specify an IP number or label for a given client, use “*” as the client password in <span class=Pa>/etc/ppp/ppp.secret</span>.</dd><dt>proxy</dt><dd>Default: Disabled. Enabling this option will tell <code class=Nm>ppp</code> to proxy ARP for the peer. This means that <code class=Nm>ppp</code> will make an entry in the ARP table using <code class=Dv>HISADDR</code> and the <code class=Dv>MAC</code> address of the local network in which <code class=Dv>HISADDR</code> appears. This allows other machines connecteed to the LAN to talk to the peer as if the peer itself was connected to the LAN. The proxy entry cannot be made unless <code class=Dv>HISADDR</code> is an address from a LAN.</dd><dt>proxyall</dt><dd>Default: Disabled. Enabling this will tell <code class=Nm>ppp</code> to add proxy arp entries for every IP address in all class C or smaller subnets routed via the tun interface. <p class=Pp>Proxy arp entries are only made for sticky routes that are added using the “add” command. No proxy arp entries are made for the interface address itself (as created by the “set ifaddr” command).</p></dd><dt>sroutes</dt><dd>Default: Enabled. When the “add” command is used with the <code class=Dv>HISADDR</code>, <code class=Dv>MYADDR</code>, <code class=Dv>HISADDR6</code> or <code class=Dv>MYADDR6</code> values, entries are stored in the ‘sticky route’ list. Each time these variables change, this list is re-applied to the routing table. <p class=Pp>Disabling this option will prevent the re-application of sticky routes, although the ‘stick route’ list will still be maintained.</p></dd><dt>[tcp]<span class=No>mssfixup</span></dt><dd>Default: Enabled. This option tells <code class=Nm>ppp</code> to adjust TCP SYN packets so that the maximum receive segment size is not greater than the amount allowed by the interface MTU.</dd><dt>throughput</dt><dd>Default: Enabled. This option tells <code class=Nm>ppp</code> to gather throughput statistics. Input and output is sampled over a rolling 5 second window, and current, best and total figures are retained. This data is output when the relevant <i class=Em>PPP</i> layer shuts down, and is also available using the “show” command. Throughput statistics are available at the “IPCP” and “physical” levels.</dd><dt>utmp</dt><dd>Default: Enabled. Normally, when a user is authenticated using PAP or CHAP, and when <code class=Nm>ppp</code> is running in <code class=Fl>-direct</code> mode, an entry is made in the utmp and wtmp files for that user. Disabling this option will tell <code class=Nm>ppp</code> not to make any utmp or wtmp entries. This is usually only necessary if you require the user to both login and authenticate themselves.</dd></dl></dd><dt>add[!] <var class=Ar>dest</var>[/<var class=Ar>nn</var>] [<var class=Ar>mask</var>] [<var class=Ar>gateway</var>]</dt><dd><var class=Ar>Dest</var> is the destination IP address. The netmask is specified either as a number of bits with <var class=Ar>/nn</var> or as an IP number using <var class=Ar>mask</var>. <var class=Ar>0 0</var> or simply <var class=Ar>0</var> with no mask refers to the default route. It is also possible to use the literal name ‘default’ instead of <var class=Ar>0</var>. <var class=Ar>Gateway</var> is the next hop gateway to get to the given <var class=Ar>dest</var> machine/network. Refer to the <a class=Xr href=route.8.html>route(8)</a> command for further details. <p class=Pp>It is possible to use the symbolic names ‘MYADDR’, ‘HISADDR’, ‘MYADDR6’ or ‘HISADDR6’ as the destination, and ‘HISADDR’ or ‘HISADDR6’ as the <var class=Ar>gateway</var>. ‘MYADDR’ is replaced with the interface IP address, ‘HISADDR’ is replaced with the interface IP destination (peer) address, ‘MYADDR6’ is replaced with the interface IPv6 address, and ‘HISADDR6’ is replaced with the interface IPv6 destination address,</p><p class=Pp>If the <var class=Ar>add!</var> command is used (note the trailing “!”), then if the route already exists, it will be updated as with the ‘route change’ command (see <a class=Xr href=route.8.html>route(8)</a> for further details).</p><p class=Pp>Routes that contain the “HISADDR”, “MYADDR”, “HISADDR6”, “MYADDR6”, “DNS0”, or “DNS1” constants are considered ‘sticky’. They are stored in a list (use “show ncp” to see the list), and each time the value of one of these variables changes, the appropriate routing table entries are updated. This facility may be disabled using “disable sroutes”.</p></dd><dt>allow <var class=Ar>command</var> [<var class=Ar>args</var>]</dt><dd>This command controls access to <code class=Nm>ppp</code> and its configuration files. It is possible to allow user-level access, depending on the configuration file label and on the mode that <code class=Nm>ppp</code> is being run in. For example, you may wish to configure <code class=Nm>ppp</code> so that only user ‘fred’ may access label ‘fredlabel’ in <code class=Fl>-background</code> mode. <p class=Pp>User id 0 is immune to these commands.</p><dl class=Bl-tag><dt>allow user[s] <var class=Ar>logname</var><span class=No>...</span></dt><dd>By default, only user id 0 is allowed access to <code class=Nm>ppp</code>. If this command is used, all of the listed users are allowed access to the section in which the “allow users” command is found. The ‘default’ section is always checked first (even though it is only ever automatically loaded at startup). “allow users” commands are cumulative in a given section, but users allowed in any given section override users allowed in the default section, so it is possible to allow users access to everything except a given label by specifying default users in the ‘default’ section, and then specifying a new user list for that label. <p class=Pp>If user ‘*’ is specified, access is allowed to all users.</p></dd><dt>allow mode[s] <var class=Ar>mode</var><span class=No>...</span></dt><dd>By default, access using any <code class=Nm>ppp</code> mode is possible. If this command is used, it restricts the access <var class=Ar>modes</var> allowed to load the label under which this command is specified. Again, as with the “allow users” command, each “allow modes” command overrides any previous settings, and the ‘default’ section is always checked first. <p class=Pp>Possible modes are: ‘interactive’, ‘auto’, ‘direct’, ‘dedicated’, ‘ddial’, ‘background’ and ‘*’.</p><p class=Pp>When running in multi-link mode, a section can be loaded if it allows <i class=Em>any</i> of the currently existing line modes.</p></dd></dl></dd><dt>nat <var class=Ar>command</var> [<var class=Ar>args</var>]</dt><dd>This command allows the control of the network address translation (also known as masquerading or IP aliasing) facilities that are built into <code class=Nm>ppp</code>. NAT is done on the external interface only, and is unlikely to make sense if used with the <code class=Fl>-direct</code> flag. <p class=Pp>If nat is enabled on your system (it may be omitted at compile time), the following commands are possible:</p><dl class=Bl-tag><dt>nat enable yes|no</dt><dd>This command either switches network address translation on or turns it off. The <code class=Fl>-nat</code> command line flag is synonymous with “nat enable yes”.</dd><dt>nat addr [<var class=Ar>addr_local addr_alias</var>]</dt><dd>This command allows data for <var class=Ar>addr_alias</var> to be redirected to <var class=Ar>addr_local</var>. It is useful if you own a small number of real IP numbers that you wish to map to specific machines behind your gateway.</dd><dt>nat deny_incoming yes|no</dt><dd>If set to yes, this command will refuse all incoming packets where an aliasing link does not already exist. Refer to the <a class=Sx href=#CONCEPTUAL_BACKGROUND>CONCEPTUAL BACKGROUND</a> section of <a class=Xr href=libalias.3.html>libalias(3)</a> for a description of what an “aliasing link” is. <p class=Pp>It should be noted under what circumstances an aliasing link is created by <a class=Xr href=libalias.3.html>libalias(3)</a>. It may be necessary to further protect your network from outside connections using the “set filter” or “nat target” commands.</p></dd><dt>nat help|?</dt><dd>This command gives a summary of available nat commands.</dd><dt>nat log yes|no</dt><dd>This option causes various NAT statistics and information to be logged to the file <span class=Pa>/var/log/alias.log</span>.</dd><dt>nat port <var class=Ar>proto</var><var class=Ar>targetIP</var>:<var class=Ar>targetPort</var>[<span class=No>-</span><var class=Ar>targetPort</var>] <var class=Ar>aliasPort</var>[<span class=No>-</span><var class=Ar>aliasPort</var>] [<var class=Ar>remoteIP</var>:<var class=Ar>remotePort</var>[<span class=No>-</span><var class=Ar>remotePort</var>]]</dt><dd>This command causes incoming <var class=Ar>proto</var> connections to <var class=Ar>aliasPort</var> to be redirected to <var class=Ar>targetPort</var> on <var class=Ar>targetIP</var>. <var class=Ar>proto</var> is either “tcp” or “udp”. <p class=Pp>A range of port numbers may be specified as shown above. The ranges must be of the same size.</p><p class=Pp>If <var class=Ar>remoteIP</var> is specified, only data coming from that IP number is redirected. <var class=Ar>remotePort</var> must either be “0” (indicating any source port) or a range of ports the same size as the other ranges.</p><p class=Pp>This option is useful if you wish to run things like Internet phone on machines behind your gateway, but is limited in that connections to only one interior machine per source machine and target port are possible.</p></dd><dt>nat proto <var class=Ar>proto localIP</var> [<var class=Ar>publicIP</var> [<var class=Ar>remoteIP</var>]]</dt><dd>This command tells <code class=Nm>ppp</code> to redirect packets of protocol type <var class=Ar>proto</var> (see <a class=Xr href=protocols.5.html>protocols(5)</a>) to the internal address <var class=Ar>localIP</var>. <p class=Pp>If <var class=Ar>publicIP</var> is specified, only packets destined for that address are matched, otherwise the default alias address is used.</p><p class=Pp>If <var class=Ar>remoteIP</var> is specified, only packets matching that source address are matched,</p><p class=Pp>This command is useful for redirecting tunnel endpoints to an internal machine, for example:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>nat proto ipencap 10.0.0.1</code></div></dd><dt>nat proxy cmd <var class=Ar>arg</var><span class=No>...</span></dt><dd>This command tells <code class=Nm>ppp</code> to proxy certain connections, redirecting them to a given server. Refer to the description of <code class=Fn>PacketAliasProxyRule</code>() in <a class=Xr href=libalias.3.html>libalias(3)</a> for details of the available commands.</dd><dt>nat punch_fw [<var class=Ar>base count</var>]</dt><dd>This command tells <code class=Nm>ppp</code> to punch holes in the firewall for FTP or IRC DCC connections. This is done dynamically by installing temporary firewall rules which allow a particular connection (and only that connection) to go through the firewall. The rules are removed once the corresponding connection terminates. <p class=Pp>A maximum of <var class=Ar>count</var> rules starting from rule number <var class=Ar>base</var> will be used for punching firewall holes. The range will be cleared when the “nat punch_fw” command is run.</p><p class=Pp>If no arguments are given, firewall punching is disabled.</p></dd><dt>nat skinny_port [<var class=Ar>port</var>]</dt><dd>This command tells <code class=Nm>ppp</code> which TCP port is used by the Skinny Station protocol. Skinny is used by Cisco IP phones to communicate with Cisco Call Managers to setup voice over IP calls. The typical port used by Skinny is 2000. <p class=Pp>If no argument is given, skinny aliasing is disabled.</p></dd><dt>nat same_ports yes|no</dt><dd>When enabled, this command will tell the network address translation engine to attempt to avoid changing the port number on outgoing packets. This is useful if you want to support protocols such as RPC and LPD which require connections to come from a well known port.</dd><dt>nat target [<var class=Ar>address</var>]</dt><dd>Set the given target address or clear it if no address is given. The target address is used by libalias to specify how to NAT incoming packets by default. If a target address is not set or if “default” is given, packets are not altered and are allowed to route to the internal network. <p class=Pp>The target address may be set to “MYADDR”, in which case libalias will redirect all packets to the interface address.</p></dd><dt>nat use_sockets yes|no</dt><dd>When enabled, this option tells the network address translation engine to create a socket so that it can guarantee a correct incoming ftp data or IRC connection.</dd><dt>nat unregistered_only yes|no</dt><dd>Only alter outgoing packets with an unregistered source address. According to RFC 1918, unregistered source addresses are 10.0.0.0/8, 172.16.0.0/12 and 192.168.0.0/16.</dd></dl><p class=Pp>These commands are also discussed in the file <span class=Pa>README.nat</span> which comes with the source distribution.</p></dd><dt>[!]<span class=No>bg</span><var class=Ar>command</var></dt><dd>The given <var class=Ar>command</var> is executed in the background with the following words replaced: <dl class=Bl-tag><dt><a class=permalink href=#AUTHNAME><code class=Li id=AUTHNAME>AUTHNAME</code></a></dt><dd>This is replaced with the local <var class=Ar>authname</var> value. See the “set authname” command below.</dd><dt><a class=permalink href=#COMPILATIONDATE><code class=Li id=COMPILATIONDATE>COMPILATIONDATE</code></a></dt><dd>In previous software revisions, this was replaced with the date on which <code class=Nm>ppp</code> was compiled. This is no longer supported as it breaks the ability to recompile the same code to produce an exact duplicate of a previous compilation.</dd><dt><a class=permalink href=#DNS0_&_DNS1><code class=Li id=DNS0_&_DNS1>DNS0 &amp; DNS1</code></a></dt><dd>These are replaced with the primary and secondary nameserver IP numbers. If nameservers are negotiated by IPCP, the values of these macros will change.</dd><dt><a class=permalink href=#ENDDISC><code class=Li id=ENDDISC>ENDDISC</code></a></dt><dd>This is replaced with the local endpoint discriminator value. See the “set enddisc” command below.</dd><dt><a class=permalink href=#HISADDR><code class=Li id=HISADDR>HISADDR</code></a></dt><dd>This is replaced with the peers IP number.</dd><dt><a class=permalink href=#HISADDR6><code class=Li id=HISADDR6>HISADDR6</code></a></dt><dd>This is replaced with the peers IPv6 number.</dd><dt><a class=permalink href=#INTERFACE><code class=Li id=INTERFACE>INTERFACE</code></a></dt><dd>This is replaced with the name of the interface that is in use.</dd><dt><a class=permalink href=#IPOCTETSIN><code class=Li id=IPOCTETSIN>IPOCTETSIN</code></a></dt><dd>This is replaced with the number of IP bytes received since the connection was established.</dd><dt><a class=permalink href=#IPOCTETSOUT><code class=Li id=IPOCTETSOUT>IPOCTETSOUT</code></a></dt><dd>This is replaced with the number of IP bytes sent since the connection was established.</dd><dt><a class=permalink href=#IPPACKETSIN><code class=Li id=IPPACKETSIN>IPPACKETSIN</code></a></dt><dd>This is replaced with the number of IP packets received since the connection was established.</dd><dt><a class=permalink href=#IPPACKETSOUT><code class=Li id=IPPACKETSOUT>IPPACKETSOUT</code></a></dt><dd>This is replaced with the number of IP packets sent since the connection was established.</dd><dt><a class=permalink href=#IPV6OCTETSIN><code class=Li id=IPV6OCTETSIN>IPV6OCTETSIN</code></a></dt><dd>This is replaced with the number of IPv6 bytes received since the connection was established.</dd><dt><a class=permalink href=#IPV6OCTETSOUT><code class=Li id=IPV6OCTETSOUT>IPV6OCTETSOUT</code></a></dt><dd>This is replaced with the number of IPv6 bytes sent since the connection was established.</dd><dt><a class=permalink href=#IPV6PACKETSIN><code class=Li id=IPV6PACKETSIN>IPV6PACKETSIN</code></a></dt><dd>This is replaced with the number of IPv6 packets received since the connection was established.</dd><dt><a class=permalink href=#IPV6PACKETSOUT><code class=Li id=IPV6PACKETSOUT>IPV6PACKETSOUT</code></a></dt><dd>This is replaced with the number of IPv6 packets sent since the connection was established.</dd><dt><a class=permalink href=#LABEL><code class=Li id=LABEL>LABEL</code></a></dt><dd>This is replaced with the last label name used. A label may be specified on the <code class=Nm>ppp</code> command line, via the “load” or “dial” commands and in the <span class=Pa>ppp.secret</span> file.</dd><dt><a class=permalink href=#MYADDR><code class=Li id=MYADDR>MYADDR</code></a></dt><dd>This is replaced with the IP number assigned to the local interface.</dd><dt><a class=permalink href=#MYADDR6><code class=Li id=MYADDR6>MYADDR6</code></a></dt><dd>This is replaced with the IPv6 number assigned to the local interface.</dd><dt><a class=permalink href=#OCTETSIN><code class=Li id=OCTETSIN>OCTETSIN</code></a></dt><dd>This is replaced with the number of bytes received since the connection was established.</dd><dt><a class=permalink href=#OCTETSOUT><code class=Li id=OCTETSOUT>OCTETSOUT</code></a></dt><dd>This is replaced with the number of bytes sent since the connection was established.</dd><dt><a class=permalink href=#PACKETSIN><code class=Li id=PACKETSIN>PACKETSIN</code></a></dt><dd>This is replaced with the number of packets received since the connection was established.</dd><dt><a class=permalink href=#PACKETSOUT><code class=Li id=PACKETSOUT>PACKETSOUT</code></a></dt><dd>This is replaced with the number of packets sent since the connection was established.</dd><dt><a class=permalink href=#PEER_ENDDISC><code class=Li id=PEER_ENDDISC>PEER_ENDDISC</code></a></dt><dd>This is replaced with the value of the peers endpoint discriminator.</dd><dt><a class=permalink href=#PROCESSID><code class=Li id=PROCESSID>PROCESSID</code></a></dt><dd>This is replaced with the current process id.</dd><dt><a class=permalink href=#SOCKNAME><code class=Li id=SOCKNAME>SOCKNAME</code></a></dt><dd>This is replaced with the name of the diagnostic socket.</dd><dt><a class=permalink href=#UPTIME><code class=Li id=UPTIME>UPTIME</code></a></dt><dd>This is replaced with the bundle uptime in HH:MM:SS format.</dd><dt><a class=permalink href=#USER><code class=Li id=USER>USER</code></a></dt><dd>This is replaced with the username that has been authenticated with PAP or CHAP. Normally, this variable is assigned only in -direct mode. This value is available irrespective of whether utmp logging is enabled.</dd><dt><a class=permalink href=#VERSION><code class=Li id=VERSION>VERSION</code></a></dt><dd>This is replaced with the current version number of <code class=Nm>ppp</code>.</dd></dl><p class=Pp>These substitutions are also done by the “set proctitle”, “ident” and “log” commands.</p><p class=Pp>If you wish to pause <code class=Nm>ppp</code> while the command executes, use the “shell” command instead.</p></dd><dt>clear physical|ipcp|ipv6 [current|overall|peak...]</dt><dd>Clear the specified throughput values at either the “physical”, “ipcp” or “ipv6cp” level. If “physical” is specified, context must be given (see the “link” command below). If no second argument is given, all values are cleared.</dd><dt>clone <var class=Ar>name</var>[,<var class=Ar>name</var>]<span class=No>...</span></dt><dd>Clone the specified link, creating one or more new links according to the <var class=Ar>name</var> argument(s). This command must be used from the “link” command below unless you have only got a single link (in which case that link becomes the default). Links may be removed using the “remove” command below. <p class=Pp>The default link name is “deflink”.</p></dd><dt>close [lcp|ccp[!]]</dt><dd>If no arguments are given, the relevant protocol layers will be brought down and the link will be closed. If “lcp” is specified, the LCP layer is brought down, but <code class=Nm>ppp</code> will not bring the link offline. It is subsequently possible to use “term” (see below) to talk to the peer machine if, for example, something like “slirp” is being used. If “ccp” is specified, only the relevant compression layer is closed. If the “!” is used, the compression layer will remain in the closed state, otherwise it will re-enter the STOPPED state, waiting for the peer to initiate further CCP negotiation. In any event, this command does not disconnect the user from <code class=Nm>ppp</code> or exit <code class=Nm>ppp</code>. See the “quit” command below.</dd><dt>delete[!] <var class=Ar>dest</var></dt><dd>This command deletes the route with the given <var class=Ar>dest</var> IP address. If <var class=Ar>dest</var> is specified as ‘ALL’, all non-direct entries in the routing table for the current interface, and all ‘sticky route’ entries are deleted. If <var class=Ar>dest</var> is specified as ‘default’, the default route is deleted. <p class=Pp>If the <var class=Ar>delete!</var> command is used (note the trailing “!”), <code class=Nm>ppp</code> will not complain if the route does not already exist.</p></dd><dt>dial|call [<var class=Ar>label</var>]<span class=No>...</span></dt><dd>This command is the equivalent of “load label” followed by “open”, and is provided for backwards compatibility.</dd><dt>down [<var class=Ar>lcp|ccp</var>]</dt><dd>Bring the relevant layer down ungracefully, as if the underlying layer had become unavailable. It is not considered polite to use this command on a Finite State Machine that is in the OPEN state. If no arguments are supplied, the entire link is closed (or if no context is given, all links are terminated). If ‘lcp’ is specified, the <i class=Em>LCP</i> layer is terminated but the device is not brought offline and the link is not closed. If ‘ccp’ is specified, only the relevant compression layer(s) are terminated.</dd><dt>help|? [<var class=Ar>command</var>]</dt><dd>Show a list of available commands. If <var class=Ar>command</var> is specified, show the usage string for that command.</dd><dt>ident [<var class=Ar>text</var><span class=No>...</span>]</dt><dd>Identify the link to the peer using <var class=Ar>text</var>. If <var class=Ar>text</var> is empty, link identification is disabled. It is possible to use any of the words described for the <code class=Ic>bg</code> command above. Refer to the <code class=Ic>sendident</code> command for details of when <code class=Nm>ppp</code> identifies itself to the peer.</dd><dt>iface <var class=Ar>command</var> [args]</dt><dd>This command is used to control the interface used by <code class=Nm>ppp</code>. <var class=Ar>Command</var> may be one of the following: <dl class=Bl-tag><dt>iface add[!] <var class=Ar>addr</var>[/<var class=Ar>bits</var>] [<var class=Ar>peer</var>]</dt><dd style="width: auto;"> </dd><dt>iface add[!] <var class=Ar>addr</var><var class=Ar>mask</var><var class=Ar>peer</var></dt><dd>Add the given <var class=Ar>addr mask peer</var> combination to the interface. Instead of specifying <var class=Ar>mask</var>, <var class=Ar>/bits</var> can be used (with no space between it and <var class=Ar>addr</var>). If the given address already exists, the command fails unless the “!” is used - in which case the previous interface address entry is overwritten with the new one, allowing a change of netmask or peer address. <p class=Pp>If only <var class=Ar>addr</var> is specified, <var class=Ar>bits</var> defaults to “32” and <var class=Ar>peer</var> defaults to “255.255.255.255”. This address (the broadcast address) is the only duplicate peer address that <code class=Nm>ppp</code> allows.</p></dd><dt>iface clear [INET | INET6]</dt><dd>If this command is used while <code class=Nm>ppp</code> is in the OPENED state or while in <code class=Fl>-auto</code> mode, all addresses except for the NCP negotiated address are deleted from the interface. If <code class=Nm>ppp</code> is not in the OPENED state and is not in <code class=Fl>-auto</code> mode, all interface addresses are deleted. <p class=Pp>If the INET or INET6 arguments are used, only addresses for that address family are cleared.</p></dd><dt>iface delete[!]<span class=No>|rm</span>[!] <var class=Ar>addr</var></dt><dd>This command deletes the given <var class=Ar>addr</var> from the interface. If the “!” is used, no error is given if the address is not currently assigned to the interface (and no deletion takes place).</dd><dt>iface name <var class=Ar>name</var></dt><dd>Renames the interface to <var class=Ar>name</var>.</dd><dt>iface description <var class=Ar>description</var></dt><dd>Sets the interface description to <var class=Ar>description</var>. Useful if you have many interfaces on your system.</dd><dt>iface show</dt><dd>Shows the current state and current addresses for the interface. It is much the same as running “ifconfig INTERFACE”.</dd><dt>iface help [<var class=Ar>sub-command</var>]</dt><dd>This command, when invoked without <var class=Ar>sub-command</var>, will show a list of possible “iface” sub-commands and a brief synopsis for each. When invoked with <var class=Ar>sub-command</var>, only the synopsis for the given sub-command is shown.</dd></dl></dd><dt>[data]<span class=No>link</span><var class=Ar>name</var>[,<var class=Ar>name</var>]... <var class=Ar>command</var> [<var class=Ar>args</var>]</dt><dd>This command may prefix any other command if the user wishes to specify which link the command should affect. This is only applicable after multiple links have been created in Multi-link mode using the “clone” command. <p class=Pp><var class=Ar>Name</var> specifies the name of an existing link. If <var class=Ar>name</var> is a comma separated list, <var class=Ar>command</var> is executed on each link. If <var class=Ar>name</var> is “*”, <var class=Ar>command</var> is executed on all links.</p></dd><dt>load [<var class=Ar>label</var>]<span class=No>...</span></dt><dd>Load the given <var class=Ar>label</var><span class=No>(s)</span> from the <span class=Pa>ppp.conf</span> file. If <var class=Ar>label</var> is not given, the <var class=Ar>default</var> label is used. <p class=Pp>Unless the <var class=Ar>label</var> section uses the “set mode”, “open” or “dial” commands, <code class=Nm>ppp</code> will not attempt to make an immediate connection.</p></dd><dt>log <var class=Ar>word</var><span class=No>...</span></dt><dd>Send the given word(s) to the log file with the prefix “LOG:”. Word substitutions are done as explained under the “!bg” command above.</dd><dt>open [lcp|ccp|ipcp]</dt><dd>This is the opposite of the “close” command. All closed links are immediately brought up apart from second and subsequent <var class=Ar>demand-dial</var> links - these will come up based on the “set autoload” command that has been used. <p class=Pp>If the “lcp” argument is used while the LCP layer is already open, LCP will be renegotiated. This allows various LCP options to be changed, after which “open lcp” can be used to put them into effect. After renegotiating LCP, any agreed authentication will also take place.</p><p class=Pp>If the “ccp” argument is used, the relevant compression layer is opened. Again, if it is already open, it will be renegotiated.</p><p class=Pp>If the “ipcp” argument is used, the link will be brought up as normal, but if IPCP is already open, it will be renegotiated and the network interface will be reconfigured.</p><p class=Pp>It is probably not good practice to re-open the PPP state machines like this as it is possible that the peer will not behave correctly. It <i class=Em>is</i> however useful as a way of forcing the CCP or VJ dictionaries to be reset.</p></dd><dt>passwd <var class=Ar>pass</var></dt><dd>Specify the password required for access to the full <code class=Nm>ppp</code> command set. This password is required when connecting to the diagnostic port (see the “set server” command). <var class=Ar>Pass</var> is specified on the “set server” command line. The value of <var class=Ar>pass</var> is not logged when <var class=Ar>command</var> logging is active, instead, the literal string ‘********’ is logged.</dd><dt>quit|bye [all]</dt><dd>If “quit” is executed from the controlling connection or from a command file, ppp will exit after closing all connections. Otherwise, if the user is connected to a diagnostic socket, the connection is simply dropped. <p class=Pp>If the <var class=Ar>all</var> argument is given, <code class=Nm>ppp</code> will exit despite the source of the command after closing all existing connections.</p></dd><dt>remove|rm</dt><dd>This command removes the given link. It is only really useful in multi-link mode. A link must be in the <code class=Dv>CLOSED</code> state before it is removed.</dd><dt>rename|mv <var class=Ar>name</var></dt><dd>This command renames the given link to <var class=Ar>name</var>. It will fail if <var class=Ar>name</var> is already used by another link. <p class=Pp>The default link name is ‘deflink’. Renaming it to ‘modem’, ‘cuau0’ or ‘USR’ may make the log file more readable.</p></dd><dt>resolv <var class=Ar>command</var></dt><dd>This command controls <code class=Nm>ppp</code><span class=No>'s</span> manipulation of the <a class=Xr href=resolv.conf.5.html>resolv.conf(5)</a> file. When <code class=Nm>ppp</code> starts up, it loads the contents of this file into memory and retains this image for future use. <var class=Ar>command</var> is one of the following: <dl class=Bl-tag><dt><i class=Em>readonly</i></dt><dd>Treat <span class=Pa>/etc/resolv.conf</span> as read only. If “dns” is enabled, <code class=Nm>ppp</code> will still attempt to negotiate nameservers with the peer, making the results available via the <code class=Dv>DNS0</code> and <code class=Dv>DNS1</code> macros. This is the opposite of the “resolv writable” command.</dd><dt><i class=Em>reload</i></dt><dd>Reload <span class=Pa>/etc/resolv.conf</span> into memory. This may be necessary if for example a DHCP client overwrote <span class=Pa>/etc/resolv.conf</span>.</dd><dt><i class=Em>restore</i></dt><dd>Replace <span class=Pa>/etc/resolv.conf</span> with the version originally read at startup or with the last “resolv reload” command. This is sometimes a useful command to put in the <span class=Pa>/etc/ppp/ppp.linkdown</span> file.</dd><dt><i class=Em>rewrite</i></dt><dd>Rewrite the <span class=Pa>/etc/resolv.conf</span> file. This command will work even if the “resolv readonly” command has been used. It may be useful as a command in the <span class=Pa>/etc/ppp/ppp.linkup</span> file if you wish to defer updating <span class=Pa>/etc/resolv.conf</span> until after other commands have finished.</dd><dt><i class=Em>writable</i></dt><dd>Allow <code class=Nm>ppp</code> to update <span class=Pa>/etc/resolv.conf</span> if “dns” is enabled and <code class=Nm>ppp</code> successfully negotiates a DNS. This is the opposite of the “resolv readonly” command.</dd></dl></dd><dt>save</dt><dd>This option is not (yet) implemented.</dd><dt>sendident</dt><dd>This command tells <code class=Nm>ppp</code> to identify itself to the peer. The link must be in LCP state or higher. If no identity has been set (via the <code class=Ic>ident</code> command), <code class=Ic>sendident</code> will fail. <p class=Pp>When an identity has been set, <code class=Nm>ppp</code> will automatically identify itself when it sends or receives a configure reject, when negotiation fails or when LCP reaches the opened state.</p><p class=Pp>Received identification packets are logged to the LCP log (see <code class=Ic>set log</code> for details) and are never responded to.</p></dd><dt>set[up] <var class=Ar>var value</var></dt><dd>This option allows the setting of any of the following variables: <dl class=Bl-tag><dt>set accmap <var class=Ar>hex-value</var></dt><dd>ACCMap stands for Asynchronous Control Character Map. This is always negotiated with the peer, and defaults to a value of 00000000 in hex. This protocol is required to defeat hardware that depends on passing certain characters from end to end (such as XON/XOFF etc). <p class=Pp>For the XON/XOFF scenario, use “set accmap 000a0000”.</p></dd><dt>set [auth]<span class=No>key</span><var class=Ar>value</var></dt><dd>This sets the authentication key (or password) used in client mode PAP or CHAP negotiation to the given value. It also specifies the password to be used in the dial or login scripts in place of the ‘\P’ sequence, preventing the actual password from being logged. If <var class=Ar>command</var> or <var class=Ar>chat</var> logging is in effect, <var class=Ar>value</var> is logged as ‘********’ for security reasons. <p class=Pp>If the first character of <var class=Ar>value</var> is an exclamation mark (“!”), <code class=Nm>ppp</code> treats the remainder of the string as a program that must be executed to determine the “authname” and “authkey” values.</p><p class=Pp>If the “!” is doubled up (to “!!”), it is treated as a single literal “!”, otherwise, ignoring the “!”, <var class=Ar>value</var> is parsed as a program to execute in the same was as the “!bg” command above, substituting special names in the same manner. Once executed, <code class=Nm>ppp</code> will feed the program three lines of input, each terminated by a newline character:</p><ul class=Bl-bullet><li>The host name as sent in the CHAP challenge.</li><li>The challenge string as sent in the CHAP challenge.</li><li>The locally defined “authname”.</li></ul><p class=Pp>Two lines of output are expected:</p><ul class=Bl-bullet><li>The “authname” to be sent with the CHAP response.</li><li>The “authkey”, which is encrypted with the challenge and request id, the answer being sent in the CHAP response packet.</li></ul><p class=Pp>When configuring <code class=Nm>ppp</code> in this manner, it is expected that the host challenge is a series of ASCII digits or characters. An encryption device or Secure ID card is usually required to calculate the secret appropriate for the given challenge.</p></dd><dt>set authname <var class=Ar>id</var></dt><dd>This sets the authentication id used in client mode PAP or CHAP negotiation. <p class=Pp>If used in <code class=Fl>-direct</code> mode with CHAP enabled, <var class=Ar>id</var> is used in the initial authentication challenge and should normally be set to the local machine name.</p></dd><dt>set autoload <var class=Ar>min-percent max-percent period</var></dt><dd>These settings apply only in multi-link mode and default to zero, zero and five respectively. When more than one <var class=Ar>demand-dial</var> (also known as <code class=Fl>-auto</code>) mode link is available, only the first link is made active when <code class=Nm>ppp</code> first reads data from the tun device. The next <var class=Ar>demand-dial</var> link will be opened only when the current bundle throughput is at least <var class=Ar>max-percent</var> percent of the total bundle bandwidth for <var class=Ar>period</var> seconds. When the current bundle throughput decreases to <var class=Ar>min-percent</var> percent or less of the total bundle bandwidth for <var class=Ar>period</var> seconds, a <var class=Ar>demand-dial</var> link will be brought down as long as it is not the last active link. <p class=Pp>Bundle throughput is measured as the maximum of inbound and outbound traffic.</p><p class=Pp>The default values cause <var class=Ar>demand-dial</var> links to simply come up one at a time.</p><p class=Pp>Certain devices cannot determine their physical bandwidth, so it is sometimes necessary to use the “set bandwidth” command (described below) to make “set autoload” work correctly.</p></dd><dt>set bandwidth <var class=Ar>value</var></dt><dd>This command sets the connection bandwidth in bits per second. <var class=Ar>value</var> must be greater than zero. It is currently only used by the “set autoload” command above.</dd><dt>set callback <var class=Ar>option</var><span class=No>...</span></dt><dd>If no arguments are given, callback is disabled, otherwise, <code class=Nm>ppp</code> will request (or in <code class=Fl>-direct</code> mode, will accept) one of the given <var class=Ar>option</var><span class=No>s</span>. In client mode, if an <var class=Ar>option</var> is NAK'd <code class=Nm>ppp</code> will request a different <var class=Ar>option</var>, until no options remain at which point <code class=Nm>ppp</code> will terminate negotiations (unless “none” is one of the specified <var class=Ar>option</var>). In server mode, <code class=Nm>ppp</code> will accept any of the given protocols - but the client <i class=Em>must</i> request one of them. If you wish callback to be optional, you must {include} <var class=Ar>none</var> as an option. <p class=Pp>The <var class=Ar>option</var><span class=No>s</span> are as follows (in this order of preference):</p><dl class=Bl-tag><dt>auth</dt><dd>The callee is expected to decide the callback number based on authentication. If <code class=Nm>ppp</code> is the callee, the number should be specified as the fifth field of the peers entry in <span class=Pa>/etc/ppp/ppp.secret</span>.</dd><dt>cbcp</dt><dd>Microsoft's callback control protocol is used. See “set cbcp” below. <p class=Pp>If you wish to negotiate <var class=Ar>cbcp</var> in client mode but also wish to allow the server to request no callback at CBCP negotiation time, you must specify both <var class=Ar>cbcp</var> and <var class=Ar>none</var> as callback options.</p></dd><dt>E.164 *|<var class=Ar>number</var>[,<var class=Ar>number</var>]<span class=No>...</span></dt><dd>The caller specifies the <var class=Ar>number</var>. If <code class=Nm>ppp</code> is the callee, <var class=Ar>number</var> should be either a comma separated list of allowable numbers or a “*”, meaning any number is permitted. If <code class=Nm>ppp</code> is the caller, only a single number should be specified. <p class=Pp>Note, this option is very unsafe when used with a “*” as a malicious caller can tell <code class=Nm>ppp</code> to call any (possibly international) number without first authenticating themselves.</p></dd><dt>none</dt><dd>If the peer does not wish to do callback at all, <code class=Nm>ppp</code> will accept the fact and continue without callback rather than terminating the connection. This is required (in addition to one or more other callback options) if you wish callback to be optional.</dd></dl></dd><dt>set cbcp [<span class=No>*|</span><var class=Ar>number</var>[,<var class=Ar>number</var>...] [<var class=Ar>delay</var> [<var class=Ar>retry</var>]]]</dt><dd>If no arguments are given, CBCP (Microsoft's CallBack Control Protocol) is disabled - ie, configuring CBCP in the “set callback” command will result in <code class=Nm>ppp</code> requesting no callback in the CBCP phase. Otherwise, <code class=Nm>ppp</code> attempts to use the given phone <var class=Ar>number</var><span class=No>(s).</span><p class=Pp>In server mode (<code class=Fl>-direct</code>), <code class=Nm>ppp</code> will insist that the client uses one of these numbers, unless “*” is used in which case the client is expected to specify the number.</p><p class=Pp>In client mode, <code class=Nm>ppp</code> will attempt to use one of the given numbers (whichever it finds to be agreeable with the peer), or if “*” is specified, <code class=Nm>ppp</code> will expect the peer to specify the number.</p></dd><dt>set cd [<span class=No>off|</span><var class=Ar>seconds</var>[!]]</dt><dd>Normally, <code class=Nm>ppp</code> checks for the existence of carrier depending on the type of device that has been opened: <div class=Bd-indent><dl class=Bl-tag><dt>Terminal Devices</dt><dd>Carrier is checked one second after the login script is complete. If it is not set, <code class=Nm>ppp</code> assumes that this is because the device does not support carrier (which is true for most “laplink” NULL-modem cables), logs the fact and stops checking for carrier. <p class=Pp>As ptys do not support the TIOCMGET ioctl, the tty device will switch all carrier detection off when it detects that the device is a pty.</p></dd><dt>PPPoE (netgraph) Devices</dt><dd>Carrier is checked once per second for 5 seconds. If it is not set after the fifth second, the connection attempt is considered to have failed and the device is closed. Carrier is always required for PPPoE devices.</dd></dl></div><p class=Pp>All other device types do not support carrier. Setting a carrier value will result in a warning when the device is opened.</p><p class=Pp>Some modems take more than one second after connecting to assert the carrier signal. If this delay is not increased, this will result in <code class=Nm>ppp</code><span class=No>'s</span> inability to detect when the link is dropped, as <code class=Nm>ppp</code> assumes that the device is not asserting carrier.</p><p class=Pp>The “set cd” command overrides the default carrier behaviour. <var class=Ar>seconds</var> specifies the maximum number of seconds that <code class=Nm>ppp</code> should wait after the dial script has finished before deciding if carrier is available or not.</p><p class=Pp>If “off” is specified, <code class=Nm>ppp</code> will not check for carrier on the device, otherwise <code class=Nm>ppp</code> will not proceed to the login script until either carrier is detected or until <var class=Ar>seconds</var> has elapsed, at which point <code class=Nm>ppp</code> assumes that the device will not set carrier.</p><p class=Pp>If no arguments are given, carrier settings will go back to their default values.</p><p class=Pp>If <var class=Ar>seconds</var> is followed immediately by an exclamation mark (“!”), <code class=Nm>ppp</code> will <i class=Em>require</i> carrier. If carrier is not detected after <var class=Ar>seconds</var> seconds, the link will be disconnected.</p></dd><dt>set choked [<var class=Ar>timeout</var>]</dt><dd>This sets the number of seconds that <code class=Nm>ppp</code> will keep a choked output queue before dropping all pending output packets. If <var class=Ar>timeout</var> is less than or equal to zero or if <var class=Ar>timeout</var> is not specified, it is set to the default value of <i class=Em>120 seconds</i>. <p class=Pp>A choked output queue occurs when <code class=Nm>ppp</code> has read a certain number of packets from the local network for transmission, but cannot send the data due to link failure (the peer is busy etc.). <code class=Nm>ppp</code> will not read packets indefinitely. Instead, it reads up to <i class=Em>30</i> packets (or <i class=Em>30</i><span class=No>+</span><i class=Em>nlinks</i><span class=No>*</span><i class=Em>2</i> packets in multi-link mode), then stops reading the network interface until either <var class=Ar>timeout</var> seconds have passed or at least one packet has been sent.</p><p class=Pp>If <var class=Ar>timeout</var> seconds pass, all pending output packets are dropped.</p></dd><dt>set ctsrts|crtscts on|off</dt><dd>This sets hardware flow control. Hardware flow control is <var class=Ar>on</var> by default.</dd><dt>set deflate <var class=Ar>out-winsize</var> [<var class=Ar>in-winsize</var>]</dt><dd>This sets the DEFLATE algorithms default outgoing and incoming window sizes. Both <var class=Ar>out-winsize</var> and <var class=Ar>in-winsize</var> must be values between <i class=Em>8</i> and <i class=Em>15</i>. If <var class=Ar>in-winsize</var> is specified, <code class=Nm>ppp</code> will insist that this window size is used and will not accept any other values from the peer.</dd><dt>set dns [<var class=Ar>primary</var> [<var class=Ar>secondary</var>]]</dt><dd>This command specifies DNS overrides for the “accept dns” command. Refer to the “accept” command description above for details. This command does not affect the IP numbers requested using “enable dns”.</dd><dt>set device|line <var class=Ar>value</var><span class=No>...</span></dt><dd>This sets the device(s) to which <code class=Nm>ppp</code> will talk to the given “value”. <p class=Pp>All serial device names are expected to begin with <span class=Pa>/dev/</span>. Serial devices are usually called <span class=Pa>cuaXX</span>.</p><p class=Pp>If “value” does not begin with <span class=Pa>/dev/</span>, it must either begin with an exclamation mark (“!”), be of the format <span class=No>PPPoE:</span><var class=Ar>iface</var>[:<var class=Ar>provider</var>](on <a class=Xr href=netgraph.4.html>netgraph(4)</a> enabled systems), or be of the format <var class=Ar>host</var>:<var class=Ar>port</var>[/tcp|udp].</p><p class=Pp>If it begins with an exclamation mark, the rest of the device name is treated as a program name, and that program is executed when the device is opened. Standard input, output and error are fed back to <code class=Nm>ppp</code> and are read and written as if they were a regular device.</p><p class=Pp>If a <span class=No>PPPoE:</span><var class=Ar>iface</var>[:<var class=Ar>provider</var>]specification is given, <code class=Nm>ppp</code> will attempt to create a <i class=Em>PPP</i> over Ethernet connection using the given <var class=Ar>iface</var> interface by using <a class=Xr href=netgraph.4.html>netgraph(4)</a>. If <a class=Xr href=netgraph.4.html>netgraph(4)</a> is not available, <code class=Nm>ppp</code> will attempt to load it using <a class=Xr href=kldload.2.html>kldload(2)</a>. If this fails, an external program must be used such as the <a class=Xr href=pppoed.8.html>pppoed(8)</a> program available under <span class=Ux>OpenBSD</span>. The given <var class=Ar>provider</var> is passed as the service name in the PPPoE Discovery Initiation (PADI) packet. If no provider is given, an empty value will be used.</p><p class=Pp>When a PPPoE connection is established, <code class=Nm>ppp</code> will place the name of the Access Concentrator in the environment variable <code class=Ev>ACNAME</code>.</p><p class=Pp>Refer to <a class=Xr href=netgraph.4.html>netgraph(4)</a> and <a class=Xr href=ng_pppoe.4.html>ng_pppoe(4)</a> for further details.</p><p class=Pp>If a <var class=Ar>host</var>:<var class=Ar>port</var>[<span class=No>/tcp|udp</span>] specification is given, <code class=Nm>ppp</code> will attempt to connect to the given <var class=Ar>host</var> on the given <var class=Ar>port</var>. If a “/tcp” or “/udp” suffix is not provided, the default is “/tcp”. Refer to the section on <i class=Em>PPP OVER TCP and UDP</i> above for further details.</p><p class=Pp>If multiple “values” are specified, <code class=Nm>ppp</code> will attempt to open each one in turn until it succeeds or runs out of devices.</p></dd><dt>set dial <var class=Ar>chat-script</var></dt><dd>This specifies the chat script that will be used to dial the other side. See also the “set login” command below. Refer to <a class=Xr href=chat.8.html>chat(8)</a> and to the example configuration files for details of the chat script format. It is possible to specify some special ‘values’ in your chat script as follows: <dl class=Bl-tag><dt><a class=permalink href=#_ec><code class=Li id=_ec>\c</code></a></dt><dd>When used as the last character in a ‘send’ string, this indicates that a newline should not be appended.</dd><dt><a class=permalink href=#_ed><code class=Li id=_ed>\d</code></a></dt><dd>When the chat script encounters this sequence, it delays two seconds.</dd><dt><a class=permalink href=#_ep><code class=Li id=_ep>\p</code></a></dt><dd>When the chat script encounters this sequence, it delays for one quarter of a second.</dd><dt><a class=permalink href=#_en><code class=Li id=_en>\n</code></a></dt><dd>This is replaced with a newline character.</dd><dt><a class=permalink href=#_er><code class=Li id=_er>\r</code></a></dt><dd>This is replaced with a carriage return character.</dd><dt><a class=permalink href=#_es><code class=Li id=_es>\s</code></a></dt><dd>This is replaced with a space character.</dd><dt><a class=permalink href=#_et><code class=Li id=_et>\t</code></a></dt><dd>This is replaced with a tab character.</dd><dt><a class=permalink href=#_eT><code class=Li id=_eT>\T</code></a></dt><dd>This is replaced by the current phone number (see “set phone” below).</dd><dt><a class=permalink href=#_eP><code class=Li id=_eP>\P</code></a></dt><dd>This is replaced by the current <var class=Ar>authkey</var> value (see “set authkey” above).</dd><dt><a class=permalink href=#_eU><code class=Li id=_eU>\U</code></a></dt><dd>This is replaced by the current <var class=Ar>authname</var> value (see “set authname” above).</dd></dl><p class=Pp>Note that two parsers will examine these escape sequences, so in order to have the ‘chat parser’ see the escape character, it is necessary to escape it from the ‘command parser’. This means that in practice you should use two escapes, for example:</p><div class="Bd Pp Bd-indent"><pre>
set dial "... ATDT\\T CONNECT"
        </pre></div><p class=Pp>It is also possible to execute external commands from the chat script. To do this, the first character of the expect or send string is an exclamation mark (“!”). If a literal exclamation mark is required, double it up to “!!” and it will be treated as a single literal “!”. When the command is executed, standard input and standard output are directed to the open device (see the “set device” command), and standard error is read by <code class=Nm>ppp</code> and substituted as the expect or send string. If <code class=Nm>ppp</code> is running in interactive mode, file descriptor 3 is attached to <span class=Pa>/dev/tty</span>.</p><p class=Pp>For example (wrapped for readability):</p><div class="Bd Pp Bd-indent"><pre>
set login "TIMEOUT 5 \"\" \"\" login:--login: ppp \
word: ppp \"!sh \\-c \\\"echo \\-n label: &gt;&amp;2\\\"\" \
\"!/bin/echo in\" HELLO"
        </pre></div><p class=Pp>would result in the following chat sequence (output using the ‘set log local chat’ command before dialing):</p><div class="Bd Pp Bd-indent"><pre>
Dial attempt 1 of 1
dial OK!
Chat: Expecting:
Chat: Sending:
Chat: Expecting: login:--login:
Chat: Wait for (5): login:
Chat: Sending: ppp
Chat: Expecting: word:
Chat: Wait for (5): word:
Chat: Sending: ppp
Chat: Expecting: !sh \-c "echo \-n label: &gt;&amp;2"
Chat: Exec: sh -c "echo -n label: &gt;&amp;2"
Chat: Wait for (5): !sh \-c "echo \-n label: &gt;&amp;2" --&gt; label:
Chat: Exec: /bin/echo in
Chat: Sending:
Chat: Expecting: HELLO
Chat: Wait for (5): HELLO
login OK!
        </pre></div><p class=Pp>Note (again) the use of the escape character, allowing many levels of nesting. Here, there are four parsers at work. The first parses the original line, reading it as three arguments. The second parses the third argument, reading it as 11 arguments. At this point, it is important that the “-” signs are escaped, otherwise this parser will see them as constituting an expect-send-expect sequence. When the “!” character is seen, the execution parser reads the first command as three arguments, and then <a class=Xr href=sh.1.html>sh(1)</a> itself expands the argument after the <code class=Fl>-c</code>. As we wish to send the output back to the modem, in the first example we redirect our output to file descriptor 2 (stderr) so that <code class=Nm>ppp</code> itself sends and logs it, and in the second example, we just output to stdout, which is attached directly to the modem.</p><p class=Pp>This, of course means that it is possible to execute an entirely external “chat” command rather than using the internal one. See <a class=Xr href=chat.8.html>chat(8)</a> for a good alternative.</p><p class=Pp>The external command that is executed is subjected to the same special word expansions as the “!bg” command.</p></dd><dt>set enddisc [label|IP|MAC|magic|psn value]</dt><dd>This command sets our local endpoint discriminator. If set prior to LCP negotiation, and if no “disable enddisc” command has been used, <code class=Nm>ppp</code> will send the information to the peer using the LCP endpoint discriminator option. The following discriminators may be set: <dl class=Bl-tag><dt><a class=permalink href=#label><code class=Li id=label>label</code></a></dt><dd>The current label is used.</dd><dt><a class=permalink href=#IP><code class=Li id=IP>IP</code></a></dt><dd>Our local IP number is used. As LCP is negotiated prior to IPCP, it is possible that the IPCP layer will subsequently change this value. If it does, the endpoint discriminator stays at the old value unless manually reset.</dd><dt><a class=permalink href=#MAC><code class=Li id=MAC>MAC</code></a></dt><dd>This is similar to the <var class=Ar>IP</var> option above, except that the MAC address associated with the local IP number is used. If the local IP number is not resident on any Ethernet interface, the command will fail. <p class=Pp>As the local IP number defaults to whatever the machine host name is, “set enddisc mac” is usually done prior to any “set ifaddr” commands.</p></dd><dt><a class=permalink href=#magic><code class=Li id=magic>magic</code></a></dt><dd>A 20 digit random number is used. Care should be taken when using magic numbers as restarting <code class=Nm>ppp</code> or creating a link using a different <code class=Nm>ppp</code> invocation will also use a different magic number and will therefore not be recognised by the peer as belonging to the same bundle. This makes it unsuitable for <code class=Fl>-direct</code> connections.</dd><dt><a class=permalink href=#psn><code class=Li id=psn>psn</code></a><var class=Ar>value</var></dt><dd>The given <var class=Ar>value</var> is used. <var class=Ar>Value</var> should be set to an absolute public switched network number with the country code first.</dd></dl><p class=Pp>If no arguments are given, the endpoint discriminator is reset.</p></dd><dt>set escape <var class=Ar>value...</var></dt><dd>This option is similar to the “set accmap” option above. It allows the user to specify a set of characters that will be ‘escaped’ as they travel across the link.</dd><dt>set filter dial|alive|in|out <var class=Ar>rule-no</var><span class=No>permit|deny|clear|</span><var class=Ar>rule-no</var> [!] [[host] <var class=Ar>src_addr</var>[/<var class=Ar>width</var>] [<var class=Ar>dst_addr</var>[/<var class=Ar>width</var>]]] [<var class=Ar>proto</var> [src lt|eq|gt <var class=Ar>port</var>] [dst lt|eq|gt <var class=Ar>port</var>] [estab] [syn] [finrst] [timeout <var class=Ar>secs</var>]]</dt><dd><code class=Nm>ppp</code> supports four filter sets. The <i class=Em>alive</i> filter specifies packets that keep the connection alive - resetting the idle timer. The <i class=Em>dial</i> filter specifies packets that cause <code class=Nm>ppp</code> to dial when in <code class=Fl>-auto</code> mode. The <i class=Em>in</i> filter specifies packets that are allowed to travel into the machine and the <i class=Em>out</i> filter specifies packets that are allowed out of the machine. <p class=Pp>Filtering is done prior to any IP alterations that might be done by the NAT engine on outgoing packets and after any IP alterations that might be done by the NAT engine on incoming packets. By default all empty filter sets allow all packets to pass. Rules are processed in order according to <var class=Ar>rule-no</var> (unless skipped by specifying a rule number as the <var class=Ar>action</var>). Up to 40 rules may be given for each set. If a packet does not match any of the rules in a given set, it is discarded. In the case of <i class=Em>in</i> and <i class=Em>out</i> filters, this means that the packet is dropped. In the case of <i class=Em>alive</i> filters it means that the packet will not reset the idle timer (even if the <var class=Ar>in</var><span class=No>/</span><var class=Ar>out</var> filter has a “timeout” value) and in the case of <i class=Em>dial</i> filters it means that the packet will not trigger a dial. A packet failing to trigger a dial will be dropped rather than queued. Refer to the section on <a class=Sx href=#PACKET_FILTERING>PACKET FILTERING</a> above for further details.</p></dd><dt>set hangup <var class=Ar>chat-script</var></dt><dd>This specifies the chat script that will be used to reset the device before it is closed. It should not normally be necessary, but can be used for devices that fail to reset themselves properly on close.</dd><dt>set help|? [<var class=Ar>command</var>]</dt><dd>This command gives a summary of available set commands, or if <var class=Ar>command</var> is specified, the command usage is shown.</dd><dt>set ifaddr [<var class=Ar>myaddr</var>[/<var class=Ar>nn</var>] [<var class=Ar>hisaddr</var>[/<var class=Ar>nn</var>] [<var class=Ar>netmask</var> [<var class=Ar>triggeraddr</var>]]]]</dt><dd>This command specifies the IP addresses that will be used during IPCP negotiation. Addresses are specified using the format <p class=Pp></p><div class="Bd Bd-indent"><code class=Li>a.b.c.d/nn</code></div><p class=Pp>Where “a.b.c.d” is the preferred IP, but <var class=Ar>nn</var> specifies how many bits of the address we will insist on. If <span class=No>/</span><var class=Ar>nn</var> is omitted, it defaults to “/32” unless the IP address is 0.0.0.0 in which case it defaults to “/0”.</p><p class=Pp>If you wish to assign a dynamic IP number to the peer, <var class=Ar>hisaddr</var> may also be specified as a range of IP numbers in the format</p><div class="Bd Pp Bd-indent"><var class=Ar>IP</var>[-<var class=Ar>IP</var>][,<var class=Ar>IP</var>[-<var class=Ar>IP</var>]]...</div><p class=Pp>for example:</p><p class=Pp></p><div class="Bd Bd-indent"><code class=Li>set ifaddr 10.0.0.1 10.0.1.2-10.0.1.10,10.0.1.20</code></div><p class=Pp>will only negotiate “10.0.0.1” as the local IP number, but may assign any of the given 10 IP numbers to the peer. If the peer requests one of these numbers, and that number is not already in use, <code class=Nm>ppp</code> will grant the peers request. This is useful if the peer wants to re-establish a link using the same IP number as was previously allocated (thus maintaining any existing tcp or udp connections).</p><p class=Pp>If the peer requests an IP number that is either outside of this range or is already in use, <code class=Nm>ppp</code> will suggest a random unused IP number from the range.</p><p class=Pp>If <var class=Ar>triggeraddr</var> is specified, it is used in place of <var class=Ar>myaddr</var> in the initial IPCP negotiation. However, only an address in the <var class=Ar>myaddr</var> range will be accepted. This is useful when negotiating with some <code class=Dv>PPP</code> implementations that will not assign an IP number unless their peer requests “0.0.0.0”.</p><p class=Pp>It should be noted that in <code class=Fl>-auto</code> mode, <code class=Nm>ppp</code> will configure the interface immediately upon reading the “set ifaddr” line in the config file. In any other mode, these values are just used for IPCP negotiations, and the interface is not configured until the IPCP layer is up.</p><p class=Pp>Note that the <var class=Ar>HISADDR</var> argument may be overridden by the third field in the <span class=Pa>ppp.secret</span> file once the client has authenticated itself (if PAP or CHAP are “enabled”). Refer to the <a class=Sx href=#AUTHENTICATING_INCOMING_CONNECTIONS>AUTHENTICATING INCOMING CONNECTIONS</a> section for details.</p><p class=Pp>In all cases, if the interface is already configured, <code class=Nm>ppp</code> will try to maintain the interface IP numbers so that any existing bound sockets will remain valid.</p></dd><dt>set ifqueue <var class=Ar>packets</var></dt><dd>Set the maximum number of packets that <code class=Nm>ppp</code> will read from the tunnel interface while data cannot be sent to any of the available links. This queue limit is necessary to flow control outgoing data as the tunnel interface is likely to be far faster than the combined links available to <code class=Nm>ppp</code>. <p class=Pp>If <var class=Ar>packets</var> is set to a value less than the number of links, <code class=Nm>ppp</code> will read up to that value regardless. This prevents any possible latency problems.</p><p class=Pp>The default value for <var class=Ar>packets</var> is “30”.</p></dd><dt>set ccpretry|ccpretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var> [<var class=Ar>trmtries</var>]]]</dt><dd style="width: auto;"> </dd><dt>set chapretry|chapretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var>]]</dt><dd style="width: auto;"> </dd><dt>set ipcpretry|ipcpretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var> [<var class=Ar>trmtries</var>]]]</dt><dd style="width: auto;"> </dd><dt>set ipv6cpretry|ipv6cpretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var> [<var class=Ar>trmtries</var>]]]</dt><dd style="width: auto;"> </dd><dt>set lcpretry|lcpretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var> [<var class=Ar>trmtries</var>]]]</dt><dd style="width: auto;"> </dd><dt>set papretry|papretries [<var class=Ar>timeout</var> [<var class=Ar>reqtries</var>]]</dt><dd>These commands set the number of seconds that <code class=Nm>ppp</code> will wait before resending Finite State Machine (FSM) Request packets. The default <var class=Ar>timeout</var> for all FSMs is 3 seconds (which should suffice in most cases). <p class=Pp>If <var class=Ar>reqtries</var> is specified, it tells <code class=Nm>ppp</code> how many configuration request attempts it should make while receiving no reply from the peer before giving up. The default is 5 attempts for CCP, LCP and IPCP and 3 attempts for PAP and CHAP.</p><p class=Pp>If <var class=Ar>trmtries</var> is specified, it tells <code class=Nm>ppp</code> how many terminate requests should be sent before giving up waiting for the peers response. The default is 3 attempts. Authentication protocols are not terminated and it is therefore invalid to specify <var class=Ar>trmtries</var> for PAP or CHAP.</p><p class=Pp>In order to avoid negotiations with the peer that will never converge, <code class=Nm>ppp</code> will only send at most 3 times the configured number of <var class=Ar>reqtries</var> in any given negotiation session before giving up and closing that layer.</p></dd><dt>set log [local] [+|-]<var class=Ar>value</var><span class=No>...</span></dt><dd>This command allows the adjustment of the current log level. Refer to the Logging Facility section for further details.</dd><dt>set login <var class=Ar>chat-script</var></dt><dd>This <var class=Ar>chat-script</var> compliments the dial-script. If both are specified, the login script will be executed after the dial script. Escape sequences available in the dial script are also available here.</dd><dt>set logout <var class=Ar>chat-script</var></dt><dd>This specifies the chat script that will be used to logout before the hangup script is called. It should not normally be necessary.</dd><dt>set lqrperiod|echoperiod <var class=Ar>frequency</var></dt><dd>This command sets the <var class=Ar>frequency</var> in seconds at which <i class=Em>LQR</i> or <i class=Em>LCP ECHO</i> packets are sent. The default is 30 seconds. You must also use the “enable lqr” and/or “enable echo” commands if you wish to send <i class=Em>LQR</i> or <i class=Em>LCP ECHO</i> requests to the peer.</dd><dt>set mode <var class=Ar>interactive|auto|ddial|background</var></dt><dd>This command allows you to change the ‘mode’ of the specified link. This is normally only useful in multi-link mode, but may also be used in uni-link mode. <p class=Pp>It is not possible to change a link that is ‘direct’ or ‘dedicated’.</p><p class=Pp>Note: If you issue the command “set mode auto”, and have network address translation enabled, it may be useful to “enable iface-alias” afterwards. This will allow <code class=Nm>ppp</code> to do the necessary address translations to enable the process that triggers the connection to connect once the link is up despite the peer assigning us a new (dynamic) IP address.</p></dd><dt>set mppe [40|56|128|* [stateless|stateful|*]]</dt><dd>This option selects the encryption parameters used when negotiation MPPE. MPPE can be disabled entirely with the “disable mppe” command. If no arguments are given, <code class=Nm>ppp</code> will attempt to negotiate a stateful link with a 128 bit key, but will agree to whatever the peer requests (including no encryption at all). <p class=Pp>If any arguments are given, <code class=Nm>ppp</code> will <i class=Em>insist</i> on using MPPE and will close the link if it is rejected by the peer (Note; this behaviour can be overridden by a configured RADIUS server).</p><p class=Pp>The first argument specifies the number of bits that <code class=Nm>ppp</code> should insist on during negotiations and the second specifies whether <code class=Nm>ppp</code> should insist on stateful or stateless mode. In stateless mode, the encryption dictionary is re-initialised with every packet according to an encryption key that is changed with every packet. In stateful mode, the encryption dictionary is re-initialised every 256 packets or after the loss of any data and the key is changed every 256 packets. Stateless mode is less efficient but is better for unreliable transport layers.</p></dd><dt>set mrru [<var class=Ar>value</var>]</dt><dd>Setting this option enables Multi-link PPP negotiations, also known as Multi-link Protocol or MP. There is no default MRRU (Maximum Reconstructed Receive Unit) value. If no argument is given, multi-link mode is disabled.</dd><dt>set mru [max[imum]] [<var class=Ar>value</var>]</dt><dd>The default MRU (Maximum Receive Unit) is 1500. If it is increased, the other side *may* increase its MTU. In theory there is no point in decreasing the MRU to below the default as the <i class=Em>PPP</i> protocol says implementations *must* be able to accept packets of at least 1500 octets. <p class=Pp>If the “maximum” keyword is used, <code class=Nm>ppp</code> will refuse to negotiate a higher value. The maximum MRU can be set to 2048 at most. Setting a maximum of less than 1500 violates the <i class=Em>PPP</i> rfc, but may sometimes be necessary. For example, <i class=Em>PPPoE</i> imposes a maximum of 1492 due to hardware limitations.</p><p class=Pp>If no argument is given, 1500 is assumed. A value must be given when “maximum” is specified.</p></dd><dt>set mtu [max[imum]] [<var class=Ar>value</var>]</dt><dd>The default MTU is 1500. At negotiation time, <code class=Nm>ppp</code> will accept whatever MRU the peer requests (assuming it is not less than 296 bytes or greater than the assigned maximum). If the MTU is set, <code class=Nm>ppp</code> will not accept MRU values less than <var class=Ar>value</var>. When negotiations are complete, the MTU is used when writing to the interface, even if the peer requested a higher value MRU. This can be useful for limiting your packet size (giving better bandwidth sharing at the expense of more header data). <p class=Pp>If the “maximum” keyword is used, <code class=Nm>ppp</code> will refuse to negotiate a higher value. The maximum MTU can be set to 2048 at most. Note, it is necessary to use the “maximum” keyword to limit the MTU when using PPPoE.</p><p class=Pp>If no <var class=Ar>value</var> is given, 1500, or whatever the peer asks for is used. A value must be given when “maximum” is specified.</p></dd><dt>set nbns [<var class=Ar>x.x.x.x</var> [<var class=Ar>y.y.y.y</var>]]</dt><dd>This option allows the setting of the Microsoft NetBIOS name server values to be returned at the peers request. If no values are given, <code class=Nm>ppp</code> will reject any such requests.</dd><dt>set openmode active|passive [<var class=Ar>delay</var>]</dt><dd>By default, <var class=Ar>openmode</var> is always <var class=Ar>active</var> with a one second <var class=Ar>delay</var>. That is, <code class=Nm>ppp</code> will always initiate LCP/IPCP/CCP negotiation one second after the line comes up. If you want to wait for the peer to initiate negotiations, you can use the value <var class=Ar>passive</var>. If you want to initiate negotiations immediately or after more than one second, the appropriate <var class=Ar>delay</var> may be specified here in seconds.</dd><dt>set parity odd|even|none|mark</dt><dd>This allows the line parity to be set. The default value is <var class=Ar>none</var>.</dd><dt>set phone <var class=Ar>telno</var>[|<var class=Ar>backupnumber</var>]...[:<var class=Ar>nextnumber</var>]...</dt><dd>This allows the specification of the phone number to be used in place of the \\T string in the dial and login chat scripts. Multiple phone numbers may be given separated either by a pipe (“|”) or a colon (“:”). <p class=Pp>Numbers after the pipe are only dialed if the dial or login script for the previous number failed.</p><p class=Pp>Numbers after the colon are tried sequentially, irrespective of the reason the line was dropped.</p><p class=Pp>If multiple numbers are given, <code class=Nm>ppp</code> will dial them according to these rules until a connection is made, retrying the maximum number of times specified by “set redial” below. In <code class=Fl>-background</code> mode, each number is attempted at most once.</p></dd><dt>set pppoe [standard|3Com]</dt><dd>This option configures the underlying <a class=Xr href=ng_pppoe.4.html>ng_pppoe(4)</a> node to either standard RFC2516 PPPoE or proprietary 3Com mode. If not set the system default will be used.</dd><dt>set [proc]<span class=No>title</span> [<var class=Ar>value</var>]</dt><dd>The current process title as displayed by <a class=Xr href=ps.1.html>ps(1)</a> is changed according to <var class=Ar>value</var>. If <var class=Ar>value</var> is not specified, the original process title is restored. All the word replacements done by the shell commands (see the “bg” command above) are done here too. <p class=Pp>Note, if USER is required in the process title, the “set proctitle” command must appear in <span class=Pa>ppp.linkup</span>, as it is not known when the commands in <span class=Pa>ppp.conf</span> are executed.</p></dd><dt>set radius [<var class=Ar>config-file</var>]</dt><dd>This command enables RADIUS support (if it is compiled in). <var class=Ar>config-file</var> refers to the radius client configuration file as described in <a class=Xr href=radius.conf.5.html>radius.conf(5)</a>. If PAP, CHAP, MSCHAP or MSCHAPv2 are “enable<span class=No>d</span>”, <code class=Nm>ppp</code> behaves as a <i class=Em>N</i><span class=No>etwork</span><i class=Em>A</i><span class=No>ccess</span><i class=Em>S</i><span class=No>erver</span> and uses the configured RADIUS server to authenticate rather than authenticating from the <span class=Pa>ppp.secret</span> file or from the passwd database. <p class=Pp>If none of PAP, CHAP, MSCHAP or MSCHAPv2 are enabled, “set radius” will do nothing.</p><p class=Pp><code class=Nm>ppp</code> uses the following attributes from the RADIUS reply:</p><div class=Bd-indent><dl class=Bl-tag><dt>RAD_FRAMED_IP_ADDRESS</dt><dd>The peer IP address is set to the given value.</dd><dt>RAD_FRAMED_IP_NETMASK</dt><dd>The tun interface netmask is set to the given value.</dd><dt>RAD_FRAMED_MTU</dt><dd>If the given MTU is less than the peers MRU as agreed during LCP negotiation, *and* it is less that any configured MTU (see the “set mru” command), the tun interface MTU is set to the given value.</dd><dt>RAD_FRAMED_COMPRESSION</dt><dd>If the received compression type is “1”, <code class=Nm>ppp</code> will request VJ compression during IPCP negotiations despite any “disable vj” configuration command.</dd><dt>RAD_FILTER_ID</dt><dd>If this attribute is supplied, <code class=Nm>ppp</code> will attempt to use it as an additional label to load from the <span class=Pa>ppp.linkup</span> and <span class=Pa>ppp.linkdown</span> files. The load will be attempted before (and in addition to) the normal label search. If the label does not exist, no action is taken and <code class=Nm>ppp</code> proceeds to the normal load using the current label.</dd><dt>RAD_FRAMED_ROUTE</dt><dd>The received string is expected to be in the format <var class=Ar>dest</var>[/<var class=Ar>bits</var>] <var class=Ar>gw</var> [<var class=Ar>metrics</var>]. Any specified metrics are ignored. <code class=Dv>MYADDR</code> and <code class=Dv>HISADDR</code> are understood as valid values for <var class=Ar>dest</var> and <var class=Ar>gw</var>, “default” can be used for <var class=Ar>dest</var> to specify the default route, and “0.0.0.0” is understood to be the same as “default” for <var class=Ar>dest</var> and <code class=Dv>HISADDR</code> for <var class=Ar>gw</var>. <p class=Pp>For example, a returned value of “1.2.3.4/24 0.0.0.0 1 2 -1 3 400” would result in a routing table entry to the 1.2.3.0/24 network via <code class=Dv>HISADDR</code> and a returned value of “0.0.0.0 0.0.0.0” or “default HISADDR” would result in a default route to <code class=Dv>HISADDR</code>.</p><p class=Pp>All RADIUS routes are applied after any sticky routes are applied, making RADIUS routes override configured routes. This also applies for RADIUS routes that do not {include} the <code class=Dv>MYADDR</code> or <code class=Dv>HISADDR</code> keywords.</p></dd><dt>RAD_FRAMED_IPV6_PREFIX</dt><dd>If this attribute is supplied, the value is substituted for IPV6PREFIX in a command. You may pass it to an upper layer protocol such as DHCPv6 for delegating an IPv6 prefix to a peer.</dd><dt>RAD_FRAMED_IPV6_ROUTE</dt><dd>The received string is expected to be in the format <var class=Ar>dest</var>[/<var class=Ar>bits</var>] <var class=Ar>gw</var> [<var class=Ar>metrics</var>]. Any specified metrics are ignored. <code class=Dv>MYADDR6</code> and <code class=Dv>HISADDR6</code> are understood as valid values for <var class=Ar>dest</var> and <var class=Ar>gw</var>, “default” can be used for <var class=Ar>dest</var> to specify the default route, and “::” is understood to be the same as “default” for <var class=Ar>dest</var> and <code class=Dv>HISADDR6</code> for <var class=Ar>gw</var>. <p class=Pp>For example, a returned value of “3ffe:505:abcd::/48 ::” would result in a routing table entry to the 3ffe:505:abcd::/48 network via <code class=Dv>HISADDR6</code> and a returned value of “:: ::” or “default HISADDR6” would result in a default route to <code class=Dv>HISADDR6</code>.</p><p class=Pp>All RADIUS IPv6 routes are applied after any sticky routes are applied, making RADIUS IPv6 routes override configured routes. This also applies for RADIUS IPv6 routes that do not {include} the <code class=Dv>MYADDR6</code> or <code class=Dv>HISADDR6</code> keywords.</p></dd><dt>RAD_SESSION_TIMEOUT</dt><dd>If supplied, the client connection is closed after the given number of seconds.</dd><dt>RAD_REPLY_MESSAGE</dt><dd>If supplied, this message is passed back to the peer as the authentication SUCCESS text.</dd><dt>RAD_MICROSOFT_MS_CHAP_ERROR</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied, it is passed back to the peer as the authentication FAILURE text.</dd><dt>RAD_MICROSOFT_MS_CHAP2_SUCCESS</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied and if MS-CHAPv2 authentication is being used, it is passed back to the peer as the authentication SUCCESS text.</dd><dt>RAD_MICROSOFT_MS_MPPE_ENCRYPTION_POLICY</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied and has a value of 2 (Required), <code class=Nm>ppp</code> will insist that MPPE encryption is used (even if no “set mppe” configuration command has been given with arguments). If it is supplied with a value of 1 (Allowed), encryption is made optional (despite any “set mppe” configuration commands with arguments).</dd><dt>RAD_MICROSOFT_MS_MPPE_ENCRYPTION_TYPES</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied, bits 1 and 2 are examined. If either or both are set, 40 bit and/or 128 bit (respectively) encryption options are set, overriding any given first argument to the “set mppe” command. Note, it is not currently possible for the RADIUS server to specify 56 bit encryption.</dd><dt>RAD_MICROSOFT_MS_MPPE_RECV_KEY</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied, it is value is used as the master key for decryption of incoming data. When clients are authenticated using MSCHAPv2, the RADIUS server MUST provide this attribute if inbound MPPE is to function.</dd><dt>RAD_MICROSOFT_MS_MPPE_SEND_KEY</dt><dd>If this <code class=Dv>RAD_VENDOR_MICROSOFT</code> vendor specific attribute is supplied, it is value is used as the master key for encryption of outgoing data. When clients are authenticated using MSCHAPv2, the RADIUS server MUST provide this attribute if outbound MPPE is to function.</dd></dl></div><p class=Pp>Values received from the RADIUS server may be viewed using “show bundle”.</p></dd><dt>set rad_alive <var class=Ar>timeout</var></dt><dd>When RADIUS is configured, setting “rad_alive” to a non-zero <var class=Ar>timeout</var> value will tell <code class=Nm>ppp</code> to sent RADIUS accounting information to the RADIUS server every <var class=Ar>timeout</var> seconds.</dd><dt>set rad_port_id <var class=Ar>option</var></dt><dd>When RADIUS is configured, setting the “rad_port_id” value specifies what should be sent to the RADIUS server as NAS-Port-Id. The <var class=Ar>option</var><span class=No>s</span> are as follows: <dl class=Bl-tag><dt>pid</dt><dd>PID of the corresponding tunnel.</dd><dt>tunnum</dt><dd><a class=Xr href=tun.4.html>tun(4)</a> interface number.</dd><dt>ifnum</dt><dd>index of the interface as returned by <a class=Xr href=if_nametoindex.3.html>if_nametoindex(3)</a>.</dd><dt>default</dt><dd>keeps the default behavior.</dd></dl></dd><dt>set reconnect <var class=Ar>timeout ntries</var></dt><dd>Should the line drop unexpectedly (due to loss of CD or LQR failure), a connection will be re-established after the given <var class=Ar>timeout</var>. The line will be re-connected at most <var class=Ar>ntries</var> times. <var class=Ar>Ntries</var> defaults to zero. A value of <var class=Ar>random</var> for <var class=Ar>timeout</var> will result in a variable pause, somewhere between 1 and 30 seconds.</dd><dt>set recvpipe [<var class=Ar>value</var>]</dt><dd>This sets the routing table RECVPIPE value. The optimum value is just over twice the MTU value. If <var class=Ar>value</var> is unspecified or zero, the default kernel controlled value is used.</dd><dt>set redial <var class=Ar>secs</var>[+<var class=Ar>inc</var>[-<var class=Ar>max</var>]][.<var class=Ar>next</var>] [<var class=Ar>attempts</var>]</dt><dd><code class=Nm>ppp</code> can be instructed to attempt to redial <var class=Ar>attempts</var> times. If more than one phone number is specified (see “set phone” above), a pause of <var class=Ar>next</var> is taken before dialing each number. A pause of <var class=Ar>secs</var> is taken before starting at the first number again. A literal value of “<code class=Li>random</code>” may be used here in place of <var class=Ar>secs</var> and <var class=Ar>next</var>, causing a random delay of between 1 and 30 seconds. <p class=Pp>If <var class=Ar>inc</var> is specified, its value is added onto <var class=Ar>secs</var> each time <code class=Nm>ppp</code> tries a new number. <var class=Ar>secs</var> will only be incremented at most <var class=Ar>max</var> times. <var class=Ar>max</var> defaults to 10.</p><p class=Pp>Note, the <var class=Ar>secs</var> delay will be effective, even after <var class=Ar>attempts</var> has been exceeded, so an immediate manual dial may appear to have done nothing. If an immediate dial is required, a “!” should immediately follow the “open” keyword. See the “open” description above for further details.</p></dd><dt>set sendpipe [<var class=Ar>value</var>]</dt><dd>This sets the routing table SENDPIPE value. The optimum value is just over twice the MTU value. If <var class=Ar>value</var> is unspecified or zero, the default kernel controlled value is used.</dd><dt>set server|socket <var class=Ar>TcpPort</var><span class=No>|</span><var class=Ar>LocalName</var><span class=No>|none|open|closed</span> [password [<var class=Ar>mask</var>]]</dt><dd>This command tells <code class=Nm>ppp</code> to listen on the given socket or ‘diagnostic port’ for incoming command connections. <p class=Pp>The word “none” instructs <code class=Nm>ppp</code> to close any existing socket and clear the socket configuration. The word “open” instructs <code class=Nm>ppp</code> to attempt to re-open the port. The word “closed” instructs <code class=Nm>ppp</code> to close the open port.</p><p class=Pp>If you wish to specify a local domain socket, <var class=Ar>LocalName</var> must be specified as an absolute file name, otherwise it is assumed to be the name or number of a TCP port. You may specify the octal umask to be used with a local domain socket. Refer to <a class=Xr href=umask.2.html>umask(2)</a> for umask details. Refer to <a class=Xr href=services.5.html>services(5)</a> for details of how to translate TCP port names.</p><p class=Pp>You must also specify the password that must be entered by the client (using the “passwd” variable above) when connecting to this socket. If the password is specified as an empty string, no password is required for connecting clients.</p><p class=Pp>When specifying a local domain socket, the first “%d” sequence found in the socket name will be replaced with the current interface unit number. This is useful when you wish to use the same profile for more than one connection.</p><p class=Pp>In a similar manner TCP sockets may be prefixed with the “+” character, in which case the current interface unit number is added to the port number.</p><p class=Pp>When using <code class=Nm>ppp</code> with a server socket, the <a class=Xr href=pppctl.8.html>pppctl(8)</a> command is the preferred mechanism of communications. Currently, <a class=Xr href=telnet.1.html>telnet(1)</a> can also be used, but link encryption may be implemented in the future, so <a class=Xr href=telnet.1.html>telnet(1)</a> should be avoided.</p><p class=Pp>Note; <code class=Dv>SIGUSR1</code> and <code class=Dv>SIGUSR2</code> interact with the diagnostic socket.</p></dd><dt>set speed <var class=Ar>value</var></dt><dd>This sets the speed of the serial device. If speed is specified as “sync”, <code class=Nm>ppp</code> treats the device as a synchronous device. <p class=Pp>Certain device types will know whether they should be specified as synchronous or asynchronous. These devices will override incorrect settings and log a warning to this effect.</p></dd><dt>set stopped [<var class=Ar>LCPseconds</var> [<var class=Ar>CCPseconds</var>]]</dt><dd>If this option is set, <code class=Nm>ppp</code> will time out after the given FSM (Finite State Machine) has been in the stopped state for the given number of “seconds”. This option may be useful if the peer sends a terminate request, but never actually closes the connection despite our sending a terminate acknowledgement. This is also useful if you wish to “set openmode passive” and time out if the peer does not send a Configure Request within the given time. Use “set log +lcp +ccp” to make <code class=Nm>ppp</code> log the appropriate state transitions. <p class=Pp>The default value is zero, where <code class=Nm>ppp</code> does not time out in the stopped state.</p><p class=Pp>This value should not be set to less than the openmode delay (see “set openmode” above).</p></dd><dt>set timeout <var class=Ar>idleseconds</var> [<var class=Ar>mintimeout</var>]</dt><dd>This command allows the setting of the idle timer. Refer to the section titled <a class=Sx href=#SETTING_THE_IDLE_TIMER>SETTING THE IDLE TIMER</a> for further details. <p class=Pp>If <var class=Ar>mintimeout</var> is specified, <code class=Nm>ppp</code> will never idle out before the link has been up for at least that number of seconds.</p></dd><dt>set urgent [tcp|udp|none] [[+|-]<var class=Ar>port</var>] <span class=No>...</span></dt><dd>This command controls the ports that <code class=Nm>ppp</code> prioritizes when transmitting data. The default priority TCP ports are ports 21 (ftp control), 22 (ssh), 23 (telnet), 513 (login), 514 (shell), 543 (klogin) and 544 (kshell). There are no priority UDP ports by default. See <a class=Xr href=services.5.html>services(5)</a> for details. <p class=Pp>If neither “tcp” or “udp” are specified, “tcp” is assumed.</p><p class=Pp>If no <var class=Ar>port</var><span class=No>s</span> are given, the priority port lists are cleared (although if “tcp” or “udp” is specified, only that list is cleared). If the first <var class=Ar>port</var> argument is prefixed with a plus (“+”) or a minus (“-”), the current list is adjusted, otherwise the list is reassigned. <var class=Ar>port</var><span class=No>s</span> prefixed with a plus or not prefixed at all are added to the list and <var class=Ar>port</var><span class=No>s</span> prefixed with a minus are removed from the list.</p><p class=Pp>If “none” is specified, all priority port lists are disabled and even <code class=Dv>IPTOS_LOWDELAY</code> packets are not prioritised.</p></dd><dt>set urgent length <var class=Ar>length</var></dt><dd>This command tells ppp to prioritize small packets up to <var class=Ar>length</var> bytes. If <var class=Ar>length</var> is not specified, or 0, this feature is disabled.</dd><dt>set vj slotcomp on|off</dt><dd>This command tells <code class=Nm>ppp</code> whether it should attempt to negotiate VJ slot compression. By default, slot compression is turned <var class=Ar>on</var>.</dd><dt>set vj slots <var class=Ar>nslots</var></dt><dd>This command sets the initial number of slots that <code class=Nm>ppp</code> will try to negotiate with the peer when VJ compression is enabled (see the ‘enable’ command above). It defaults to a value of 16. <var class=Ar>Nslots</var> must be between <var class=Ar>4</var> and <var class=Ar>16</var> inclusive.</dd></dl></dd><dt>shell|! [<var class=Ar>command</var>]</dt><dd>If <var class=Ar>command</var> is not specified a shell is invoked according to the <code class=Dv>SHELL</code> environment variable. Otherwise, the given <var class=Ar>command</var> is executed. Word replacement is done in the same way as for the “!bg” command as described above. <p class=Pp>Use of the ! character requires a following space as with any of the other commands. You should note that this command is executed in the foreground; <code class=Nm>ppp</code> will not continue running until this process has exited. Use the <code class=Dv>bg</code> command if you wish processing to happen in the background.</p></dd><dt>show <var class=Ar>var</var></dt><dd>This command allows the user to examine the following: <dl class=Bl-tag><dt>show bundle</dt><dd>Show the current bundle settings.</dd><dt>show ccp</dt><dd>Show the current CCP compression statistics.</dd><dt>show compress</dt><dd>Show the current VJ compression statistics.</dd><dt>show escape</dt><dd>Show the current escape characters.</dd><dt>show filter [<var class=Ar>name</var>]</dt><dd>List the current rules for the given filter. If <var class=Ar>name</var> is not specified, all filters are shown.</dd><dt>show hdlc</dt><dd>Show the current HDLC statistics.</dd><dt>show help|?</dt><dd>Give a summary of available show commands.</dd><dt>show iface</dt><dd>Show the current interface information (the same as “iface show”).</dd><dt>show ipcp</dt><dd>Show the current IPCP statistics.</dd><dt>show layers</dt><dd>Show the protocol layers currently in use.</dd><dt>show lcp</dt><dd>Show the current LCP statistics.</dd><dt>show [data]<span class=No>link</span></dt><dd>Show high level link information.</dd><dt>show links</dt><dd>Show a list of available logical links.</dd><dt>show log</dt><dd>Show the current log values.</dd><dt>show mem</dt><dd>Show current memory statistics.</dd><dt>show ncp</dt><dd>Show the current NCP statistics.</dd><dt>show physical</dt><dd>Show low level link information.</dd><dt>show mp</dt><dd>Show Multi-link information.</dd><dt>show proto</dt><dd>Show current protocol totals.</dd><dt>show route</dt><dd>Show the current routing tables.</dd><dt>show stopped</dt><dd>Show the current stopped timeouts.</dd><dt>show timer</dt><dd>Show the active alarm timers.</dd><dt>show version</dt><dd>Show the current version number of <code class=Nm>ppp</code>.</dd></dl></dd><dt>term</dt><dd>Go into terminal mode. Characters typed at the keyboard are sent to the device. Characters read from the device are displayed on the screen. When a remote <i class=Em>PPP</i> peer is detected, <code class=Nm>ppp</code> automatically enables Packet Mode and goes back into command mode.</dd></dl></section><section class=Sh><h2 class=Sh id=MORE_DETAILS><a class=permalink href=#MORE_DETAILS>MORE DETAILS</a></h2><ul class=Bl-bullet><li>Read the example configuration files. They are a good source of information.</li><li>Use “help”, “nat ?”, “enable ?”, “set ?” and “show ?” to get online information about what is available.</li><li>The following URL contains useful information: <ul class="Bl-bullet Bl-compact"><li>https://docs.freebsd.org/en/books/handbook/ppp-and-slip/</li></ul></li></ul></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><code class=Nm>ppp</code> refers to four files: <span class=Pa>ppp.conf</span>, <span class=Pa>ppp.linkup</span>, <span class=Pa>ppp.linkdown</span> and <span class=Pa>ppp.secret</span>. These files are placed in the <span class=Pa>/etc/ppp</span> directory. <dl class=Bl-tag><dt><span class=Pa>/etc/ppp/ppp.conf</span></dt><dd>System default configuration file.</dd><dt><span class=Pa>/etc/ppp/ppp.secret</span></dt><dd>An authorisation file for each system.</dd><dt><span class=Pa>/etc/ppp/ppp.linkup</span></dt><dd>A file to check when <code class=Nm>ppp</code> establishes a network level connection.</dd><dt><span class=Pa>/etc/ppp/ppp.linkdown</span></dt><dd>A file to check when <code class=Nm>ppp</code> closes a network level connection.</dd><dt><span class=Pa>/var/log/ppp.log</span></dt><dd>Logging and debugging information file. Note, this name is specified in <span class=Pa>/etc/syslog.conf</span>. See <a class=Xr href=syslog.conf.5.html>syslog.conf(5)</a> for further details.</dd><dt><span class=Pa>/var/spool/lock/LCK..*</span></dt><dd>tty port locking file. Refer to <a class=Xr href=uucplock.3.html>uucplock(3)</a> for further details.</dd><dt><span class=Pa>/var/run/tunN.pid</span></dt><dd>The process id (pid) of the <code class=Nm>ppp</code> program connected to the tunN device, where ‘N’ is the number of the device.</dd><dt><span class=Pa>/var/run/ttyXX.if</span></dt><dd>The tun interface used by this port. Again, this file is only created in <code class=Fl>-background</code>, <code class=Fl>-auto</code> and <code class=Fl>-ddial</code> modes.</dd><dt><span class=Pa>/etc/services</span></dt><dd>Get port number if port number is using service name.</dd><dt><span class=Pa>/var/run/ppp-authname-class-value</span></dt><dd>In multi-link mode, local domain sockets are created using the peer authentication name (‘authname’), the peer endpoint discriminator class (‘class’) and the peer endpoint discriminator value (‘value’). As the endpoint discriminator value may be a binary value, it is turned to HEX to determine the actual file name. <p class=Pp>This socket is used to pass links between different instances of <code class=Nm>ppp</code>.</p></dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=at.1.html>at(1)</a>, <a class=Xr href=ftp.1.html>ftp(1)</a>, <a class=Xr href=gzip.1.html>gzip(1)</a>, <a class=Xr href=hostname.1.html>hostname(1)</a>, <a class=Xr href=login.1.html>login(1)</a>, <a class=Xr href=tcpdump.1.html>tcpdump(1)</a>, <a class=Xr href=telnet.1.html>telnet(1)</a>, <a class=Xr href=kldload.2.html>kldload(2)</a>, <a class=Xr href=pipe.2.html>pipe(2)</a>, <a class=Xr href=socketpair.2.html>socketpair(2)</a>, <a class=Xr href=libalias.3.html>libalias(3)</a>, <a class=Xr href=libradius.3.html>libradius(3)</a>, <a class=Xr href=syslog.3.html>syslog(3)</a>, <a class=Xr href=uucplock.3.html>uucplock(3)</a>, <a class=Xr href=netgraph.4.html>netgraph(4)</a>, <a class=Xr href=ng_pppoe.4.html>ng_pppoe(4)</a>, <a class=Xr href=crontab.5.html>crontab(5)</a>, <a class=Xr href=group.5.html>group(5)</a>, <a class=Xr href=passwd.5.html>passwd(5)</a>, <a class=Xr href=protocols.5.html>protocols(5)</a>, <a class=Xr href=radius.conf.5.html>radius.conf(5)</a>, <a class=Xr href=resolv.conf.5.html>resolv.conf(5)</a>, <a class=Xr href=syslog.conf.5.html>syslog.conf(5)</a>, <a class=Xr href=adduser.8.html>adduser(8)</a>, <a class=Xr href=chat.8.html>chat(8)</a>, <a class=Xr href=getty.8.html>getty(8)</a>, <a class=Xr href=inetd.8.html>inetd(8)</a>, <a class=Xr href=init.8.html>init(8)</a>, <a class=Xr href=ping.8.html>ping(8)</a>, <a class=Xr href=pppctl.8.html>pppctl(8)</a>, <a class=Xr href=pppoed.8.html>pppoed(8)</a>, <a class=Xr href=route.8.html>route(8)</a>, <a class=Xr href=sshd.8.html>sshd(8)</a>, <a class=Xr href=syslogd.8.html>syslogd(8)</a>, <a class=Xr href=traceroute.8.html>traceroute(8)</a>, <a class=Xr href=vipw.8.html>vipw(8)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> This program was originally written by <span class=An>Toshiharu OHNO</span> &lt;<a class=Mt href=mailto:tony-o@iij.ad.jp>tony-o@iij.ad.jp</a>&gt;, and was submitted to <span class=Ux>FreeBSD 2.0.5</span> by <span class=An>Atsushi Murai</span> &lt;<a class=Mt href=mailto:amurai@spec.co.jp>amurai@spec.co.jp</a>&gt;. <p class=Pp>It was substantially modified during 1997 by <span class=An>Brian Somers</span> &lt;<a class=Mt href=mailto:brian@Awfulhak.org>brian@Awfulhak.org</a>&gt;, and was ported to <span class=Ux>OpenBSD</span> in November that year (just after the 2.2 release).</p><p class=Pp>Most of the code was rewritten by <span class=An>Brian Somers</span> in early 1998 when multi-link ppp support was added.</p></section></div><table class=foot><tr><td class=foot-date>June 27, 2022</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>