<!DOCTYPE html>
<html><head><meta charset=utf-8><title>mouse(4)</title><keywords content=man,mouse></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>mouse(4)</h1><table class=head><tr><td class=head-ltitle>MOUSE(4)</td><td class=head-vol>FreeBSD Kernel Interfaces Manual</td><td class=head-rtitle>MOUSE(4)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>mouse</code> — <div class=Nd>mouse and pointing device drivers</div></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/mouse.h.html>sys/mouse.h</a>&gt;</code></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The mouse drivers <a class=Xr href=psm.4.html>psm(4)</a>, <a class=Xr href=ums.4.html>ums(4)</a> and <a class=Xr href=sysmouse.4.html>sysmouse(4)</a> provide user programs with movement and button state information of the mouse. Currently there are specific device drivers for bus, InPort, PS/2, and USB mice. The serial mouse is not directly supported by a dedicated driver, but it is accessible via the serial device driver or via <a class=Xr href=moused.8.html>moused(8)</a> and <a class=Xr href=sysmouse.4.html>sysmouse(4)</a>. <p class=Pp>The user program simply opens a mouse device with a <a class=Xr href=open.2.html>open(2)</a> call and reads mouse data from the device via <a class=Xr href=read.2.html>read(2)</a>. Movement and button states are usually encoded in fixed-length data packets. Some mouse devices may send data in variable length of packets. Actual protocol (data format) used by each driver differs widely.</p><p class=Pp>The mouse drivers may have ``non-blocking'' attribute which will make the driver return immediately if mouse data is not available.</p><p class=Pp>Mouse device drivers often offer several levels of operation. The current operation level can be examined and changed via <a class=Xr href=ioctl.2.html>ioctl(2)</a> commands. The level zero is the lowest level at which the driver offers the basic service to user programs. Most drivers provide horizontal and vertical movement of the mouse and state of up to three buttons at this level. At the level one, if supported by the driver, mouse data is encoded in the standard format <code class=Dv>MOUSE_PROTO_SYSMOUSE</code> as follows:</p><p class=Pp></p><dl class="Bl-tag Bl-compact"><dt>Byte 1</dt><dd><dl class="Bl-tag Bl-compact"><dt>bit 7</dt><dd>Always one.</dd><dt>bit 6..3</dt><dd>Always zero.</dd><dt>bit 2</dt><dd>Left button status; cleared if pressed, otherwise set.</dd><dt>bit 1</dt><dd>Middle button status; cleared if pressed, otherwise set. Always one, if the device does not have the middle button.</dd><dt>bit 0</dt><dd>Right button status; cleared if pressed, otherwise set.</dd></dl></dd><dt>Byte 2</dt><dd>The first half of horizontal movement count in two's complement; -128 through 127.</dd><dt>Byte 3</dt><dd>The first half of vertical movement count in two's complement; -128 through 127.</dd><dt>Byte 4</dt><dd>The second half of the horizontal movement count in two's complement; -128 through 127. To obtain the full horizontal movement count, add the byte 2 and 4.</dd><dt>Byte 5</dt><dd>The second half of the vertical movement count in two's complement; -128 through 127. To obtain the full vertical movement count, add the byte 3 and 5.</dd><dt>Byte 6</dt><dd>The bit 7 is always zero. The lower 7 bits encode the first half of Z axis movement count in two's complement; -64 through 63.</dd><dt>Byte 7</dt><dd>The bit 7 is always zero. The lower 7 bits encode the second half of the Z axis movement count in two's complement; -64 through 63. To obtain the full Z axis movement count, add the byte 6 and 7.</dd><dt>Byte 8</dt><dd>The bit 7 is always zero. The bits 0 through 6 reflect the state of the buttons 4 through 10. If a button is pressed, the corresponding bit is cleared. Otherwise the bit is set.</dd></dl><p class=Pp>The first 5 bytes of this format is compatible with the MouseSystems format. The additional 3 bytes have their MSBs always set to zero. Thus, if the user program can interpret the MouseSystems data format and tries to find the first byte of the format by detecting the bit pattern 10000xxxb, it will discard the additional bytes, thus, be able to decode x, y and states of 3 buttons correctly.</p><p class=Pp>Device drivers may offer operation levels higher than one. Refer to manual pages of individual drivers for details.</p></section><section class=Sh><h2 class=Sh id=IOCTLS><a class=permalink href=#IOCTLS>IOCTLS</a></h2> The following <a class=Xr href=ioctl.2.html>ioctl(2)</a> commands are defined for the mouse drivers. The degree of support varies from one driver to another. This section gives general description of the commands. Refer to manual pages of individual drivers for specific details. <p class=Pp></p><dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#MOUSE_GETLEVEL><code class=Dv id=MOUSE_GETLEVEL>MOUSE_GETLEVEL</code></a><var class=Ar>int *level</var></dt><dd style="width: auto;"> </dd><dt><a class=permalink href=#MOUSE_SETLEVEL><code class=Dv id=MOUSE_SETLEVEL>MOUSE_SETLEVEL</code></a><var class=Ar>int *level</var></dt><dd>These commands manipulate the operation level of the mouse driver. <p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_GETHWINFO><code class=Dv id=MOUSE_GETHWINFO>MOUSE_GETHWINFO</code></a><var class=Ar>mousehw_t *hw</var></dt><dd>Returns the hardware information of the attached device in the following Except for the <code class=Dv>iftype</code> field, the device driver may not always fill the structure with correct values. Consult manual pages of individual drivers for details of support. <div class="Bd Pp"><pre>
typedef struct mousehw {
    int buttons;    /* number of buttons */
    int iftype;     /* I/F type */
    int type;       /* mouse/track ball/pad... */
    int model;      /* I/F dependent model ID */
    int hwid;       /* I/F dependent hardware ID */
} mousehw_t;
    </pre></div><p class=Pp>The <code class=Dv>buttons</code> field holds the number of buttons detected by the driver. The driver may put an arbitrary value, such as two, in this field, if it cannot determine the exact number.</p><p class=Pp>The <code class=Dv>iftype</code> is the type of interface: <code class=Dv>MOUSE_IF_SERIAL</code>, <code class=Dv>MOUSE_IF_BUS</code>, <code class=Dv>MOUSE_IF_INPORT</code>, <code class=Dv>MOUSE_IF_PS2</code>, <code class=Dv>MOUSE_IF_USB</code>, <code class=Dv>MOUSE_IF_SYSMOUSE</code> or <code class=Dv>MOUSE_IF_UNKNOWN</code>.</p><p class=Pp>The <code class=Dv>type</code> tells the device type: <code class=Dv>MOUSE_MOUSE</code>, <code class=Dv>MOUSE_TRACKBALL</code>, <code class=Dv>MOUSE_STICK</code>, <code class=Dv>MOUSE_PAD</code>, or <code class=Dv>MOUSE_UNKNOWN</code>.</p><p class=Pp>The <code class=Dv>model</code> may be <code class=Dv>MOUSE_MODEL_GENERIC</code> or one of <code class=Dv>MOUSE_MODEL_XXX</code> constants.</p><p class=Pp>The <code class=Dv>hwid</code> is the ID value returned by the pointing device. It depend on the interface type; refer to the manual page of specific mouse drivers for possible values.</p><p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_GETMODE><code class=Dv id=MOUSE_GETMODE>MOUSE_GETMODE</code></a><var class=Ar>mousemode_t *mode</var></dt><dd>The command reports the current operation parameters of the mouse driver. <div class="Bd Pp"><pre>
typedef struct mousemode {
    int protocol;    /* MOUSE_PROTO_XXX */
    int rate;        /* report rate (per sec) */
    int resolution;  /* MOUSE_RES_XXX, -1 if unknown */
    int accelfactor; /* acceleration factor */
    int level;       /* driver operation level */
    int packetsize;  /* the length of the data packet */
    unsigned char syncmask[2]; /* sync. bits */
} mousemode_t;
    </pre></div><p class=Pp>The <code class=Dv>protocol</code> field tells the format in which the device status is returned when the mouse data is read by the user program. It is one of <code class=Dv>MOUSE_PROTO_XXX</code> constants.</p><p class=Pp>The <code class=Dv>rate</code> field is the status report rate (reports/sec) at which the device will send movement reports to the host computer. -1 if unknown or not applicable.</p><p class=Pp>The <code class=Dv>resolution</code> field holds a value specifying resolution of the pointing device. It is a positive value or one of <code class=Dv>MOUSE_RES_XXX</code> constants.</p><p class=Pp>The <code class=Dv>accelfactor</code> field holds a value to control acceleration feature. It must be zero or greater. If it is zero, acceleration is disabled.</p><p class=Pp>The <code class=Dv>packetsize</code> field tells the length of the fixed-size data packet or the length of the fixed part of the variable-length packet. The size depends on the interface type, the device type and model, the protocol and the operation level of the driver.</p><p class=Pp>The array <code class=Dv>syncmask</code> holds a bit mask and pattern to detect the first byte of the data packet. <code class=Dv>syncmask[0]</code> is the bit mask to be ANDed with a byte. If the result is equal to <code class=Dv>syncmask[1]</code>, the byte is likely to be the first byte of the data packet. Note that this method of detecting the first byte is not 100% reliable, thus, should be taken only as an advisory measure.</p><p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_SETMODE><code class=Dv id=MOUSE_SETMODE>MOUSE_SETMODE</code></a><var class=Ar>mousemode_t *mode</var></dt><dd>The command changes the current operation parameters of the mouse driver as specified in <var class=Ar>mode</var>. Only <code class=Dv>rate</code>, <code class=Dv>resolution</code>, <code class=Dv>level</code> and <code class=Dv>accelfactor</code> may be modifiable. Setting values in the other field does not generate error and has no effect. <p class=Pp>If you do not want to change the current setting of a field, put -1 there. You may also put zero in <code class=Dv>resolution</code> and <code class=Dv>rate</code>, and the default value for the fields will be selected.</p><p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_READDATA><code class=Dv id=MOUSE_READDATA>MOUSE_READDATA</code></a><var class=Ar>mousedata_t *data</var></dt><dd>The command reads the raw data from the device. <div class="Bd Pp"><pre>
typedef struct mousedata {
    int len;        /* # of data in the buffer */
    int buf[16];    /* data buffer */
} mousedata_t;
    </pre></div><p class=Pp>The calling process must fill the <code class=Dv>len</code> field with the number of bytes to be read into the buffer. This command may not be supported by all drivers.</p><p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_READSTATE><code class=Dv id=MOUSE_READSTATE>MOUSE_READSTATE</code></a><var class=Ar>mousedata_t *state</var></dt><dd>The command reads the raw state data from the device. It uses the same structure as above. This command may not be supported by all drivers. <p class=Pp></p></dd><dt><a class=permalink href=#MOUSE_GETSTATUS><code class=Dv id=MOUSE_GETSTATUS>MOUSE_GETSTATUS</code></a><var class=Ar>mousestatus_t *status</var></dt><dd>The command returns the current state of buttons and movement counts in the following structure. <div class="Bd Pp"><pre>
typedef struct mousestatus {
    int flags;      /* state change flags */
    int button;     /* button status */
    int obutton;    /* previous button status */
    int dx;         /* x movement */
    int dy;         /* y movement */
    int dz;         /* z movement */
} mousestatus_t;
    </pre></div><p class=Pp>The <code class=Dv>button</code> and <code class=Dv>obutton</code> fields hold the current and the previous state of the mouse buttons. When a button is pressed, the corresponding bit is set. The mouse drivers may support up to 31 buttons with the bit 0 through 31. Few button bits are defined as <code class=Dv>MOUSE_BUTTON1DOWN</code> through <code class=Dv>MOUSE_BUTTON8DOWN</code>. The first three buttons correspond to left, middle and right buttons.</p><p class=Pp>If the state of the button has changed since the last <code class=Dv>MOUSE_GETSTATUS</code> call, the corresponding bit in the <code class=Dv>flags</code> field will be set. If the mouse has moved since the last call, the <code class=Dv>MOUSE_POSCHANGED</code> bit in the <code class=Dv>flags</code> field will also be set.</p><p class=Pp>The other fields hold movement counts since the last <code class=Dv>MOUSE_GETSTATUS</code> call. The internal counters will be reset after every call to this command.</p></dd></dl></section><section class=Sh><h2 class=Sh id=FILES><a class=permalink href=#FILES>FILES</a></h2><dl class="Bl-tag Bl-compact"><dt><span class=Pa>/dev/cuau%d</span></dt><dd>serial ports</dd><dt><span class=Pa>/dev/psm%d</span></dt><dd>PS/2 mouse device</dd><dt><span class=Pa>/dev/sysmouse</span></dt><dd>virtual mouse device</dd><dt><span class=Pa>/dev/ums%d</span></dt><dd>USB mouse device</dd></dl></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=ioctl.2.html>ioctl(2)</a>, <a class=Xr href=psm.4.html>psm(4)</a>, <a class=Xr href=sysmouse.4.html>sysmouse(4)</a>, <a class=Xr href=ums.4.html>ums(4)</a>, <a class=Xr href=moused.8.html>moused(8)</a></section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> This manual page was written by <span class=An>Kazutaka Yokota</span> &lt;<a class=Mt href=mailto:yokota@FreeBSD.org>yokota@FreeBSD.org</a>&gt;. </section></div><table class=foot><tr><td class=foot-date>December 3, 1997</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>