<!DOCTYPE html>
<html><head><meta charset=utf-8><title>as(7)</title><keywords content=man,as></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>as(7)</h1><table class=head><tr><td class=head-ltitle>AS(7)</td><td class=head-vol>FreeBSD Miscellaneous Information Manual</td><td class=head-rtitle>AS(7)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>as</code> — <div class=Nd>Using as (machine specific)</div></section><section class=Sh><h2 class=Sh id=Using_as><a class=permalink href=#Using_as>Using as</a></h2> This file is a user guide to the GNU assembler <a class=Xr href=as.1.html>as</a> version "2.17.50 [FreeBSD] 2007-07-03". This version of the file describes <a class=Xr href=as.1.html>as</a> configured to generate code for machine specific architectures. <p class=Pp>This document is distributed under the terms of the GNU Free Documentation License. A copy of the license is included in the section entitled “GNU Free Documentation License”.</p></section><section class=Sh><h2 class=Sh id=Overview><a class=permalink href=#Overview>Overview</a></h2> Here is a brief summary of how to invoke <a class=Xr href=as.1.html>as</a>. For details, see Invoking,,Command-Line Options. <div class="Bd Pp Bd-indent"><pre>
as [-a[cdhlns][=file]] [--alternate] [-D]
 [--defsym sym=val] [-f] [-g] [--gstabs]
 [--gstabs+] [--gdwarf-2] [--help] [-I dir] [-J]
 [-K] [-L] [--listing-lhs-width=NUM]
 [--listing-lhs-width2=NUM] [--listing-rhs-width=NUM]
 [--listing-cont-lines=NUM] [--keep-locals] [-o
 objfile] [-R] [--reduce-memory-overheads] [--statistics]
 [-v] [-version] [--version] [-W] [--warn]
 [--fatal-warnings] [-w] [-x] [-Z] [@FILE]
 [--target-help] [target-options]
 [--|files ...]

Target ARM options:
   [-mcpu=processor[+extension...]]
   [-march=architecture[+extension...]]
   [-mfpu=floating-point-format]
   [-mfloat-abi=abi]
   [-meabi=ver]
   [-mthumb]
   [-EB|-EL]
   [-mapcs-32|-mapcs-26|-mapcs-float|
    -mapcs-reentrant]
   [-mthumb-interwork] [-k]


Target i386 options:
   [--32|--64] [-n]
   [-march=CPU] [-mtune=CPU]


Target IA-64 options:
   [-mconstant-gp|-mauto-pic]
   [-milp32|-milp64|-mlp64|-mp64]
   [-mle|mbe]
   [-mtune=itanium1|-mtune=itanium2]
   [-munwind-check=warning|-munwind-check=error]
   [-mhint.b=ok|-mhint.b=warning|-mhint.b=error]
   [-x|-xexplicit] [-xauto] [-xdebug]


Target MIPS options:
   [-nocpp] [-EL] [-EB] [-O[optimization level]]
   [-g[debug level]] [-G num] [-KPIC] [-call_shared]
   [-non_shared] [-xgot [-mvxworks-pic]
   [-mabi=ABI] [-32] [-n32] [-64] [-mfp32] [-mgp32]
   [-march=CPU] [-mtune=CPU] [-mips1] [-mips2]
   [-mips3] [-mips4] [-mips5] [-mips32] [-mips32r2]
   [-mips64] [-mips64r2]
   [-construct-floats] [-no-construct-floats]
   [-trap] [-no-break] [-break] [-no-trap]
   [-mfix7000] [-mno-fix7000]
   [-mips16] [-no-mips16]
   [-msmartmips] [-mno-smartmips]
   [-mips3d] [-no-mips3d]
   [-mdmx] [-no-mdmx]
   [-mdsp] [-mno-dsp]
   [-mdspr2] [-mno-dspr2]
   [-mmt] [-mno-mt]
   [-mdebug] [-no-mdebug]
   [-mpdr] [-mno-pdr]


Target PowerPC options:
   [-mpwrx|-mpwr2|-mpwr|-m601|-mppc|-mppc32|-m603|-m604|
    -m403|-m405|-mppc64|-m620|-mppc64bridge|-mbooke|
    -mbooke32|-mbooke64]
   [-mcom|-many|-maltivec] [-memb]
   [-mregnames|-mno-regnames]
   [-mrelocatable|-mrelocatable-lib]
   [-mlittle|-mlittle-endian|-mbig|-mbig-endian]
   [-msolaris|-mno-solaris]


Target SPARC options:
   [-Av6|-Av7|-Av8|-Asparclet|-Asparclite
    -Av8plus|-Av8plusa|-Av9|-Av9a]
   [-xarch=v8plus|-xarch=v8plusa] [-bump]
   [-32|-64]



</pre></div><dl class=Bl-tag><dt>@ <var class=Va>file</var></dt><dd>Read command-line options from <var class=Va>file</var>. The options read are inserted in place of the original @ <var class=Va>file</var> option. If <var class=Va>file</var> does not exist, or cannot be read, then the option will be treated literally, and not removed. <p class=Pp>Options in <var class=Va>file</var> are separated by whitespace. A whitespace character may be included in an option by surrounding the entire option in either single or double quotes. Any character (including a backslash) may be included by prefixing the character to be included with a backslash. The <var class=Va>file</var> may itself contain additional @ <var class=Va>file</var> options; any such options will be processed recursively.</p></dd><dt>-a[cdhlmns]</dt><dd>Turn on listings, in any of a variety of ways: <dl class=Bl-tag><dt>-ac</dt><dd>omit false conditionals</dd><dt>-ad</dt><dd>omit debugging directives</dd><dt>-ah</dt><dd>include high-level source</dd><dt>-al</dt><dd>include assembly</dd><dt>-am</dt><dd>include macro expansions</dd><dt>-an</dt><dd>omit forms processing</dd><dt>-as</dt><dd>include symbols</dd><dt>=file</dt><dd>set the name of the listing file</dd></dl><p class=Pp>You may combine these options; for example, use <code class=Li>-aln</code> for assembly listing without forms processing. The <code class=Li>=file</code> option, if used, must be the last one. By itself, <code class=Li>-a</code> defaults to <code class=Li>-ahls</code>.</p></dd><dt>--alternate</dt><dd>Begin in alternate macro mode.See Section “Altmacro”.</dd><dt>-D</dt><dd>Ignored. This option is accepted for script compatibility with calls to other assemblers.</dd><dt>--defsym <var class=Va>sym=</var><var class=Va>value</var></dt><dd>Define the symbol <var class=Va>sym</var> to be <var class=Va>value</var> before assembling the input file. <var class=Va>value</var> must be an integer constant. As in C, a leading <code class=Li>0x</code> indicates a hexadecimal value, and a leading <code class=Li>0</code> indicates an octal value. The value of the symbol can be overridden inside a source file via the use of a <code class=Li>.set</code> pseudo-op.</dd><dt>-f</dt><dd>“fast”---skip whitespace and comment preprocessing (assume source is compiler output).</dd><dt>-g</dt><dd style="width: auto;"> </dd><dt>--gen-debug</dt><dd>Generate debugging information for each assembler source line using whichever debug format is preferred by the target. This currently means either STABS, ECOFF or DWARF2.</dd><dt>--gstabs</dt><dd>Generate stabs debugging information for each assembler line. This may help debugging assembler code, if the debugger can handle it.</dd><dt>--gstabs+</dt><dd>Generate stabs debugging information for each assembler line, with GNU extensions that probably only gdb can handle, and that could make other debuggers crash or refuse to read your program. This may help debugging assembler code. Currently the only GNU extension is the location of the current working directory at assembling time.</dd><dt>--gdwarf-2</dt><dd>Generate DWARF2 debugging information for each assembler line. This may help debugging assembler code, if the debugger can handle it. Note---this option is only supported by some targets, not all of them.</dd><dt>--help</dt><dd>Print a summary of the command line options and exit.</dd><dt>--target-help</dt><dd>Print a summary of all target specific options and exit.</dd><dt>-I <var class=Va>dir</var></dt><dd>Add directory <var class=Va>dir</var> to the search list for <code class=Li>.include</code> directives.</dd><dt>-J</dt><dd>Don't warn about signed overflow.</dd><dt>-K</dt><dd>This option is accepted but has no effect on the machine specific family.</dd><dt>-L</dt><dd style="width: auto;"> </dd><dt>--keep-locals</dt><dd>Keep (in the symbol table) local symbols. These symbols start with system-specific local label prefixes, typically <code class=Li>.L</code> for ELF systems or <code class=Li>L</code> for traditional a.out systems.See Section “Symbol Names”.</dd><dt>--listing-lhs-width= <var class=Va>number</var></dt><dd>Set the maximum width, in words, of the output data column for an assembler listing to <var class=Va>number</var>.</dd><dt>--listing-lhs-width2= <var class=Va>number</var></dt><dd>Set the maximum width, in words, of the output data column for continuation lines in an assembler listing to <var class=Va>number</var>.</dd><dt>--listing-rhs-width= <var class=Va>number</var></dt><dd>Set the maximum width of an input source line, as displayed in a listing, to <var class=Va>number</var> bytes.</dd><dt>--listing-cont-lines= <var class=Va>number</var></dt><dd>Set the maximum number of lines printed in a listing for a single line of input to <var class=Va>number</var> + 1.</dd><dt>-o <var class=Va>objfile</var></dt><dd>Name the object-file output from <a class=Xr href=as.1.html>as</a><var class=Va>objfile</var>.</dd><dt>-R</dt><dd>Fold the data section into the text section. <p class=Pp>Set the default size of GAS's hash tables to a prime number close to <var class=Va>number</var>. Increasing this value can reduce the length of time it takes the assembler to perform its tasks, at the expense of increasing the assembler's memory requirements. Similarly reducing this value can reduce the memory requirements at the expense of speed.</p></dd><dt>--reduce-memory-overheads</dt><dd>This option reduces GAS's memory requirements, at the expense of making the assembly processes slower. Currently this switch is a synonym for <code class=Li>--hash-size=4051</code>, but in the future it may have other effects as well.</dd><dt>--statistics</dt><dd>Print the maximum space (in bytes) and total time (in seconds) used by assembly.</dd><dt>--strip-local-absolute</dt><dd>Remove local absolute symbols from the outgoing symbol table.</dd><dt>-v</dt><dd style="width: auto;"> </dd><dt>-version</dt><dd>Print the <a class=Xr href=as.1.html>as</a> version.</dd><dt>--version</dt><dd>Print the <a class=Xr href=as.1.html>as</a> version and exit.</dd><dt>-W</dt><dd style="width: auto;"> </dd><dt>--no-warn</dt><dd>Suppress warning messages.</dd><dt>--fatal-warnings</dt><dd>Treat warnings as errors.</dd><dt>--warn</dt><dd>Don't suppress warning messages or treat them as errors.</dd><dt>-w</dt><dd>Ignored.</dd><dt>-x</dt><dd>Ignored.</dd><dt>-Z</dt><dd>Generate an object file even after errors.</dd><dt>-- | <var class=Va>files ...</var></dt><dd>Standard input, or source files to assemble.</dd></dl><p class=Pp>The following options are available when as is configured for the ARM processor family.</p><dl class=Bl-tag><dt>-mcpu= <var class=Va>processor[+</var><var class=Va>extension...]</var></dt><dd>Specify which ARM processor variant is the target.</dd><dt>-march= <var class=Va>architecture[+</var><var class=Va>extension...]</var></dt><dd>Specify which ARM architecture variant is used by the target.</dd><dt>-mfpu= <var class=Va>floating-point-format</var></dt><dd>Select which Floating Point architecture is the target.</dd><dt>-mfloat-abi= <var class=Va>abi</var></dt><dd>Select which floating point ABI is in use.</dd><dt>-mthumb</dt><dd>Enable Thumb only instruction decoding.</dd><dt>-mapcs-32 | -mapcs-26 | -mapcs-float | -mapcs-reentrant</dt><dd>Select which procedure calling convention is in use.</dd><dt>-EB | -EL</dt><dd>Select either big-endian (-EB) or little-endian (-EL) output.</dd><dt>-mthumb-interwork</dt><dd>Specify that the code has been generated with interworking between Thumb and ARM code in mind.</dd><dt>-k</dt><dd>Specify that PIC code has been generated.</dd></dl><p class=Pp>The following options are available when <a class=Xr href=as.1.html>as</a> is configured for the SPARC architecture:</p><dl class=Bl-tag><dt>-Av6 | -Av7 | -Av8 | -Asparclet | -Asparclite</dt><dd style="width: auto;"> </dd><dt>-Av8plus | -Av8plusa | -Av9 | -Av9a</dt><dd>Explicitly select a variant of the SPARC architecture. <p class=Pp><code class=Li>-Av8plus</code> and <code class=Li>-Av8plusa</code> select a 32 bit environment. <code class=Li>-Av9</code> and <code class=Li>-Av9a</code> select a 64 bit environment.</p><p class=Pp><code class=Li>-Av8plusa</code> and <code class=Li>-Av9a</code> enable the SPARC V9 instruction set with UltraSPARC extensions.</p></dd><dt>-xarch=v8plus | -xarch=v8plusa</dt><dd>For compatibility with the Solaris v9 assembler. These options are equivalent to -Av8plus and -Av8plusa, respectively.</dd><dt>-bump</dt><dd>Warn when the assembler switches to another architecture.</dd></dl><p class=Pp>The following options are available when as is configured for a mips processor.</p><dl class=Bl-tag><dt>-G <var class=Va>num</var></dt><dd>This option sets the largest size of an object that can be referenced implicitly with the <code class=Li>gp</code> register. It is only accepted for targets that use ECOFF format, such as a DECstation running Ultrix. The default value is 8.</dd><dt>-EB</dt><dd>Generate “big endian” format output.</dd><dt>-EL</dt><dd>Generate “little endian” format output.</dd><dt>-mips1</dt><dd style="width: auto;"> </dd><dt>-mips2</dt><dd style="width: auto;"> </dd><dt>-mips3</dt><dd style="width: auto;"> </dd><dt>-mips4</dt><dd style="width: auto;"> </dd><dt>-mips5</dt><dd style="width: auto;"> </dd><dt>-mips32</dt><dd style="width: auto;"> </dd><dt>-mips32r2</dt><dd style="width: auto;"> </dd><dt>-mips64</dt><dd style="width: auto;"> </dd><dt>-mips64r2</dt><dd>Generate code for a particular mips Instruction Set Architecture level. <code class=Li>-mips1</code> is an alias for <code class=Li>-march=r3000</code>, <code class=Li>-mips2</code> is an alias for <code class=Li>-march=r6000</code>, <code class=Li>-mips3</code> is an alias for <code class=Li>-march=r4000</code> and <code class=Li>-mips4</code> is an alias for <code class=Li>-march=r8000</code>. <code class=Li>-mips5</code>, <code class=Li>-mips32</code>, <code class=Li>-mips32r2</code>, <code class=Li>-mips64</code>, and <code class=Li>-mips64r2</code> correspond to generic <code class=Li>MIPS V</code>, <code class=Li>MIPS32</code>, <code class=Li>MIPS32 Release 2</code>, <code class=Li>MIPS64</code>, and <code class=Li>MIPS64 Release 2</code> ISA processors, respectively.</dd><dt>-march= <var class=Va>CPU</var></dt><dd>Generate code for a particular mips cpu.</dd><dt>-mtune= <var class=Va>cpu</var></dt><dd>Schedule and tune for a particular mips cpu.</dd><dt>-mfix7000</dt><dd style="width: auto;"> </dd><dt>-mno-fix7000</dt><dd>Cause nops to be inserted if the read of the destination register of an mfhi or mflo instruction occurs in the following two instructions.</dd><dt>-mdebug</dt><dd style="width: auto;"> </dd><dt>-no-mdebug</dt><dd>Cause stabs-style debugging output to go into an ECOFF-style .mdebug section instead of the standard ELF .stabs sections.</dd><dt>-mpdr</dt><dd style="width: auto;"> </dd><dt>-mno-pdr</dt><dd>Control generation of <code class=Li>.pdr</code> sections.</dd><dt>-mgp32</dt><dd style="width: auto;"> </dd><dt>-mfp32</dt><dd>The register sizes are normally inferred from the ISA and ABI, but these flags force a certain group of registers to be treated as 32 bits wide at all times. <code class=Li>-mgp32</code> controls the size of general-purpose registers and <code class=Li>-mfp32</code> controls the size of floating-point registers.</dd><dt>-mips16</dt><dd style="width: auto;"> </dd><dt>-no-mips16</dt><dd>Generate code for the MIPS 16 processor. This is equivalent to putting <code class=Li>.set mips16</code> at the start of the assembly file. <code class=Li>-no-mips16</code> turns off this option.</dd><dt>-msmartmips</dt><dd style="width: auto;"> </dd><dt>-mno-smartmips</dt><dd>Enables the SmartMIPS extension to the MIPS32 instruction set. This is equivalent to putting <code class=Li>.set smartmips</code> at the start of the assembly file. <code class=Li>-mno-smartmips</code> turns off this option.</dd><dt>-mips3d</dt><dd style="width: auto;"> </dd><dt>-no-mips3d</dt><dd>Generate code for the MIPS-3D Application Specific Extension. This tells the assembler to accept MIPS-3D instructions. <code class=Li>-no-mips3d</code> turns off this option.</dd><dt>-mdmx</dt><dd style="width: auto;"> </dd><dt>-no-mdmx</dt><dd>Generate code for the MDMX Application Specific Extension. This tells the assembler to accept MDMX instructions. <code class=Li>-no-mdmx</code> turns off this option.</dd><dt>-mdsp</dt><dd style="width: auto;"> </dd><dt>-mno-dsp</dt><dd>Generate code for the DSP Release 1 Application Specific Extension. This tells the assembler to accept DSP Release 1 instructions. <code class=Li>-mno-dsp</code> turns off this option.</dd><dt>-mdspr2</dt><dd style="width: auto;"> </dd><dt>-mno-dspr2</dt><dd>Generate code for the DSP Release 2 Application Specific Extension. This option implies -mdsp. This tells the assembler to accept DSP Release 2 instructions. <code class=Li>-mno-dspr2</code> turns off this option.</dd><dt>-mmt</dt><dd style="width: auto;"> </dd><dt>-mno-mt</dt><dd>Generate code for the MT Application Specific Extension. This tells the assembler to accept MT instructions. <code class=Li>-mno-mt</code> turns off this option.</dd><dt>--construct-floats</dt><dd style="width: auto;"> </dd><dt>--no-construct-floats</dt><dd>The <code class=Li>--no-construct-floats</code> option disables the construction of double width floating point constants by loading the two halves of the value into the two single width floating point registers that make up the double width register. By default <code class=Li>--construct-floats</code> is selected, allowing construction of these floating point constants.</dd><dt>--emulation= <var class=Va>name</var></dt><dd>This option causes <a class=Xr href=as.1.html>as</a> to emulate <a class=Xr href=as.1.html>as</a> configured for some other target, in all respects, including output format (choosing between ELF and ECOFF only), handling of pseudo-opcodes which may generate debugging information or store symbol table information, and default endianness. The available configuration names are: <code class=Li>mipsecoff</code>, <code class=Li>mipself</code>, <code class=Li>mipslecoff</code>, <code class=Li>mipsbecoff</code>, <code class=Li>mipslelf</code>, <code class=Li>mipsbelf</code>. The first two do not alter the default endianness from that of the primary target for which the assembler was configured; the others change the default to little- or big-endian as indicated by the <code class=Li>b</code> or <code class=Li>l</code> in the name. Using <code class=Li>-EB</code> or <code class=Li>-EL</code> will override the endianness selection in any case. <p class=Pp>This option is currently supported only when the primary target <a class=Xr href=as.1.html>as</a> is configured for is a mips ELF or ECOFF target. Furthermore, the primary target or others specified with <code class=Li>--enable-targets=...</code> at configuration time must include support for the other format, if both are to be available. For example, the Irix 5 configuration includes support for both.</p><p class=Pp>Eventually, this option will support more configurations, with more fine-grained control over the assembler's behavior, and will be supported for more processors.</p></dd><dt>-nocpp</dt><dd><a class=Xr href=as.1.html>as</a> ignores this option. It is accepted for compatibility with the native tools.</dd><dt>--trap</dt><dd style="width: auto;"> </dd><dt>--no-trap</dt><dd style="width: auto;"> </dd><dt>--break</dt><dd style="width: auto;"> </dd><dt>--no-break</dt><dd>Control how to deal with multiplication overflow and division by zero. <code class=Li>--trap</code> or <code class=Li>--no-break</code> (which are synonyms) take a trap exception (and only work for Instruction Set Architecture level 2 and higher); <code class=Li>--break</code> or <code class=Li>--no-trap</code> (also synonyms, and the default) take a break exception.</dd><dt>-n</dt><dd>When this option is used, <a class=Xr href=as.1.html>as</a> will issue a warning every time it generates a nop instruction from a macro.</dd></dl><section class=Ss><h2 class=Ss id=Structure_of_this_Manual><a class=permalink href=#Structure_of_this_Manual>Structure of this Manual</a></h2> This manual is intended to describe what you need to know to use GNU <a class=Xr href=as.1.html>as</a>. We cover the syntax expected in source files, including notation for symbols, constants, and expressions; the directives that <a class=Xr href=as.1.html>as</a> understands; and of course how to invoke <a class=Xr href=as.1.html>as</a>. <p class=Pp>We also cover special features in the machine specific configuration of <a class=Xr href=as.1.html>as</a>, including assembler directives.</p><p class=Pp>On the other hand, this manual is <i class=Em>not</i> intended as an introduction to programming in assembly language---let alone programming in general! In a similar vein, we make no attempt to introduce the machine architecture; we do <i class=Em>not</i> describe the instruction set, standard mnemonics, registers or addressing modes that are standard to a particular architecture.</p></section><section class=Ss><h2 class=Ss id=The_GNU_Assembler><a class=permalink href=#The_GNU_Assembler>The GNU Assembler</a></h2> GNU <a class=Xr href=as.1.html>as</a> is really a family of assemblers. This manual describes <a class=Xr href=as.1.html>as</a>, a member of that family which is configured for the machine specific architectures. If you use (or have used) the GNU assembler on one architecture, you should find a fairly similar environment when you use it on another architecture. Each version has much in common with the others, including object file formats, most assembler directives (often called <i class=Em>pseudo-ops</i>) and assembler syntax. <p class=Pp><a class=Xr href=as.1.html>as</a> is primarily intended to assemble the output of the GNU C compiler <code class=Li>gcc</code> for use by the linker <code class=Li>ld</code>. Nevertheless, we've tried to make <a class=Xr href=as.1.html>as</a> assemble correctly everything that other assemblers for the same machine would assemble.</p><p class=Pp>Unlike older assemblers, <a class=Xr href=as.1.html>as</a> is designed to assemble a source program in one pass of the source file. This has a subtle impact on the <code class=Li>.org</code> directive (see Section “Org”).</p></section><section class=Ss><h2 class=Ss id=Object_File_Formats><a class=permalink href=#Object_File_Formats>Object File Formats</a></h2> The GNU assembler can be configured to produce several alternative object file formats. For the most part, this does not affect how you write assembly language programs; but directives for debugging symbols are typically different in different file formats.See Section “Symbol Attributes”. For the machine specific target, <a class=Xr href=as.1.html>as</a> is configured to produce ELF format object files. </section><section class=Ss><h2 class=Ss id=Command_Line><a class=permalink href=#Command_Line>Command Line</a></h2> After the program name <a class=Xr href=as.1.html>as</a>, the command line may contain options and file names. Options may appear in any order, and may be before, after, or between file names. The order of file names is significant. <p class=Pp><span class=Pa>--</span> (two hyphens) by itself names the standard input file explicitly, as one of the files for <a class=Xr href=as.1.html>as</a> to assemble.</p><p class=Pp>Except for <code class=Li>--</code> any command line argument that begins with a hyphen ( <code class=Li>-</code>) is an option. Each option changes the behavior of <a class=Xr href=as.1.html>as</a>. No option changes the way another option works. An option is a <code class=Li>-</code> followed by one or more letters; the case of the letter is important. All options are optional.</p><p class=Pp>Some options expect exactly one file name to follow them. The file name may either immediately follow the option's letter (compatible with older assemblers) or it may be the next command argument (GNU standard). These two command lines are equivalent:</p><div class="Bd Pp Bd-indent"><pre>
as -o my-object-file.o mumble.s
as -omy-object-file.o mumble.s
</pre></div></section><section class=Ss><h2 class=Ss id=Input_Files><a class=permalink href=#Input_Files>Input Files</a></h2> We use the phrase <i class=Em>source program</i>, abbreviated <i class=Em>source</i>, to describe the program input to one run of <a class=Xr href=as.1.html>as</a>. The program may be in one or more files; how the source is partitioned into files doesn't change the meaning of the source. <p class=Pp>The source program is a concatenation of the text in all the files, in the order specified.</p><p class=Pp>Each time you run <a class=Xr href=as.1.html>as</a> it assembles exactly one source program. The source program is made up of one or more files. (The standard input is also a file.)</p><p class=Pp>You give <a class=Xr href=as.1.html>as</a> a command line that has zero or more input file names. The input files are read (from left file name to right). A command line argument (in any position) that has no special meaning is taken to be an input file name.</p><p class=Pp>If you give <a class=Xr href=as.1.html>as</a> no file names it attempts to read one input file from the <a class=Xr href=as.1.html>as</a> standard input, which is normally your terminal. You may have to type ctl-D to tell <a class=Xr href=as.1.html>as</a> there is no more program to assemble.</p><p class=Pp>Use <code class=Li>--</code> if you need to explicitly name the standard input file in your command line.</p><p class=Pp>If the source is empty, <a class=Xr href=as.1.html>as</a> produces a small, empty object file.</p><p class=Pp><i class=Em>Filenames and Line-numbers</i></p><p class=Pp>There are two ways of locating a line in the input file (or files) and either may be used in reporting error messages. One way refers to a line number in a physical file; the other refers to a line number in a “logical” file.See Section “Errors”.</p><p class=Pp><i class=Em>Physical files</i> are those files named in the command line given to <a class=Xr href=as.1.html>as</a>.</p><p class=Pp><i class=Em>Logical files</i> are simply names declared explicitly by assembler directives; they bear no relation to physical files. Logical file names help error messages reflect the original source file, when <a class=Xr href=as.1.html>as</a> source is itself synthesized from other files. <a class=Xr href=as.1.html>as</a> understands the <code class=Li>#</code> directives emitted by the <code class=Li>gcc</code> preprocessor. See also File,, <code class=Li>.file</code> .</p></section><section class=Ss><h2 class=Ss id=Output_(Object)_File><a class=permalink href=#Output_(Object)_File>Output (Object) File</a></h2> Every time you run <a class=Xr href=as.1.html>as</a> it produces an output file, which is your assembly language program translated into numbers. This file is the object file. Its default name is <code class=Li>a.out</code>. You can give it another name by using the [-o] option. Conventionally, object file names end with <span class=Pa>.o</span>. The default name is used for historical reasons: older assemblers were capable of assembling self-contained programs directly into a runnable program. (For some formats, this isn't currently possible, but it can be done for the <code class=Li>a.out</code> format.) <p class=Pp>The object file is meant for input to the linker <code class=Li>ld</code>. It contains assembled program code, information to help <code class=Li>ld</code> integrate the assembled program into a runnable file, and (optionally) symbolic information for the debugger.</p></section><section class=Ss><h2 class=Ss id=Error_and_Warning_Messages><a class=permalink href=#Error_and_Warning_Messages>Error and Warning Messages</a></h2><a class=Xr href=as.1.html>as</a> may write warnings and error messages to the standard error file (usually your terminal). This should not happen when a compiler runs <a class=Xr href=as.1.html>as</a> automatically. Warnings report an assumption made so that <a class=Xr href=as.1.html>as</a> could keep assembling a flawed program; errors report a grave problem that stops the assembly. <p class=Pp>Warning messages have the format</p><div class="Bd Pp Bd-indent"><pre>
file_name:NNN:Warning Message Text
</pre></div><p class=Pp>(where <b class=Sy>NNN</b> is a line number). If a logical file name has been given (see Section “File”) it is used for the filename, otherwise the name of the current input file is used. If a logical line number was given then it is used to calculate the number printed, otherwise the actual line in the current source file is printed. The message text is intended to be self explanatory (in the grand Unix tradition).</p><p class=Pp>Error messages have the format</p><div class="Bd Pp Bd-indent"><pre>
file_name:NNN:FATAL:Error Message Text
</pre></div> The file name and line number are derived as for warning messages. The actual message text may be rather less explanatory because many of them aren't supposed to happen. </section></section><section class=Sh><h2 class=Sh id=Command_Line_Options><a class=permalink href=#Command_Line_Options>Command-Line Options</a></h2> This chapter describes command-line options available in <i class=Em>all</i> versions of the GNU assembler; see Machine Dependencies, for options specific to the machine specific target. <p class=Pp>If you are invoking <a class=Xr href=as.1.html>as</a> via the GNU C compiler, you can use the <code class=Li>-Wa</code> option to pass arguments through to the assembler. The assembler arguments must be separated from each other (and the <code class=Li>-Wa</code>) by commas. For example:</p><div class="Bd Pp Bd-indent"><pre>
gcc -c -g -O -Wa,-alh,-L file.c
</pre></div><p class=Pp>This passes two options to the assembler: <code class=Li>-alh</code> (emit a listing to standard output with high-level and assembly source) and <code class=Li>-L</code> (retain local symbols in the symbol table).</p><p class=Pp>Usually you do not need to use this <code class=Li>-Wa</code> mechanism, since many compiler command-line options are automatically passed to the assembler by the compiler. (You can call the GNU compiler driver with the <code class=Li>-v</code> option to see precisely what options it passes to each compilation pass, including the assembler.)</p><section class=Ss><h2 class=Ss>Enable Listings: [-a[cdhlns]]</h2> These options enable listing output from the assembler. By itself, <code class=Li>-a</code> requests high-level, assembly, and symbols listing. You can use other letters to select specific options for the list: <code class=Li>-ah</code> requests a high-level language listing, <code class=Li>-al</code> requests an output-program assembly listing, and <code class=Li>-as</code> requests a symbol table listing. High-level listings require that a compiler debugging option like <code class=Li>-g</code> be used, and that assembly listings ( <code class=Li>-al</code>) be requested also. <p class=Pp>Use the <code class=Li>-ac</code> option to omit false conditionals from a listing. Any lines which are not assembled because of a false <code class=Li>.if</code> (or <code class=Li>.ifdef</code>, or any other conditional), or a true <code class=Li>.if</code> followed by an <code class=Li>.else</code>, will be omitted from the listing.</p><p class=Pp>Use the <code class=Li>-ad</code> option to omit debugging directives from the listing.</p><p class=Pp>Once you have specified one of these options, you can further control listing output and its appearance using the directives <code class=Li>.list</code>, <code class=Li>.nolist</code>, <code class=Li>.psize</code>, <code class=Li>.eject</code>, <code class=Li>.title</code>, and <code class=Li>.sbttl</code>. The <code class=Li>-an</code> option turns off all forms processing. If you do not request listing output with one of the <code class=Li>-a</code> options, the listing-control directives have no effect.</p><p class=Pp>The letters after <code class=Li>-a</code> may be combined into one option, <i class=Em>e.g.</i>, <code class=Li>-aln</code>.</p><p class=Pp>Note if the assembler source is coming from the standard input (e.g., because it is being created by <code class=Li>gcc</code> and the <code class=Li>-pipe</code> command line switch is being used) then the listing will not contain any comments or preprocessor directives. This is because the listing code buffers input source lines from stdin only after they have been preprocessed by the assembler. This reduces memory usage and makes the code more efficient.</p></section><section class=Ss><h2 class=Ss>[--alternate]</h2> Begin in alternate macro mode, see Altmacro,, <code class=Li>.altmacro</code> . </section><section class=Ss><h2 class=Ss>[-D]</h2> This option has no effect whatsoever, but it is accepted to make it more likely that scripts written for other assemblers also work with <a class=Xr href=as.1.html>as</a>. </section><section class=Ss><h2 class=Ss>Work Faster: [-f]</h2><code class=Li>-f</code> should only be used when assembling programs written by a (trusted) compiler. <code class=Li>-f</code> stops the assembler from doing whitespace and comment preprocessing on the input file(s) before assembling them.See Section “Preprocessing”. <p class=Pp>“<i class=Em>Warning:</i> if you use <code class=Li>-f</code> when the files actually need to be preprocessed (if they contain comments, for example), <a class=Xr href=as.1.html>as</a> does not work correctly.”</p></section><section class=Ss><h2 class=Ss><code class=Li>.include Search Path:</code> [-I <var class=Va>path</var>]</h2> Use this option to add a <var class=Va>path</var> to the list of directories <a class=Xr href=as.1.html>as</a> searches for files specified in <code class=Li>.include</code> directives (see Section “Include”). You may use [-I] as many times as necessary to include a variety of paths. The current working directory is always searched first; after that, <a class=Xr href=as.1.html>as</a> searches any <code class=Li>-I</code> directories in the same order as they were specified (left to right) on the command line. </section><section class=Ss><h2 class=Ss>Difference Tables: [-K]</h2> On the machine specific family, this option is allowed, but has no effect. It is permitted for compatibility with the GNU assembler on other platforms, where it can be used to warn when the assembler alters the machine code generated for <code class=Li>.word</code> directives in difference tables. The machine specific family does not have the addressing limitations that sometimes lead to this alteration on other platforms. </section><section class=Ss><h2 class=Ss>Include Local Symbols: [-L]</h2> Symbols beginning with system-specific local label prefixes, typically <code class=Li>.L</code> for ELF systems or <code class=Li>L</code> for traditional a.out systems, are called <i class=Em>local symbols</i>. See Section.Dq Symbol Names . Normally you do not see such symbols when debugging, because they are intended for the use of programs (like compilers) that compose assembler programs, not for your notice. Normally both <a class=Xr href=as.1.html>as</a> and <code class=Li>ld</code> discard such symbols, so you do not normally debug with them. <p class=Pp>This option tells <a class=Xr href=as.1.html>as</a> to retain those local symbols in the object file. Usually if you do this you also tell the linker <code class=Li>ld</code> to preserve those symbols.</p></section><section class=Ss><h2 class=Ss>Configuring listing output: [--listing]</h2> The listing feature of the assembler can be enabled via the command line switch <code class=Li>-a</code> (see Section “a”). This feature combines the input source file(s) with a hex dump of the corresponding locations in the output object file, and displays them as a listing file. The format of this listing can be controlled by directives inside the assembler source (i.e., <code class=Li>.list</code> (see Section “List”), <code class=Li>.title</code> (see Section “Title”), <code class=Li>.sbttl</code> (see Section “Sbttl”), <code class=Li>.psize</code> (see Section “Psize”), and <code class=Li>.eject</code> (see Section “Eject”) and also by the following switches: <dl class=Bl-tag><dt>--listing-lhs-width= <code class=Li>number</code></dt><dd>Sets the maximum width, in words, of the first line of the hex byte dump. This dump appears on the left hand side of the listing output.</dd><dt>--listing-lhs-width2= <code class=Li>number</code></dt><dd>Sets the maximum width, in words, of any further lines of the hex byte dump for a given input source line. If this value is not specified, it defaults to being the same as the value specified for <code class=Li>--listing-lhs-width</code>. If neither switch is used the default is to one.</dd><dt>--listing-rhs-width= <code class=Li>number</code></dt><dd>Sets the maximum width, in characters, of the source line that is displayed alongside the hex dump. The default value for this parameter is 100. The source line is displayed on the right hand side of the listing output.</dd><dt>--listing-cont-lines= <code class=Li>number</code></dt><dd>Sets the maximum number of continuation lines of hex dump that will be displayed for a given single line of source input. The default value is 4.</dd></dl></section><section class=Ss><h2 class=Ss>Assemble in MRI Compatibility Mode: [-M]</h2> The [-M] or [--mri] option selects MRI compatibility mode. This changes the syntax and pseudo-op handling of <a class=Xr href=as.1.html>as</a> to make it compatible with the <code class=Li>ASM68K</code> or the <code class=Li>ASM960</code> (depending upon the configured target) assembler from Microtec Research. The exact nature of the MRI syntax will not be documented here; see the MRI manuals for more information. Note in particular that the handling of macros and macro arguments is somewhat different. The purpose of this option is to permit assembling existing MRI assembler code using <a class=Xr href=as.1.html>as</a>. <p class=Pp>The MRI compatibility is not complete. Certain operations of the MRI assembler depend upon its object file format, and can not be supported using other object file formats. Supporting these would require enhancing each object file format individually. These are:</p><ul class=Bl-bullet><li>global symbols in common section <p class=Pp>The m68k MRI assembler supports common sections which are merged by the linker. Other object file formats do not support this. <a class=Xr href=as.1.html>as</a> handles common sections by treating them as a single common symbol. It permits local symbols to be defined within a common section, but it can not support global symbols, since it has no way to describe them.</p></li><li>complex relocations <p class=Pp>The MRI assemblers support relocations against a negated section address, and relocations which combine the start addresses of two or more sections. These are not support by other object file formats.</p></li><li><a class=permalink href=#END><code class=Li id=END>END</code></a> pseudo-op specifying start address <p class=Pp>The MRI <code class=Li>END</code> pseudo-op permits the specification of a start address. This is not supported by other object file formats. The start address may instead be specified using the [-e] option to the linker, or in a linker script.</p></li><li><a class=permalink href=#IDNT><code class=Li id=IDNT>IDNT</code></a>, <code class=Li>.ident</code> and <code class=Li>NAME</code> pseudo-ops <p class=Pp>The MRI <code class=Li>IDNT</code>, <code class=Li>.ident</code> and <code class=Li>NAME</code> pseudo-ops assign a module name to the output file. This is not supported by other object file formats.</p></li><li><a class=permalink href=#ORG><code class=Li id=ORG>ORG</code></a> pseudo-op <p class=Pp>The m68k MRI <code class=Li>ORG</code> pseudo-op begins an absolute section at a given address. This differs from the usual <a class=Xr href=as.1.html>as</a><code class=Li>.org</code> pseudo-op, which changes the location within the current section. Absolute sections are not supported by other object file formats. The address of a section may be assigned within a linker script.</p></li></ul><p class=Pp>There are some other features of the MRI assembler which are not supported by <a class=Xr href=as.1.html>as</a>, typically either because they are difficult or because they seem of little consequence. Some of these may be supported in future releases.</p><ul class=Bl-bullet><li>EBCDIC strings <p class=Pp>EBCDIC strings are not supported.</p></li><li>packed binary coded decimal <p class=Pp>Packed binary coded decimal is not supported. This means that the <code class=Li>DC.P</code> and <code class=Li>DCB.P</code> pseudo-ops are not supported.</p></li><li><a class=permalink href=#FEQU><code class=Li id=FEQU>FEQU</code></a> pseudo-op <p class=Pp>The m68k <code class=Li>FEQU</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#NOOBJ><code class=Li id=NOOBJ>NOOBJ</code></a> pseudo-op <p class=Pp>The m68k <code class=Li>NOOBJ</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#OPT><code class=Li id=OPT>OPT</code></a> branch control options <p class=Pp>The m68k <code class=Li>OPT</code> branch control options--- <code class=Li>B</code>, <code class=Li>BRS</code>, <code class=Li>BRB</code>, <code class=Li>BRL</code>, and <code class=Li>BRW</code> ---are ignored. <a class=Xr href=as.1.html>as</a> automatically relaxes all branches, whether forward or backward, to an appropriate size, so these options serve no purpose.</p></li><li><a class=permalink href=#OPT_2><code class=Li id=OPT_2>OPT</code></a> list control options <p class=Pp>The following m68k <code class=Li>OPT</code> list control options are ignored: <code class=Li>C</code>, <code class=Li>CEX</code>, <code class=Li>CL</code>, <code class=Li>CRE</code>, <code class=Li>E</code>, <code class=Li>G</code>, <code class=Li>I</code>, <code class=Li>M</code>, <code class=Li>MEX</code>, <code class=Li>MC</code>, <code class=Li>MD</code>, <code class=Li>X</code>.</p></li><li>other <code class=Li>OPT</code> options <p class=Pp>The following m68k <code class=Li>OPT</code> options are ignored: <code class=Li>NEST</code>, <code class=Li>O</code>, <code class=Li>OLD</code>, <code class=Li>OP</code>, <code class=Li>P</code>, <code class=Li>PCO</code>, <code class=Li>PCR</code>, <code class=Li>PCS</code>, <code class=Li>R</code>.</p></li><li><a class=permalink href=#OPT_3><code class=Li id=OPT_3>OPT</code></a><code class=Li>D</code> option is default <p class=Pp>The m68k <code class=Li>OPT</code><code class=Li>D</code> option is the default, unlike the MRI assembler. <code class=Li>OPT NOD</code> may be used to turn it off.</p></li><li><a class=permalink href=#XREF><code class=Li id=XREF>XREF</code></a> pseudo-op. <p class=Pp>The m68k <code class=Li>XREF</code> pseudo-op is ignored.</p></li><li><a class=permalink href=#.debug><code class=Li id=.debug>.debug</code></a> pseudo-op <p class=Pp>The i960 <code class=Li>.debug</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#.extended><code class=Li id=.extended>.extended</code></a> pseudo-op <p class=Pp>The i960 <code class=Li>.extended</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#.list><code class=Li id=.list>.list</code></a> pseudo-op. <p class=Pp>The various options of the i960 <code class=Li>.list</code> pseudo-op are not supported.</p></li><li><a class=permalink href=#.optimize><code class=Li id=.optimize>.optimize</code></a> pseudo-op <p class=Pp>The i960 <code class=Li>.optimize</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#.output><code class=Li id=.output>.output</code></a> pseudo-op <p class=Pp>The i960 <code class=Li>.output</code> pseudo-op is not supported.</p></li><li><a class=permalink href=#.setreal><code class=Li id=.setreal>.setreal</code></a> pseudo-op <p class=Pp>The i960 <code class=Li>.setreal</code> pseudo-op is not supported.</p></li></ul></section><section class=Ss><h2 class=Ss>Dependency Tracking: [--MD]</h2><a class=Xr href=as.1.html>as</a> can generate a dependency file for the file it creates. This file consists of a single rule suitable for <code class=Li>make</code> describing the dependencies of the main source file. <p class=Pp>The rule is written to the file named in its argument.</p><p class=Pp>This feature is used in the automatic updating of makefiles.</p></section><section class=Ss><h2 class=Ss>Name the Object File: [-o]</h2> There is always one object file output when you run <a class=Xr href=as.1.html>as</a>. By default it has the name <span class=Pa>a.out</span>. You use this option (which takes exactly one filename) to give the object file a different name. <p class=Pp>Whatever the object file is called, <a class=Xr href=as.1.html>as</a> overwrites any existing file of the same name.</p></section><section class=Ss><h2 class=Ss>Join Data and Text Sections: [-R]</h2> [-R] tells <a class=Xr href=as.1.html>as</a> to write the object file as if all data-section data lives in the text section. This is only done at the very last moment: your binary data are the same, but data section parts are relocated differently. The data section part of your object file is zero bytes long because all its bytes are appended to the text section. (See Section “Sections”.) <p class=Pp>When you specify [-R] it would be possible to generate shorter address displacements (because we do not have to cross between text and data section). We refrain from doing this simply for compatibility with older versions of <a class=Xr href=as.1.html>as</a>. In future, [-R] may work this way.</p><p class=Pp>When <a class=Xr href=as.1.html>as</a> is configured for COFF or ELF output, this option is only useful if you use sections named <code class=Li>.text</code> and <code class=Li>.data</code>.</p></section><section class=Ss><h2 class=Ss>Display Assembly Statistics: [--statistics]</h2> Use <code class=Li>--statistics</code> to display two statistics about the resources used by <a class=Xr href=as.1.html>as</a>: the maximum amount of space allocated during the assembly (in bytes), and the total execution time taken for the assembly (in cpu seconds). </section><section class=Ss><h2 class=Ss>Compatible Output: [--traditional-format]</h2> For some targets, the output of <a class=Xr href=as.1.html>as</a> is different in some ways from the output of some existing assembler. This switch requests <a class=Xr href=as.1.html>as</a> to use the traditional format instead. <p class=Pp>For example, it disables the exception frame optimizations which <a class=Xr href=as.1.html>as</a> normally does by default on <code class=Li>gcc</code> output.</p></section><section class=Ss><h2 class=Ss>Announce Version: [-v]</h2> You can find out what version of as is running by including the option <code class=Li>-v</code> (which you can also spell as <code class=Li>-version</code>) on the command line. </section><section class=Ss><h2 class=Ss>Control Warnings: [-W, [--warn, [--no-warn, [--fatal-warnings]]]]</h2><a class=Xr href=as.1.html>as</a> should never give a warning or error message when assembling compiler output. But programs written by people often cause <a class=Xr href=as.1.html>as</a> to give a warning that a particular assumption was made. All such warnings are directed to the standard error file. <p class=Pp>If you use the [-W] and [--no-warn] options, no warnings are issued. This only affects the warning messages: it does not change any particular of how <a class=Xr href=as.1.html>as</a> assembles your file. Errors, which stop the assembly, are still reported.</p><p class=Pp>If you use the [--fatal-warnings] option, <a class=Xr href=as.1.html>as</a> considers files that generate warnings to be in error.</p><p class=Pp>You can switch these options off again by specifying [--warn], which causes warnings to be output as usual.</p></section><section class=Ss><h2 class=Ss>Generate Object File in Spite of Errors: [-Z]</h2> After an error message, <a class=Xr href=as.1.html>as</a> normally produces no output. If for some reason you are interested in object file output even after <a class=Xr href=as.1.html>as</a> gives an error message on your program, use the <code class=Li>-Z</code> option. If there are any errors, <a class=Xr href=as.1.html>as</a> continues anyways, and writes an object file after a final warning message of the form <var class=Va>n errors,</var><var class=Va>m warnings, generating bad object file.</var></section></section><section class=Sh><h2 class=Sh id=Syntax><a class=permalink href=#Syntax>Syntax</a></h2> This chapter describes the machine-independent syntax allowed in a source file. <a class=Xr href=as.1.html>as</a> syntax is similar to what many other assemblers use; it is inspired by the BSD 4.2 assembler. <section class=Ss><h2 class=Ss id=Preprocessing><a class=permalink href=#Preprocessing>Preprocessing</a></h2> The <a class=Xr href=as.1.html>as</a> internal preprocessor: <ul class=Bl-bullet><li>adjusts and removes extra whitespace. It leaves one space or tab before the keywords on a line, and turns any other whitespace on the line into a single space.</li><li>removes all comments, replacing them with a single space, or an appropriate number of newlines.</li><li>converts character constants into the appropriate numeric values.</li></ul><p class=Pp>It does not do macro processing, include file handling, or anything else you may get from your C compiler's preprocessor. You can do include file processing with the <code class=Li>.include</code> directive (see Section “Include”). You can use the GNU C compiler driver to get other “CPP” style preprocessing by giving the input file a <code class=Li>.S</code> suffix.See Section “Overall Options”.</p><p class=Pp>Excess whitespace, comments, and character constants cannot be used in the portions of the input text that are not preprocessed.</p><p class=Pp>If the first line of an input file is <code class=Li>#NO_APP</code> or if you use the <code class=Li>-f</code> option, whitespace and comments are not removed from the input file. Within an input file, you can ask for whitespace and comment removal in specific portions of the by putting a line that says <code class=Li>#APP</code> before the text that may contain whitespace or comments, and putting a line that says <code class=Li>#NO_APP</code> after this text. This feature is mainly intend to support <code class=Li>asm</code> statements in compilers whose output is otherwise free of comments and whitespace.</p></section><section class=Ss><h2 class=Ss id=Whitespace><a class=permalink href=#Whitespace>Whitespace</a></h2><i class=Em>Whitespace</i> is one or more blanks or tabs, in any order. Whitespace is used to separate symbols, and to make programs neater for people to read. Unless within character constants (see Section “Characters”), any whitespace means the same as exactly one space. </section><section class=Ss><h2 class=Ss id=Comments><a class=permalink href=#Comments>Comments</a></h2> There are two ways of rendering comments to <a class=Xr href=as.1.html>as</a>. In both cases the comment is equivalent to one space. <p class=Pp>Anything from <code class=Li>/*</code> through the next <code class=Li>*/</code> is a comment. This means you may not nest these comments.</p><div class="Bd Pp Bd-indent"><pre>
/*
  The only way to include a newline ('\n') in a comment
  is to use this sort of comment.
*/

/* This sort of comment does not nest. */
</pre></div><p class=Pp>Anything from the <i class=Em>line comment</i> character to the next newline is considered a comment and is ignored. The line comment character is <code class=Li>@</code> on the ARM; <code class=Li>#</code> on the i386 and x86-64; <code class=Li>#</code> for Motorola PowerPC; ! on the SPARC; see Machine Dependencies.</p><p class=Pp>To be compatible with past assemblers, lines that begin with <code class=Li>#</code> have a special interpretation. Following the <code class=Li>#</code> should be an absolute expression (see Section “Expressions”): the logical line number of the <i class=Em>next</i> line. Then a string (see Section “Strings”) is allowed: if present it is a new logical file name. The rest of the line, if any, should be whitespace.</p><p class=Pp>If the first non-whitespace characters on the line are not numeric, the line is ignored. (Just like a comment.)</p><div class="Bd Pp Bd-indent"><pre>
                          # This is an ordinary comment.
# 42-6 "new_file_name"    # New logical file name
                          # This is logical line # 36.
</pre></div> This feature is deprecated, and may disappear from future versions of <a class=Xr href=as.1.html>as</a>. </section><section class=Ss><h2 class=Ss id=Symbols><a class=permalink href=#Symbols>Symbols</a></h2> A <i class=Em>symbol</i> is one or more characters chosen from the set of all letters (both upper and lower case), digits and the three characters <code class=Li>_.$</code>. No symbol may begin with a digit. Case is significant. There is no length limit: all characters are significant. Symbols are delimited by characters not in that set, or by the beginning of a file (since the source program must end with a newline, the end of a file is not a possible symbol delimiter).See Section “Symbols”. </section><section class=Ss><h2 class=Ss id=Statements><a class=permalink href=#Statements>Statements</a></h2> A <i class=Em>statement</i> ends at a newline character ( <code class=Li>\n</code>) or at a semicolon ( ;). The newline or semicolon is considered part of the preceding statement. Newlines and semicolons within character constants are an exception: they do not end statements. <p class=Pp>It is an error to end any statement with end-of-file: the last character of any input file should be a newline.</p><p class=Pp>An empty statement is allowed, and may include whitespace. It is ignored.</p><p class=Pp>A statement begins with zero or more labels, optionally followed by a key symbol which determines what kind of statement it is. The key symbol determines the syntax of the rest of the statement. If the symbol begins with a dot . then the statement is an assembler directive: typically valid for any computer. If the symbol begins with a letter the statement is an assembly language <i class=Em>instruction</i>: it assembles into a machine language instruction.</p><p class=Pp>A label is a symbol immediately followed by a colon ( :). Whitespace before a label or after a colon is permitted, but you may not have whitespace between a label's symbol and its colon.See Section “Labels”.</p><div class="Bd Pp Bd-indent"><pre>
label:     .directive    followed by something
another_label:           # This is an empty statement.
           instruction   operand_1, operand_2, ...
</pre></div></section><section class=Ss><h2 class=Ss id=Constants><a class=permalink href=#Constants>Constants</a></h2> A constant is a number, written so that its value is known by inspection, without knowing any context. Like this: <div class="Bd Pp Bd-indent"><pre>

.byte  74, 0112, 092, 0x4A, 0X4a, 'J, '\J # All the same value.
.ascii "Ring the bell\7"                  # A string constant.
.octa  0x123456789abcdef0123456789ABCDEF0 # A biGNUm.
.float 0f-314159265358979323846264338327\
95028841971.693993751E-40                 # - pi, a flonum.

</pre></div><p class=Pp><i class=Em>Character Constants</i></p><p class=Pp>There are two kinds of character constants. A <i class=Em>character</i> stands for one character in one byte and its value may be used in numeric expressions. String constants (properly called string <i class=Em>literals</i>) are potentially many bytes and their values may not be used in arithmetic expressions.</p><p class=Pp><span class=No>Strings</span></p><p class=Pp>A <i class=Em>string</i> is written between double-quotes. It may contain double-quotes or null characters. The way to get special characters into a string is to <i class=Em>escape</i> these characters: precede them with a backslash <code class=Li>\</code> character. For example <code class=Li>\\</code> represents one backslash: the first <code class=Li>\</code> is an escape which tells <a class=Xr href=as.1.html>as</a> to interpret the second character literally as a backslash (which prevents <a class=Xr href=as.1.html>as</a> from recognizing the second <code class=Li>\</code> as an escape character). The complete list of escapes follows.</p><dl class=Bl-tag><dt>\b</dt><dd>Mnemonic for backspace; for ASCII this is octal code 010.</dd><dt>\f</dt><dd>Mnemonic for FormFeed; for ASCII this is octal code 014.</dd><dt>\n</dt><dd>Mnemonic for newline; for ASCII this is octal code 012.</dd><dt>\r</dt><dd>Mnemonic for carriage-Return; for ASCII this is octal code 015.</dd><dt>\t</dt><dd>Mnemonic for horizontal Tab; for ASCII this is octal code 011.</dd><dt>\ <var class=Va>digit</var><var class=Va>digit</var><var class=Va>digit</var></dt><dd>An octal character code. The numeric code is 3 octal digits. For compatibility with other Unix systems, 8 and 9 are accepted as digits: for example, <code class=Li>\008</code> has the value 010, and <code class=Li>\009</code> the value 011.</dd><dt>\ <code class=Li>x</code><var class=Va>hex-digits...</var></dt><dd>A hex character code. All trailing hex digits are combined. Either upper or lower case <code class=Li>x</code> works.</dd><dt>\\</dt><dd>Represents one <code class=Li>\</code> character.</dd><dt>\"</dt><dd>Represents one <code class=Li></code> character. Needed in strings to represent this character, because an unescaped <code class=Li></code> would end the string.</dd><dt>\ <var class=Va>anything-else</var></dt><dd>Any other character when escaped by <code class=Li>\</code> gives a warning, but assembles as if the <code class=Li>\</code> was not present. The idea is that if you used an escape sequence you clearly didn't want the literal interpretation of the following character. However <a class=Xr href=as.1.html>as</a> has no other interpretation, so <a class=Xr href=as.1.html>as</a> knows it is giving you the wrong code and warns you of the fact.</dd></dl><p class=Pp>Which characters are escapable, and what those escapes represent, varies widely among assemblers. The current set is what we think the BSD 4.2 assembler recognizes, and is a subset of what most C compilers recognize. If you are in doubt, do not use an escape sequence.</p><p class=Pp><span class=No>Characters</span></p><p class=Pp>A single character may be written as a single quote immediately followed by that character. The same escapes apply to characters as to strings. So if you want to write the character backslash, you must write <code class=Li>'\\</code> where the first <code class=Li>\</code> escapes the second <code class=Li>\</code>. As you can see, the quote is an acute accent, not a grave accent. A newline (or semicolon ;) immediately following an acute accent is taken as a literal character and does not count as the end of a statement. The value of a character constant in a numeric expression is the machine's byte-wide code for that character. <a class=Xr href=as.1.html>as</a> assumes your character code is ASCII: <code class=Li>'A</code> means 65, <code class=Li>'B</code> means 66, and so on.</p><p class=Pp><i class=Em>Number Constants</i></p><p class=Pp><a class=Xr href=as.1.html>as</a> distinguishes three kinds of numbers according to how they are stored in the target machine. <i class=Em>Integers</i> are numbers that would fit into an <code class=Li>int</code> in the C language. <i class=Em>BiGNUms</i> are integers, but they are stored in more than 32 bits. <i class=Em>Flonums</i> are floating point numbers, described below.</p><p class=Pp><span class=No>Integers</span></p><p class=Pp>A binary integer is <code class=Li>0b</code> or <code class=Li>0B</code> followed by zero or more of the binary digits <code class=Li>01</code>.</p><p class=Pp>An octal integer is <code class=Li>0</code> followed by zero or more of the octal digits ( <code class=Li>01234567</code>).</p><p class=Pp>A decimal integer starts with a non-zero digit followed by zero or more digits ( <code class=Li>0123456789</code>).</p><p class=Pp>A hexadecimal integer is <code class=Li>0x</code> or <code class=Li>0X</code> followed by one or more hexadecimal digits chosen from <code class=Li>0123456789abcdefABCDEF</code>.</p><p class=Pp>Integers have the usual values. To denote a negative integer, use the prefix operator <code class=Li>-</code> discussed under expressions (see Section “Prefix Ops”).</p><p class=Pp><span class=No>BiGNUms</span></p><p class=Pp>A <i class=Em>biGNUm</i> has the same syntax and semantics as an integer except that the number (or its negative) takes more than 32 bits to represent in binary. The distinction is made because in some places integers are permitted while biGNUms are not.</p><p class=Pp><span class=No>Flonums</span></p><p class=Pp>A <i class=Em>flonum</i> represents a floating point number. The translation is indirect: a decimal floating point number from the text is converted by <a class=Xr href=as.1.html>as</a> to a generic binary floating point number of more than sufficient precision. This generic floating point number is converted to a particular computer's floating point format (or formats) by a portion of <a class=Xr href=as.1.html>as</a> specialized to that computer.</p><p class=Pp>A flonum is written by writing (in order)</p><ul class=Bl-bullet><li>The digit <code class=Li>0</code>.</li><li>A letter, to tell <a class=Xr href=as.1.html>as</a> the rest of the number is a flonum.</li><li>An optional sign: either <code class=Li>+</code> or <code class=Li>-</code>.</li><li>An optional <i class=Em>integer part</i>: zero or more decimal digits.</li><li>An optional <i class=Em>fractional part</i>: . followed by zero or more decimal digits.</li><li>An optional exponent, consisting of: <ul class=Bl-bullet><li>An <code class=Li>E</code> or <code class=Li>e</code>.</li><li>Optional sign: either <code class=Li>+</code> or <code class=Li>-</code>.</li><li>One or more decimal digits.</li></ul></li></ul><p class=Pp>At least one of the integer part or the fractional part must be present. The floating point number has the usual base-10 value.</p><p class=Pp><a class=Xr href=as.1.html>as</a> does all processing using integers. Flonums are computed independently of any floating point hardware in the computer running <a class=Xr href=as.1.html>as</a>.</p></section></section><section class=Sh><h2 class=Sh id=Sections_and_Relocation><a class=permalink href=#Sections_and_Relocation>Sections and Relocation</a></h2><section class=Ss><h2 class=Ss id=Background><a class=permalink href=#Background>Background</a></h2> Roughly, a section is a range of addresses, with no gaps; all data “in” those addresses is treated the same for some particular purpose. For example there may be a “read only” section. <p class=Pp>The linker <code class=Li>ld</code> reads many object files (partial programs) and combines their contents to form a runnable program. When <a class=Xr href=as.1.html>as</a> emits an object file, the partial program is assumed to start at address 0. <code class=Li>ld</code> assigns the final addresses for the partial program, so that different partial programs do not overlap. This is actually an oversimplification, but it suffices to explain how <a class=Xr href=as.1.html>as</a> uses sections.</p><p class=Pp><code class=Li>ld</code> moves blocks of bytes of your program to their run-time addresses. These blocks slide to their run-time addresses as rigid units; their length does not change and neither does the order of bytes within them. Such a rigid unit is called a <i class=Em>section</i>. Assigning run-time addresses to sections is called <i class=Em>relocation</i>. It includes the task of adjusting mentions of object-file addresses so they refer to the proper run-time addresses.</p><p class=Pp>An object file written by <a class=Xr href=as.1.html>as</a> has at least three sections, any of which may be empty. These are named <i class=Em>text</i>, <i class=Em>data</i> and <i class=Em>bss</i> sections.</p><p class=Pp><a class=Xr href=as.1.html>as</a> can also generate whatever other named sections you specify using the <code class=Li>.section</code> directive (see Section “Section”). If you do not use any directives that place output in the <code class=Li>.text</code> or <code class=Li>.data</code> sections, these sections still exist, but are empty.</p><p class=Pp>Within the object file, the text section starts at address <code class=Li>0</code>, the data section follows, and the bss section follows the data section.</p><p class=Pp>To let <code class=Li>ld</code> know which data changes when the sections are relocated, and how to change that data, <a class=Xr href=as.1.html>as</a> also writes to the object file details of the relocation needed. To perform relocation <code class=Li>ld</code> must know, each time an address in the object file is mentioned:</p><ul class=Bl-bullet><li>Where in the object file is the beginning of this reference to an address?</li><li>How long (in bytes) is this reference?</li><li>Which section does the address refer to? What is the numeric value of <div class="Bd Pp Bd-indent">( <var class=Va>address</var>) -( <var class=Va>start-address of section</var>)?</div></li><li>Is the reference to an address “Program-Counter relative”?</li></ul><p class=Pp>In fact, every address <a class=Xr href=as.1.html>as</a> ever uses is expressed as</p><div class="Bd Pp Bd-indent">( <var class=Va>section</var>) + ( <var class=Va>offset into section</var>)</div> Further, most expressions <a class=Xr href=as.1.html>as</a> computes have this section-relative nature. <p class=Pp>In this manual we use the notation { <var class=Va>secname</var><var class=Va>N</var> }to mean “offset <var class=Va>N</var> into section <var class=Va>secname</var> .”</p><p class=Pp>Apart from text, data and bss sections you need to know about the <i class=Em>absolute</i> section. When <code class=Li>ld</code> mixes partial programs, addresses in the absolute section remain unchanged. For example, address <code class=Li>{absolute 0}</code> is “relocated” to run-time address 0 by <code class=Li>ld</code>. Although the linker never arranges two partial programs' data sections with overlapping addresses after linking, <i class=Em>by definition</i> their absolute sections must overlap. Address <code class=Li>{absolute 239}</code> in one part of a program is always the same address when the program is running as address <code class=Li>{absolute 239}</code> in any other part of the program.</p><p class=Pp>The idea of sections is extended to the <i class=Em>undefined</i> section. Any address whose section is unknown at assembly time is by definition rendered {undefined <var class=Va>U</var> }---where <var class=Va>U</var> is filled in later. Since numbers are always defined, the only way to generate an undefined address is to mention an undefined symbol. A reference to a named common block would be such a symbol: its value is unknown at assembly time so it has section <i class=Em>undefined</i>.</p><p class=Pp>By analogy the word <i class=Em>section</i> is used to describe groups of sections in the linked program. <code class=Li>ld</code> puts all partial programs' text sections in contiguous addresses in the linked program. It is customary to refer to the <i class=Em>text section</i> of a program, meaning all the addresses of all partial programs' text sections. Likewise for data and bss sections.</p><p class=Pp>Some sections are manipulated by <code class=Li>ld</code>; others are invented for use of <a class=Xr href=as.1.html>as</a> and have no meaning except during assembly.</p></section><section class=Ss><h2 class=Ss id=Linker_Sections><a class=permalink href=#Linker_Sections>Linker Sections</a></h2><code class=Li>ld</code> deals with just four kinds of sections, summarized below. <dl class=Bl-tag><dt>named sections</dt><dd>These sections hold your program. <a class=Xr href=as.1.html>as</a> and <code class=Li>ld</code> treat them as separate but equal sections. Anything you can say of one section is true of another. When the program is running, however, it is customary for the text section to be unalterable. The text section is often shared among processes: it contains instructions, constants and the like. The data section of a running program is usually alterable: for example, C variables would be stored in the data section.</dd><dt>bss section</dt><dd>This section contains zeroed bytes when your program begins running. It is used to hold uninitialized variables or common storage. The length of each partial program's bss section is important, but because it starts out containing zeroed bytes there is no need to store explicit zero bytes in the object file. The bss section was invented to eliminate those explicit zeros from object files.</dd><dt>absolute section</dt><dd>Address 0 of this section is always “relocated” to runtime address 0. This is useful if you want to refer to an address that <code class=Li>ld</code> must not change when relocating. In this sense we speak of absolute addresses being “unrelocatable”: they do not change during relocation.</dd><dt>undefined section</dt><dd>This “section” is a catch-all for address references to objects not in the preceding sections.</dd></dl><p class=Pp>An idealized example of three relocatable sections follows. The example uses the traditional section names <code class=Li>.text</code> and <code class=Li>.data</code>. Memory addresses are on the horizontal axis.</p><div class="Bd Pp Bd-indent"><pre>
                      +-----+----+--+
partial program # 1:  |ttttt|dddd|00|
                      +-----+----+--+

                      text   data bss
                      seg.   seg. seg.

                      +---+---+---+
partial program # 2:  |TTT|DDD|000|
                      +---+---+---+

                      +--+---+-----+--+----+---+-----+~~
linked program:       |  |TTT|ttttt|  |dddd|DDD|00000|
                      +--+---+-----+--+----+---+-----+~~

    addresses:        0 ...
</pre></div></section><section class=Ss><h2 class=Ss id=Assembler_Internal_Sections><a class=permalink href=#Assembler_Internal_Sections>Assembler Internal Sections</a></h2> These sections are meant only for the internal use of <a class=Xr href=as.1.html>as</a>. They have no meaning at run-time. You do not really need to know about these sections for most purposes; but they can be mentioned in <a class=Xr href=as.1.html>as</a> warning messages, so it might be helpful to have an idea of their meanings to <a class=Xr href=as.1.html>as</a>. These sections are used to permit the value of every expression in your assembly language program to be a section-relative address. <dl class=Bl-tag><dt>ASSEMBLER-INTERNAL-LOGIC-ERROR!</dt><dd>An internal assembler logic error has been found. This means there is a bug in the assembler.</dd><dt>expr section</dt><dd>The assembler stores complex expression internally as combinations of symbols. When it needs to represent an expression as a symbol, it puts it in the expr section.</dd></dl></section><section class=Ss><h2 class=Ss id=Sub_Sections><a class=permalink href=#Sub_Sections>Sub-Sections</a></h2> You may have separate groups of data in named sections that you want to end up near to each other in the object file, even though they are not contiguous in the assembler source. <a class=Xr href=as.1.html>as</a> allows you to use <i class=Em>subsections</i> for this purpose. Within each section, there can be numbered subsections with values from 0 to 8192. Objects assembled into the same subsection go into the object file together with other objects in the same subsection. For example, a compiler might want to store constants in the text section, but might not want to have them interspersed with the program being assembled. In this case, the compiler could issue a <code class=Li>.text 0</code> before each section of code being output, and a <code class=Li>.text 1</code> before each group of constants being output. <p class=Pp>Subsections are optional. If you do not use subsections, everything goes in subsection number zero.</p><p class=Pp>Subsections appear in your object file in numeric order, lowest numbered to highest. (All this to be compatible with other people's assemblers.) The object file contains no representation of subsections; <code class=Li>ld</code> and other programs that manipulate object files see no trace of them. They just see all your text subsections as a text section, and all your data subsections as a data section.</p><p class=Pp>To specify which subsection you want subsequent statements assembled into, use a numeric argument to specify it, in a <code class=Li>.text</code><var class=Va>expression</var> or a <code class=Li>.data</code><var class=Va>expression</var> statement. You can also use the <code class=Li>.subsection</code> directive (see Section “SubSection”) to specify a subsection: <code class=Li>.subsection</code><var class=Va>expression</var>. <var class=Va>Expression</var> should be an absolute expression (see Section “Expressions”). If you just say <code class=Li>.text</code> then <code class=Li>.text 0</code> is assumed. Likewise <code class=Li>.data</code> means <code class=Li>.data 0</code>. Assembly begins in <code class=Li>text 0</code>. For instance:</p><div class="Bd Pp Bd-indent"><pre>
.text 0     # The default subsection is text 0 anyway.
.ascii "This lives in the first text subsection. *"
.text 1
.ascii "But this lives in the second text subsection."
.data 0
.ascii "This lives in the data section,"
.ascii "in the first data subsection."
.text 0
.ascii "This lives in the first text section,"
.ascii "immediately following the asterisk (*)."
</pre></div><p class=Pp>Each section has a <i class=Em>location counter</i> incremented by one for every byte assembled into that section. Because subsections are merely a convenience restricted to <a class=Xr href=as.1.html>as</a> there is no concept of a subsection location counter. There is no way to directly manipulate a location counter---but the <code class=Li>.align</code> directive changes it, and any label definition captures its current value. The location counter of the section where statements are being assembled is said to be the <i class=Em>active</i> location counter.</p></section><section class=Ss><h2 class=Ss id=bss_Section><a class=permalink href=#bss_Section>bss Section</a></h2> The bss section is used for local common variable storage. You may allocate address space in the bss section, but you may not dictate data to load into it before your program executes. When your program starts running, all the contents of the bss section are zeroed bytes. <p class=Pp>The <code class=Li>.lcomm</code> pseudo-op defines a symbol in the bss section; see Lcomm,, <code class=Li>.lcomm</code> .</p><p class=Pp>The <code class=Li>.comm</code> pseudo-op may be used to declare a common symbol, which is another form of uninitialized symbol; see Comm,, <code class=Li>.comm</code> .</p></section></section><section class=Sh><h2 class=Sh id=Symbols_2><a class=permalink href=#Symbols_2>Symbols</a></h2> Symbols are a central concept: the programmer uses symbols to name things, the linker uses symbols to link, and the debugger uses symbols to debug. <p class=Pp>“<i class=Em>Warning:</i><a class=Xr href=as.1.html>as</a> does not place symbols in the object file in the same order they were declared. This may break some debuggers.”</p><section class=Ss><h2 class=Ss id=Labels><a class=permalink href=#Labels>Labels</a></h2> A <i class=Em>label</i> is written as a symbol immediately followed by a colon :. The symbol then represents the current value of the active location counter, and is, for example, a suitable instruction operand. You are warned if you use the same symbol to represent two different locations: the first definition overrides any other definitions. </section><section class=Ss><h2 class=Ss id=Giving_Symbols_Other_Values><a class=permalink href=#Giving_Symbols_Other_Values>Giving Symbols Other Values</a></h2> A symbol can be given an arbitrary value by writing a symbol, followed by an equals sign <code class=Li>=</code>, followed by an expression (see Section “Expressions”). This is equivalent to using the <code class=Li>.set</code> directive.See Section “Set”. In the same way, using a double equals sign <code class=Li>=</code><code class=Li>=</code> here represents an equivalent of the <code class=Li>.eqv</code> directive.See Section “Eqv”. </section><section class=Ss><h2 class=Ss id=Symbol_Names><a class=permalink href=#Symbol_Names>Symbol Names</a></h2> Symbol names begin with a letter or with one of <code class=Li>._</code>. On most machines, you can also use <code class=Li>$</code> in symbol names; exceptions are noted in Machine Dependencies. That character may be followed by any string of digits, letters, dollar signs (unless otherwise noted for a particular target machine), and underscores. <p class=Pp>Case of letters is significant: <code class=Li>foo</code> is a different symbol name than <code class=Li>Foo</code>.</p><p class=Pp>Each symbol has exactly one name. Each name in an assembly language program refers to exactly one symbol. You may use that symbol name any number of times in a program.</p><p class=Pp><i class=Em>Local Symbol Names</i></p><p class=Pp>A local symbol is any symbol beginning with certain local label prefixes. By default, the local label prefix is <code class=Li>.L</code> for ELF systems or <code class=Li>L</code> for traditional a.out systems, but each target may have its own set of local label prefixes.</p><p class=Pp>Local symbols are defined and used within the assembler, but they are normally not saved in object files. Thus, they are not visible when debugging. You may use the <code class=Li>-L</code> option (see Section “L”) to retain the local symbols in the object files.</p><p class=Pp><i class=Em>Local Labels</i></p><p class=Pp>Local labels help compilers and programmers use names temporarily. They create symbols which are guaranteed to be unique over the entire scope of the input source code and which can be referred to by a simple notation. To define a local label, write a label of the form <b class=Sy>N:</b> (where <b class=Sy>N</b> represents any positive integer). To refer to the most recent previous definition of that label write <b class=Sy>Nb</b>, using the same number as when you defined the label. To refer to the next definition of a local label, write <b class=Sy>Nf</b> ---the <code class=Li>b</code> stands for “backwards” and the <code class=Li>f</code> stands for “forwards”.</p><p class=Pp>There is no restriction on how you can use these labels, and you can reuse them too. So that it is possible to repeatedly define the same local label (using the same number <b class=Sy>N</b>), although you can only refer to the most recently defined local label of that number (for a backwards reference) or the next definition of a specific local label for a forward reference. It is also worth noting that the first 10 local labels ( <b class=Sy>0:</b> ....Li Sy 9: ) are implemented in a slightly more efficient manner than the others.</p><p class=Pp>Here is an example:</p><div class="Bd Pp Bd-indent"><pre>
1:        branch 1f
2:        branch 1b
1:        branch 2f
2:        branch 1b
</pre></div><p class=Pp>Which is the equivalent of:</p><div class="Bd Pp Bd-indent"><pre>
label_1:  branch label_3
label_2:  branch label_1
label_3:  branch label_4
label_4:  branch label_3
</pre></div><p class=Pp>Local label names are only a notational device. They are immediately transformed into more conventional symbol names before the assembler uses them. The symbol names are stored in the symbol table, appear in error messages, and are optionally emitted to the object file. The names are constructed using these parts:</p><dl class=Bl-tag><dt><i class=Em>local label prefix</i></dt><dd>All local symbols begin with the system-specific local label prefix. Normally both <a class=Xr href=as.1.html>as</a> and <code class=Li>ld</code> forget symbols that start with the local label prefix. These labels are used for symbols you are never intended to see. If you use the <code class=Li>-L</code> option then <a class=Xr href=as.1.html>as</a> retains these symbols in the object file. If you also instruct <code class=Li>ld</code> to retain these symbols, you may use them in debugging.</dd><dt><var class=Va>number</var></dt><dd>This is the number that was used in the local label definition. So if the label is written <code class=Li>55:</code> then the number is <code class=Li>55</code>.</dd><dt><a class=permalink href=#C-B><code class=Li id=C-B>C-B</code></a></dt><dd>This unusual character is included so you do not accidentally invent a symbol of the same name. The character has ASCII value of <code class=Li>\002</code> (control-B).</dd><dt><i class=Em>ordinal number</i></dt><dd>This is a serial number to keep the labels distinct. The first definition of <code class=Li>0:</code> gets the number <code class=Li>1</code>. The 15th definition of <code class=Li>0:</code> gets the number <code class=Li>15</code>, and so on. Likewise the first definition of <code class=Li>1:</code> gets the number <code class=Li>1</code> and its 15th definition gets <code class=Li>15</code> as well.</dd></dl><p class=Pp>So for example, the first <code class=Li>1:</code> may be named <code class=Li>.L1</code><code class=Li>C-B1</code>, and the 44th <code class=Li>3:</code> may be named <code class=Li>.L3</code><code class=Li>C-B44</code>.</p><p class=Pp><i class=Em>Dollar Local Labels</i></p><p class=Pp><code class=Li>as</code> also supports an even more local form of local labels called dollar labels. These labels go out of scope (i.e., they become undefined) as soon as a non-local label is defined. Thus they remain valid for only a small region of the input source code. Normal local labels, by contrast, remain in scope for the entire file, or until they are redefined by another occurrence of the same local label.</p><p class=Pp>Dollar labels are defined in exactly the same way as ordinary local labels, except that instead of being terminated by a colon, they are terminated by a dollar sign, e.g., <b class=Sy>55$</b>.</p><p class=Pp>They can also be distinguished from ordinary local labels by their transformed names which use ASCII character <code class=Li>\001</code> (control-A) as the magic character to distinguish them from ordinary labels. For example, the fifth definition of <code class=Li>6$</code> may be named <code class=Li>.L6</code><code class=Li>C-A5</code>.</p></section><section class=Ss><h2 class=Ss id=The_Special_Dot_Symbol><a class=permalink href=#The_Special_Dot_Symbol>The Special Dot Symbol</a></h2> The special symbol . refers to the current address that <a class=Xr href=as.1.html>as</a> is assembling into. Thus, the expression <code class=Li>melvin: .long</code>. defines <code class=Li>melvin</code> to contain its own address. Assigning a value to . is treated the same as a <code class=Li>.org</code> directive. Thus, the expression <code class=Li>.=.+4</code> is the same as saying <code class=Li>.space 4</code>. </section><section class=Ss><h2 class=Ss id=Symbol_Attributes><a class=permalink href=#Symbol_Attributes>Symbol Attributes</a></h2> Every symbol has, as well as its name, the attributes “Value” and “Type”. Depending on output format, symbols can also have auxiliary attributes. The detailed definitions are in <span class=Pa>a.out.h</span>. <p class=Pp>If you use a symbol without defining it, <a class=Xr href=as.1.html>as</a> assumes zero for all these attributes, and probably won't warn you. This makes the symbol an externally defined symbol, which is generally what you would want.</p><p class=Pp><i class=Em>Value</i></p><p class=Pp>The value of a symbol is (usually) 32 bits. For a symbol which labels a location in the text, data, bss or absolute sections the value is the number of addresses from the start of that section to the label. Naturally for text, data and bss sections the value of a symbol changes as <code class=Li>ld</code> changes section base addresses during linking. Absolute symbols' values do not change during linking: that is why they are called absolute.</p><p class=Pp>The value of an undefined symbol is treated in a special way. If it is 0 then the symbol is not defined in this assembler source file, and <code class=Li>ld</code> tries to determine its value from other files linked into the same program. You make this kind of symbol simply by mentioning a symbol name without defining it. A non-zero value represents a <code class=Li>.comm</code> common declaration. The value is how much common storage to reserve, in bytes (addresses). The symbol refers to the first address of the allocated storage.</p><p class=Pp><i class=Em>Type</i></p><p class=Pp>The type attribute of a symbol contains relocation (section) information, any flag settings indicating that a symbol is external, and (optionally), other information for linkers and debuggers. The exact format depends on the object-code output format in use.</p></section></section><section class=Sh><h2 class=Sh id=Expressions><a class=permalink href=#Expressions>Expressions</a></h2> An <i class=Em>expression</i> specifies an address or numeric value. Whitespace may precede and/or follow an expression. <p class=Pp>The result of an expression must be an absolute number, or else an offset into a particular section. If an expression is not absolute, and there is not enough information when <a class=Xr href=as.1.html>as</a> sees the expression to know its section, a second pass over the source program might be necessary to interpret the expression---but the second pass is currently not implemented. <a class=Xr href=as.1.html>as</a> aborts with an error message in this situation.</p><section class=Ss><h2 class=Ss id=Empty_Expressions><a class=permalink href=#Empty_Expressions>Empty Expressions</a></h2> An empty expression has no value: it is just whitespace or null. Wherever an absolute expression is required, you may omit the expression, and <a class=Xr href=as.1.html>as</a> assumes a value of (absolute) 0. This is compatible with other assemblers. </section><section class=Ss><h2 class=Ss id=Integer_Expressions><a class=permalink href=#Integer_Expressions>Integer Expressions</a></h2> An <i class=Em>integer expression</i> is one or more <i class=Em>arguments</i> delimited by <i class=Em>operators</i>. <p class=Pp><i class=Em>Arguments</i></p><p class=Pp><i class=Em>Arguments</i> are symbols, numbers or subexpressions. In other contexts arguments are sometimes called “arithmetic operands”. In this manual, to avoid confusing them with the “instruction operands” of the machine language, we use the term “argument” to refer to parts of expressions only, reserving the word “operand” to refer only to machine instruction operands.</p><p class=Pp>Symbols are evaluated to yield { <var class=Va>section</var><var class=Va>NNN</var> }where <var class=Va>section</var> is one of text, data, bss, absolute, or undefined. <var class=Va>NNN</var> is a signed, 2's complement 32 bit integer.</p><p class=Pp>Numbers are usually integers.</p><p class=Pp>A number can be a flonum or biGNUm. In this case, you are warned that only the low order 32 bits are used, and <a class=Xr href=as.1.html>as</a> pretends these 32 bits are an integer. You may write integer-manipulating instructions that act on exotic constants, compatible with other assemblers.</p><p class=Pp>Subexpressions are a left parenthesis ( followed by an integer expression, followed by a right parenthesis ); or a prefix operator followed by an argument.</p><p class=Pp><i class=Em>Operators</i></p><p class=Pp><i class=Em>Operators</i> are arithmetic functions, like <code class=Li>+</code> or <code class=Li>%</code>. Prefix operators are followed by an argument. Infix operators appear between their arguments. Operators may be preceded and/or followed by whitespace.</p><p class=Pp><i class=Em>Prefix Operator</i></p><p class=Pp><a class=Xr href=as.1.html>as</a> has the following <i class=Em>prefix operators</i>. They each take one argument, which must be absolute.</p><dl class=Bl-tag><dt>-</dt><dd><i class=Em>Negation</i>. Two's complement negation.</dd><dt>~</dt><dd><i class=Em>Complementation</i>. Bitwise not.</dd></dl><p class=Pp><i class=Em>Infix Operators</i></p><p class=Pp><i class=Em>Infix operators</i> take two arguments, one on either side. Operators have precedence, but operations with equal precedence are performed left to right. Apart from <code class=Li>+</code> or [-], both arguments must be absolute, and the result is absolute.</p><ol class=Bl-enum><li>Highest Precedence <dl class=Bl-tag><dt>*</dt><dd><i class=Em>Multiplication</i>.</dd><dt>/</dt><dd><i class=Em>Division</i>. Truncation is the same as the C operator <code class=Li>/</code></dd><dt>%</dt><dd><i class=Em>Remainder</i>.</dd><dt>&lt;&lt;</dt><dd><i class=Em>Shift Left</i>. Same as the C operator <code class=Li>&lt;&lt;</code>.</dd><dt>&gt;&gt;</dt><dd><i class=Em>Shift Right</i>. Same as the C operator <code class=Li>&gt;&gt;</code>.</dd></dl></li><li>Intermediate precedence <dl class=Bl-tag><dt>|</dt><dd><p class=Pp><i class=Em>Bitwise Inclusive Or</i>.</p></dd><dt>&amp;</dt><dd><i class=Em>Bitwise And</i>.</dd><dt>^</dt><dd><i class=Em>Bitwise Exclusive Or</i>.</dd><dt>!</dt><dd><i class=Em>Bitwise Or Not</i>.</dd></dl></li><li>Low Precedence <dl class=Bl-tag><dt>+</dt><dd><i class=Em>Addition</i>. If either argument is absolute, the result has the section of the other argument. You may not add together arguments from different sections.</dd><dt>-</dt><dd><i class=Em>Subtraction</i>. If the right argument is absolute, the result has the section of the left argument. If both arguments are in the same section, the result is absolute. You may not subtract arguments from different sections.</dd><dt>==</dt><dd><i class=Em>Is Equal To</i></dd><dt>&lt;&gt;</dt><dd style="width: auto;"> </dd><dt>!=</dt><dd><i class=Em>Is Not Equal To</i></dd><dt>&lt;</dt><dd><i class=Em>Is Less Than</i></dd><dt>&gt;</dt><dd><i class=Em>Is Greater Than</i></dd><dt>&gt;=</dt><dd><i class=Em>Is Greater Than Or Equal To</i></dd><dt>&lt;=</dt><dd><i class=Em>Is Less Than Or Equal To</i><p class=Pp>The comparison operators can be used as infix operators. A true results has a value of -1 whereas a false result has a value of 0. Note, these operators perform signed comparisons.</p></dd></dl></li><li>Lowest Precedence <dl class=Bl-tag><dt>&amp;&amp;</dt><dd><i class=Em>Logical And</i>.</dd><dt>||</dt><dd><i class=Em>Logical Or</i>. <p class=Pp>These two logical operations can be used to combine the results of sub expressions. Note, unlike the comparison operators a true result returns a value of 1 but a false results does still return 0. Also note that the logical or operator has a slightly lower precedence than logical and.</p></dd></dl></li></ol><p class=Pp>In short, it's only meaningful to add or subtract the <i class=Em>offsets</i> in an address; you can only have a defined section in one of the two arguments.</p></section></section><section class=Sh><h2 class=Sh id=Assembler_Directives><a class=permalink href=#Assembler_Directives>Assembler Directives</a></h2> All assembler directives have names that begin with a period ( .). The rest of the name is letters, usually in lower case. <p class=Pp>This chapter discusses directives that are available regardless of the target machine configuration for the GNU assembler.</p><section class=Ss><h2 class=Ss><code class=Li>.abort</code></h2> This directive stops the assembly immediately. It is for compatibility with other assemblers. The original idea was that the assembly language source would be piped into the assembler. If the sender of the source quit, it could use this directive tells <a class=Xr href=as.1.html>as</a> to quit also. One day <code class=Li>.abort</code> will not be supported. </section><section class=Ss><h2 class=Ss><code class=Li>.align</code><var class=Va>abs-expr,</var><var class=Va>abs-expr,</var><var class=Va>abs-expr</var></h2> Pad the location counter (in the current subsection) to a particular storage boundary. The first expression (which must be absolute) is the alignment required, as described below. <p class=Pp>The second expression (also absolute) gives the fill value to be stored in the padding bytes. It (and the comma) may be omitted. If it is omitted, the padding bytes are normally zero. However, on some systems, if the section is marked as containing code and the fill value is omitted, the space is filled with no-op instructions.</p><p class=Pp>The third expression is also absolute, and is also optional. If it is present, it is the maximum number of bytes that should be skipped by this alignment directive. If doing the alignment would require skipping more bytes than the specified maximum, then the alignment is not done at all. You can omit the fill value (the second argument) entirely by simply using two commas after the required alignment; this can be useful if you want the alignment to be filled with no-op instructions when appropriate.</p><p class=Pp>The way the required alignment is specified varies from system to system. For the arc, hppa, i386 using ELF, i860, iq2000, m68k, or32, s390, sparc, tic4x, tic80 and xtensa, the first expression is the alignment request in bytes. For example <code class=Li>.align 8</code> advances the location counter until it is a multiple of 8. If the location counter is already a multiple of 8, no change is needed. For the tic54x, the first expression is the alignment request in words.</p><p class=Pp>For other systems, including the i386 using a.out format, and the arm and strongarm, it is the number of low-order zero bits the location counter must have after advancement. For example <code class=Li>.align 3</code> advances the location counter until it a multiple of 8. If the location counter is already a multiple of 8, no change is needed.</p><p class=Pp>This inconsistency is due to the different behaviors of the various native assemblers for these systems which GAS must emulate. GAS also provides <code class=Li>.balign</code> and <code class=Li>.p2align</code> directives, described later, which have a consistent behavior across all architectures (but are specific to GAS).</p></section><section class=Ss><h2 class=Ss><code class=Li>.ascii Va string ...</code></h2><code class=Li>.ascii</code> expects zero or more string literals (see Section “Strings”) separated by commas. It assembles each string (with no automatic trailing zero byte) into consecutive addresses. </section><section class=Ss><h2 class=Ss><code class=Li>.asciz Va string ...</code></h2><code class=Li>.asciz</code> is just like <code class=Li>.ascii</code>, but each string is followed by a zero byte. The “z” in <code class=Li>.asciz</code> stands for “zero”. </section><section class=Ss><h2 class=Ss><code class=Li>.balign[wl]</code><var class=Va>abs-expr,</var><var class=Va>abs-expr,</var><var class=Va>abs-expr</var></h2> Pad the location counter (in the current subsection) to a particular storage boundary. The first expression (which must be absolute) is the alignment request in bytes. For example <code class=Li>.balign 8</code> advances the location counter until it is a multiple of 8. If the location counter is already a multiple of 8, no change is needed. <p class=Pp>The second expression (also absolute) gives the fill value to be stored in the padding bytes. It (and the comma) may be omitted. If it is omitted, the padding bytes are normally zero. However, on some systems, if the section is marked as containing code and the fill value is omitted, the space is filled with no-op instructions.</p><p class=Pp>The third expression is also absolute, and is also optional. If it is present, it is the maximum number of bytes that should be skipped by this alignment directive. If doing the alignment would require skipping more bytes than the specified maximum, then the alignment is not done at all. You can omit the fill value (the second argument) entirely by simply using two commas after the required alignment; this can be useful if you want the alignment to be filled with no-op instructions when appropriate.</p><p class=Pp>The <code class=Li>.balignw</code> and <code class=Li>.balignl</code> directives are variants of the <code class=Li>.balign</code> directive. The <code class=Li>.balignw</code> directive treats the fill pattern as a two byte word value. The <code class=Li>.balignl</code> directives treats the fill pattern as a four byte longword value. For example, <code class=Li>.balignw 4,0x368d</code> will align to a multiple of 4. If it skips two bytes, they will be filled in with the value 0x368d (the exact placement of the bytes depends upon the endianness of the processor). If it skips 1 or 3 bytes, the fill value is undefined.</p></section><section class=Ss><h2 class=Ss><code class=Li>.byte</code><var class=Va>expressions</var></h2><code class=Li>.byte</code> expects zero or more expressions, separated by commas. Each expression is assembled into the next byte. </section><section class=Ss><h2 class=Ss><code class=Li>.comm</code><var class=Va>symbol</var>, <var class=Va>length</var></h2><code class=Li>.comm</code> declares a common symbol named <var class=Va>symbol</var>. When linking, a common symbol in one object file may be merged with a defined or common symbol of the same name in another object file. If <code class=Li>ld</code> does not see a definition for the symbol--just one or more common symbols--then it will allocate <var class=Va>length</var> bytes of uninitialized memory. <var class=Va>length</var> must be an absolute expression. If <code class=Li>ld</code> sees multiple common symbols with the same name, and they do not all have the same size, it will allocate space using the largest size. <p class=Pp>When using ELF, the <code class=Li>.comm</code> directive takes an optional third argument. This is the desired alignment of the symbol, specified as a byte boundary (for example, an alignment of 16 means that the least significant 4 bits of the address should be zero). The alignment must be an absolute expression, and it must be a power of two. If <code class=Li>ld</code> allocates uninitialized memory for the common symbol, it will use the alignment when placing the symbol. If no alignment is specified, <a class=Xr href=as.1.html>as</a> will set the alignment to the largest power of two less than or equal to the size of the symbol, up to a maximum of 16.</p></section><section class=Ss><h2 class=Ss><code class=Li>.cfi_startproc [simple]</code></h2><code class=Li>.cfi_startproc</code> is used at the beginning of each function that should have an entry in <code class=Li>.eh_frame</code>. It initializes some internal data structures. Don't forget to close the function by <code class=Li>.cfi_endproc</code>. <p class=Pp>Unless <code class=Li>.cfi_startproc</code> is used along with parameter <code class=Li>simple</code> it also emits some architecture dependent initial CFI instructions.</p></section><section class=Ss><h2 class=Ss><code class=Li>.cfi_endproc</code></h2><code class=Li>.cfi_endproc</code> is used at the end of a function where it closes its unwind entry previously opened by <code class=Li>.cfi_startproc</code>, and emits it to <code class=Li>.eh_frame</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_personality</code><var class=Va>encoding [,</var><var class=Va>exp]</var></h2><code class=Li>.cfi_personality</code> defines personality routine and its encoding. <var class=Va>encoding</var> must be a constant determining how the personality should be encoded. If it is 255 ( <code class=Li>DW_EH_PE_omit</code>), second argument is not present, otherwise second argument should be a constant or a symbol name. When using indirect encodings, the symbol provided should be the location where personality can be loaded from, not the personality routine itself. The default after <code class=Li>.cfi_startproc</code> is <code class=Li>.cfi_personality 0xff</code>, no personality routine. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_lsda</code><var class=Va>encoding [,</var><var class=Va>exp]</var></h2><code class=Li>.cfi_lsda</code> defines LSDA and its encoding. <var class=Va>encoding</var> must be a constant determining how the LSDA should be encoded. If it is 255 ( <code class=Li>DW_EH_PE_omit</code>), second argument is not present, otherwise second argument should be a constant or a symbol name. The default after <code class=Li>.cfi_startproc</code> is <code class=Li>.cfi_lsda 0xff</code>, no LSDA. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_def_cfa</code><var class=Va>register,</var><var class=Va>offset</var></h2><code class=Li>.cfi_def_cfa</code> defines a rule for computing CFA as: <i class=Em>take address from</i><var class=Va>register and add</var><var class=Va>offset to it</var>. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_def_cfa_register</code><var class=Va>register</var></h2><code class=Li>.cfi_def_cfa_register</code> modifies a rule for computing CFA. From now on <var class=Va>register</var> will be used instead of the old one. Offset remains the same. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_def_cfa_offset</code><var class=Va>offset</var></h2><code class=Li>.cfi_def_cfa_offset</code> modifies a rule for computing CFA. Register remains the same, but <var class=Va>offset</var> is new. Note that it is the absolute offset that will be added to a defined register to compute CFA address. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_adjust_cfa_offset</code><var class=Va>offset</var></h2> Same as <code class=Li>.cfi_def_cfa_offset</code> but <var class=Va>offset</var> is a relative value that is added/substracted from the previous offset. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_offset</code><var class=Va>register,</var><var class=Va>offset</var></h2> Previous value of <var class=Va>register</var> is saved at offset <var class=Va>offset</var> from CFA. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_rel_offset</code><var class=Va>register,</var><var class=Va>offset</var></h2> Previous value of <var class=Va>register</var> is saved at offset <var class=Va>offset</var> from the current CFA register. This is transformed to <code class=Li>.cfi_offset</code> using the known displacement of the CFA register from the CFA. This is often easier to use, because the number will match the code it's annotating. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_register</code><var class=Va>register1,</var><var class=Va>register2</var></h2> Previous value of <var class=Va>register1</var> is saved in register <var class=Va>register2</var>. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_restore</code><var class=Va>register</var></h2><code class=Li>.cfi_restore</code> says that the rule for <var class=Va>register</var> is now the same as it was at the beginning of the function, after all initial instruction added by <code class=Li>.cfi_startproc</code> were executed. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_undefined</code><var class=Va>register</var></h2> From now on the previous value of <var class=Va>register</var> can't be restored anymore. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_same_value</code><var class=Va>register</var></h2> Current value of <var class=Va>register</var> is the same like in the previous frame, i.e. no restoration needed. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_remember_state,</code></h2> First save all current rules for all registers by <code class=Li>.cfi_remember_state</code>, then totally screw them up by subsequent <code class=Li>.cfi_*</code> directives and when everything is hopelessly bad, use <code class=Li>.cfi_restore_state</code> to restore the previous saved state. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_return_column</code><var class=Va>register</var></h2> Change return column <var class=Va>register</var>, i.e. the return address is either directly in <var class=Va>register</var> or can be accessed by rules for <var class=Va>register</var>. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_signal_frame</code></h2> Mark current function as signal trampoline. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_window_save</code></h2> SPARC register window has been saved. </section><section class=Ss><h2 class=Ss><code class=Li>.cfi_escape</code><var class=Va>expression[, ...]</var></h2> Allows the user to add arbitrary bytes to the unwind info. One might use this to add OS-specific CFI opcodes, or generic CFI opcodes that GAS does not yet support. </section><section class=Ss><h2 class=Ss><code class=Li>.file</code><var class=Va>fileno</var><var class=Va>filename</var></h2> When emitting dwarf2 line number information <code class=Li>.file</code> assigns filenames to the <code class=Li>.debug_line</code> file name table. The <var class=Va>fileno</var> operand should be a unique positive integer to use as the index of the entry in the table. The <var class=Va>filename</var> operand is a C string literal. <p class=Pp>The detail of filename indices is exposed to the user because the filename table is shared with the <code class=Li>.debug_info</code> section of the dwarf2 debugging information, and thus the user must know the exact indices that table entries will have.</p></section><section class=Ss><h2 class=Ss><code class=Li>.loc</code><var class=Va>fileno</var><var class=Va>lineno</var> [<var class=Va>column]</var> [<var class=Va>options]</var></h2> The <code class=Li>.loc</code> directive will add row to the <code class=Li>.debug_line</code> line number matrix corresponding to the immediately following assembly instruction. The <var class=Va>fileno</var>, <var class=Va>lineno</var>, and optional <var class=Va>column</var> arguments will be applied to the <code class=Li>.debug_line</code> state machine before the row is added. <p class=Pp>The <var class=Va>options</var> are a sequence of the following tokens in any order:</p><dl class=Bl-tag><dt>basic_block</dt><dd>This option will set the <code class=Li>basic_block</code> register in the <code class=Li>.debug_line</code> state machine to <code class=Li>true</code>.</dd><dt>prologue_end</dt><dd>This option will set the <code class=Li>prologue_end</code> register in the <code class=Li>.debug_line</code> state machine to <code class=Li>true</code>.</dd><dt>epilogue_begin</dt><dd>This option will set the <code class=Li>epilogue_begin</code> register in the <code class=Li>.debug_line</code> state machine to <code class=Li>true</code>.</dd><dt>is_stmt <var class=Va>value</var></dt><dd>This option will set the <code class=Li>is_stmt</code> register in the <code class=Li>.debug_line</code> state machine to <code class=Li>value</code>, which must be either 0 or 1.</dd><dt>isa <var class=Va>value</var></dt><dd>This directive will set the <code class=Li>isa</code> register in the <code class=Li>.debug_line</code> state machine to <var class=Va>value</var>, which must be an unsigned integer.</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.loc_mark_blocks</code><var class=Va>enable</var></h2> The <code class=Li>.loc_mark_blocks</code> directive makes the assembler emit an entry to the <code class=Li>.debug_line</code> line number matrix with the <code class=Li>basic_block</code> register in the state machine set whenever a code label is seen. The <var class=Va>enable</var> argument should be either 1 or 0, to enable or disable this function respectively. </section><section class=Ss><h2 class=Ss><code class=Li>.data</code><var class=Va>subsection</var></h2><code class=Li>.data</code> tells <a class=Xr href=as.1.html>as</a> to assemble the following statements onto the end of the data subsection numbered <var class=Va>subsection</var> (which is an absolute expression). If <var class=Va>subsection</var> is omitted, it defaults to zero. </section><section class=Ss><h2 class=Ss><code class=Li>.double</code><var class=Va>flonums</var></h2><code class=Li>.double</code> expects zero or more flonums, separated by commas. It assembles floating point numbers. </section><section class=Ss><h2 class=Ss><code class=Li>.eject</code></h2> Force a page break at this point, when generating assembly listings. </section><section class=Ss><h2 class=Ss><code class=Li>.else</code></h2><code class=Li>.else</code> is part of the <a class=Xr href=as.1.html>as</a> support for conditional assembly; see If,, <code class=Li>.if</code> . It marks the beginning of a section of code to be assembled if the condition for the preceding <code class=Li>.if</code> was false. </section><section class=Ss><h2 class=Ss><code class=Li>.elseif</code></h2><code class=Li>.elseif</code> is part of the <a class=Xr href=as.1.html>as</a> support for conditional assembly; see If,, <code class=Li>.if</code> . It is shorthand for beginning a new <code class=Li>.if</code> block that would otherwise fill the entire <code class=Li>.else</code> section. </section><section class=Ss><h2 class=Ss><code class=Li>.end</code></h2><code class=Li>.end</code> marks the end of the assembly file. <a class=Xr href=as.1.html>as</a> does not process anything in the file past the <code class=Li>.end</code> directive. </section><section class=Ss><h2 class=Ss><code class=Li>.endfunc</code></h2><code class=Li>.endfunc</code> marks the end of a function specified with <code class=Li>.func</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.endif</code></h2><code class=Li>.endif</code> is part of the <a class=Xr href=as.1.html>as</a> support for conditional assembly; it marks the end of a block of code that is only assembled conditionally.See Section “If”. </section><section class=Ss><h2 class=Ss><code class=Li>.equ</code><var class=Va>symbol,</var><var class=Va>expression</var></h2> This directive sets the value of <var class=Va>symbol</var> to <var class=Va>expression</var>. It is synonymous with <code class=Li>.set</code>; see Set,, <code class=Li>.set</code> . </section><section class=Ss><h2 class=Ss><code class=Li>.equiv</code><var class=Va>symbol,</var><var class=Va>expression</var></h2> The <code class=Li>.equiv</code> directive is like <code class=Li>.equ</code> and <code class=Li>.set</code>, except that the assembler will signal an error if <var class=Va>symbol</var> is already defined. Note a symbol which has been referenced but not actually defined is considered to be undefined. <p class=Pp>Except for the contents of the error message, this is roughly equivalent to</p><div class="Bd Pp Bd-indent"><pre>
.ifdef SYM
.err
.endif
.equ SYM,VAL
</pre></div> plus it protects the symbol from later redefinition. </section><section class=Ss><h2 class=Ss><code class=Li>.eqv</code><var class=Va>symbol,</var><var class=Va>expression</var></h2> The <code class=Li>.eqv</code> directive is like <code class=Li>.equiv</code>, but no attempt is made to evaluate the expression or any part of it immediately. Instead each time the resulting symbol is used in an expression, a snapshot of its current value is taken. </section><section class=Ss><h2 class=Ss><code class=Li>.err</code></h2> If <a class=Xr href=as.1.html>as</a> assembles a <code class=Li>.err</code> directive, it will print an error message and, unless the [-Z] option was used, it will not generate an object file. This can be used to signal an error in conditionally compiled code. </section><section class=Ss><h2 class=Ss><code class=Li>.error Va string</code></h2> Similarly to <code class=Li>.err</code>, this directive emits an error, but you can specify a string that will be emitted as the error message. If you don't specify the message, it defaults to <code class=Li>.error directive invoked in source file</code>. See Section.Dq Errors . <div class="Bd Pp Bd-indent"><pre>
 .error "This code has not been assembled and tested."
</pre></div></section><section class=Ss><h2 class=Ss><code class=Li>.exitm</code></h2> Exit early from the current macro definition.See Section “Macro”. </section><section class=Ss><h2 class=Ss><code class=Li>.extern</code></h2><code class=Li>.extern</code> is accepted in the source program---for compatibility with other assemblers---but it is ignored. <a class=Xr href=as.1.html>as</a> treats all undefined symbols as external. </section><section class=Ss><h2 class=Ss><code class=Li>.fail</code><var class=Va>expression</var></h2> Generates an error or a warning. If the value of the <var class=Va>expression</var> is 500 or more, <a class=Xr href=as.1.html>as</a> will print a warning message. If the value is less than 500, <a class=Xr href=as.1.html>as</a> will print an error message. The message will include the value of <var class=Va>expression</var>. This can occasionally be useful inside complex nested macros or conditional assembly. </section><section class=Ss><h2 class=Ss><code class=Li>.file</code><var class=Va>string</var></h2><code class=Li>.file</code> tells <a class=Xr href=as.1.html>as</a> that we are about to start a new logical file. <var class=Va>string</var> is the new file name. In general, the filename is recognized whether or not it is surrounded by quotes <code class=Li> ;</code> but if you wish to specify an empty file name, you must give the quotes-- <code class=Li></code>. This statement may go away in future: it is only recognized to be compatible with old <a class=Xr href=as.1.html>as</a> programs. </section><section class=Ss><h2 class=Ss><code class=Li>.fill</code><var class=Va>repeat</var>, <var class=Va>size</var>, <var class=Va>value</var></h2><var class=Va>repeat</var>, <var class=Va>size</var> and <var class=Va>value</var> are absolute expressions. This emits <var class=Va>repeat</var> copies of <var class=Va>size</var> bytes. <var class=Va>Repeat</var> may be zero or more. <var class=Va>Size</var> may be zero or more, but if it is more than 8, then it is deemed to have the value 8, compatible with other people's assemblers. The contents of each <var class=Va>repeat</var> bytes is taken from an 8-byte number. The highest order 4 bytes are zero. The lowest order 4 bytes are <var class=Va>value</var> rendered in the byte-order of an integer on the computer <a class=Xr href=as.1.html>as</a> is assembling for. Each <var class=Va>size</var> bytes in a repetition is taken from the lowest order <var class=Va>size</var> bytes of this number. Again, this bizarre behavior is compatible with other people's assemblers. <p class=Pp><var class=Va>size</var> and <var class=Va>value</var> are optional. If the second comma and <var class=Va>value</var> are absent, <var class=Va>value</var> is assumed zero. If the first comma and following tokens are absent, <var class=Va>size</var> is assumed to be 1.</p></section><section class=Ss><h2 class=Ss><code class=Li>.float</code><var class=Va>flonums</var></h2> This directive assembles zero or more flonums, separated by commas. It has the same effect as <code class=Li>.single</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.func</code><var class=Va>name[,</var><var class=Va>label]</var></h2><code class=Li>.func</code> emits debugging information to denote function <var class=Va>name</var>, and is ignored unless the file is assembled with debugging enabled. Only <code class=Li>--gstabs[+]</code> is currently supported. <var class=Va>label</var> is the entry point of the function and if omitted <var class=Va>name</var> prepended with the <code class=Li>leading char</code> is used. <code class=Li>leading char</code> is usually <code class=Li>_</code> or nothing, depending on the target. All functions are currently defined to have <code class=Li>void</code> return type. The function must be terminated with <code class=Li>.endfunc</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.global</code><var class=Va>symbol,</var><code class=Li>.globl</code><var class=Va>symbol</var></h2><code class=Li>.global</code> makes the symbol visible to <code class=Li>ld</code>. If you define <var class=Va>symbol</var> in your partial program, its value is made available to other partial programs that are linked with it. Otherwise, <var class=Va>symbol</var> takes its attributes from a symbol of the same name from another file linked into the same program. <p class=Pp>Both spellings ( <code class=Li>.globl</code> and <code class=Li>.global</code>) are accepted, for compatibility with other assemblers.</p></section><section class=Ss><h2 class=Ss><code class=Li>.hidden</code><var class=Va>names</var></h2> This is one of the ELF visibility directives. The other two are <code class=Li>.internal</code> (see Section “Internal”) and <code class=Li>.protected</code> (see Section “Protected”). <p class=Pp>This directive overrides the named symbols default visibility (which is set by their binding: local, global or weak). The directive sets the visibility to <code class=Li>hidden</code> which means that the symbols are not visible to other components. Such symbols are always considered to be <code class=Li>protected</code> as well.</p></section><section class=Ss><h2 class=Ss><code class=Li>.hword</code><var class=Va>expressions</var></h2> This expects zero or more <var class=Va>expressions</var>, and emits a 16 bit number for each. <p class=Pp>This directive is a synonym for <code class=Li>.short</code>.</p></section><section class=Ss><h2 class=Ss><code class=Li>.ident</code></h2> This directive is used by some assemblers to place tags in object files. The behavior of this directive varies depending on the target. When using the a.out object file format, <a class=Xr href=as.1.html>as</a> simply accepts the directive for source-file compatibility with existing assemblers, but does not emit anything for it. When using COFF, comments are emitted to the <code class=Li>.comment</code> or <code class=Li>.rdata</code> section, depending on the target. When using ELF, comments are emitted to the <code class=Li>.comment</code> section. </section><section class=Ss><h2 class=Ss><code class=Li>.if</code><var class=Va>absolute expression</var></h2><code class=Li>.if</code> marks the beginning of a section of code which is only considered part of the source program being assembled if the argument (which must be an <var class=Va>absolute expression</var>) is non-zero. The end of the conditional section of code must be marked by <code class=Li>.endif</code> (see Section “Endif”); optionally, you may include code for the alternative condition, flagged by <code class=Li>.else</code> (see Section “Else”). If you have several conditions to check, <code class=Li>.elseif</code> may be used to avoid nesting blocks if/else within each subsequent <code class=Li>.else</code> block. <p class=Pp>The following variants of <code class=Li>.if</code> are also supported:</p><dl class=Bl-tag><dt>.ifdef <var class=Va>symbol</var></dt><dd>Assembles the following section of code if the specified <var class=Va>symbol</var> has been defined. Note a symbol which has been referenced but not yet defined is considered to be undefined.</dd><dt>.ifb <var class=Va>text</var></dt><dd>Assembles the following section of code if the operand is blank (empty).</dd><dt>.ifc <var class=Va>string1,</var><var class=Va>string2</var></dt><dd>Assembles the following section of code if the two strings are the same. The strings may be optionally quoted with single quotes. If they are not quoted, the first string stops at the first comma, and the second string stops at the end of the line. Strings which contain whitespace should be quoted. The string comparison is case sensitive.</dd><dt>.ifeq <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is zero.</dd><dt>.ifeqs <var class=Va>string1,</var><var class=Va>string2</var></dt><dd>Another form of <code class=Li>.ifc</code>. The strings must be quoted using double quotes.</dd><dt>.ifge <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is greater than or equal to zero.</dd><dt>.ifgt <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is greater than zero.</dd><dt>.ifle <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is less than or equal to zero.</dd><dt>.iflt <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is less than zero.</dd><dt>.ifnb <var class=Va>text</var></dt><dd>Like <code class=Li>.ifb</code>, but the sense of the test is reversed: this assembles the following section of code if the operand is non-blank (non-empty).</dd><dt>.ifnc <var class=Va>string1,</var><var class=Va>string2.</var></dt><dd>Like <code class=Li>.ifc</code>, but the sense of the test is reversed: this assembles the following section of code if the two strings are not the same.</dd><dt>.ifndef <var class=Va>symbol</var></dt><dd style="width: auto;"> </dd><dt>.ifnotdef <var class=Va>symbol</var></dt><dd>Assembles the following section of code if the specified <var class=Va>symbol</var> has not been defined. Both spelling variants are equivalent. Note a symbol which has been referenced but not yet defined is considered to be undefined.</dd><dt>.ifne <var class=Va>absolute expression</var></dt><dd>Assembles the following section of code if the argument is not equal to zero (in other words, this is equivalent to <code class=Li>.if</code>).</dd><dt>.ifnes <var class=Va>string1,</var><var class=Va>string2</var></dt><dd>Like <code class=Li>.ifeqs</code>, but the sense of the test is reversed: this assembles the following section of code if the two strings are not the same.</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.incbin Va file [,</code><var class=Va>skip[,</var><var class=Va>count]]</var></h2> The <code class=Li>incbin</code> directive includes <var class=Va>file</var> verbatim at the current location. You can control the search paths used with the <code class=Li>-I</code> command-line option (see Section “Invoking”). Quotation marks are required around <var class=Va>file</var>. <p class=Pp>The <var class=Va>skip</var> argument skips a number of bytes from the start of the <var class=Va>file</var>. The <var class=Va>count</var> argument indicates the maximum number of bytes to read. Note that the data is not aligned in any way, so it is the user's responsibility to make sure that proper alignment is provided both before and after the <code class=Li>incbin</code> directive.</p></section><section class=Ss><h2 class=Ss><code class=Li>.include Va file</code></h2> This directive provides a way to include supporting files at specified points in your source program. The code from <var class=Va>file</var> is assembled as if it followed the point of the <code class=Li>.include</code>; when the end of the included file is reached, assembly of the original file continues. You can control the search paths used with the <code class=Li>-I</code> command-line option (see Section “Invoking”). Quotation marks are required around <var class=Va>file</var>. </section><section class=Ss><h2 class=Ss><code class=Li>.int</code><var class=Va>expressions</var></h2> Expect zero or more <var class=Va>expressions</var>, of any section, separated by commas. For each expression, emit a number that, at run time, is the value of that expression. The byte order and bit size of the number depends on what kind of target the assembly is for. </section><section class=Ss><h2 class=Ss><code class=Li>.internal</code><var class=Va>names</var></h2> This is one of the ELF visibility directives. The other two are <code class=Li>.hidden</code> (see Section “Hidden”) and <code class=Li>.protected</code> (see Section “Protected”). <p class=Pp>This directive overrides the named symbols default visibility (which is set by their binding: local, global or weak). The directive sets the visibility to <code class=Li>internal</code> which means that the symbols are considered to be <code class=Li>hidden</code> (i.e., not visible to other components), and that some extra, processor specific processing must also be performed upon the symbols as well.</p></section><section class=Ss><h2 class=Ss><code class=Li>.irp</code><var class=Va>symbol,</var><var class=Va>values...</var></h2> Evaluate a sequence of statements assigning different values to <var class=Va>symbol</var>. The sequence of statements starts at the <code class=Li>.irp</code> directive, and is terminated by an <code class=Li>.endr</code> directive. For each <var class=Va>value</var>, <var class=Va>symbol</var> is set to <var class=Va>value</var>, and the sequence of statements is assembled. If no <var class=Va>value</var> is listed, the sequence of statements is assembled once, with <var class=Va>symbol</var> set to the null string. To refer to <var class=Va>symbol</var> within the sequence of statements, use <var class=Va>\symbol</var>. <p class=Pp>For example, assembling</p><div class="Bd Pp Bd-indent"><pre>
        .irp    param,1,2,3
        move    d\param,sp@-
        .endr
</pre></div><p class=Pp>is equivalent to assembling</p><div class="Bd Pp Bd-indent"><pre>
        move    d1,sp@-
        move    d2,sp@-
        move    d3,sp@-
</pre></div><p class=Pp>For some caveats with the spelling of <var class=Va>symbol</var>, see also Macro.</p></section><section class=Ss><h2 class=Ss><code class=Li>.irpc</code><var class=Va>symbol,</var><var class=Va>values...</var></h2> Evaluate a sequence of statements assigning different values to <var class=Va>symbol</var>. The sequence of statements starts at the <code class=Li>.irpc</code> directive, and is terminated by an <code class=Li>.endr</code> directive. For each character in <var class=Va>value</var>, <var class=Va>symbol</var> is set to the character, and the sequence of statements is assembled. If no <var class=Va>value</var> is listed, the sequence of statements is assembled once, with <var class=Va>symbol</var> set to the null string. To refer to <var class=Va>symbol</var> within the sequence of statements, use <var class=Va>\symbol</var>. <p class=Pp>For example, assembling</p><div class="Bd Pp Bd-indent"><pre>
        .irpc    param,123
        move    d\param,sp@-
        .endr
</pre></div><p class=Pp>is equivalent to assembling</p><div class="Bd Pp Bd-indent"><pre>
        move    d1,sp@-
        move    d2,sp@-
        move    d3,sp@-
</pre></div><p class=Pp>For some caveats with the spelling of <var class=Va>symbol</var>, see also the discussion atSee Section “Macro”.</p></section><section class=Ss><h2 class=Ss><code class=Li>.lcomm</code><var class=Va>symbol</var>, <var class=Va>length</var></h2> Reserve <var class=Va>length</var> (an absolute expression) bytes for a local common denoted by <var class=Va>symbol</var>. The section and value of <var class=Va>symbol</var> are those of the new local common. The addresses are allocated in the bss section, so that at run-time the bytes start off zeroed. <var class=Va>Symbol</var> is not declared global (see Section “Global”), so is normally not visible to <code class=Li>ld</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.lflags</code></h2><a class=Xr href=as.1.html>as</a> accepts this directive, for compatibility with other assemblers, but ignores it. </section><section class=Ss><h2 class=Ss><code class=Li>.line</code><var class=Va>line-number</var></h2> Even though this is a directive associated with the <code class=Li>a.out</code> or <code class=Li>b.out</code> object-code formats, <a class=Xr href=as.1.html>as</a> still recognizes it when producing COFF output, and treats <code class=Li>.line</code> as though it were the COFF <code class=Li>.ln</code><i class=Em>if</i> it is found outside a <code class=Li>.def</code> / <code class=Li>.endef</code> pair. <p class=Pp>Inside a <code class=Li>.def</code>, <code class=Li>.line</code> is, instead, one of the directives used by compilers to generate auxiliary symbol information for debugging.</p></section><section class=Ss><h2 class=Ss><code class=Li>.linkonce</code> [<var class=Va>type]</var></h2> Mark the current section so that the linker only includes a single copy of it. This may be used to include the same section in several different object files, but ensure that the linker will only include it once in the final output file. The <code class=Li>.linkonce</code> pseudo-op must be used for each instance of the section. Duplicate sections are detected based on the section name, so it should be unique. <p class=Pp>This directive is only supported by a few object file formats; as of this writing, the only object file format which supports it is the Portable Executable format used on Windows NT.</p><p class=Pp>The <var class=Va>type</var> argument is optional. If specified, it must be one of the following strings. For example:</p><div class="Bd Pp Bd-indent"><pre>
.linkonce same_size
</pre></div> Not all types may be supported on all object file formats. <dl class=Bl-tag><dt>discard</dt><dd>Silently discard duplicate sections. This is the default.</dd><dt>one_only</dt><dd>Warn if there are duplicate sections, but still keep only one copy.</dd><dt>same_size</dt><dd>Warn if any of the duplicates have different sizes.</dd><dt>same_contents</dt><dd>Warn if any of the duplicates do not have exactly the same contents.</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.ln</code><var class=Va>line-number</var></h2><code class=Li>.ln</code> is a synonym for <code class=Li>.line</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.mri</code><var class=Va>val</var></h2> If <var class=Va>val</var> is non-zero, this tells <a class=Xr href=as.1.html>as</a> to enter MRI mode. If <var class=Va>val</var> is zero, this tells <a class=Xr href=as.1.html>as</a> to exit MRI mode. This change affects code assembled until the next <code class=Li>.mri</code> directive, or until the end of the file.See Section “M”. </section><section class=Ss><h2 class=Ss><code class=Li>.list</code></h2> Control (in conjunction with the <code class=Li>.nolist</code> directive) whether or not assembly listings are generated. These two directives maintain an internal counter (which is zero initially). <code class=Li>.list</code> increments the counter, and <code class=Li>.nolist</code> decrements it. Assembly listings are generated whenever the counter is greater than zero. <p class=Pp>By default, listings are disabled. When you enable them (with the <code class=Li>-a</code> command line option;see Section “Invoking”), the initial value of the listing counter is one.</p></section><section class=Ss><h2 class=Ss><code class=Li>.long</code><var class=Va>expressions</var></h2><code class=Li>.long</code> is the same as <code class=Li>.int</code>. See Section.Dq Int . </section><section class=Ss><h2 class=Ss><code class=Li>.macro</code></h2> The commands <code class=Li>.macro</code> and <code class=Li>.endm</code> allow you to define macros that generate assembly output. For example, this definition specifies a macro <code class=Li>sum</code> that puts a sequence of numbers into memory: <div class="Bd Pp Bd-indent"><pre>
        .macro  sum from=0, to=5
        .long   \from
        .if     \to-\from
        sum     "(\from+1)",\to
        .endif
        .endm
</pre></div><p class=Pp>With that definition, <code class=Li>SUM 0,5</code> is equivalent to this assembly input:</p><div class="Bd Pp Bd-indent"><pre>
        .long   0
        .long   1
        .long   2
        .long   3
        .long   4
        .long   5
</pre></div><dl class=Bl-tag><dt>.macro <var class=Va>macname</var></dt><dd style="width: auto;"> </dd><dt>.macro <var class=Va>macname</var><var class=Va>macargs ...</var></dt><dd>Begin the definition of a macro called <var class=Va>macname</var>. If your macro definition requires arguments, specify their names after the macro name, separated by commas or spaces. You can qualify the macro argument to indicate whether all invocations must specify a non-blank value (through : <code class=Li>req</code>), or whether it takes all of the remaining arguments (through : <code class=Li>vararg</code>). You can supply a default value for any macro argument by following the name with <code class=Li>=</code><var class=Va>deflt</var>. You cannot define two macros with the same <var class=Va>macname</var> unless it has been subject to the <code class=Li>.purgem</code> directive (see Section “Purgem”) between the two definitions. For example, these are all valid <code class=Li>.macro</code> statements: <dl class=Bl-tag><dt>.macro comm</dt><dd>Begin the definition of a macro called <code class=Li>comm</code>, which takes no arguments.</dd><dt>.macro plus1 p, p1</dt><dd style="width: auto;"> </dd><dt>.macro plus1 p p1</dt><dd>Either statement begins the definition of a macro called <code class=Li>plus1</code>, which takes two arguments; within the macro definition, write <code class=Li>\p</code> or <code class=Li>\p1</code> to evaluate the arguments.</dd><dt>.macro reserve_str p1=0 p2</dt><dd>Begin the definition of a macro called <code class=Li>reserve_str</code>, with two arguments. The first argument has a default value, but not the second. After the definition is complete, you can call the macro either as <code class=Li>reserve_str</code><var class=Va>a,</var><var class=Va>b</var> (with <code class=Li>\p1</code> evaluating to <var class=Va>a</var> and <code class=Li>\p2</code> evaluating to <var class=Va>b</var>), or as <code class=Li>reserve_str</code>, <var class=Va>b</var> (with <code class=Li>\p1</code> evaluating as the default, in this case <code class=Li>0</code>, and <code class=Li>\p2</code> evaluating to <var class=Va>b</var>).</dd><dt>.macro m p1:req, p2=0, p3:vararg</dt><dd>Begin the definition of a macro called <code class=Li>m</code>, with at least three arguments. The first argument must always have a value specified, but not the second, which instead has a default value. The third formal will get assigned all remaining arguments specified at invocation time. <p class=Pp>When you call a macro, you can specify the argument values either by position, or by keyword. For example, <code class=Li>sum 9,17</code> is equivalent to <code class=Li>sum to=17, from=9</code>.</p></dd></dl><p class=Pp>Note that since each of the <var class=Va>macargs</var> can be an identifier exactly as any other one permitted by the target architecture, there may be occasional problems if the target hand-crafts special meanings to certain characters when they occur in a special position. For example, if the colon ( :) is generally permitted to be part of a symbol name, but the architecture specific code special-cases it when occurring as the final character of a symbol (to denote a label), then the macro parameter replacement code will have no way of knowing that and consider the whole construct (including the colon) an identifier, and check only this identifier for being the subject to parameter substitution. So for example this macro definition:</p><div class="Bd Pp Bd-indent"><pre>
	.macro label l
\l:
	.endm
    </pre></div><p class=Pp>might not work as expected. Invoking <code class=Li>label foo</code> might not create a label called <code class=Li>foo</code> but instead just insert the text <code class=Li>\l:</code> into the assembler source, probably generating an error about an unrecognised identifier.</p><p class=Pp>Similarly problems might occur with the period character ( .) which is often allowed inside opcode names (and hence identifier names). So for example constructing a macro to build an opcode from a base name and a length specifier like this:</p><div class="Bd Pp Bd-indent"><pre>
	.macro opcode base length
        \base.\length
	.endm
    </pre></div><p class=Pp>and invoking it as <code class=Li>opcode store l</code> will not create a <code class=Li>store.l</code> instruction but instead generate some kind of error as the assembler tries to interpret the text <code class=Li>\base.\length</code>.</p><p class=Pp>There are several possible ways around this problem:</p><dl class=Bl-tag><dt>Insert white space</dt><dd>If it is possible to use white space characters then this is the simplest solution. eg: <div class="Bd Pp Bd-indent"><pre>
	.macro label l
\l :
	.endm
        </pre></div></dd><dt>Use <code class=Li>\()</code></dt><dd>The string <code class=Li>\()</code> can be used to separate the end of a macro argument from the following text. eg: <div class="Bd Pp Bd-indent"><pre>
	.macro opcode base length
        \base\().\length
	.endm
        </pre></div></dd><dt>Use the alternate macro syntax mode</dt><dd>In the alternative macro syntax mode the ampersand character ( <code class=Li>&amp;</code>) can be used as a separator. eg: <div class="Bd Pp Bd-indent"><pre>
	.altmacro
	.macro label l
l&amp;:
	.endm
        </pre></div></dd></dl><p class=Pp>Note: this problem of correctly identifying string parameters to pseudo ops also applies to the identifiers used in <code class=Li>.irp</code> (see Section “Irp”) and <code class=Li>.irpc</code> (see Section “Irpc”) as well.</p></dd><dt>.endm</dt><dd>Mark the end of a macro definition.</dd><dt>.exitm</dt><dd>Exit early from the current macro definition.</dd><dt>\@</dt><dd><a class=Xr href=as.1.html>as</a> maintains a counter of how many macros it has executed in this pseudo-variable; you can copy that number to your output with <code class=Li>\@</code>, but <i class=Em>only within a macro definition</i>.</dd><dt>LOCAL <var class=Va>name</var> [, <var class=Va>...</var>]</dt><dd><i class=Em>Warning:</i><code class=Li>LOCAL is only available if you select “alternate macro syntax” with</code><code class=Li>--alternate or</code><code class=Li>.altmacro.</code> See Section.Dq Altmacro .</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.altmacro</code></h2> Enable alternate macro mode, enabling: <dl class=Bl-tag><dt>LOCAL <var class=Va>name</var> [, <var class=Va>...</var>]</dt><dd>One additional directive, <code class=Li>LOCAL</code>, is available. It is used to generate a string replacement for each of the <var class=Va>name</var> arguments, and replace any instances of <var class=Va>name</var> in each macro expansion. The replacement string is unique in the assembly, and different for each separate macro expansion. <code class=Li>LOCAL</code> allows you to write macros that define symbols, without fear of conflict between separate macro expansions.</dd><dt>String delimiters</dt><dd>You can write strings delimited in these other ways besides <code class=Li> Va string</code>: <dl class=Bl-tag><dt>' <var class=Va>string'</var></dt><dd>You can delimit strings with single-quote characters.</dd><dt>&lt; <var class=Va>string&gt;</var></dt><dd>You can delimit strings with matching angle brackets.</dd></dl></dd><dt>single-character string escape</dt><dd>To include any single character literally in a string (even if the character would otherwise have some special meaning), you can prefix the character with ! (an exclamation mark). For example, you can write <code class=Li>&lt;4.3 !&gt; 5.4!!&gt;</code> to get the literal text <code class=Li>4.3 &gt; 5.4!</code>.</dd><dt>Expression results as strings</dt><dd>You can write <code class=Li>%</code><var class=Va>expr</var> to evaluate the expression <var class=Va>expr</var> and use the result as a string.</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.noaltmacro</code></h2> Disable alternate macro mode.See Section “Altmacro”. </section><section class=Ss><h2 class=Ss><code class=Li>.nolist</code></h2> Control (in conjunction with the <code class=Li>.list</code> directive) whether or not assembly listings are generated. These two directives maintain an internal counter (which is zero initially). <code class=Li>.list</code> increments the counter, and <code class=Li>.nolist</code> decrements it. Assembly listings are generated whenever the counter is greater than zero. </section><section class=Ss><h2 class=Ss><code class=Li>.octa</code><var class=Va>biGNUms</var></h2> This directive expects zero or more biGNUms, separated by commas. For each biGNUm, it emits a 16-byte integer. <p class=Pp>The term “octa” comes from contexts in which a “word” is two bytes; hence <i class=Em>octa</i> -word for 16 bytes.</p></section><section class=Ss><h2 class=Ss><code class=Li>.org</code><var class=Va>new-lc</var>, <var class=Va>fill</var></h2> Advance the location counter of the current section to <var class=Va>new-lc</var>. <var class=Va>new-lc</var> is either an absolute expression or an expression with the same section as the current subsection. That is, you can't use <code class=Li>.org</code> to cross sections: if <var class=Va>new-lc</var> has the wrong section, the <code class=Li>.org</code> directive is ignored. To be compatible with former assemblers, if the section of <var class=Va>new-lc</var> is absolute, <a class=Xr href=as.1.html>as</a> issues a warning, then pretends the section of <var class=Va>new-lc</var> is the same as the current subsection. <p class=Pp><code class=Li>.org</code> may only increase the location counter, or leave it unchanged; you cannot use <code class=Li>.org</code> to move the location counter backwards.</p><p class=Pp>Because <a class=Xr href=as.1.html>as</a> tries to assemble programs in one pass, <var class=Va>new-lc</var> may not be undefined. If you really detest this restriction we eagerly await a chance to share your improved assembler.</p><p class=Pp>Beware that the origin is relative to the start of the section, not to the start of the subsection. This is compatible with other people's assemblers.</p><p class=Pp>When the location counter (of the current subsection) is advanced, the intervening bytes are filled with <var class=Va>fill</var> which should be an absolute expression. If the comma and <var class=Va>fill</var> are omitted, <var class=Va>fill</var> defaults to zero.</p></section><section class=Ss><h2 class=Ss><code class=Li>.p2align[wl]</code><var class=Va>abs-expr,</var><var class=Va>abs-expr,</var><var class=Va>abs-expr</var></h2> Pad the location counter (in the current subsection) to a particular storage boundary. The first expression (which must be absolute) is the number of low-order zero bits the location counter must have after advancement. For example <code class=Li>.p2align 3</code> advances the location counter until it a multiple of 8. If the location counter is already a multiple of 8, no change is needed. <p class=Pp>The second expression (also absolute) gives the fill value to be stored in the padding bytes. It (and the comma) may be omitted. If it is omitted, the padding bytes are normally zero. However, on some systems, if the section is marked as containing code and the fill value is omitted, the space is filled with no-op instructions.</p><p class=Pp>The third expression is also absolute, and is also optional. If it is present, it is the maximum number of bytes that should be skipped by this alignment directive. If doing the alignment would require skipping more bytes than the specified maximum, then the alignment is not done at all. You can omit the fill value (the second argument) entirely by simply using two commas after the required alignment; this can be useful if you want the alignment to be filled with no-op instructions when appropriate.</p><p class=Pp>The <code class=Li>.p2alignw</code> and <code class=Li>.p2alignl</code> directives are variants of the <code class=Li>.p2align</code> directive. The <code class=Li>.p2alignw</code> directive treats the fill pattern as a two byte word value. The <code class=Li>.p2alignl</code> directives treats the fill pattern as a four byte longword value. For example, <code class=Li>.p2alignw 2,0x368d</code> will align to a multiple of 4. If it skips two bytes, they will be filled in with the value 0x368d (the exact placement of the bytes depends upon the endianness of the processor). If it skips 1 or 3 bytes, the fill value is undefined.</p></section><section class=Ss><h2 class=Ss><code class=Li>.previous</code></h2> This is one of the ELF section stack manipulation directives. The others are <code class=Li>.section</code> (see Section “Section”), <code class=Li>.subsection</code> (see Section “SubSection”), <code class=Li>.pushsection</code> (see Section “PushSection”), and <code class=Li>.popsection</code> (see Section “PopSection”). <p class=Pp>This directive swaps the current section (and subsection) with most recently referenced section (and subsection) prior to this one. Multiple <code class=Li>.previous</code> directives in a row will flip between two sections (and their subsections).</p><p class=Pp>In terms of the section stack, this directive swaps the current section with the top section on the section stack.</p></section><section class=Ss><h2 class=Ss><code class=Li>.popsection</code></h2> This is one of the ELF section stack manipulation directives. The others are <code class=Li>.section</code> (see Section “Section”), <code class=Li>.subsection</code> (see Section “SubSection”), <code class=Li>.pushsection</code> (see Section “PushSection”), and <code class=Li>.previous</code> (see Section “Previous”). <p class=Pp>This directive replaces the current section (and subsection) with the top section (and subsection) on the section stack. This section is popped off the stack.</p></section><section class=Ss><h2 class=Ss><code class=Li>.print</code><var class=Va>string</var></h2><a class=Xr href=as.1.html>as</a> will print <var class=Va>string</var> on the standard output during assembly. You must put <var class=Va>string</var> in double quotes. </section><section class=Ss><h2 class=Ss><code class=Li>.protected</code><var class=Va>names</var></h2> This is one of the ELF visibility directives. The other two are <code class=Li>.hidden</code> (see Section “Hidden”) and <code class=Li>.internal</code> (see Section “Internal”). <p class=Pp>This directive overrides the named symbols default visibility (which is set by their binding: local, global or weak). The directive sets the visibility to <code class=Li>protected</code> which means that any references to the symbols from within the components that defines them must be resolved to the definition in that component, even if a definition in another component would normally preempt this.</p></section><section class=Ss><h2 class=Ss><code class=Li>.psize</code><var class=Va>lines</var>, <var class=Va>columns</var></h2> Use this directive to declare the number of lines---and, optionally, the number of columns---to use for each page, when generating listings. <p class=Pp>If you do not use <code class=Li>.psize</code>, listings use a default line-count of 60. You may omit the comma and <var class=Va>columns</var> specification; the default width is 200 columns.</p><p class=Pp><a class=Xr href=as.1.html>as</a> generates formfeeds whenever the specified number of lines is exceeded (or whenever you explicitly request one, using <code class=Li>.eject</code>).</p><p class=Pp>If you specify <var class=Va>lines</var> as <code class=Li>0</code>, no formfeeds are generated save those explicitly specified with <code class=Li>.eject</code>.</p></section><section class=Ss><h2 class=Ss><code class=Li>.purgem</code><var class=Va>name</var></h2> Undefine the macro <var class=Va>name</var>, so that later uses of the string will not be expanded.See Section “Macro”. </section><section class=Ss><h2 class=Ss><code class=Li>.pushsection</code><var class=Va>name</var>, <var class=Va>subsection</var></h2> This is one of the ELF section stack manipulation directives. The others are <code class=Li>.section</code> (see Section “Section”), <code class=Li>.subsection</code> (see Section “SubSection”), <code class=Li>.popsection</code> (see Section “PopSection”), and <code class=Li>.previous</code> (see Section “Previous”). <p class=Pp>This directive pushes the current section (and subsection) onto the top of the section stack, and then replaces the current section and subsection with <code class=Li>name</code> and <code class=Li>subsection</code>.</p></section><section class=Ss><h2 class=Ss><code class=Li>.quad</code><var class=Va>biGNUms</var></h2><code class=Li>.quad</code> expects zero or more biGNUms, separated by commas. For each bignum, it emits an 8-byte integer. If the biGNUm won't fit in 8 bytes, it prints a warning message; and just takes the lowest order 8 bytes of the biGNUm. <p class=Pp>The term “quad” comes from contexts in which a “word” is two bytes; hence <i class=Em>quad</i> -word for 8 bytes.</p></section><section class=Ss><h2 class=Ss><code class=Li>.reloc</code><var class=Va>offset,</var><var class=Va>reloc_name[,</var><var class=Va>expression]</var></h2> Generate a relocation at <var class=Va>offset</var> of type <var class=Va>reloc_name</var> with value <var class=Va>expression</var>. If <var class=Va>offset</var> is a number, the relocation is generated in the current section. If <var class=Va>offset</var> is an expression that resolves to a symbol plus offset, the relocation is generated in the given symbol's section. <var class=Va>expression</var>, if present, must resolve to a symbol plus addend or to an absolute value, but note that not all targets support an addend. e.g. ELF REL targets such as i386 store an addend in the section contents rather than in the relocation. This low level interface does not support addends stored in the section. </section><section class=Ss><h2 class=Ss><code class=Li>.rept</code><var class=Va>count</var></h2> Repeat the sequence of lines between the <code class=Li>.rept</code> directive and the next <code class=Li>.endr</code> directive <var class=Va>count</var> times. <p class=Pp>For example, assembling</p><div class="Bd Pp Bd-indent"><pre>
        .rept   3
        .long   0
        .endr
</pre></div><p class=Pp>is equivalent to assembling</p><div class="Bd Pp Bd-indent"><pre>
        .long   0
        .long   0
        .long   0
</pre></div></section><section class=Ss><h2 class=Ss><code class=Li>.sbttl Va subheading</code></h2> Use <var class=Va>subheading</var> as the title (third line, immediately after the title line) when generating assembly listings. <p class=Pp>This directive affects subsequent pages, as well as the current page if it appears within ten lines of the top of a page.</p></section><section class=Ss><h2 class=Ss><code class=Li>.section</code><var class=Va>name</var></h2> Use the <code class=Li>.section</code> directive to assemble the following code into a section named <var class=Va>name</var>. <p class=Pp>This directive is only supported for targets that actually support arbitrarily named sections; on <code class=Li>a.out</code> targets, for example, it is not accepted, even with a standard <code class=Li>a.out</code> section name.</p><p class=Pp>This is one of the ELF section stack manipulation directives. The others are <code class=Li>.subsection</code> (see Section “SubSection”), <code class=Li>.pushsection</code> (see Section “PushSection”), <code class=Li>.popsection</code> (see Section “PopSection”), and <code class=Li>.previous</code> (see Section “Previous”).</p><p class=Pp>For ELF targets, the <code class=Li>.section</code> directive is used like this:</p><div class="Bd Pp Bd-indent"><pre>
.section name [, "flags"[, @type[,flag_specific_arguments]]]
</pre></div><p class=Pp>The optional <var class=Va>flags</var> argument is a quoted string which may contain any combination of the following characters:</p><dl class=Bl-tag><dt>a</dt><dd>section is allocatable</dd><dt>w</dt><dd>section is writable</dd><dt>x</dt><dd>section is executable</dd><dt>M</dt><dd>section is mergeable</dd><dt>S</dt><dd>section contains zero terminated strings</dd><dt>G</dt><dd>section is a member of a section group</dd><dt>T</dt><dd>section is used for thread-local-storage</dd></dl><p class=Pp>The optional <var class=Va>type</var> argument may contain one of the following constants:</p><dl class=Bl-tag><dt>@progbits</dt><dd>section contains data</dd><dt>@nobits</dt><dd>section does not contain data (i.e., section only occupies space)</dd><dt>@note</dt><dd>section contains data which is used by things other than the program</dd><dt>@init_array</dt><dd>section contains an array of pointers to init functions</dd><dt>@fini_array</dt><dd>section contains an array of pointers to finish functions</dd><dt>@preinit_array</dt><dd>section contains an array of pointers to pre-init functions</dd></dl><p class=Pp>Many targets only support the first three section types.</p><p class=Pp>Note on targets where the <code class=Li>@</code> character is the start of a comment (eg ARM) then another character is used instead. For example the ARM port uses the <code class=Li>%</code> character.</p><p class=Pp>If <var class=Va>flags</var> contains the <code class=Li>M</code> symbol then the <var class=Va>type</var> argument must be specified as well as an extra argument--- <var class=Va>entsize</var> ---like this:</p><div class="Bd Pp Bd-indent"><pre>
.section name , "flags"M, @type, entsize
</pre></div><p class=Pp>Sections with the <code class=Li>M</code> flag but not <code class=Li>S</code> flag must contain fixed size constants, each <var class=Va>entsize</var> octets long. Sections with both <code class=Li>M</code> and <code class=Li>S</code> must contain zero terminated strings where each character is <var class=Va>entsize</var> bytes long. The linker may remove duplicates within sections with the same name, same entity size and same flags. <var class=Va>entsize</var> must be an absolute expression.</p><p class=Pp>If <var class=Va>flags</var> contains the <code class=Li>G</code> symbol then the <var class=Va>type</var> argument must be present along with an additional field like this:</p><div class="Bd Pp Bd-indent"><pre>
.section name , "flags"G, @type, GroupName[, linkage]
</pre></div><p class=Pp>The <var class=Va>GroupName</var> field specifies the name of the section group to which this particular section belongs. The optional linkage field can contain:</p><dl class=Bl-tag><dt>comdat</dt><dd>indicates that only one copy of this section should be retained</dd><dt>.GNU.linkonce</dt><dd>an alias for comdat</dd></dl><p class=Pp>Note: if both the <var class=Va>M</var> and <var class=Va>G</var> flags are present then the fields for the Merge flag should come first, like this:</p><div class="Bd Pp Bd-indent"><pre>
.section name , "flags"MG, @type, entsize, GroupName[, linkage]
</pre></div><p class=Pp>If no flags are specified, the default flags depend upon the section name. If the section name is not recognized, the default will be for the section to have none of the above flags: it will not be allocated in memory, nor writable, nor executable. The section will contain data.</p><p class=Pp>For ELF targets, the assembler supports another type of <code class=Li>.section</code> directive for compatibility with the Solaris assembler:</p><div class="Bd Pp Bd-indent"><pre>
.section "name"[, flags...]
</pre></div><p class=Pp>Note that the section name is quoted. There may be a sequence of comma separated flags:</p><dl class=Bl-tag><dt>#alloc</dt><dd>section is allocatable</dd><dt>#write</dt><dd>section is writable</dd><dt>#execinstr</dt><dd>section is executable</dd><dt>#tls</dt><dd>section is used for thread local storage</dd></dl><p class=Pp>This directive replaces the current section and subsection. See the contents of the gas testsuite directory <code class=Li>gas/testsuite/gas/elf</code> for some examples of how this directive and the other section stack directives work.</p></section><section class=Ss><h2 class=Ss><code class=Li>.set</code><var class=Va>symbol,</var><var class=Va>expression</var></h2> Set the value of <var class=Va>symbol</var> to <var class=Va>expression</var>. This changes <var class=Va>symbol</var> 's value and type to conform to <var class=Va>expression</var>. If <var class=Va>symbol</var> was flagged as external, it remains flagged (see Section “Symbol Attributes”). <p class=Pp>You may <code class=Li>.set</code> a symbol many times in the same assembly.</p><p class=Pp>If you <code class=Li>.set</code> a global symbol, the value stored in the object file is the last value stored into it.</p></section><section class=Ss><h2 class=Ss><code class=Li>.short</code><var class=Va>expressions</var></h2> This expects zero or more <var class=Va>expressions</var>, and emits a 16 bit number for each. </section><section class=Ss><h2 class=Ss><code class=Li>.single</code><var class=Va>flonums</var></h2> This directive assembles zero or more flonums, separated by commas. It has the same effect as <code class=Li>.float</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.size</code></h2> This directive is used to set the size associated with a symbol. <p class=Pp>For ELF targets, the <code class=Li>.size</code> directive is used like this:</p><div class="Bd Pp Bd-indent"><pre>
.size name , expression
</pre></div><p class=Pp>This directive sets the size associated with a symbol <var class=Va>name</var>. The size in bytes is computed from <var class=Va>expression</var> which can make use of label arithmetic. This directive is typically used to set the size of function symbols.</p></section><section class=Ss><h2 class=Ss><code class=Li>.sleb128</code><var class=Va>expressions</var></h2><var class=Va>sleb128</var> stands for “signed little endian base 128.” This is a compact, variable length representation of numbers used by the DWARF symbolic debugging format.See Section “Uleb128”. </section><section class=Ss><h2 class=Ss><code class=Li>.skip</code><var class=Va>size</var>, <var class=Va>fill</var></h2> This directive emits <var class=Va>size</var> bytes, each of value <var class=Va>fill</var>. Both <var class=Va>size</var> and <var class=Va>fill</var> are absolute expressions. If the comma and <var class=Va>fill</var> are omitted, <var class=Va>fill</var> is assumed to be zero. This is the same as <code class=Li>.space</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.space</code><var class=Va>size</var>, <var class=Va>fill</var></h2> This directive emits <var class=Va>size</var> bytes, each of value <var class=Va>fill</var>. Both <var class=Va>size</var> and <var class=Va>fill</var> are absolute expressions. If the comma and <var class=Va>fill</var> are omitted, <var class=Va>fill</var> is assumed to be zero. This is the same as <code class=Li>.skip</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.stabd, .stabn, .stabs</code></h2> There are three directives that begin <code class=Li>.stab</code>. All emit symbols (see Section “Symbols”), for use by symbolic debuggers. The symbols are not entered in the <a class=Xr href=as.1.html>as</a> hash table: they cannot be referenced elsewhere in the source file. Up to five fields are required: <dl class=Bl-tag><dt>string</dt><dd>This is the symbol's name. It may contain any character except <code class=Li>\000</code>, so is more general than ordinary symbol names. Some debuggers used to code arbitrarily complex structures into symbol names using this field.</dd><dt>type</dt><dd>An absolute expression. The symbol's type is set to the low 8 bits of this expression. Any bit pattern is permitted, but <code class=Li>ld</code> and debuggers choke on silly bit patterns.</dd><dt>other</dt><dd>An absolute expression. The symbol's “other” attribute is set to the low 8 bits of this expression.</dd><dt>desc</dt><dd>An absolute expression. The symbol's descriptor is set to the low 16 bits of this expression.</dd><dt>value</dt><dd>An absolute expression which becomes the symbol's value.</dd></dl><p class=Pp>If a warning is detected while reading a <code class=Li>.stabd</code>, <code class=Li>.stabn</code>, or <code class=Li>.stabs</code> statement, the symbol has probably already been created; you get a half-formed symbol in your object file. This is compatible with earlier assemblers!</p><dl class=Bl-tag><dt>.stabd <var class=Va>type</var>, <var class=Va>other</var>, <var class=Va>desc</var></dt><dd><p class=Pp>The “name” of the symbol generated is not even an empty string. It is a null pointer, for compatibility. Older assemblers used a null pointer so they didn't waste space in object files with empty strings.</p><p class=Pp>The symbol's value is set to the location counter, relocatably. When your program is linked, the value of this symbol is the address of the location counter when the <code class=Li>.stabd</code> was assembled.</p></dd><dt>.stabn <var class=Va>type</var>, <var class=Va>other</var>, <var class=Va>desc</var>, <var class=Va>value</var></dt><dd>The name of the symbol is set to the empty string <code class=Li></code>.</dd><dt>.stabs <var class=Va>string</var>, <var class=Va>type</var>, <var class=Va>other</var>, <var class=Va>desc</var>, <var class=Va>value</var></dt><dd>All five fields are specified.</dd></dl></section><section class=Ss><h2 class=Ss><code class=Li>.string Va str</code></h2> Copy the characters in <var class=Va>str</var> to the object file. You may specify more than one string to copy, separated by commas. Unless otherwise specified for a particular machine, the assembler marks the end of each string with a 0 byte. You can use any of the escape sequences described in Strings,,Strings. </section><section class=Ss><h2 class=Ss><code class=Li>.struct</code><var class=Va>expression</var></h2> Switch to the absolute section, and set the section offset to <var class=Va>expression</var>, which must be an absolute expression. You might use this as follows: <div class="Bd Pp Bd-indent"><pre>
        .struct 0
field1:
        .struct field1 + 4
field2:
        .struct field2 + 4
field3:
</pre></div> This would define the symbol <code class=Li>field1</code> to have the value 0, the symbol <code class=Li>field2</code> to have the value 4, and the symbol <code class=Li>field3</code> to have the value 8. Assembly would be left in the absolute section, and you would need to use a <code class=Li>.section</code> directive of some sort to change to some other section before further assembly. </section><section class=Ss><h2 class=Ss><code class=Li>.subsection</code><var class=Va>name</var></h2> This is one of the ELF section stack manipulation directives. The others are <code class=Li>.section</code> (see Section “Section”), <code class=Li>.pushsection</code> (see Section “PushSection”), <code class=Li>.popsection</code> (see Section “PopSection”), and <code class=Li>.previous</code> (see Section “Previous”). <p class=Pp>This directive replaces the current subsection with <code class=Li>name</code>. The current section is not changed. The replaced subsection is put onto the section stack in place of the then current top of stack subsection.</p></section><section class=Ss><h2 class=Ss><code class=Li>.symver</code></h2> Use the <code class=Li>.symver</code> directive to bind symbols to specific version nodes within a source file. This is only supported on ELF platforms, and is typically used when assembling files to be linked into a shared library. There are cases where it may make sense to use this in objects to be bound into an application itself so as to override a versioned symbol from a shared library. <p class=Pp>For ELF targets, the <code class=Li>.symver</code> directive can be used like this:</p><div class="Bd Pp Bd-indent"><pre>
.symver name, name2@nodename
</pre></div> If the symbol <var class=Va>name</var> is defined within the file being assembled, the <code class=Li>.symver</code> directive effectively creates a symbol alias with the name <var class=Va>name2@nodename</var>, and in fact the main reason that we just don't try and create a regular alias is that the <var class=Va>@</var> character isn't permitted in symbol names. The <var class=Va>name2</var> part of the name is the actual name of the symbol by which it will be externally referenced. The name <var class=Va>name</var> itself is merely a name of convenience that is used so that it is possible to have definitions for multiple versions of a function within a single source file, and so that the compiler can unambiguously know which version of a function is being mentioned. The <var class=Va>nodename</var> portion of the alias should be the name of a node specified in the version script supplied to the linker when building a shared library. If you are attempting to override a versioned symbol from a shared library, then <var class=Va>nodename</var> should correspond to the nodename of the symbol you are trying to override. <p class=Pp>If the symbol <var class=Va>name</var> is not defined within the file being assembled, all references to <var class=Va>name</var> will be changed to <var class=Va>name2@nodename</var>. If no reference to <var class=Va>name</var> is made, <var class=Va>name2@nodename</var> will be removed from the symbol table.</p><p class=Pp>Another usage of the <code class=Li>.symver</code> directive is:</p><div class="Bd Pp Bd-indent"><pre>
.symver name, name2@@nodename
</pre></div> In this case, the symbol <var class=Va>name</var> must exist and be defined within the file being assembled. It is similar to <var class=Va>name2@nodename</var>. The difference is <var class=Va>name2@@nodename</var> will also be used to resolve references to <var class=Va>name2</var> by the linker. <p class=Pp>The third usage of the <code class=Li>.symver</code> directive is:</p><div class="Bd Pp Bd-indent"><pre>
.symver name, name2@@@nodename
</pre></div> When <var class=Va>name</var> is not defined within the file being assembled, it is treated as <var class=Va>name2@nodename</var>. When <var class=Va>name</var> is defined within the file being assembled, the symbol name, <var class=Va>name</var>, will be changed to <var class=Va>name2@@nodename</var>. </section><section class=Ss><h2 class=Ss><code class=Li>.text</code><var class=Va>subsection</var></h2> Tells <a class=Xr href=as.1.html>as</a> to assemble the following statements onto the end of the text subsection numbered <var class=Va>subsection</var>, which is an absolute expression. If <var class=Va>subsection</var> is omitted, subsection number zero is used. </section><section class=Ss><h2 class=Ss><code class=Li>.title Va heading</code></h2> Use <var class=Va>heading</var> as the title (second line, immediately after the source file name and pagenumber) when generating assembly listings. <p class=Pp>This directive affects subsequent pages, as well as the current page if it appears within ten lines of the top of a page.</p></section><section class=Ss><h2 class=Ss><code class=Li>.type</code></h2> This directive is used to set the type of a symbol. <p class=Pp>For ELF targets, the <code class=Li>.type</code> directive is used like this:</p><div class="Bd Pp Bd-indent"><pre>
.type name , type description
</pre></div><p class=Pp>This sets the type of symbol <var class=Va>name</var> to be either a function symbol or an object symbol. There are five different syntaxes supported for the <var class=Va>type description</var> field, in order to provide compatibility with various other assemblers.</p><p class=Pp>Because some of the characters used in these syntaxes (such as <code class=Li>@</code> and <code class=Li>#</code>) are comment characters for some architectures, some of the syntaxes below do not work on all architectures. The first variant will be accepted by the GNU assembler on all architectures so that variant should be used for maximum portability, if you do not need to assemble your code with other assemblers.</p><p class=Pp>The syntaxes supported are:</p><div class="Bd Pp Bd-indent"><pre>
  .type &lt;name&gt; STT_FUNCTION
  .type &lt;name&gt; STT_OBJECT

  .type &lt;name&gt;,#function
  .type &lt;name&gt;,#object

  .type &lt;name&gt;,@function
  .type &lt;name&gt;,@object

  .type &lt;name&gt;,%function
  .type &lt;name&gt;,%object

  .type &lt;name&gt;,"function"
  .type &lt;name&gt;,"object"
</pre></div></section><section class=Ss><h2 class=Ss><code class=Li>.uleb128</code><var class=Va>expressions</var></h2><var class=Va>uleb128</var> stands for “unsigned little endian base 128.” This is a compact, variable length representation of numbers used by the DWARF symbolic debugging format.See Section “Sleb128”. </section><section class=Ss><h2 class=Ss><code class=Li>.version Va string</code></h2> This directive creates a <code class=Li>.note</code> section and places into it an ELF formatted note of type NT_VERSION. The note's name is set to <code class=Li>string</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.vtable_entry</code><var class=Va>table,</var><var class=Va>offset</var></h2> This directive finds or creates a symbol <code class=Li>table</code> and creates a <code class=Li>VTABLE_ENTRY</code> relocation for it with an addend of <code class=Li>offset</code>. </section><section class=Ss><h2 class=Ss><code class=Li>.vtable_inherit</code><var class=Va>child,</var><var class=Va>parent</var></h2> This directive finds the symbol <code class=Li>child</code> and finds or creates the symbol <code class=Li>parent</code> and then creates a <code class=Li>VTABLE_INHERIT</code> relocation for the parent whose addend is the value of the child symbol. As a special case the parent name of <code class=Li>0</code> is treated as referring to the <code class=Li>*ABS*</code> section. </section><section class=Ss><h2 class=Ss><code class=Li>.warning Va string</code></h2> Similar to the directive <code class=Li>.error</code> (see Section “Error”), but just emits a warning. </section><section class=Ss><h2 class=Ss><code class=Li>.weak</code><var class=Va>names</var></h2> This directive sets the weak attribute on the comma separated list of symbol <code class=Li>names</code>. If the symbols do not already exist, they will be created. <p class=Pp>On COFF targets other than PE, weak symbols are a GNU extension. This directive sets the weak attribute on the comma separated list of symbol <code class=Li>names</code>. If the symbols do not already exist, they will be created.</p><p class=Pp>On the PE target, weak symbols are supported natively as weak aliases. When a weak symbol is created that is not an alias, GAS creates an alternate symbol to hold the default value.</p></section><section class=Ss><h2 class=Ss><code class=Li>.weakref</code><var class=Va>alias,</var><var class=Va>target</var></h2> This directive creates an alias to the target symbol that enables the symbol to be referenced with weak-symbol semantics, but without actually making it weak. If direct references or definitions of the symbol are present, then the symbol will not be weak, but if all references to it are through weak references, the symbol will be marked as weak in the symbol table. <p class=Pp>The effect is equivalent to moving all references to the alias to a separate assembly source file, renaming the alias to the symbol in it, declaring the symbol as weak there, and running a reloadable link to merge the object files resulting from the assembly of the new source file and the old source file that had the references to the alias removed.</p><p class=Pp>The alias itself never makes to the symbol table, and is entirely handled within the assembler.</p></section><section class=Ss><h2 class=Ss><code class=Li>.word</code><var class=Va>expressions</var></h2> This directive expects zero or more <var class=Va>expressions</var>, of any section, separated by commas. For each expression, <a class=Xr href=as.1.html>as</a> emits a 32-bit number. </section><section class=Ss><h2 class=Ss id=Deprecated_Directives><a class=permalink href=#Deprecated_Directives>Deprecated Directives</a></h2> One day these directives won't work. They are included for compatibility with older assemblers. <dl class=Bl-tag><dt>.abort</dt><dd style="width: auto;"> </dd><dt>.line</dt><dd style="width: auto;"> </dd></dl></section></section><section class=Sh><h2 class=Sh id=ARM_Dependent_Features><a class=permalink href=#ARM_Dependent_Features>ARM Dependent Features</a></h2><section class=Ss><h2 class=Ss id=Options><a class=permalink href=#Options>Options</a></h2><dl class=Bl-tag><dt>-mcpu= <var class=Va>processor[+</var><var class=Va>extension...]</var></dt><dd>This option specifies the target processor. The assembler will issue an error message if an attempt is made to assemble an instruction which will not execute on the target processor. The following processor names are recognized: <code class=Li>arm1</code>, <code class=Li>arm2</code>, <code class=Li>arm250</code>, <code class=Li>arm3</code>, <code class=Li>arm6</code>, <code class=Li>arm60</code>, <code class=Li>arm600</code>, <code class=Li>arm610</code>, <code class=Li>arm620</code>, <code class=Li>arm7</code>, <code class=Li>arm7m</code>, <code class=Li>arm7d</code>, <code class=Li>arm7dm</code>, <code class=Li>arm7di</code>, <code class=Li>arm7dmi</code>, <code class=Li>arm70</code>, <code class=Li>arm700</code>, <code class=Li>arm700i</code>, <code class=Li>arm710</code>, <code class=Li>arm710t</code>, <code class=Li>arm720</code>, <code class=Li>arm720t</code>, <code class=Li>arm740t</code>, <code class=Li>arm710c</code>, <code class=Li>arm7100</code>, <code class=Li>arm7500</code>, <code class=Li>arm7500fe</code>, <code class=Li>arm7t</code>, <code class=Li>arm7tdmi</code>, <code class=Li>arm7tdmi-s</code>, <code class=Li>arm8</code>, <code class=Li>arm810</code>, <code class=Li>strongarm</code>, <code class=Li>strongarm1</code>, <code class=Li>strongarm110</code>, <code class=Li>strongarm1100</code>, <code class=Li>strongarm1110</code>, <code class=Li>arm9</code>, <code class=Li>arm920</code>, <code class=Li>arm920t</code>, <code class=Li>arm922t</code>, <code class=Li>arm940t</code>, <code class=Li>arm9tdmi</code>, <code class=Li>arm9e</code>, <code class=Li>arm926e</code>, <code class=Li>arm926ej-s</code>, <code class=Li>arm946e-r0</code>, <code class=Li>arm946e</code>, <code class=Li>arm946e-s</code>, <code class=Li>arm966e-r0</code>, <code class=Li>arm966e</code>, <code class=Li>arm966e-s</code>, <code class=Li>arm968e-s</code>, <code class=Li>arm10t</code>, <code class=Li>arm10tdmi</code>, <code class=Li>arm10e</code>, <code class=Li>arm1020</code>, <code class=Li>arm1020t</code>, <code class=Li>arm1020e</code>, <code class=Li>arm1022e</code>, <code class=Li>arm1026ej-s</code>, <code class=Li>arm1136j-s</code>, <code class=Li>arm1136jf-s</code>, <code class=Li>arm1156t2-s</code>, <code class=Li>arm1156t2f-s</code>, <code class=Li>arm1176jz-s</code>, <code class=Li>arm1176jzf-s</code>, <code class=Li>mpcore</code>, <code class=Li>mpcorenovfp</code>, <code class=Li>cortex-a8</code>, <code class=Li>cortex-r4</code>, <code class=Li>cortex-m3</code>, <code class=Li>ep9312</code> (ARM920 with Cirrus Maverick coprocessor), <code class=Li>i80200</code> (Intel XScale processor) <code class=Li>iwmmxt</code> (Intel(r) XScale processor with Wireless MMX(tm) technology coprocessor) and <code class=Li>xscale</code>. The special name <code class=Li>all</code> may be used to allow the assembler to accept instructions valid for any ARM processor. <p class=Pp>In addition to the basic instruction set, the assembler can be told to accept various extension mnemonics that extend the processor using the co-processor instruction space. For example, <code class=Li>-mcpu=arm920+maverick</code> is equivalent to specifying <code class=Li>-mcpu=ep9312</code>. The following extensions are currently supported: <code class=Li>+maverick</code><code class=Li>+iwmmxt</code> and <code class=Li>+xscale</code>.</p></dd><dt>-march= <var class=Va>architecture[+</var><var class=Va>extension...]</var></dt><dd>This option specifies the target architecture. The assembler will issue an error message if an attempt is made to assemble an instruction which will not execute on the target architecture. The following architecture names are recognized: <code class=Li>armv1</code>, <code class=Li>armv2</code>, <code class=Li>armv2a</code>, <code class=Li>armv2s</code>, <code class=Li>armv3</code>, <code class=Li>armv3m</code>, <code class=Li>armv4</code>, <code class=Li>armv4xm</code>, <code class=Li>armv4t</code>, <code class=Li>armv4txm</code>, <code class=Li>armv5</code>, <code class=Li>armv5t</code>, <code class=Li>armv5txm</code>, <code class=Li>armv5te</code>, <code class=Li>armv5texp</code>, <code class=Li>armv6</code>, <code class=Li>armv6j</code>, <code class=Li>armv6k</code>, <code class=Li>armv6z</code>, <code class=Li>armv6zk</code>, <code class=Li>armv7</code>, <code class=Li>armv7-a</code>, <code class=Li>armv7-r</code>, <code class=Li>armv7-m</code>, <code class=Li>iwmmxt</code> and <code class=Li>xscale</code>. If both <code class=Li>-mcpu</code> and <code class=Li>-march</code> are specified, the assembler will use the setting for <code class=Li>-mcpu</code>. <p class=Pp>The architecture option can be extended with the same instruction set extension options as the <code class=Li>-mcpu</code> option.</p></dd><dt>-mfpu= <var class=Va>floating-point-format</var></dt><dd><p class=Pp>This option specifies the floating point format to assemble for. The assembler will issue an error message if an attempt is made to assemble an instruction which will not execute on the target floating point unit. The following format options are recognized: <code class=Li>softfpa</code>, <code class=Li>fpe</code>, <code class=Li>fpe2</code>, <code class=Li>fpe3</code>, <code class=Li>fpa</code>, <code class=Li>fpa10</code>, <code class=Li>fpa11</code>, <code class=Li>arm7500fe</code>, <code class=Li>softvfp</code>, <code class=Li>softvfp+vfp</code>, <code class=Li>vfp</code>, <code class=Li>vfp10</code>, <code class=Li>vfp10-r0</code>, <code class=Li>vfp9</code>, <code class=Li>vfpxd</code>, <code class=Li>arm1020t</code>, <code class=Li>arm1020e</code>, <code class=Li>arm1136jf-s</code> and <code class=Li>maverick</code>.</p><p class=Pp>In addition to determining which instructions are assembled, this option also affects the way in which the <code class=Li>.double</code> assembler directive behaves when assembling little-endian code.</p><p class=Pp>The default is dependent on the processor selected. For Architecture 5 or later, the default is to assembler for VFP instructions; for earlier architectures the default is to assemble for FPA instructions.</p></dd><dt>-mthumb</dt><dd>This option specifies that the assembler should start assembling Thumb instructions; that is, it should behave as though the file starts with a <code class=Li>.code 16</code> directive.</dd><dt>-mthumb-interwork</dt><dd>This option specifies that the output generated by the assembler should be marked as supporting interworking.</dd><dt>-mapcs <code class=Li>[26|32]</code></dt><dd>This option specifies that the output generated by the assembler should be marked as supporting the indicated version of the Arm Procedure. Calling Standard.</dd><dt>-matpcs</dt><dd>This option specifies that the output generated by the assembler should be marked as supporting the Arm/Thumb Procedure Calling Standard. If enabled this option will cause the assembler to create an empty debugging section in the object file called .arm.atpcs. Debuggers can use this to determine the ABI being used by.</dd><dt>-mapcs-float</dt><dd>This indicates the floating point variant of the APCS should be used. In this variant floating point arguments are passed in FP registers rather than integer registers.</dd><dt>-mapcs-reentrant</dt><dd>This indicates that the reentrant variant of the APCS should be used. This variant supports position independent code.</dd><dt>-mfloat-abi= <var class=Va>abi</var></dt><dd>This option specifies that the output generated by the assembler should be marked as using specified floating point ABI. The following values are recognized: <code class=Li>soft</code>, <code class=Li>softfp</code> and <code class=Li>hard</code>.</dd><dt>-meabi= <var class=Va>ver</var></dt><dd>This option specifies which EABI version the produced object files should conform to. The following values are recognized: <code class=Li>GNU</code>, <code class=Li>4</code> and <code class=Li>5</code>.</dd><dt>-EB</dt><dd>This option specifies that the output generated by the assembler should be marked as being encoded for a big-endian processor.</dd><dt>-EL</dt><dd>This option specifies that the output generated by the assembler should be marked as being encoded for a little-endian processor.</dd><dt>-k</dt><dd>This option specifies that the output of the assembler should be marked as position-independent code (PIC).</dd></dl></section><section class=Ss><h2 class=Ss id=Syntax_2><a class=permalink href=#Syntax_2>Syntax</a></h2><i class=Em>Special Characters</i><p class=Pp>The presence of a <code class=Li>@</code> on a line indicates the start of a comment that extends to the end of the current line. If a <code class=Li>#</code> appears as the first character of a line, the whole line is treated as a comment.</p><p class=Pp>The ; character can be used instead of a newline to separate statements.</p><p class=Pp>Either <code class=Li>#</code> or <code class=Li>$</code> can be used to indicate immediate operands.</p><p class=Pp>*TODO* Explain about /data modifier on symbols.</p><p class=Pp><i class=Em>Register Names</i></p><p class=Pp>*TODO* Explain about ARM register naming, and the predefined names.</p><p class=Pp><i class=Em>ARM relocation generation</i></p><p class=Pp>Specific data relocations can be generated by putting the relocation name in parentheses after the symbol name. For example:</p><div class="Bd Pp Bd-indent"><pre>
        .word foo(TARGET1)
</pre></div><p class=Pp>This will generate an <code class=Li>R_ARM_TARGET1</code> relocation against the symbol <var class=Va>foo</var>. The following relocations are supported: <code class=Li>GOT</code>, <code class=Li>GOTOFF</code>, <code class=Li>TARGET1</code>, <code class=Li>TARGET2</code>, <code class=Li>SBREL</code>, <code class=Li>TLSGD</code>, <code class=Li>TLSLDM</code>, <code class=Li>TLSLDO</code>, <code class=Li>GOTTPOFF</code> and <code class=Li>TPOFF</code>.</p><p class=Pp>For compatibility with older toolchains the assembler also accepts <code class=Li>(PLT)</code> after branch targets. This will generate the deprecated <code class=Li>R_ARM_PLT32</code> relocation.</p><p class=Pp>Relocations for <code class=Li>MOVW</code> and <code class=Li>MOVT</code> instructions can be generated by prefixing the value with <code class=Li>#:lower16:</code> and <code class=Li>#:upper16</code> respectively. For example to load the 32-bit address of foo into r0:</p><div class="Bd Pp Bd-indent"><pre>
        MOVW r0, #:lower16:foo
        MOVT r0, #:upper16:foo
</pre></div></section><section class=Ss><h2 class=Ss id=Floating_Point><a class=permalink href=#Floating_Point>Floating Point</a></h2> The ARM family uses ieee floating-point numbers. </section><section class=Ss><h2 class=Ss id=ARM_Machine_Directives><a class=permalink href=#ARM_Machine_Directives>ARM Machine Directives</a></h2><dl class=Bl-tag><dt>.align <var class=Va>expression [,</var><var class=Va>expression]</var></dt><dd>This is the generic <var class=Va>.align</var> directive. For the ARM however if the first argument is zero (ie no alignment is needed) the assembler will behave as if the argument had been 2 (ie pad to the next four byte boundary). This is for compatibility with ARM's own assembler.</dd><dt><var class=Va>name .req</var><var class=Va>register name</var></dt><dd>This creates an alias for <var class=Va>register name</var> called <var class=Va>name</var>. For example: <div class="Bd Pp Bd-indent"><pre>
        foo .req r0
    </pre></div></dd><dt>.unreq <var class=Va>alias-name</var></dt><dd>This undefines a register alias which was previously defined using the <code class=Li>req</code>, <code class=Li>dn</code> or <code class=Li>qn</code> directives. For example: <div class="Bd Pp Bd-indent"><pre>
        foo .req r0
        .unreq foo
    </pre></div><p class=Pp>An error occurs if the name is undefined. Note - this pseudo op can be used to delete builtin in register name aliases (eg 'r0'). This should only be done if it is really necessary.</p></dd><dt><var class=Va>name .dn</var><var class=Va>register name</var> [<var class=Va>.type]</var> [<var class=Va>[index]]</var></dt><dd style="width: auto;"> </dd><dt><var class=Va>name .qn</var><var class=Va>register name</var> [<var class=Va>.type]</var> [<var class=Va>[index]]</var></dt><dd><p class=Pp>The <code class=Li>dn</code> and <code class=Li>qn</code> directives are used to create typed and/or indexed register aliases for use in Advanced SIMD Extension (Neon) instructions. The former should be used to create aliases of double-precision registers, and the latter to create aliases of quad-precision registers.</p><p class=Pp>If these directives are used to create typed aliases, those aliases can be used in Neon instructions instead of writing types after the mnemonic or after each operand. For example:</p><div class="Bd Pp Bd-indent"><pre>
        x .dn d2.f32
        y .dn d3.f32
        z .dn d4.f32[1]
        vmul x,y,z
    </pre></div><p class=Pp>This is equivalent to writing the following:</p><div class="Bd Pp Bd-indent"><pre>
        vmul.f32 d2,d3,d4[1]
    </pre></div><p class=Pp>Aliases created using <code class=Li>dn</code> or <code class=Li>qn</code> can be destroyed using <code class=Li>unreq</code>.</p></dd><dt>.code <code class=Li>[16|32]</code></dt><dd>This directive selects the instruction set being generated. The value 16 selects Thumb, with the value 32 selecting ARM.</dd><dt>.thumb</dt><dd>This performs the same action as <var class=Va>.code 16</var>.</dd><dt>.arm</dt><dd>This performs the same action as <var class=Va>.code 32</var>.</dd><dt>.force_thumb</dt><dd>This directive forces the selection of Thumb instructions, even if the target processor does not support those instructions</dd><dt>.thumb_func</dt><dd>This directive specifies that the following symbol is the name of a Thumb encoded function. This information is necessary in order to allow the assembler and linker to generate correct code for interworking between Arm and Thumb instructions and should be used even if interworking is not going to be performed. The presence of this directive also implies <code class=Li>.thumb</code><p class=Pp>This directive is not neccessary when generating EABI objects. On these targets the encoding is implicit when generating Thumb code.</p></dd><dt>.thumb_set</dt><dd>This performs the equivalent of a <code class=Li>.set</code> directive in that it creates a symbol which is an alias for another symbol (possibly not yet defined). This directive also has the added property in that it marks the aliased symbol as being a thumb function entry point, in the same way that the <code class=Li>.thumb_func</code> directive does.</dd><dt>.ltorg</dt><dd>This directive causes the current contents of the literal pool to be dumped into the current section (which is assumed to be the .text section) at the current location (aligned to a word boundary). <code class=Li>GAS</code> maintains a separate literal pool for each section and each sub-section. The <code class=Li>.ltorg</code> directive will only affect the literal pool of the current section and sub-section. At the end of assembly all remaining, un-empty literal pools will automatically be dumped. <p class=Pp>Note - older versions of <code class=Li>GAS</code> would dump the current literal pool any time a section change occurred. This is no longer done, since it prevents accurate control of the placement of literal pools.</p></dd><dt>.pool</dt><dd>This is a synonym for .ltorg.</dd><dt>.unwind_fnstart</dt><dd>Marks the start of a function with an unwind table entry.</dd><dt>.unwind_fnend</dt><dd>Marks the end of a function with an unwind table entry. The unwind index table entry is created when this directive is processed. <p class=Pp>If no personality routine has been specified then standard personality routine 0 or 1 will be used, depending on the number of unwind opcodes required.</p></dd><dt>.cantunwind</dt><dd>Prevents unwinding through the current function. No personality routine or exception table data is required or permitted.</dd><dt>.personality <var class=Va>name</var></dt><dd>Sets the personality routine for the current function to <var class=Va>name</var>.</dd><dt>.personalityindex <var class=Va>index</var></dt><dd>Sets the personality routine for the current function to the EABI standard routine number <var class=Va>index</var></dd><dt>.handlerdata</dt><dd>Marks the end of the current function, and the start of the exception table entry for that function. Anything between this directive and the <code class=Li>.fnend</code> directive will be added to the exception table entry. <p class=Pp>Must be preceded by a <code class=Li>.personality</code> or <code class=Li>.personalityindex</code> directive.</p></dd><dt>.save <var class=Va>reglist</var></dt><dd>Generate unwinder annotations to restore the registers in <var class=Va>reglist</var>. The format of <var class=Va>reglist</var> is the same as the corresponding store-multiple instruction. <div class="Bd Pp Bd-indent"><pre>
  .save {r4, r5, r6, lr}
  stmfd sp!, {r4, r5, r6, lr}
  .save f4, 2
  sfmfd f4, 2, [sp]!
  .save {d8, d9, d10}
  fstmdx sp!, {d8, d9, d10}
  .save {wr10, wr11}
  wstrd wr11, [sp, #-8]!
  wstrd wr10, [sp, #-8]!
or
  .save wr11
  wstrd wr11, [sp, #-8]!
  .save wr10
  wstrd wr10, [sp, #-8]!
    </pre></div></dd><dt>.vsave <var class=Va>vfp-reglist</var></dt><dd>Generate unwinder annotations to restore the VFP registers in <var class=Va>vfp-reglist</var> using FLDMD. Also works for VFPv3 registers that are to be restored using VLDM. The format of <var class=Va>vfp-reglist</var> is the same as the corresponding store-multiple instruction. <div class="Bd Pp Bd-indent"><pre>
  .vsave {d8, d9, d10}
  fstmdd sp!, {d8, d9, d10}
  .vsave {d15, d16, d17}
  vstm sp!, {d15, d16, d17}
    </pre></div><p class=Pp>Since FLDMX and FSTMX are now deprecated, this directive should be used in favour of <code class=Li>.save</code> for saving VFP registers for ARMv6 and above.</p></dd><dt>.pad # <var class=Va>count</var></dt><dd>Generate unwinder annotations for a stack adjustment of <var class=Va>count</var> bytes. A positive value indicates the function prologue allocated stack space by decrementing the stack pointer.</dd><dt>.movsp <var class=Va>reg [, #</var><var class=Va>offset]</var></dt><dd>Tell the unwinder that <var class=Va>reg</var> contains an offset from the current stack pointer. If <var class=Va>offset</var> is not specified then it is assumed to be zero.</dd><dt>.setfp <var class=Va>fpreg,</var><var class=Va>spreg [, #</var><var class=Va>offset]</var></dt><dd>Make all unwinder annotations relaive to a frame pointer. Without this the unwinder will use offsets from the stack pointer. <p class=Pp>The syntax of this directive is the same as the <code class=Li>sub</code> or <code class=Li>mov</code> instruction used to set the frame pointer. <var class=Va>spreg</var> must be either <code class=Li>sp</code> or mentioned in a previous <code class=Li>.movsp</code> directive.</p><div class="Bd Pp Bd-indent"><pre>
.movsp ip
mov ip, sp
...
.setfp fp, ip, #4
sub fp, ip, #4
    </pre></div></dd><dt>.raw <var class=Va>offset,</var><var class=Va>byte1, ...</var></dt><dd>Insert one of more arbitary unwind opcode bytes, which are known to adjust the stack pointer by <var class=Va>offset</var> bytes. <p class=Pp>For example <code class=Li>.unwind_raw 4, 0xb1, 0x01</code> is equivalent to <code class=Li>.save {r0}</code></p></dd><dt>.cpu <var class=Va>name</var></dt><dd>Select the target processor. Valid values for <var class=Va>name</var> are the same as for the [-mcpu] commandline option.</dd><dt>.arch <var class=Va>name</var></dt><dd>Select the target architecture. Valid values for <var class=Va>name</var> are the same as for the [-march] commandline option.</dd><dt>.object_arch <var class=Va>name</var></dt><dd>Override the architecture recorded in the EABI object attribute section. Valid values for <var class=Va>name</var> are the same as for the <code class=Li>.arch</code> directive. Typically this is useful when code uses runtime detection of CPU features.</dd><dt>.fpu <var class=Va>name</var></dt><dd>Select the floating point unit to assemble for. Valid values for <var class=Va>name</var> are the same as for the [-mfpu] commandline option.</dd><dt>.eabi_attribute <var class=Va>tag,</var><var class=Va>value</var></dt><dd>Set the EABI object attribute number <var class=Va>tag</var> to <var class=Va>value</var>. The value is either a <code class=Li>number</code>, <code class=Li>string</code>, or <code class=Li>number, string</code> depending on the tag.</dd></dl></section><section class=Ss><h2 class=Ss id=Opcodes><a class=permalink href=#Opcodes>Opcodes</a></h2><code class=Li>as</code> implements all the standard ARM opcodes. It also implements several pseudo opcodes, including several synthetic load instructions. <dl class=Bl-tag><dt>NOP</dt><dd><div class="Bd Pp Bd-indent"><pre>
  nop
    </pre></div><p class=Pp>This pseudo op will always evaluate to a legal ARM instruction that does nothing. Currently it will evaluate to MOV r0, r0.</p></dd><dt>LDR</dt><dd><div class="Bd Pp Bd-indent"><pre>
  ldr &lt;register&gt; , = &lt;expression&gt;
    </pre></div><p class=Pp>If expression evaluates to a numeric constant then a MOV or MVN instruction will be used in place of the LDR instruction, if the constant can be generated by either of these instructions. Otherwise the constant will be placed into the nearest literal pool (if it not already there) and a PC relative LDR instruction will be generated.</p></dd><dt>ADR</dt><dd><div class="Bd Pp Bd-indent"><pre>
  adr &lt;register&gt; &lt;label&gt;
    </pre></div><p class=Pp>This instruction will load the address of <var class=Va>label</var> into the indicated register. The instruction will evaluate to a PC relative ADD or SUB instruction depending upon where the label is located. If the label is out of range, or if it is not defined in the same file (and section) as the ADR instruction, then an error will be generated. This instruction will not make use of the literal pool.</p></dd><dt>ADRL</dt><dd><div class="Bd Pp Bd-indent"><pre>
  adrl &lt;register&gt; &lt;label&gt;
    </pre></div><p class=Pp>This instruction will load the address of <var class=Va>label</var> into the indicated register. The instruction will evaluate to one or two PC relative ADD or SUB instructions depending upon where the label is located. If a second instruction is not needed a NOP instruction will be generated in its place, so that this instruction is always 8 bytes long.</p><p class=Pp>If the label is out of range, or if it is not defined in the same file (and section) as the ADRL instruction, then an error will be generated. This instruction will not make use of the literal pool.</p></dd></dl><p class=Pp>For information on the ARM or Thumb instruction sets, see <i class=Em>ARM Software Development Toolkit Reference Manual</i>, Advanced RISC Machines Ltd.</p></section><section class=Ss><h2 class=Ss id=Mapping_Symbols><a class=permalink href=#Mapping_Symbols>Mapping Symbols</a></h2> The ARM ELF specification requires that special symbols be inserted into object files to mark certain features: <dl class=Bl-tag><dt>$a</dt><dd>At the start of a region of code containing ARM instructions.</dd><dt>$t</dt><dd>At the start of a region of code containing THUMB instructions.</dd><dt>$d</dt><dd>At the start of a region of data.</dd></dl><p class=Pp>The assembler will automatically insert these symbols for you - there is no need to code them yourself. Support for tagging symbols ($b, $f, $p and $m) which is also mentioned in the current ARM ELF specification is not implemented. This is because they have been dropped from the new EABI and so tools cannot rely upon their presence.</p></section></section><section class=Sh><h2 class=Sh id=80386_Dependent_Features><a class=permalink href=#80386_Dependent_Features>80386 Dependent Features</a></h2> The i386 version <code class=Li>as</code> supports both the original Intel 386 architecture in both 16 and 32-bit mode as well as AMD x86-64 architecture extending the Intel architecture to 64-bits. <section class=Ss><h2 class=Ss id=Options_2><a class=permalink href=#Options_2>Options</a></h2> The i386 version of <code class=Li>as</code> has a few machine dependent options: <dl class=Bl-tag><dt>--32 | --64</dt><dd>Select the word size, either 32 bits or 64 bits. Selecting 32-bit implies Intel i386 architecture, while 64-bit implies AMD x86-64 architecture. <p class=Pp>These options are only available with the ELF object file format, and require that the necessary BFD support has been included (on a 32-bit platform you have to add --enable-64-bit-bfd to configure enable 64-bit usage and use x86-64 as target platform).</p></dd><dt>-n</dt><dd>By default, x86 GAS replaces multiple nop instructions used for alignment within code sections with multi-byte nop instructions such as leal 0(%esi,1),%esi. This switch disables the optimization.</dd><dt>--divide</dt><dd>On SVR4-derived platforms, the character <code class=Li>/</code> is treated as a comment character, which means that it cannot be used in expressions. The <code class=Li>--divide</code> option turns <code class=Li>/</code> into a normal character. This does not disable <code class=Li>/</code> at the beginning of a line starting a comment, or affect using <code class=Li>#</code> for starting a comment.</dd><dt>-march= <var class=Va>CPU</var></dt><dd>This option specifies an instruction set architecture for generating instructions. The following architectures are recognized: <code class=Li>i8086</code>, <code class=Li>i186</code>, <code class=Li>i286</code>, <code class=Li>i386</code>, <code class=Li>i486</code>, <code class=Li>i586</code>, <code class=Li>i686</code>, <code class=Li>pentium</code>, <code class=Li>pentiumpro</code>, <code class=Li>pentiumii</code>, <code class=Li>pentiumiii</code>, <code class=Li>pentium4</code>, <code class=Li>prescott</code>, <code class=Li>nocona</code>, <code class=Li>core</code>, <code class=Li>core2</code>, <code class=Li>k6</code>, <code class=Li>k6_2</code>, <code class=Li>athlon</code>, <code class=Li>sledgehammer</code>, <code class=Li>opteron</code>, <code class=Li>k8</code>, <code class=Li>generic32</code> and <code class=Li>generic64</code>. <p class=Pp>This option only affects instructions generated by the assembler. The <code class=Li>.arch</code> directive will take precedent.</p></dd><dt>-mtune= <var class=Va>CPU</var></dt><dd>This option specifies a processor to optimize for. When used in conjunction with the [-march] option, only instructions of the processor specified by the [-march] option will be generated. <p class=Pp>Valid <var class=Va>CPU</var> values are identical to [-march= <var class=Va>CPU</var>].</p></dd></dl></section><section class=Ss><h2 class=Ss id=AT&T_Syntax_versus_Intel_Syntax><a class=permalink href=#AT&T_Syntax_versus_Intel_Syntax>AT&amp;T Syntax versus Intel Syntax</a></h2><code class=Li>as</code> now supports assembly using Intel assembler syntax. <code class=Li>.intel_syntax</code> selects Intel mode, and <code class=Li>.att_syntax</code> switches back to the usual AT&amp;T mode for compatibility with the output of <code class=Li>gcc</code>. Either of these directives may have an optional argument, <code class=Li>prefix</code>, or <code class=Li>noprefix</code> specifying whether registers require a <code class=Li>%</code> prefix. AT&amp;T System V/386 assembler syntax is quite different from Intel syntax. We mention these differences because almost all 80386 documents use Intel syntax. Notable differences between the two syntaxes are: <ul class=Bl-bullet><li>AT&amp;T immediate operands are preceded by <code class=Li>$</code>; Intel immediate operands are undelimited (Intel <code class=Li>push 4</code> is AT&amp;T <code class=Li>pushl $4</code>). AT&amp;T register operands are preceded by <code class=Li>%</code>; Intel register operands are undelimited. AT&amp;T absolute (as opposed to PC relative) jump/call operands are prefixed by <code class=Li>*</code>; they are undelimited in Intel syntax.</li><li>AT&amp;T and Intel syntax use the opposite order for source and destination operands. Intel <code class=Li>add eax, 4</code> is <code class=Li>addl $4, %eax</code>. The <code class=Li>source, dest</code> convention is maintained for compatibility with previous Unix assemblers. Note that instructions with more than one source operand, such as the <code class=Li>enter</code> instruction, do <i class=Em>not</i> have reversed order. i386-Bugs.</li><li>In AT&amp;T syntax the size of memory operands is determined from the last character of the instruction mnemonic. Mnemonic suffixes of <code class=Li>b</code>, <code class=Li>w</code>, <code class=Li>l</code> and <code class=Li>q</code> specify byte (8-bit), word (16-bit), long (32-bit) and quadruple word (64-bit) memory references. Intel syntax accomplishes this by prefixing memory operands ( <i class=Em>not</i> the instruction mnemonics) with <code class=Li>byte ptr</code>, <code class=Li>word ptr</code>, <code class=Li>dword ptr</code> and <code class=Li>qword ptr</code>. Thus, Intel <code class=Li>mov al, byte ptr</code><var class=Va>foo</var> is <code class=Li>movb</code><var class=Va>foo, %al</var> in AT&amp;T syntax.</li><li>Immediate form long jumps and calls are <code class=Li>lcall/ljmp $</code><var class=Va>section, $</var><var class=Va>offset</var> in AT&amp;T syntax; the Intel syntax is <code class=Li>call/jmp far</code><var class=Va>section:</var><var class=Va>offset</var>. Also, the far return instruction is <code class=Li>lret $</code><var class=Va>stack-adjust</var> in AT&amp;T syntax; Intel syntax is <code class=Li>ret far</code><var class=Va>stack-adjust</var>.</li><li>The AT&amp;T assembler does not provide support for multiple section programs. Unix style systems expect all programs to be single sections.</li></ul></section><section class=Ss><h2 class=Ss id=Instruction_Naming><a class=permalink href=#Instruction_Naming>Instruction Naming</a></h2> Instruction mnemonics are suffixed with one character modifiers which specify the size of operands. The letters <code class=Li>b</code>, <code class=Li>w</code>, <code class=Li>l</code> and <code class=Li>q</code> specify byte, word, long and quadruple word operands. If no suffix is specified by an instruction then <code class=Li>as</code> tries to fill in the missing suffix based on the destination register operand (the last one by convention). Thus, <code class=Li>mov %ax, %bx</code> is equivalent to <code class=Li>movw %ax, %bx</code>; also, <code class=Li>mov $1, %bx</code> is equivalent to <code class=Li>movw $1, bx</code>. Note that this is incompatible with the AT&amp;T Unix assembler which assumes that a missing mnemonic suffix implies long operand size. (This incompatibility does not affect compiler output since compilers always explicitly specify the mnemonic suffix.) <p class=Pp>Almost all instructions have the same names in AT&amp;T and Intel format. There are a few exceptions. The sign extend and zero extend instructions need two sizes to specify them. They need a size to sign/zero extend <i class=Em>from</i> and a size to zero extend <i class=Em>to</i>. This is accomplished by using two instruction mnemonic suffixes in AT&amp;T syntax. Base names for sign extend and zero extend are <code class=Li>movs...</code> and <code class=Li>movz...</code> in AT&amp;T syntax ( <code class=Li>movsx</code> and <code class=Li>movzx</code> in Intel syntax). The instruction mnemonic suffixes are tacked on to this base name, the <i class=Em>from</i> suffix before the <i class=Em>to</i> suffix. Thus, <code class=Li>movsbl %al, %edx</code> is AT&amp;T syntax for “move sign extend <i class=Em>from</i> %al <i class=Em>to</i> %edx.” Possible suffixes, thus, are <code class=Li>bl</code> (from byte to long), <code class=Li>bw</code> (from byte to word), <code class=Li>wl</code> (from word to long), <code class=Li>bq</code> (from byte to quadruple word), <code class=Li>wq</code> (from word to quadruple word), and <code class=Li>lq</code> (from long to quadruple word).</p><p class=Pp>The Intel-syntax conversion instructions</p><ul class=Bl-bullet><li><a class=permalink href=#cbw><code class=Li id=cbw>cbw</code></a> --- sign-extend byte in <code class=Li>%al</code> to word in <code class=Li>%ax</code>,</li><li><a class=permalink href=#cwde><code class=Li id=cwde>cwde</code></a> --- sign-extend word in <code class=Li>%ax</code> to long in <code class=Li>%eax</code>,</li><li><a class=permalink href=#cwd><code class=Li id=cwd>cwd</code></a> --- sign-extend word in <code class=Li>%ax</code> to long in <code class=Li>%dx:%ax</code>,</li><li><a class=permalink href=#cdq><code class=Li id=cdq>cdq</code></a> --- sign-extend dword in <code class=Li>%eax</code> to quad in <code class=Li>%edx:%eax</code>,</li><li><a class=permalink href=#cdqe><code class=Li id=cdqe>cdqe</code></a> --- sign-extend dword in <code class=Li>%eax</code> to quad in <code class=Li>%rax</code> (x86-64 only),</li><li><a class=permalink href=#cqo><code class=Li id=cqo>cqo</code></a> --- sign-extend quad in <code class=Li>%rax</code> to octuple in <code class=Li>%rdx:%rax</code> (x86-64 only),</li></ul><p class=Pp>are called <code class=Li>cbtw</code>, <code class=Li>cwtl</code>, <code class=Li>cwtd</code>, <code class=Li>cltd</code>, <code class=Li>cltq</code>, and <code class=Li>cqto</code> in AT&amp;T naming. <code class=Li>as</code> accepts either naming for these instructions.</p><p class=Pp>Far call/jump instructions are <code class=Li>lcall</code> and <code class=Li>ljmp</code> in AT&amp;T syntax, but are <code class=Li>call far</code> and <code class=Li>jump far</code> in Intel convention.</p></section><section class=Ss><h2 class=Ss id=Register_Naming><a class=permalink href=#Register_Naming>Register Naming</a></h2> Register operands are always prefixed with <code class=Li>%</code>. The 80386 registers consist of <ul class=Bl-bullet><li>the 8 32-bit registers <code class=Li>%eax</code> (the accumulator), <code class=Li>%ebx</code>, <code class=Li>%ecx</code>, <code class=Li>%edx</code>, <code class=Li>%edi</code>, <code class=Li>%esi</code>, <code class=Li>%ebp</code> (the frame pointer), and <code class=Li>%esp</code> (the stack pointer).</li><li>the 8 16-bit low-ends of these: <code class=Li>%ax</code>, <code class=Li>%bx</code>, <code class=Li>%cx</code>, <code class=Li>%dx</code>, <code class=Li>%di</code>, <code class=Li>%si</code>, <code class=Li>%bp</code>, and <code class=Li>%sp</code>.</li><li>the 8 8-bit registers: <code class=Li>%ah</code>, <code class=Li>%al</code>, <code class=Li>%bh</code>, <code class=Li>%bl</code>, <code class=Li>%ch</code>, <code class=Li>%cl</code>, <code class=Li>%dh</code>, and <code class=Li>%dl</code> (These are the high-bytes and low-bytes of <code class=Li>%ax</code>, <code class=Li>%bx</code>, <code class=Li>%cx</code>, and <code class=Li>%dx</code>)</li><li>the 6 section registers <code class=Li>%cs</code> (code section), <code class=Li>%ds</code> (data section), <code class=Li>%ss</code> (stack section), <code class=Li>%es</code>, <code class=Li>%fs</code>, and <code class=Li>%gs</code>.</li><li>the 3 processor control registers <code class=Li>%cr0</code>, <code class=Li>%cr2</code>, and <code class=Li>%cr3</code>.</li><li>the 6 debug registers <code class=Li>%db0</code>, <code class=Li>%db1</code>, <code class=Li>%db2</code>, <code class=Li>%db3</code>, <code class=Li>%db6</code>, and <code class=Li>%db7</code>.</li><li>the 2 test registers <code class=Li>%tr6</code> and <code class=Li>%tr7</code>.</li><li>the 8 floating point register stack <code class=Li>%st</code> or equivalently <code class=Li>%st(0)</code>, <code class=Li>%st(1)</code>, <code class=Li>%st(2)</code>, <code class=Li>%st(3)</code>, <code class=Li>%st(4)</code>, <code class=Li>%st(5)</code>, <code class=Li>%st(6)</code>, and <code class=Li>%st(7)</code>. These registers are overloaded by 8 MMX registers <code class=Li>%mm0</code>, <code class=Li>%mm1</code>, <code class=Li>%mm2</code>, <code class=Li>%mm3</code>, <code class=Li>%mm4</code>, <code class=Li>%mm5</code>, <code class=Li>%mm6</code> and <code class=Li>%mm7</code>.</li><li>the 8 SSE registers registers <code class=Li>%xmm0</code>, <code class=Li>%xmm1</code>, <code class=Li>%xmm2</code>, <code class=Li>%xmm3</code>, <code class=Li>%xmm4</code>, <code class=Li>%xmm5</code>, <code class=Li>%xmm6</code> and <code class=Li>%xmm7</code>.</li></ul><p class=Pp>The AMD x86-64 architecture extends the register set by:</p><ul class=Bl-bullet><li>enhancing the 8 32-bit registers to 64-bit: <code class=Li>%rax</code> (the accumulator), <code class=Li>%rbx</code>, <code class=Li>%rcx</code>, <code class=Li>%rdx</code>, <code class=Li>%rdi</code>, <code class=Li>%rsi</code>, <code class=Li>%rbp</code> (the frame pointer), <code class=Li>%rsp</code> (the stack pointer)</li><li>the 8 extended registers <code class=Li>%r8</code> -- <code class=Li>%r15</code>.</li><li>the 8 32-bit low ends of the extended registers: <code class=Li>%r8d</code> -- <code class=Li>%r15d</code></li><li>the 8 16-bit low ends of the extended registers: <code class=Li>%r8w</code> -- <code class=Li>%r15w</code></li><li>the 8 8-bit low ends of the extended registers: <code class=Li>%r8b</code> -- <code class=Li>%r15b</code></li><li>the 4 8-bit registers: <code class=Li>%sil</code>, <code class=Li>%dil</code>, <code class=Li>%bpl</code>, <code class=Li>%spl</code>.</li><li>the 8 debug registers: <code class=Li>%db8</code> -- <code class=Li>%db15</code>.</li><li>the 8 SSE registers: <code class=Li>%xmm8</code> -- <code class=Li>%xmm15</code>.</li></ul></section><section class=Ss><h2 class=Ss id=Instruction_Prefixes><a class=permalink href=#Instruction_Prefixes>Instruction Prefixes</a></h2> Instruction prefixes are used to modify the following instruction. They are used to repeat string instructions, to provide section overrides, to perform bus lock operations, and to change operand and address sizes. (Most instructions that normally operate on 32-bit operands will use 16-bit operands if the instruction has an “operand size” prefix.) Instruction prefixes are best written on the same line as the instruction they act upon. For example, the <code class=Li>scas</code> (scan string) instruction is repeated with: <div class="Bd Pp Bd-indent"><pre>
        repne scas %es:(%edi),%al
</pre></div><p class=Pp>You may also place prefixes on the lines immediately preceding the instruction, but this circumvents checks that <code class=Li>as</code> does with prefixes, and will not work with all prefixes.</p><p class=Pp>Here is a list of instruction prefixes:</p><ul class=Bl-bullet><li>Section override prefixes <code class=Li>cs</code>, <code class=Li>ds</code>, <code class=Li>ss</code>, <code class=Li>es</code>, <code class=Li>fs</code>, <code class=Li>gs</code>. These are automatically added by specifying using the <var class=Va>section</var> : <var class=Va>memory-operand</var> form for memory references.</li><li>Operand/Address size prefixes <code class=Li>data16</code> and <code class=Li>addr16</code> change 32-bit operands/addresses into 16-bit operands/addresses, while <code class=Li>data32</code> and <code class=Li>addr32</code> change 16-bit ones (in a <code class=Li>.code16</code> section) into 32-bit operands/addresses. These prefixes <i class=Em>must</i> appear on the same line of code as the instruction they modify. For example, in a 16-bit <code class=Li>.code16</code> section, you might write: <div class="Bd Pp Bd-indent"><pre>
        addr32 jmpl *(%ebx)
    </pre></div></li><li>The bus lock prefix <code class=Li>lock</code> inhibits interrupts during execution of the instruction it precedes. (This is only valid with certain instructions; see a 80386 manual for details).</li><li>The wait for coprocessor prefix <code class=Li>wait</code> waits for the coprocessor to complete the current instruction. This should never be needed for the 80386/80387 combination.</li><li>The <code class=Li>rep</code>, <code class=Li>repe</code>, and <code class=Li>repne</code> prefixes are added to string instructions to make them repeat <code class=Li>%ecx</code> times ( <code class=Li>%cx</code> times if the current address size is 16-bits).</li><li>The <code class=Li>rex</code> family of prefixes is used by x86-64 to encode extensions to i386 instruction set. The <code class=Li>rex</code> prefix has four bits --- an operand size overwrite ( <code class=Li>64</code>) used to change operand size from 32-bit to 64-bit and X, Y and Z extensions bits used to extend the register set. <p class=Pp>You may write the <code class=Li>rex</code> prefixes directly. The <code class=Li>rex64xyz</code> instruction emits <code class=Li>rex</code> prefix with all the bits set. By omitting the <code class=Li>64</code>, <code class=Li>x</code>, <code class=Li>y</code> or <code class=Li>z</code> you may write other prefixes as well. Normally, there is no need to write the prefixes explicitly, since gas will automatically generate them based on the instruction operands.</p></li></ul></section><section class=Ss><h2 class=Ss id=Memory_References><a class=permalink href=#Memory_References>Memory References</a></h2> An Intel syntax indirect memory reference of the form <div class="Bd Pp Bd-indent"><pre>
section:[base + index*scale + disp]
</pre></div><p class=Pp>is translated into the AT&amp;T syntax</p><div class="Bd Pp Bd-indent"><pre>
section:disp(base, index, scale)
</pre></div><p class=Pp>where <var class=Va>base</var> and <var class=Va>index</var> are the optional 32-bit base and index registers, <var class=Va>disp</var> is the optional displacement, and <var class=Va>scale</var>, taking the values 1, 2, 4, and 8, multiplies <var class=Va>index</var> to calculate the address of the operand. If no <var class=Va>scale</var> is specified, <var class=Va>scale</var> is taken to be 1. <var class=Va>section</var> specifies the optional section register for the memory operand, and may override the default section register (see a 80386 manual for section register defaults). Note that section overrides in AT&amp;T syntax <i class=Em>must</i> be preceded by a <code class=Li>%</code>. If you specify a section override which coincides with the default section register, <code class=Li>as</code> does <i class=Em>not</i> output any section register override prefixes to assemble the given instruction. Thus, section overrides can be specified to emphasize which section register is used for a given memory operand.</p><p class=Pp>Here are some examples of Intel and AT&amp;T style memory references:</p><dl class=Bl-tag><dt>AT&amp;T: <code class=Li>-4(%ebp), Intel:</code><code class=Li>[ebp - 4]</code></dt><dd><var class=Va>base</var> is <code class=Li>%ebp</code>; <var class=Va>disp</var> is <code class=Li>-4</code>. <var class=Va>section</var> is missing, and the default section is used ( <code class=Li>%ss</code> for addressing with <code class=Li>%ebp</code> as the base register). <var class=Va>index</var>, <var class=Va>scale</var> are both missing.</dd><dt>AT&amp;T: <code class=Li>foo(,%eax,4), Intel:</code><code class=Li>[foo + eax*4]</code></dt><dd><var class=Va>index</var> is <code class=Li>%eax</code> (scaled by a <var class=Va>scale</var> 4); <var class=Va>disp</var> is <code class=Li>foo</code>. All other fields are missing. The section register here defaults to <code class=Li>%ds</code>.</dd><dt>AT&amp;T: <code class=Li>foo(,1); Intel</code><code class=Li>[foo]</code></dt><dd>This uses the value pointed to by <code class=Li>foo</code> as a memory operand. Note that <var class=Va>base</var> and <var class=Va>index</var> are both missing, but there is only <i class=Em>one</i> ,. This is a syntactic exception.</dd><dt>AT&amp;T: <code class=Li>%gs:foo; Intel</code><code class=Li>gs:foo</code></dt><dd>This selects the contents of the variable <code class=Li>foo</code> with section register <var class=Va>section</var> being <code class=Li>%gs</code>.</dd></dl><p class=Pp>Absolute (as opposed to PC relative) call and jump operands must be prefixed with <code class=Li>*</code>. If no <code class=Li>*</code> is specified, <code class=Li>as</code> always chooses PC relative addressing for jump/call labels.</p><p class=Pp>Any instruction that has a memory operand, but no register operand, <i class=Em>must</i> specify its size (byte, word, long, or quadruple) with an instruction mnemonic suffix ( <code class=Li>b</code>, <code class=Li>w</code>, <code class=Li>l</code> or <code class=Li>q</code>, respectively).</p><p class=Pp>The x86-64 architecture adds an RIP (instruction pointer relative) addressing. This addressing mode is specified by using <code class=Li>rip</code> as a base register. Only constant offsets are valid. For example:</p><dl class=Bl-tag><dt>AT&amp;T: <code class=Li>1234(%rip), Intel:</code><code class=Li>[rip + 1234]</code></dt><dd>Points to the address 1234 bytes past the end of the current instruction.</dd><dt>AT&amp;T: <code class=Li>symbol(%rip), Intel:</code><code class=Li>[rip + symbol]</code></dt><dd>Points to the <code class=Li>symbol</code> in RIP relative way, this is shorter than the default absolute addressing.</dd></dl><p class=Pp>Other addressing modes remain unchanged in x86-64 architecture, except registers used are 64-bit instead of 32-bit.</p></section><section class=Ss><h2 class=Ss id=Handling_of_Jump_Instructions><a class=permalink href=#Handling_of_Jump_Instructions>Handling of Jump Instructions</a></h2> Jump instructions are always optimized to use the smallest possible displacements. This is accomplished by using byte (8-bit) displacement jumps whenever the target is sufficiently close. If a byte displacement is insufficient a long displacement is used. We do not support word (16-bit) displacement jumps in 32-bit mode (i.e. prefixing the jump instruction with the <code class=Li>data16</code> instruction prefix), since the 80386 insists upon masking <code class=Li>%eip</code> to 16 bits after the word displacement is added. (See alsosee Section “i386-Arch”) <p class=Pp>Note that the <code class=Li>jcxz</code>, <code class=Li>jecxz</code>, <code class=Li>loop</code>, <code class=Li>loopz</code>, <code class=Li>loope</code>, <code class=Li>loopnz</code> and <code class=Li>loopne</code> instructions only come in byte displacements, so that if you use these instructions ( <code class=Li>gcc</code> does not use them) you may get an error message (and incorrect code). The AT&amp;T 80386 assembler tries to get around this problem by expanding <code class=Li>jcxz foo</code> to</p><div class="Bd Pp Bd-indent"><pre>
         jcxz cx_zero
         jmp cx_nonzero
cx_zero: jmp foo
cx_nonzero:
</pre></div></section><section class=Ss><h2 class=Ss id=Floating_Point_2><a class=permalink href=#Floating_Point_2>Floating Point</a></h2> All 80387 floating point types except packed BCD are supported. (BCD support may be added without much difficulty). These data types are 16-, 32-, and 64- bit integers, and single (32-bit), double (64-bit), and extended (80-bit) precision floating point. Each supported type has an instruction mnemonic suffix and a constructor associated with it. Instruction mnemonic suffixes specify the operand's data type. Constructors build these data types into memory. <ul class=Bl-bullet><li>Floating point constructors are <code class=Li>.float</code> or <code class=Li>.single</code>, <code class=Li>.double</code>, and <code class=Li>.tfloat</code> for 32-, 64-, and 80-bit formats. These correspond to instruction mnemonic suffixes <code class=Li>s</code>, <code class=Li>l</code>, and <code class=Li>t</code>. <code class=Li>t</code> stands for 80-bit (ten byte) real. The 80387 only supports this format via the <code class=Li>fldt</code> (load 80-bit real to stack top) and <code class=Li>fstpt</code> (store 80-bit real and pop stack) instructions.</li><li>Integer constructors are <code class=Li>.word</code>, <code class=Li>.long</code> or <code class=Li>.int</code>, and <code class=Li>.quad</code> for the 16-, 32-, and 64-bit integer formats. The corresponding instruction mnemonic suffixes are <code class=Li>s</code> (single), <code class=Li>l</code> (long), and <code class=Li>q</code> (quad). As with the 80-bit real format, the 64-bit <code class=Li>q</code> format is only present in the <code class=Li>fildq</code> (load quad integer to stack top) and <code class=Li>fistpq</code> (store quad integer and pop stack) instructions.</li></ul><p class=Pp>Register to register operations should not use instruction mnemonic suffixes. <code class=Li>fstl %st, %st(1)</code> will give a warning, and be assembled as if you wrote <code class=Li>fst %st, %st(1)</code>, since all register to register operations use 80-bit floating point operands. (Contrast this with <code class=Li>fstl %st, mem</code>, which converts <code class=Li>%st</code> from 80-bit to 64-bit floating point format, then stores the result in the 4 byte location <code class=Li>mem</code>)</p></section><section class=Ss><h2 class=Ss id="Intel's_MMX_and_AMD's_3DNow!_SIMD_Operations"><a class=permalink href="#Intel's_MMX_and_AMD's_3DNow!_SIMD_Operations">Intel's MMX and AMD's 3DNow! SIMD Operations</a></h2><code class=Li>as</code> supports Intel's MMX instruction set (SIMD instructions for integer data), available on Intel's Pentium MMX processors and Pentium II processors, AMD's K6 and K6-2 processors, Cyrix' M2 processor, and probably others. It also supports AMD's 3DNow! instruction set (SIMD instructions for 32-bit floating point data) available on AMD's K6-2 processor and possibly others in the future. <p class=Pp>Currently, <code class=Li>as</code> does not support Intel's floating point SIMD, Katmai (KNI).</p><p class=Pp>The eight 64-bit MMX operands, also used by 3DNow!, are called <code class=Li>%mm0</code>, <code class=Li>%mm1</code>, ... <code class=Li>%mm7</code>. They contain eight 8-bit integers, four 16-bit integers, two 32-bit integers, one 64-bit integer, or two 32-bit floating point values. The MMX registers cannot be used at the same time as the floating point stack.</p><p class=Pp>See Intel and AMD documentation, keeping in mind that the operand order in instructions is reversed from the Intel syntax.</p></section><section class=Ss><h2 class=Ss id=Writing_16-bit_Code><a class=permalink href=#Writing_16-bit_Code>Writing 16-bit Code</a></h2> While <code class=Li>as</code> normally writes only “pure” 32-bit i386 code or 64-bit x86-64 code depending on the default configuration, it also supports writing code to run in real mode or in 16-bit protected mode code segments. To do this, put a <code class=Li>.code16</code> or <code class=Li>.code16gcc</code> directive before the assembly language instructions to be run in 16-bit mode. You can switch <code class=Li>as</code> back to writing normal 32-bit code with the <code class=Li>.code32</code> directive. <p class=Pp><code class=Li>.code16gcc</code> provides experimental support for generating 16-bit code from gcc, and differs from <code class=Li>.code16</code> in that <code class=Li>call</code>, <code class=Li>ret</code>, <code class=Li>enter</code>, <code class=Li>leave</code>, <code class=Li>push</code>, <code class=Li>pop</code>, <code class=Li>pusha</code>, <code class=Li>popa</code>, <code class=Li>pushf</code>, and <code class=Li>popf</code> instructions default to 32-bit size. This is so that the stack pointer is manipulated in the same way over function calls, allowing access to function parameters at the same stack offsets as in 32-bit mode. <code class=Li>.code16gcc</code> also automatically adds address size prefixes where necessary to use the 32-bit addressing modes that gcc generates.</p><p class=Pp>The code which <code class=Li>as</code> generates in 16-bit mode will not necessarily run on a 16-bit pre-80386 processor. To write code that runs on such a processor, you must refrain from using <i class=Em>any</i> 32-bit constructs which require <code class=Li>as</code> to output address or operand size prefixes.</p><p class=Pp>Note that writing 16-bit code instructions by explicitly specifying a prefix or an instruction mnemonic suffix within a 32-bit code section generates different machine instructions than those generated for a 16-bit code segment. In a 32-bit code section, the following code generates the machine opcode bytes <code class=Li>66 6a 04</code>, which pushes the value <code class=Li>4</code> onto the stack, decrementing <code class=Li>%esp</code> by 2.</p><div class="Bd Pp Bd-indent"><pre>
        pushw $4
</pre></div><p class=Pp>The same code in a 16-bit code section would generate the machine opcode bytes <code class=Li>6a 04</code> (i.e., without the operand size prefix), which is correct since the processor default operand size is assumed to be 16 bits in a 16-bit code section.</p></section><section class=Ss><h2 class=Ss id=AT&T_Syntax_bugs><a class=permalink href=#AT&T_Syntax_bugs>AT&amp;T Syntax bugs</a></h2> The UnixWare assembler, and probably other AT&amp;T derived ix86 Unix assemblers, generate floating point instructions with reversed source and destination registers in certain cases. Unfortunately, gcc and possibly many other programs use this reversed syntax, so we're stuck with it. <p class=Pp>For example</p><div class="Bd Pp Bd-indent"><pre>
        fsub %st,%st(3)
</pre></div> results in <code class=Li>%st(3)</code> being updated to <code class=Li>%st - %st(3)</code> rather than the expected <code class=Li>%st(3) - %st</code>. This happens with all the non-commutative arithmetic floating point operations with two register operands where the source register is <code class=Li>%st</code> and the destination register is <code class=Li>%st(i)</code>. </section><section class=Ss><h2 class=Ss id=Specifying_CPU_Architecture><a class=permalink href=#Specifying_CPU_Architecture>Specifying CPU Architecture</a></h2><code class=Li>as</code> may be told to assemble for a particular CPU (sub-)architecture with the <code class=Li>.arch</code><var class=Va>cpu_type</var> directive. This directive enables a warning when gas detects an instruction that is not supported on the CPU specified. The choices for <var class=Va>cpu_type</var> are: <p class=Pp></p><table class=tbl><tr></tr><tr><td>i8086</td><td> i186</td><td> i286</td><td> i386</td></tr><tr><td>i486</td><td> i586</td><td> i686</td><td> pentium</td></tr><tr><td>pentiumpro</td><td> pentiumii</td><td> pentiumiii</td><td> pentium4</td></tr><tr><td>prescott</td><td> nocona</td><td> core</td><td> core2</td></tr><tr><td>amdfam10</td></tr><tr><td>k6</td><td> athlon</td><td> sledgehammer</td><td> k8</td></tr><tr><td>.mmx</td><td> .sse</td><td> .sse2</td><td> .sse3</td></tr><tr><td>.ssse3</td><td> .sse4.1</td><td> .sse4.2</td><td> .sse4</td></tr><tr><td>.sse4a</td><td> .3dnow</td><td> .3dnowa</td><td> .padlock</td></tr><tr><td>.pacifica</td><td> .svme</td><td> .abm</td></tr></table><p class=Pp>Apart from the warning, there are only two other effects on <code class=Li>as</code> operation; Firstly, if you specify a CPU other than <code class=Li>i486</code>, then shift by one instructions such as <code class=Li>sarl $1, %eax</code> will automatically use a two byte opcode sequence. The larger three byte opcode sequence is used on the 486 (and when no architecture is specified) because it executes faster on the 486. Note that you can explicitly request the two byte opcode by writing <code class=Li>sarl %eax</code>. Secondly, if you specify <code class=Li>i8086</code>, <code class=Li>i186</code>, or <code class=Li>i286</code>, <i class=Em>and</i><code class=Li>.code16</code> or <code class=Li>.code16gcc</code> then byte offset conditional jumps will be promoted when necessary to a two instruction sequence consisting of a conditional jump of the opposite sense around an unconditional jump to the target.</p><p class=Pp>Following the CPU architecture (but not a sub-architecture, which are those starting with a dot), you may specify <code class=Li>jumps</code> or <code class=Li>nojumps</code> to control automatic promotion of conditional jumps. <code class=Li>jumps</code> is the default, and enables jump promotion; All external jumps will be of the long variety, and file-local jumps will be promoted as necessary. (see Section “i386-Jumps”) <code class=Li>nojumps</code> leaves external conditional jumps as byte offset jumps, and warns about file-local conditional jumps that <code class=Li>as</code> promotes. Unconditional jumps are treated as for <code class=Li>jumps</code>.</p><p class=Pp>For example</p><div class="Bd Pp Bd-indent"><pre>
 .arch i8086,nojumps
</pre></div></section><section class=Ss><h2 class=Ss id=Notes><a class=permalink href=#Notes>Notes</a></h2> There is some trickery concerning the <code class=Li>mul</code> and <code class=Li>imul</code> instructions that deserves mention. The 16-, 32-, 64- and 128-bit expanding multiplies (base opcode <code class=Li>0xf6</code>; extension 4 for <code class=Li>mul</code> and 5 for <code class=Li>imul</code>) can be output only in the one operand form. Thus, <code class=Li>imul %ebx, %eax</code> does <i class=Em>not</i> select the expanding multiply; the expanding multiply would clobber the <code class=Li>%edx</code> register, and this would confuse <code class=Li>gcc</code> output. Use <code class=Li>imul %ebx</code> to get the 64-bit product in <code class=Li>%edx:%eax</code>. <p class=Pp>We have added a two operand form of <code class=Li>imul</code> when the first operand is an immediate mode expression and the second operand is a register. This is just a shorthand, so that, multiplying <code class=Li>%eax</code> by 69, for example, can be done with <code class=Li>imul $69, %eax</code> rather than <code class=Li>imul $69, %eax, %eax</code>.</p></section></section><section class=Sh><h2 class=Sh id=IA-64_Dependent_Features><a class=permalink href=#IA-64_Dependent_Features>IA-64 Dependent Features</a></h2><section class=Ss><h2 class=Ss id=Options_3><a class=permalink href=#Options_3>Options</a></h2><dl class=Bl-tag><dt>-mconstant-gp</dt><dd>This option instructs the assembler to mark the resulting object file as using the “constant GP” model. With this model, it is assumed that the entire program uses a single global pointer (GP) value. Note that this option does not in any fashion affect the machine code emitted by the assembler. All it does is turn on the EF_IA_64_CONS_GP flag in the ELF file header.</dd><dt>-mauto-pic</dt><dd>This option instructs the assembler to mark the resulting object file as using the “constant GP without function descriptor” data model. This model is like the “constant GP” model, except that it additionally does away with function descriptors. What this means is that the address of a function refers directly to the function's code entry-point. Normally, such an address would refer to a function descriptor, which contains both the code entry-point and the GP-value needed by the function. Note that this option does not in any fashion affect the machine code emitted by the assembler. All it does is turn on the EF_IA_64_NOFUNCDESC_CONS_GP flag in the ELF file header.</dd><dt>-milp32</dt><dd style="width: auto;"> </dd><dt>-milp64</dt><dd style="width: auto;"> </dd><dt>-mlp64</dt><dd style="width: auto;"> </dd><dt>-mp64</dt><dd>These options select the data model. The assembler defaults to <code class=Li>-mlp64</code> (LP64 data model).</dd><dt>-mle</dt><dd style="width: auto;"> </dd><dt>-mbe</dt><dd>These options select the byte order. The <code class=Li>-mle</code> option selects little-endian byte order (default) and <code class=Li>-mbe</code> selects big-endian byte order. Note that IA-64 machine code always uses little-endian byte order.</dd><dt>-mtune=itanium1</dt><dd style="width: auto;"> </dd><dt>-mtune=itanium2</dt><dd>Tune for a particular IA-64 CPU, <var class=Va>itanium1</var> or <var class=Va>itanium2</var>. The default is <var class=Va>itanium2</var>.</dd><dt>-munwind-check=warning</dt><dd style="width: auto;"> </dd><dt>-munwind-check=error</dt><dd>These options control what the assembler will do when performing consistency checks on unwind directives. <code class=Li>-munwind-check=warning</code> will make the assembler issue a warning when an unwind directive check fails. This is the default. <code class=Li>-munwind-check=error</code> will make the assembler issue an error when an unwind directive check fails.</dd><dt>-mhint.b=ok</dt><dd style="width: auto;"> </dd><dt>-mhint.b=warning</dt><dd style="width: auto;"> </dd><dt>-mhint.b=error</dt><dd>These options control what the assembler will do when the <code class=Li>hint.b</code> instruction is used. <code class=Li>-mhint.b=ok</code> will make the assembler accept <code class=Li>hint.b</code>. <code class=Li>-mint.b=warning</code> will make the assembler issue a warning when <code class=Li>hint.b</code> is used. <code class=Li>-mhint.b=error</code> will make the assembler treat <code class=Li>hint.b</code> as an error, which is the default.</dd><dt>-x</dt><dd style="width: auto;"> </dd><dt>-xexplicit</dt><dd>These options turn on dependency violation checking.</dd><dt>-xauto</dt><dd>This option instructs the assembler to automatically insert stop bits where necessary to remove dependency violations. This is the default mode.</dd><dt>-xnone</dt><dd>This option turns off dependency violation checking.</dd><dt>-xdebug</dt><dd>This turns on debug output intended to help tracking down bugs in the dependency violation checker.</dd><dt>-xdebugn</dt><dd>This is a shortcut for -xnone -xdebug.</dd><dt>-xdebugx</dt><dd>This is a shortcut for -xexplicit -xdebug.</dd></dl></section><section class=Ss><h2 class=Ss id=Syntax_3><a class=permalink href=#Syntax_3>Syntax</a></h2> The assembler syntax closely follows the IA-64 Assembly Language Reference Guide. <p class=Pp><i class=Em>Special Characters</i></p><p class=Pp><code class=Li>//</code> is the line comment token.</p><p class=Pp>; can be used instead of a newline to separate statements.</p><p class=Pp><i class=Em>Register Names</i></p><p class=Pp>The 128 integer registers are referred to as <code class=Li>r</code><var class=Va>n</var>. The 128 floating-point registers are referred to as <code class=Li>f</code><var class=Va>n</var>. The 128 application registers are referred to as <code class=Li>ar</code><var class=Va>n</var>. The 128 control registers are referred to as <code class=Li>cr</code><var class=Va>n</var>. The 64 one-bit predicate registers are referred to as <code class=Li>p</code><var class=Va>n</var>. The 8 branch registers are referred to as <code class=Li>b</code><var class=Va>n</var>. In addition, the assembler defines a number of aliases: <code class=Li>gp</code> ( <code class=Li>r1</code>), <code class=Li>sp</code> ( <code class=Li>r12</code>), <code class=Li>rp</code> ( <code class=Li>b0</code>), <code class=Li>ret0</code> ( <code class=Li>r8</code>), <code class=Li>ret1</code> ( <code class=Li>r9</code>), <code class=Li>ret2</code> ( <code class=Li>r10</code>), <code class=Li>ret3</code> ( <code class=Li>r9</code>), <code class=Li>farg</code><var class=Va>n</var> ( <code class=Li>f8+</code><var class=Va>n</var>), and <code class=Li>fret</code><var class=Va>n</var> ( <code class=Li>f8+</code><var class=Va>n</var>).</p><p class=Pp>For convenience, the assembler also defines aliases for all named application and control registers. For example, <code class=Li>ar.bsp</code> refers to the register backing store pointer ( <code class=Li>ar17</code>). Similarly, <code class=Li>cr.eoi</code> refers to the end-of-interrupt register ( <code class=Li>cr67</code>).</p><p class=Pp><i class=Em>IA-64 Processor-Status-Register (PSR) Bit Names</i></p><p class=Pp>The assembler defines bit masks for each of the bits in the IA-64 processor status register. For example, <code class=Li>psr.ic</code> corresponds to a value of 0x2000. These masks are primarily intended for use with the <code class=Li>ssm</code> / <code class=Li>sum</code> and <code class=Li>rsm</code> / <code class=Li>rum</code> instructions, but they can be used anywhere else where an integer constant is expected.</p></section><section class=Ss><h2 class=Ss id=Opcodes_2><a class=permalink href=#Opcodes_2>Opcodes</a></h2> For detailed information on the IA-64 machine instruction set, see the <a class=Lk href=http://developer.intel.com/design/itanium/arch_spec.htm>http://developer.intel.com/design/itanium/arch_spec.htm</a>. </section></section><section class=Sh><h2 class=Sh id=MIPS_Dependent_Features><a class=permalink href=#MIPS_Dependent_Features>MIPS Dependent Features</a></h2> GNU <code class=Li>as</code> for mips architectures supports several different mips processors, and MIPS ISA levels I through V, MIPS32, and MIPS64. For information about the mips instruction set, see <i class=Em>MIPS RISC Architecture</i>, by Kane and Heindrich (Prentice-Hall). For an overview of mips assembly conventions, see “Appendix D: Assembly Language Programming” in the same work. <section class=Ss><h2 class=Ss id=Assembler_options><a class=permalink href=#Assembler_options>Assembler options</a></h2> The mips configurations of GNU <code class=Li>as</code> support these special options: <dl class=Bl-tag><dt>-G <var class=Va>num</var></dt><dd>This option sets the largest size of an object that can be referenced implicitly with the <code class=Li>gp</code> register. It is only accepted for targets that use ecoff format. The default value is 8.</dd><dt>-EB</dt><dd style="width: auto;"> </dd><dt>-EL</dt><dd>Any mips configuration of <code class=Li>as</code> can select big-endian or little-endian output at run time (unlike the other GNU development tools, which must be configured for one or the other). Use <code class=Li>-EB</code> to select big-endian output, and <code class=Li>-EL</code> for little-endian.</dd><dt>-KPIC</dt><dd>Generate SVR4-style PIC. This option tells the assembler to generate SVR4-style position-independent macro expansions. It also tells the assembler to mark the output file as PIC.</dd><dt>-mvxworks-pic</dt><dd>Generate VxWorks PIC. This option tells the assembler to generate VxWorks-style position-independent macro expansions.</dd><dt>-mips1</dt><dd style="width: auto;"> </dd><dt>-mips2</dt><dd style="width: auto;"> </dd><dt>-mips3</dt><dd style="width: auto;"> </dd><dt>-mips4</dt><dd style="width: auto;"> </dd><dt>-mips5</dt><dd style="width: auto;"> </dd><dt>-mips32</dt><dd style="width: auto;"> </dd><dt>-mips32r2</dt><dd style="width: auto;"> </dd><dt>-mips64</dt><dd style="width: auto;"> </dd><dt>-mips64r2</dt><dd>Generate code for a particular MIPS Instruction Set Architecture level. <code class=Li>-mips1</code> corresponds to the r2000 and r3000 processors, <code class=Li>-mips2</code> to the r6000 processor, <code class=Li>-mips3</code> to the r4000 processor, and <code class=Li>-mips4</code> to the r8000 and r10000 processors. <code class=Li>-mips5</code>, <code class=Li>-mips32</code>, <code class=Li>-mips32r2</code>, <code class=Li>-mips64</code>, and <code class=Li>-mips64r2</code> correspond to generic MIPS V, MIPS32, MIPS32 Release 2, MIPS64, and MIPS64 Release 2 ISA processors, respectively. You can also switch instruction sets during the assembly; see MIPS ISA, Directives to override the ISA level.</dd><dt>-mgp32</dt><dd style="width: auto;"> </dd><dt>-mfp32</dt><dd>Some macros have different expansions for 32-bit and 64-bit registers. The register sizes are normally inferred from the ISA and ABI, but these flags force a certain group of registers to be treated as 32 bits wide at all times. <code class=Li>-mgp32</code> controls the size of general-purpose registers and <code class=Li>-mfp32</code> controls the size of floating-point registers. <p class=Pp>The <code class=Li>.set gp=32</code> and <code class=Li>.set fp=32</code> directives allow the size of registers to be changed for parts of an object. The default value is restored by <code class=Li>.set gp=default</code> and <code class=Li>.set fp=default</code>.</p><p class=Pp>On some MIPS variants there is a 32-bit mode flag; when this flag is set, 64-bit instructions generate a trap. Also, some 32-bit OSes only save the 32-bit registers on a context switch, so it is essential never to use the 64-bit registers.</p></dd><dt>-mgp64</dt><dd style="width: auto;"> </dd><dt>-mfp64</dt><dd>Assume that 64-bit registers are available. This is provided in the interests of symmetry with <code class=Li>-mgp32</code> and <code class=Li>-mfp32</code>. <p class=Pp>The <code class=Li>.set gp=64</code> and <code class=Li>.set fp=64</code> directives allow the size of registers to be changed for parts of an object. The default value is restored by <code class=Li>.set gp=default</code> and <code class=Li>.set fp=default</code>.</p></dd><dt>-mips16</dt><dd style="width: auto;"> </dd><dt>-no-mips16</dt><dd>Generate code for the MIPS 16 processor. This is equivalent to putting <code class=Li>.set mips16</code> at the start of the assembly file. <code class=Li>-no-mips16</code> turns off this option.</dd><dt>-msmartmips</dt><dd style="width: auto;"> </dd><dt>-mno-smartmips</dt><dd>Enables the SmartMIPS extensions to the MIPS32 instruction set, which provides a number of new instructions which target smartcard and cryptographic applications. This is equivalent to putting <code class=Li>.set smartmips</code> at the start of the assembly file. <code class=Li>-mno-smartmips</code> turns off this option.</dd><dt>-mips3d</dt><dd style="width: auto;"> </dd><dt>-no-mips3d</dt><dd>Generate code for the MIPS-3D Application Specific Extension. This tells the assembler to accept MIPS-3D instructions. <code class=Li>-no-mips3d</code> turns off this option.</dd><dt>-mdmx</dt><dd style="width: auto;"> </dd><dt>-no-mdmx</dt><dd>Generate code for the MDMX Application Specific Extension. This tells the assembler to accept MDMX instructions. <code class=Li>-no-mdmx</code> turns off this option.</dd><dt>-mdsp</dt><dd style="width: auto;"> </dd><dt>-mno-dsp</dt><dd>Generate code for the DSP Release 1 Application Specific Extension. This tells the assembler to accept DSP Release 1 instructions. <code class=Li>-mno-dsp</code> turns off this option.</dd><dt>-mdspr2</dt><dd style="width: auto;"> </dd><dt>-mno-dspr2</dt><dd>Generate code for the DSP Release 2 Application Specific Extension. This option implies -mdsp. This tells the assembler to accept DSP Release 2 instructions. <code class=Li>-mno-dspr2</code> turns off this option.</dd><dt>-mmt</dt><dd style="width: auto;"> </dd><dt>-mno-mt</dt><dd>Generate code for the MT Application Specific Extension. This tells the assembler to accept MT instructions. <code class=Li>-mno-mt</code> turns off this option.</dd><dt>-mfix7000</dt><dd style="width: auto;"> </dd><dt>-mno-fix7000</dt><dd>Cause nops to be inserted if the read of the destination register of an mfhi or mflo instruction occurs in the following two instructions.</dd><dt>-mfix-vr4120</dt><dd style="width: auto;"> </dd><dt>-no-mfix-vr4120</dt><dd>Insert nops to work around certain VR4120 errata. This option is intended to be used on GCC-generated code: it is not designed to catch all problems in hand-written assembler code.</dd><dt>-mfix-vr4130</dt><dd style="width: auto;"> </dd><dt>-no-mfix-vr4130</dt><dd>Insert nops to work around the VR4130 <code class=Li>mflo</code> / <code class=Li>mfhi</code> errata.</dd><dt>-m4010</dt><dd style="width: auto;"> </dd><dt>-no-m4010</dt><dd>Generate code for the LSI r4010 chip. This tells the assembler to accept the r4010 specific instructions ( <code class=Li>addciu</code>, <code class=Li>ffc</code>, etc.), and to not schedule <code class=Li>nop</code> instructions around accesses to the <code class=Li>HI</code> and <code class=Li>LO</code> registers. <code class=Li>-no-m4010</code> turns off this option.</dd><dt>-m4650</dt><dd style="width: auto;"> </dd><dt>-no-m4650</dt><dd>Generate code for the MIPS r4650 chip. This tells the assembler to accept the <code class=Li>mad</code> and <code class=Li>madu</code> instruction, and to not schedule <code class=Li>nop</code> instructions around accesses to the <code class=Li>HI</code> and <code class=Li>LO</code> registers. <code class=Li>-no-m4650</code> turns off this option.</dd><dt>-m3900</dt><dd style="width: auto;"> </dd><dt>-no-m3900</dt><dd style="width: auto;"> </dd><dt>-m4100</dt><dd style="width: auto;"> </dd><dt>-no-m4100</dt><dd>For each option <code class=Li>-m</code><var class=Va>nnnn</var>, generate code for the MIPS r <var class=Va>nnnn</var> chip. This tells the assembler to accept instructions specific to that chip, and to schedule for that chip's hazards.</dd><dt>-march= <var class=Va>cpu</var></dt><dd>Generate code for a particular MIPS cpu. It is exactly equivalent to <code class=Li>-m</code><var class=Va>cpu</var>, except that there are more value of <var class=Va>cpu</var> understood. Valid <var class=Va>cpu</var> value are: <p class=Pp>“2000, 3000, 3900, 4000, 4010, 4100, 4111, vr4120, vr4130, vr4181, 4300, 4400, 4600, 4650, 5000, rm5200, rm5230, rm5231, rm5261, rm5721, vr5400, vr5500, 6000, rm7000, 8000, rm9000, 10000, 12000, 4kc, 4km, 4kp, 4ksc, 4kec, 4kem, 4kep, 4ksd, m4k, m4kp, 24kc, 24kf, 24kx, 24kec, 24kef, 24kex, 34kc, 34kf, 34kx, 74kc, 74kf, 74kx, 5kc, 5kf, 20kc, 25kf, sb1, sb1a”</p></dd><dt>-mtune= <var class=Va>cpu</var></dt><dd>Schedule and tune for a particular MIPS cpu. Valid <var class=Va>cpu</var> values are identical to <code class=Li>-march=</code><var class=Va>cpu</var>.</dd><dt>-mabi= <var class=Va>abi</var></dt><dd>Record which ABI the source code uses. The recognized arguments are: <code class=Li>32</code>, <code class=Li>n32</code>, <code class=Li>o64</code>, <code class=Li>64</code> and <code class=Li>eabi</code>.</dd><dt>-msym32</dt><dd style="width: auto;"> </dd><dt>-mno-sym32</dt><dd>Equivalent to adding <code class=Li>.set sym32</code> or <code class=Li>.set nosym32</code> to the beginning of the assembler input.See Section “MIPS symbol sizes”.</dd><dt>-nocpp</dt><dd>This option is ignored. It is accepted for command-line compatibility with other assemblers, which use it to turn off C style preprocessing. With GNU <code class=Li>as</code>, there is no need for <code class=Li>-nocpp</code>, because the GNU assembler itself never runs the C preprocessor.</dd><dt>--construct-floats</dt><dd style="width: auto;"> </dd><dt>--no-construct-floats</dt><dd>The <code class=Li>--no-construct-floats</code> option disables the construction of double width floating point constants by loading the two halves of the value into the two single width floating point registers that make up the double width register. This feature is useful if the processor support the FR bit in its status register, and this bit is known (by the programmer) to be set. This bit prevents the aliasing of the double width register by the single width registers. <p class=Pp>By default <code class=Li>--construct-floats</code> is selected, allowing construction of these floating point constants.</p></dd><dt>--trap</dt><dd style="width: auto;"> </dd><dt>--no-break</dt><dd><a class=permalink href=#as><code class=Li id=as>as</code></a> automatically macro expands certain division and multiplication instructions to check for overflow and division by zero. This option causes <code class=Li>as</code> to generate code to take a trap exception rather than a break exception when an error is detected. The trap instructions are only supported at Instruction Set Architecture level 2 and higher.</dd><dt>--break</dt><dd style="width: auto;"> </dd><dt>--no-trap</dt><dd>Generate code to take a break exception rather than a trap exception when an error is detected. This is the default.</dd><dt>-mpdr</dt><dd style="width: auto;"> </dd><dt>-mno-pdr</dt><dd>Control generation of <code class=Li>.pdr</code> sections. Off by default on IRIX, on elsewhere.</dd><dt>-mshared</dt><dd style="width: auto;"> </dd><dt>-mno-shared</dt><dd>When generating code using the Unix calling conventions (selected by <code class=Li>-KPIC</code> or <code class=Li>-mcall_shared</code>), gas will normally generate code which can go into a shared library. The <code class=Li>-mno-shared</code> option tells gas to generate code which uses the calling convention, but can not go into a shared library. The resulting code is slightly more efficient. This option only affects the handling of the <code class=Li>.cpload</code> and <code class=Li>.cpsetup</code> pseudo-ops.</dd></dl></section><section class=Ss><h2 class=Ss id=MIPS_ECOFF_object_code><a class=permalink href=#MIPS_ECOFF_object_code>MIPS ECOFF object code</a></h2> Assembling for a mips ecoff target supports some additional sections besides the usual <code class=Li>.text</code>, <code class=Li>.data</code> and <code class=Li>.bss</code>. The additional sections are <code class=Li>.rdata</code>, used for read-only data, <code class=Li>.sdata</code>, used for small data, and <code class=Li>.sbss</code>, used for small common objects. <p class=Pp>When assembling for ecoff, the assembler uses the <code class=Li>$gp</code> ( <code class=Li>$28</code>) register to form the address of a “small object”. Any object in the <code class=Li>.sdata</code> or <code class=Li>.sbss</code> sections is considered “small” in this sense. For external objects, or for objects in the <code class=Li>.bss</code> section, you can use the <code class=Li>gcc</code><code class=Li>-G</code> option to control the size of objects addressed via <code class=Li>$gp</code>; the default value is 8, meaning that a reference to any object eight bytes or smaller uses <code class=Li>$gp</code>. Passing <code class=Li>-G 0</code> to <code class=Li>as</code> prevents it from using the <code class=Li>$gp</code> register on the basis of object size (but the assembler uses <code class=Li>$gp</code> for objects in <code class=Li>.sdata</code> or <code class=Li>sbss</code> in any case). The size of an object in the <code class=Li>.bss</code> section is set by the <code class=Li>.comm</code> or <code class=Li>.lcomm</code> directive that defines it. The size of an external object may be set with the <code class=Li>.extern</code> directive. For example, <code class=Li>.extern sym,4</code> declares that the object at <code class=Li>sym</code> is 4 bytes in length, whie leaving <code class=Li>sym</code> otherwise undefined.</p><p class=Pp>Using small ecoff objects requires linker support, and assumes that the <code class=Li>$gp</code> register is correctly initialized (normally done automatically by the startup code). mips ecoff assembly code must not modify the <code class=Li>$gp</code> register.</p></section><section class=Ss><h2 class=Ss id=Directives_for_debugging_information><a class=permalink href=#Directives_for_debugging_information>Directives for debugging information</a></h2> mips ecoff <code class=Li>as</code> supports several directives used for generating debugging information which are not support by traditional mips assemblers. These are <code class=Li>.def</code>, <code class=Li>.endef</code>, <code class=Li>.dim</code>, <code class=Li>.file</code>, <code class=Li>.scl</code>, <code class=Li>.size</code>, <code class=Li>.tag</code>, <code class=Li>.type</code>, <code class=Li>.val</code>, <code class=Li>.stabd</code>, <code class=Li>.stabn</code>, and <code class=Li>.stabs</code>. The debugging information generated by the three <code class=Li>.stab</code> directives can only be read by gdb, not by traditional mips debuggers (this enhancement is required to fully support C++ debugging). These directives are primarily used by compilers, not assembly language programmers! </section><section class=Ss><h2 class=Ss id=Directives_to_override_the_size_of_symbols><a class=permalink href=#Directives_to_override_the_size_of_symbols>Directives to override the size of symbols</a></h2> The n64 ABI allows symbols to have any 64-bit value. Although this provides a great deal of flexibility, it means that some macros have much longer expansions than their 32-bit counterparts. For example, the non-PIC expansion of <code class=Li>dla $4,sym</code> is usually: <div class="Bd Pp Bd-indent"><pre>
lui     $4,%highest(sym)
lui     $1,%hi(sym)
daddiu  $4,$4,%higher(sym)
daddiu  $1,$1,%lo(sym)
dsll32  $4,$4,0
daddu   $4,$4,$1
</pre></div><p class=Pp>whereas the 32-bit expansion is simply:</p><div class="Bd Pp Bd-indent"><pre>
lui     $4,%hi(sym)
daddiu  $4,$4,%lo(sym)
</pre></div><p class=Pp>n64 code is sometimes constructed in such a way that all symbolic constants are known to have 32-bit values, and in such cases, it's preferable to use the 32-bit expansion instead of the 64-bit expansion.</p><p class=Pp>You can use the <code class=Li>.set sym32</code> directive to tell the assembler that, from this point on, all expressions of the form <var class=Va>symbol</var> or <var class=Va>symbol +</var><var class=Va>offset</var> have 32-bit values. For example:</p><div class="Bd Pp Bd-indent"><pre>
.set sym32
dla     $4,sym
lw      $4,sym+16
sw      $4,sym+0x8000($4)
</pre></div><p class=Pp>will cause the assembler to treat <code class=Li>sym</code>, <code class=Li>sym+16</code> and <code class=Li>sym+0x8000</code> as 32-bit values. The handling of non-symbolic addresses is not affected.</p><p class=Pp>The directive <code class=Li>.set nosym32</code> ends a <code class=Li>.set sym32</code> block and reverts to the normal behavior. It is also possible to change the symbol size using the command-line options [-msym32] and [-mno-sym32].</p><p class=Pp>These options and directives are always accepted, but at present, they have no effect for anything other than n64.</p></section><section class=Ss><h2 class=Ss id=Directives_to_override_the_ISA_level><a class=permalink href=#Directives_to_override_the_ISA_level>Directives to override the ISA level</a></h2> GNU <code class=Li>as</code> supports an additional directive to change the mips Instruction Set Architecture level on the fly: <code class=Li>.set mips</code><var class=Va>n</var>. <var class=Va>n</var> should be a number from 0 to 5, or 32, 32r2, 64 or 64r2. The values other than 0 make the assembler accept instructions for the corresponding isa level, from that point on in the assembly. <code class=Li>.set mips</code><var class=Va>n</var> affects not only which instructions are permitted, but also how certain macros are expanded. <code class=Li>.set mips0</code> restores the isa level to its original level: either the level you selected with command line options, or the default for your configuration. You can use this feature to permit specific mips3 instructions while assembling in 32 bit mode. Use this directive with care! <p class=Pp>The <code class=Li>.set arch=</code><var class=Va>cpu</var> directive provides even finer control. It changes the effective CPU target and allows the assembler to use instructions specific to a particular CPU. All CPUs supported by the <code class=Li>-march</code> command line option are also selectable by this directive. The original value is restored by <code class=Li>.set arch=default</code>.</p><p class=Pp>The directive <code class=Li>.set mips16</code> puts the assembler into MIPS 16 mode, in which it will assemble instructions for the MIPS 16 processor. Use <code class=Li>.set nomips16</code> to return to normal 32 bit mode.</p><p class=Pp>Traditional mips assemblers do not support this directive.</p></section><section class=Ss><h2 class=Ss id=Directives_for_extending_MIPS_16_bit_instructions><a class=permalink href=#Directives_for_extending_MIPS_16_bit_instructions>Directives for extending MIPS 16 bit instructions</a></h2> By default, MIPS 16 instructions are automatically extended to 32 bits when necessary. The directive <code class=Li>.set noautoextend</code> will turn this off. When <code class=Li>.set noautoextend</code> is in effect, any 32 bit instruction must be explicitly extended with the <code class=Li>.e</code> modifier (e.g., <code class=Li>li.e $4,1000</code>). The directive <code class=Li>.set autoextend</code> may be used to once again automatically extend instructions when necessary. <p class=Pp>This directive is only meaningful when in MIPS 16 mode. Traditional mips assemblers do not support this directive.</p></section><section class=Ss><h2 class=Ss id=Directive_to_mark_data_as_an_instruction><a class=permalink href=#Directive_to_mark_data_as_an_instruction>Directive to mark data as an instruction</a></h2> The <code class=Li>.insn</code> directive tells <code class=Li>as</code> that the following data is actually instructions. This makes a difference in MIPS 16 mode: when loading the address of a label which precedes instructions, <code class=Li>as</code> automatically adds 1 to the value, so that jumping to the loaded address will do the right thing. </section><section class=Ss><h2 class=Ss id=Directives_to_save_and_restore_options><a class=permalink href=#Directives_to_save_and_restore_options>Directives to save and restore options</a></h2> The directives <code class=Li>.set push</code> and <code class=Li>.set pop</code> may be used to save and restore the current settings for all the options which are controlled by <code class=Li>.set</code>. The <code class=Li>.set push</code> directive saves the current settings on a stack. The <code class=Li>.set pop</code> directive pops the stack and restores the settings. <p class=Pp>These directives can be useful inside an macro which must change an option such as the ISA level or instruction reordering but does not want to change the state of the code which invoked the macro.</p><p class=Pp>Traditional mips assemblers do not support these directives.</p></section><section class=Ss><h2 class=Ss id=Directives_to_control_generation_of_MIPS_ASE_instructions><a class=permalink href=#Directives_to_control_generation_of_MIPS_ASE_instructions>Directives to control generation of MIPS ASE instructions</a></h2> The directive <code class=Li>.set mips3d</code> makes the assembler accept instructions from the MIPS-3D Application Specific Extension from that point on in the assembly. The <code class=Li>.set nomips3d</code> directive prevents MIPS-3D instructions from being accepted. <p class=Pp>The directive <code class=Li>.set smartmips</code> makes the assembler accept instructions from the SmartMIPS Application Specific Extension to the MIPS32 isa from that point on in the assembly. The <code class=Li>.set nosmartmips</code> directive prevents SmartMIPS instructions from being accepted.</p><p class=Pp>The directive <code class=Li>.set mdmx</code> makes the assembler accept instructions from the MDMX Application Specific Extension from that point on in the assembly. The <code class=Li>.set nomdmx</code> directive prevents MDMX instructions from being accepted.</p><p class=Pp>The directive <code class=Li>.set dsp</code> makes the assembler accept instructions from the DSP Release 1 Application Specific Extension from that point on in the assembly. The <code class=Li>.set nodsp</code> directive prevents DSP Release 1 instructions from being accepted.</p><p class=Pp>The directive <code class=Li>.set dspr2</code> makes the assembler accept instructions from the DSP Release 2 Application Specific Extension from that point on in the assembly. This dirctive implies <code class=Li>.set dsp</code>. The <code class=Li>.set nodspr2</code> directive prevents DSP Release 2 instructions from being accepted.</p><p class=Pp>The directive <code class=Li>.set mt</code> makes the assembler accept instructions from the MT Application Specific Extension from that point on in the assembly. The <code class=Li>.set nomt</code> directive prevents MT instructions from being accepted.</p><p class=Pp>Traditional mips assemblers do not support these directives.</p></section></section><section class=Sh><h2 class=Sh id=PowerPC_Dependent_Features><a class=permalink href=#PowerPC_Dependent_Features>PowerPC Dependent Features</a></h2><section class=Ss><h2 class=Ss id=Options_4><a class=permalink href=#Options_4>Options</a></h2> The PowerPC chip family includes several successive levels, using the same core instruction set, but including a few additional instructions at each level. There are exceptions to this however. For details on what instructions each variant supports, please see the chip's architecture reference manual. <p class=Pp>The following table lists all available PowerPC options.</p><dl class=Bl-tag><dt>-mpwrx | -mpwr2</dt><dd>Generate code for POWER/2 (RIOS2).</dd><dt>-mpwr</dt><dd>Generate code for POWER (RIOS1)</dd><dt>-m601</dt><dd>Generate code for PowerPC 601.</dd><dt>-mppc, -mppc32, -m603, -m604</dt><dd>Generate code for PowerPC 603/604.</dd><dt>-m403, -m405</dt><dd>Generate code for PowerPC 403/405.</dd><dt>-m440</dt><dd>Generate code for PowerPC 440. BookE and some 405 instructions.</dd><dt>-m7400, -m7410, -m7450, -m7455</dt><dd>Generate code for PowerPC 7400/7410/7450/7455.</dd><dt>-mppc64, -m620</dt><dd>Generate code for PowerPC 620/625/630.</dd><dt>-me500, -me500x2</dt><dd>Generate code for Motorola e500 core complex.</dd><dt>-mspe</dt><dd>Generate code for Motorola SPE instructions.</dd><dt>-mppc64bridge</dt><dd>Generate code for PowerPC 64, including bridge insns.</dd><dt>-mbooke64</dt><dd>Generate code for 64-bit BookE.</dd><dt>-mbooke, mbooke32</dt><dd>Generate code for 32-bit BookE.</dd><dt>-me300</dt><dd>Generate code for PowerPC e300 family.</dd><dt>-maltivec</dt><dd>Generate code for processors with AltiVec instructions.</dd><dt>-mpower4</dt><dd>Generate code for Power4 architecture.</dd><dt>-mpower5</dt><dd>Generate code for Power5 architecture.</dd><dt>-mpower6</dt><dd>Generate code for Power6 architecture.</dd><dt>-mcell</dt><dd>Generate code for Cell Broadband Engine architecture.</dd><dt>-mcom</dt><dd>Generate code Power/PowerPC common instructions.</dd><dt>-many</dt><dd>Generate code for any architecture (PWR/PWRX/PPC).</dd><dt>-mregnames</dt><dd>Allow symbolic names for registers.</dd><dt>-mno-regnames</dt><dd>Do not allow symbolic names for registers.</dd><dt>-mrelocatable</dt><dd>Support for GCC's -mrelocatable option.</dd><dt>-mrelocatable-lib</dt><dd>Support for GCC's -mrelocatable-lib option.</dd><dt>-memb</dt><dd>Set PPC_EMB bit in ELF flags.</dd><dt>-mlittle, -mlittle-endian</dt><dd>Generate code for a little endian machine.</dd><dt>-mbig, -mbig-endian</dt><dd>Generate code for a big endian machine.</dd><dt>-msolaris</dt><dd>Generate code for Solaris.</dd><dt>-mno-solaris</dt><dd>Do not generate code for Solaris.</dd></dl></section><section class=Ss><h2 class=Ss id=PowerPC_Assembler_Directives><a class=permalink href=#PowerPC_Assembler_Directives>PowerPC Assembler Directives</a></h2> A number of assembler directives are available for PowerPC. The following table is far from complete. <dl class=Bl-tag><dt>.machine string</dt><dd>This directive allows you to change the machine for which code is generated. <code class=Li>string</code> may be any of the -m cpu selection options (without the -m) enclosed in double quotes, <code class=Li>push</code>, or <code class=Li>pop</code>. <code class=Li>.machine push</code> saves the currently selected cpu, which may be restored with <code class=Li>.machine pop</code>.</dd></dl></section></section><section class=Sh><h2 class=Sh id=SPARC_Dependent_Features><a class=permalink href=#SPARC_Dependent_Features>SPARC Dependent Features</a></h2><section class=Ss><h2 class=Ss id=Options_5><a class=permalink href=#Options_5>Options</a></h2> The SPARC chip family includes several successive levels, using the same core instruction set, but including a few additional instructions at each level. There are exceptions to this however. For details on what instructions each variant supports, please see the chip's architecture reference manual. <p class=Pp>By default, <code class=Li>as</code> assumes the core instruction set (SPARC v6), but “bumps” the architecture level as needed: it switches to successively higher architectures as it encounters instructions that only exist in the higher levels.</p><p class=Pp>If not configured for SPARC v9 ( <code class=Li>sparc64-*-*</code>) GAS will not bump passed sparclite by default, an option must be passed to enable the v9 instructions.</p><p class=Pp>GAS treats sparclite as being compatible with v8, unless an architecture is explicitly requested. SPARC v9 is always incompatible with sparclite.</p><dl class=Bl-tag><dt>-Av6 | -Av7 | -Av8 | -Asparclet | -Asparclite</dt><dd style="width: auto;"> </dd><dt>-Av8plus | -Av8plusa | -Av9 | -Av9a</dt><dd>Use one of the <code class=Li>-A</code> options to select one of the SPARC architectures explicitly. If you select an architecture explicitly, <code class=Li>as</code> reports a fatal error if it encounters an instruction or feature requiring an incompatible or higher level. <p class=Pp><code class=Li>-Av8plus</code> and <code class=Li>-Av8plusa</code> select a 32 bit environment.</p><p class=Pp><code class=Li>-Av9</code> and <code class=Li>-Av9a</code> select a 64 bit environment and are not available unless GAS is explicitly configured with 64 bit environment support.</p><p class=Pp><code class=Li>-Av8plusa</code> and <code class=Li>-Av9a</code> enable the SPARC V9 instruction set with UltraSPARC extensions.</p></dd><dt>-xarch=v8plus | -xarch=v8plusa</dt><dd>For compatibility with the Solaris v9 assembler. These options are equivalent to -Av8plus and -Av8plusa, respectively.</dd><dt>-bump</dt><dd>Warn whenever it is necessary to switch to another level. If an architecture level is explicitly requested, GAS will not issue warnings until that level is reached, and will then bump the level as required (except between incompatible levels).</dd><dt>-32 | -64</dt><dd>Select the word size, either 32 bits or 64 bits. These options are only available with the ELF object file format, and require that the necessary BFD support has been included.</dd></dl></section><section class=Ss><h2 class=Ss id=Enforcing_aligned_data><a class=permalink href=#Enforcing_aligned_data>Enforcing aligned data</a></h2> SPARC GAS normally permits data to be misaligned. For example, it permits the <code class=Li>.long</code> pseudo-op to be used on a byte boundary. However, the native SunOS and Solaris assemblers issue an error when they see misaligned data. <p class=Pp>You can use the <code class=Li>--enforce-aligned-data</code> option to make SPARC GAS also issue an error about misaligned data, just as the SunOS and Solaris assemblers do.</p><p class=Pp>The <code class=Li>--enforce-aligned-data</code> option is not the default because gcc issues misaligned data pseudo-ops when it initializes certain packed data structures (structures defined using the <code class=Li>packed</code> attribute). You may have to assemble with GAS in order to initialize packed data structures in your own code.</p></section><section class=Ss><h2 class=Ss id=Floating_Point_3><a class=permalink href=#Floating_Point_3>Floating Point</a></h2> The Sparc uses ieee floating-point numbers. </section><section class=Ss><h2 class=Ss id=Sparc_Machine_Directives><a class=permalink href=#Sparc_Machine_Directives>Sparc Machine Directives</a></h2> The Sparc version of <code class=Li>as</code> supports the following additional machine directives: <dl class=Bl-tag><dt>.align</dt><dd>This must be followed by the desired alignment in bytes.</dd><dt>.common</dt><dd>This must be followed by a symbol name, a positive number, and <code class=Li>bss</code>. This behaves somewhat like <code class=Li>.comm</code>, but the syntax is different.</dd><dt>.half</dt><dd>This is functionally identical to <code class=Li>.short</code>.</dd><dt>.nword</dt><dd>On the Sparc, the <code class=Li>.nword</code> directive produces native word sized value, ie. if assembling with -32 it is equivalent to <code class=Li>.word</code>, if assembling with -64 it is equivalent to <code class=Li>.xword</code>.</dd><dt>.proc</dt><dd>This directive is ignored. Any text following it on the same line is also ignored.</dd><dt>.register</dt><dd>This directive declares use of a global application or system register. It must be followed by a register name %g2, %g3, %g6 or %g7, comma and the symbol name for that register. If symbol name is <code class=Li>#scratch</code>, it is a scratch register, if it is <code class=Li>#ignore</code>, it just suppresses any errors about using undeclared global register, but does not emit any information about it into the object file. This can be useful e.g. if you save the register before use and restore it after.</dd><dt>.reserve</dt><dd>This must be followed by a symbol name, a positive number, and <code class=Li>bss</code>. This behaves somewhat like <code class=Li>.lcomm</code>, but the syntax is different.</dd><dt>.seg</dt><dd>This must be followed by <code class=Li>text</code>, <code class=Li>data</code>, or <code class=Li>data1</code>. It behaves like <code class=Li>.text</code>, <code class=Li>.data</code>, or <code class=Li>.data 1</code>.</dd><dt>.skip</dt><dd>This is functionally identical to the <code class=Li>.space</code> directive.</dd><dt>.word</dt><dd>On the Sparc, the <code class=Li>.word</code> directive produces 32 bit values, instead of the 16 bit values it produces on many other machines.</dd><dt>.xword</dt><dd>On the Sparc V9 processor, the <code class=Li>.xword</code> directive produces 64 bit values.</dd></dl></section></section><section class=Sh><h2 class=Sh id=Reporting_Bugs><a class=permalink href=#Reporting_Bugs>Reporting Bugs</a></h2> Your bug reports play an essential role in making <a class=Xr href=as.1.html>as</a> reliable. <p class=Pp>Reporting a bug may help you by bringing a solution to your problem, or it may not. But in any case the principal function of a bug report is to help the entire community by making the next version of <a class=Xr href=as.1.html>as</a> work better. Bug reports are your contribution to the maintenance of <a class=Xr href=as.1.html>as</a>.</p><p class=Pp>In order for a bug report to serve its purpose, you must include the information that enables us to fix the bug.</p><section class=Ss><h2 class=Ss id=Have_You_Found_a_Bug?><a class=permalink href=#Have_You_Found_a_Bug?>Have You Found a Bug?</a></h2> If you are not sure whether you have found a bug, here are some guidelines: <ul class=Bl-bullet><li>If the assembler gets a fatal signal, for any input whatever, that is a <a class=Xr href=as.1.html>as</a> bug. Reliable assemblers never crash.</li><li>If <a class=Xr href=as.1.html>as</a> produces an error message for valid input, that is a bug.</li><li>If <a class=Xr href=as.1.html>as</a> does not produce an error message for invalid input, that is a bug. However, you should note that your idea of “invalid input” might be our idea of “an extension” or “support for traditional practice”.</li><li>If you are an experienced user of assemblers, your suggestions for improvement of <a class=Xr href=as.1.html>as</a> are welcome in any case.</li></ul></section><section class=Ss><h2 class=Ss id=How_to_Report_Bugs><a class=permalink href=#How_to_Report_Bugs>How to Report Bugs</a></h2> A number of companies and individuals offer support for GNU products. If you obtained <a class=Xr href=as.1.html>as</a> from a support organization, we recommend you contact that organization first. <p class=Pp>You can find contact information for many support companies and individuals in the file <span class=Pa>etc/SERVICE</span> in the GNU Emacs distribution.</p><p class=Pp>The fundamental principle of reporting bugs usefully is this: <b class=Sy>report all the facts</b>. If you are not sure whether to state a fact or leave it out, state it!</p><p class=Pp>Often people omit facts because they think they know what causes the problem and assume that some details do not matter. Thus, you might assume that the name of a symbol you use in an example does not matter. Well, probably it does not, but one cannot be sure. Perhaps the bug is a stray memory reference which happens to fetch from the location where that name is stored in memory; perhaps, if the name were different, the contents of that location would fool the assembler into doing the right thing despite the bug. Play it safe and give a specific, complete example. That is the easiest thing for you to do, and the most helpful.</p><p class=Pp>Keep in mind that the purpose of a bug report is to enable us to fix the bug if it is new to us. Therefore, always write your bug reports on the assumption that the bug has not been reported previously.</p><p class=Pp>Sometimes people give a few sketchy facts and ask, “Does this ring a bell?” This cannot help us fix a bug, so it is basically useless. We respond by asking for enough details to enable us to investigate. You might as well expedite matters by sending them to begin with.</p><p class=Pp>To enable us to fix the bug, you should include all these things:</p><ul class=Bl-bullet><li>The version of <a class=Xr href=as.1.html>as</a>. <a class=Xr href=as.1.html>as</a> announces it if you start it with the <code class=Li>--version</code> argument. <p class=Pp>Without this, we will not know whether there is any point in looking for the bug in the current version of <a class=Xr href=as.1.html>as</a>.</p></li><li>Any patches you may have applied to the <a class=Xr href=as.1.html>as</a> source.</li><li>The type of machine you are using, and the operating system name and version number.</li><li>What compiler (and its version) was used to compile <a class=Xr href=as.1.html>as</a> ---e.g. “ <code class=Li>gcc-2.7</code> ”.</li><li>The command arguments you gave the assembler to assemble your example and observe the bug. To guarantee you will not omit something important, list them all. A copy of the Makefile (or the output from make) is sufficient. <p class=Pp>If we were to try to guess the arguments, we would probably guess wrong and then we might not encounter the bug.</p></li><li>A complete input file that will reproduce the bug. If the bug is observed when the assembler is invoked via a compiler, send the assembler source, not the high level language source. Most compilers will produce the assembler source when run with the <code class=Li>-S</code> option. If you are using <code class=Li>gcc</code>, use the options <code class=Li>-v --save-temps</code>; this will save the assembler source in a file with an extension of <span class=Pa>.s</span>, and also show you exactly how <a class=Xr href=as.1.html>as</a> is being run.</li><li>A description of what behavior you observe that you believe is incorrect. For example, “It gets a fatal signal.” <p class=Pp>Of course, if the bug is that <a class=Xr href=as.1.html>as</a> gets a fatal signal, then we will certainly notice it. But if the bug is incorrect output, we might not notice unless it is glaringly wrong. You might as well not give us a chance to make a mistake.</p><p class=Pp>Even if the problem you experience is a fatal signal, you should still say so explicitly. Suppose something strange is going on, such as, your copy of <a class=Xr href=as.1.html>as</a> is out of sync, or you have encountered a bug in the C library on your system. (This has happened!) Your copy might crash and ours would not. If you told us to expect a crash, then when ours fails to crash, we would know that the bug was not happening for us. If you had not told us to expect a crash, then we would not be able to draw any conclusion from our observations.</p></li><li>If you wish to suggest changes to the <a class=Xr href=as.1.html>as</a> source, send us context diffs, as generated by <code class=Li>diff</code> with the <code class=Li>-u</code>, <code class=Li>-c</code>, or <code class=Li>-p</code> option. Always send diffs from the old file to the new file. If you even discuss something in the <a class=Xr href=as.1.html>as</a> source, refer to it by context, not by line number. <p class=Pp>The line numbers in our development sources will not match those in your sources. Your line numbers would convey no useful information to us.</p></li></ul><p class=Pp>Here are some things that are not necessary:</p><ul class=Bl-bullet><li>A description of the envelope of the bug. <p class=Pp>Often people who encounter a bug spend a lot of time investigating which changes to the input file will make the bug go away and which changes will not affect it.</p><p class=Pp>This is often time consuming and not very useful, because the way we will find the bug is by running a single example under the debugger with breakpoints, not by pure deduction from a series of examples. We recommend that you save your time for something else.</p><p class=Pp>Of course, if you can find a simpler example to report <i class=Em>instead</i> of the original one, that is a convenience for us. Errors in the output will be easier to spot, running under the debugger will take less time, and so on.</p><p class=Pp>However, simplification is not vital; if you do not want to do this, report the bug anyway and send us the entire test case you used.</p></li><li>A patch for the bug. <p class=Pp>A patch for the bug does help us if it is a good one. But do not omit the necessary information, such as the test case, on the assumption that a patch is all we need. We might see problems with your patch and decide to fix the problem another way, or we might not understand it at all.</p><p class=Pp>Sometimes with a program as complicated as <a class=Xr href=as.1.html>as</a> it is very hard to construct an example that will make the program follow a certain path through the code. If you do not send us the example, we will not be able to construct one, so we will not be able to verify that the bug is fixed.</p><p class=Pp>And if we cannot understand what bug you are trying to fix, or why your patch should be an improvement, we will not install it. A test case will help us to understand.</p></li><li>A guess about what the bug is or what it depends on. <p class=Pp>Such guesses are usually wrong. Even we cannot guess right about such things without first using the debugger to find the facts.</p></li></ul></section></section><section class=Sh><h2 class=Sh id=Acknowledgements><a class=permalink href=#Acknowledgements>Acknowledgements</a></h2> If you have contributed to GAS and your name isn't listed here, it is not meant as a slight. We just don't know about it. Send mail to the maintainer, and we'll correct the situation. Currently the maintainer is Ken Raeburn (email address <code class=Li>raeburn@cyGNUs.com</code>). <p class=Pp>Dean Elsner wrote the original GNU assembler for the VAX.</p><p class=Pp>Jay Fenlason maintained GAS for a while, adding support for GDB-specific debug information and the 68k series machines, most of the preprocessing pass, and extensive changes in <span class=Pa>messages.c</span>, <span class=Pa>input-file.c</span>, <span class=Pa>write.c</span>.</p><p class=Pp>K. Richard Pixley maintained GAS for a while, adding various enhancements and many bug fixes, including merging support for several processors, breaking GAS up to handle multiple object file format back ends (including heavy rewrite, testing, an integration of the coff and b.out back ends), adding configuration including heavy testing and verification of cross assemblers and file splits and renaming, converted GAS to strictly ANSI C including full prototypes, added support for m680[34]0 and cpu32, did considerable work on i960 including a COFF port (including considerable amounts of reverse engineering), a SPARC opcode file rewrite, DECstation, rs6000, and hp300hpux host ports, updated “know” assertions and made them work, much other reorganization, cleanup, and lint.</p><p class=Pp>Ken Raeburn wrote the high-level BFD interface code to replace most of the code in format-specific I/O modules.</p><p class=Pp>The original VMS support was contributed by David L. Kashtan. Eric Youngdale has done much work with it since.</p><p class=Pp>The Intel 80386 machine description was written by Eliot Dresselhaus.</p><p class=Pp>Minh Tran-Le at IntelliCorp contributed some AIX 386 support.</p><p class=Pp>The Motorola 88k machine description was contributed by Devon Bowen of Buffalo University and Torbjorn Granlund of the Swedish Institute of Computer Science.</p><p class=Pp>Keith Knowles at the Open Software Foundation wrote the original MIPS back end ( <span class=Pa>tc-mips.c</span>, <span class=Pa>tc-mips.h</span>), and contributed Rose format support (which hasn't been merged in yet). Ralph Campbell worked with the MIPS code to support a.out format.</p><p class=Pp>Support for the Zilog Z8k and Renesas H8/300 processors (tc-z8k, tc-h8300), and IEEE 695 object file format (obj-ieee), was written by Steve Chamberlain of CyGNUs Support. Steve also modified the COFF back end to use BFD for some low-level operations, for use with the H8/300 and AMD 29k targets.</p><p class=Pp>John Gilmore built the AMD 29000 support, added <code class=Li>.include</code> support, and simplified the configuration of which versions accept which directives. He updated the 68k machine description so that Motorola's opcodes always produced fixed-size instructions (e.g., <code class=Li>jsr</code>), while synthetic instructions remained shrinkable ( <code class=Li>jbsr</code>). John fixed many bugs, including true tested cross-compilation support, and one bug in relaxation that took a week and required the proverbial one-bit fix.</p><p class=Pp>Ian Lance Taylor of CyGNUs Support merged the Motorola and MIT syntax for the 68k, completed support for some COFF targets (68k, i386 SVR3, and SCO Unix), added support for MIPS ECOFF and ELF targets, wrote the initial RS/6000 and PowerPC assembler, and made a few other minor patches.</p><p class=Pp>Steve Chamberlain made GAS able to generate listings.</p><p class=Pp>Hewlett-Packard contributed support for the HP9000/300.</p><p class=Pp>Jeff Law wrote GAS and BFD support for the native HPPA object format (SOM) along with a fairly extensive HPPA testsuite (for both SOM and ELF object formats). This work was supported by both the Center for Software Science at the University of Utah and CyGNUs Support.</p><p class=Pp>Support for ELF format files has been worked on by Mark Eichin of CyGNUs Support (original, incomplete implementation for SPARC), Pete Hoogenboom and Jeff Law at the University of Utah (HPPA mainly), Michael Meissner of the Open Software Foundation (i386 mainly), and Ken Raeburn of CyGNUs Support (sparc, and some initial 64-bit support).</p><p class=Pp>Linas Vepstas added GAS support for the ESA/390 “IBM 370” architecture.</p><p class=Pp>Richard Henderson rewrote the Alpha assembler. Klaus Kaempf wrote GAS and BFD support for openVMS/Alpha.</p><p class=Pp>Timothy Wall, Michael Hayes, and Greg Smart contributed to the various tic* flavors.</p><p class=Pp>David Heine, Sterling Augustine, Bob Wilson and John Ruttenberg from Tensilica, Inc. added support for Xtensa processors.</p><p class=Pp>Several engineers at CyGNUs Support have also provided many small bug fixes and configuration enhancements.</p><p class=Pp>Many others have contributed large or small bugfixes and enhancements. If you have contributed significant work and are not mentioned on this list, and want to be, let us know. Some of the history has been lost; we are not intentionally leaving anyone out.</p></section><section class=Sh><h2 class=Sh id=GNU_Free_Documentation_License><a class=permalink href=#GNU_Free_Documentation_License>GNU Free Documentation License</a></h2><div class="Bd Bd-indent">Copyright (C) 2000, 2003 Free Software Foundation, Inc. 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA <p class=Pp>Everyone is permitted to copy and distribute verbatim copies of this license document, but changing it is not allowed.</p></div><ol class=Bl-enum><li>PREAMBLE <p class=Pp>The purpose of this License is to make a manual, textbook, or other written document “free” in the sense of freedom: to assure everyone the effective freedom to copy and redistribute it, with or without modifying it, either commercially or noncommercially. Secondarily, this License preserves for the author and publisher a way to get credit for their work, while not being considered responsible for modifications made by others.</p><p class=Pp>This License is a kind of “copyleft”, which means that derivative works of the document must themselves be free in the same sense. It complements the GNU General Public License, which is a copyleft license designed for free software.</p><p class=Pp>We have designed this License in order to use it for manuals for free software, because free software needs free documentation: a free program should come with manuals providing the same freedoms that the software does. But this License is not limited to software manuals; it can be used for any textual work, regardless of subject matter or whether it is published as a printed book. We recommend this License principally for works whose purpose is instruction or reference.</p></li><li>APPLICABILITY AND DEFINITIONS <p class=Pp>This License applies to any manual or other work that contains a notice placed by the copyright holder saying it can be distributed under the terms of this License. The “Document”, below, refers to any such manual or work. Any member of the public is a licensee, and is addressed as “you.”</p><p class=Pp>A “Modified Version” of the Document means any work containing the Document or a portion of it, either copied verbatim, or with modifications and/or translated into another language.</p><p class=Pp>A “Secondary Section” is a named appendix or a front-matter section of the Document that deals exclusively with the relationship of the publishers or authors of the Document to the Document's overall subject (or to related matters) and contains nothing that could fall directly within that overall subject. (For example, if the Document is in part a textbook of mathematics, a Secondary Section may not explain any mathematics.) The relationship could be a matter of historical connection with the subject or with related matters, or of legal, commercial, philosophical, ethical or political position regarding them.</p><p class=Pp>The “Invariant Sections” are certain Secondary Sections whose titles are designated, as being those of Invariant Sections, in the notice that says that the Document is released under this License.</p><p class=Pp>The “Cover Texts” are certain short passages of text that are listed, as Front-Cover Texts or Back-Cover Texts, in the notice that says that the Document is released under this License.</p><p class=Pp>A “Transparent” copy of the Document means a machine-readable copy, represented in a format whose specification is available to the general public, whose contents can be viewed and edited directly and straightforwardly with generic text editors or (for images composed of pixels) generic paint programs or (for drawings) some widely available drawing editor, and that is suitable for input to text formatters or for automatic translation to a variety of formats suitable for input to text formatters. A copy made in an otherwise Transparent file format whose markup has been designed to thwart or discourage subsequent modification by readers is not Transparent. A copy that is not “Transparent” is called “Opaque.”</p><p class=Pp>Examples of suitable formats for Transparent copies include plain ASCII without markup, Texinfo input format, LaTeX input format, SGML or XML using a publicly available DTD, and standard-conforming simple HTML designed for human modification. Opaque formats include PostScript, PDF, proprietary formats that can be read and edited only by proprietary word processors, SGML or XML for which the DTD and/or processing tools are not generally available, and the machine-generated HTML produced by some word processors for output purposes only.</p><p class=Pp>The “Title Page” means, for a printed book, the title page itself, plus such following pages as are needed to hold, legibly, the material this License requires to appear in the title page. For works in formats which do not have any title page as such, “Title Page” means the text near the most prominent appearance of the work's title, preceding the beginning of the body of the text.</p></li><li>VERBATIM COPYING <p class=Pp>You may copy and distribute the Document in any medium, either commercially or noncommercially, provided that this License, the copyright notices, and the license notice saying this License applies to the Document are reproduced in all copies, and that you add no other conditions whatsoever to those of this License. You may not use technical measures to obstruct or control the reading or further copying of the copies you make or distribute. However, you may accept compensation in exchange for copies. If you distribute a large enough number of copies you must also follow the conditions in section 3.</p><p class=Pp>You may also lend copies, under the same conditions stated above, and you may publicly display copies.</p></li><li>COPYING IN QUANTITY <p class=Pp>If you publish printed copies of the Document numbering more than 100, and the Document's license notice requires Cover Texts, you must enclose the copies in covers that carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on the back cover. Both covers must also clearly and legibly identify you as the publisher of these copies. The front cover must present the full title with all words of the title equally prominent and visible. You may add other material on the covers in addition. Copying with changes limited to the covers, as long as they preserve the title of the Document and satisfy these conditions, can be treated as verbatim copying in other respects.</p><p class=Pp>If the required texts for either cover are too voluminous to fit legibly, you should put the first ones listed (as many as fit reasonably) on the actual cover, and continue the rest onto adjacent pages.</p><p class=Pp>If you publish or distribute Opaque copies of the Document numbering more than 100, you must either include a machine-readable Transparent copy along with each Opaque copy, or state in or with each Opaque copy a publicly-accessible computer-network location containing a complete Transparent copy of the Document, free of added material, which the general network-using public has access to download anonymously at no charge using public-standard network protocols. If you use the latter option, you must take reasonably prudent steps, when you begin distribution of Opaque copies in quantity, to ensure that this Transparent copy will remain thus accessible at the stated location until at least one year after the last time you distribute an Opaque copy (directly or through your agents or retailers) of that edition to the public.</p><p class=Pp>It is requested, but not required, that you contact the authors of the Document well before redistributing any large number of copies, to give them a chance to provide you with an updated version of the Document.</p></li><li>MODIFICATIONS <p class=Pp>You may copy and distribute a Modified Version of the Document under the conditions of sections 2 and 3 above, provided that you release the Modified Version under precisely this License, with the Modified Version filling the role of the Document, thus licensing distribution and modification of the Modified Version to whoever possesses a copy of it. In addition, you must do these things in the Modified Version:</p><p class=Pp>A. Use in the Title Page (and on the covers, if any) a title distinct from that of the Document, and from those of previous versions (which should, if there were any, be listed in the History section of the Document). You may use the same title as a previous version if the original publisher of that version gives permission. B. List on the Title Page, as authors, one or more persons or entities responsible for authorship of the modifications in the Modified Version, together with at least five of the principal authors of the Document (all of its principal authors, if it has less than five). C. State on the Title page the name of the publisher of the Modified Version, as the publisher. D. Preserve all the copyright notices of the Document. E. Add an appropriate copyright notice for your modifications adjacent to the other copyright notices. F. Include, immediately after the copyright notices, a license notice giving the public permission to use the Modified Version under the terms of this License, in the form shown in the Addendum below. G. Preserve in that license notice the full lists of Invariant Sections and required Cover Texts given in the Document's license notice. H. Include an unaltered copy of this License. I. Preserve the section entitled “History”, and its title, and add to it an item stating at least the title, year, new authors, and publisher of the Modified Version as given on the Title Page. If there is no section entitled “History” in the Document, create one stating the title, year, authors, and publisher of the Document as given on its Title Page, then add an item describing the Modified Version as stated in the previous sentence. J. Preserve the network location, if any, given in the Document for public access to a Transparent copy of the Document, and likewise the network locations given in the Document for previous versions it was based on. These may be placed in the “History” section. You may omit a network location for a work that was published at least four years before the Document itself, or if the original publisher of the version it refers to gives permission. K. In any section entitled “Acknowledgements” or “Dedications”, preserve the section's title, and preserve in the section all the substance and tone of each of the contributor acknowledgements and/or dedications given therein. L. Preserve all the Invariant Sections of the Document, unaltered in their text and in their titles. Section numbers or the equivalent are not considered part of the section titles. M. Delete any section entitled “Endorsements.” Such a section may not be included in the Modified Version. N. Do not retitle any existing section as “Endorsements” or to conflict in title with any Invariant Section.</p><p class=Pp>If the Modified Version includes new front-matter sections or appendices that qualify as Secondary Sections and contain no material copied from the Document, you may at your option designate some or all of these sections as invariant. To do this, add their titles to the list of Invariant Sections in the Modified Version's license notice. These titles must be distinct from any other section titles.</p><p class=Pp>You may add a section entitled “Endorsements”, provided it contains nothing but endorsements of your Modified Version by various parties--for example, statements of peer review or that the text has been approved by an organization as the authoritative definition of a standard.</p><p class=Pp>You may add a passage of up to five words as a Front-Cover Text, and a passage of up to 25 words as a Back-Cover Text, to the end of the list of Cover Texts in the Modified Version. Only one passage of Front-Cover Text and one of Back-Cover Text may be added by (or through arrangements made by) any one entity. If the Document already includes a cover text for the same cover, previously added by you or by arrangement made by the same entity you are acting on behalf of, you may not add another; but you may replace the old one, on explicit permission from the previous publisher that added the old one.</p><p class=Pp>The author(s) and publisher(s) of the Document do not by this License give permission to use their names for publicity for or to assert or imply endorsement of any Modified Version.</p></li><li>COMBINING DOCUMENTS <p class=Pp>You may combine the Document with other documents released under this License, under the terms defined in section 4 above for modified versions, provided that you include in the combination all of the Invariant Sections of all of the original documents, unmodified, and list them all as Invariant Sections of your combined work in its license notice.</p><p class=Pp>The combined work need only contain one copy of this License, and multiple identical Invariant Sections may be replaced with a single copy. If there are multiple Invariant Sections with the same name but different contents, make the title of each such section unique by adding at the end of it, in parentheses, the name of the original author or publisher of that section if known, or else a unique number. Make the same adjustment to the section titles in the list of Invariant Sections in the license notice of the combined work.</p><p class=Pp>In the combination, you must combine any sections entitled “History” in the various original documents, forming one section entitled “History”; likewise combine any sections entitled “Acknowledgements”, and any sections entitled “Dedications.” You must delete all sections entitled “Endorsements.”</p></li><li>COLLECTIONS OF DOCUMENTS <p class=Pp>You may make a collection consisting of the Document and other documents released under this License, and replace the individual copies of this License in the various documents with a single copy that is included in the collection, provided that you follow the rules of this License for verbatim copying of each of the documents in all other respects.</p><p class=Pp>You may extract a single document from such a collection, and distribute it individually under this License, provided you insert a copy of this License into the extracted document, and follow this License in all other respects regarding verbatim copying of that document.</p></li><li>AGGREGATION WITH INDEPENDENT WORKS <p class=Pp>A compilation of the Document or its derivatives with other separate and independent documents or works, in or on a volume of a storage or distribution medium, does not as a whole count as a Modified Version of the Document, provided no compilation copyright is claimed for the compilation. Such a compilation is called an “aggregate”, and this License does not apply to the other self-contained works thus compiled with the Document, on account of their being thus compiled, if they are not themselves derivative works of the Document.</p><p class=Pp>If the Cover Text requirement of section 3 is applicable to these copies of the Document, then if the Document is less than one quarter of the entire aggregate, the Document's Cover Texts may be placed on covers that surround only the Document within the aggregate. Otherwise they must appear on covers around the whole aggregate.</p></li><li>TRANSLATION <p class=Pp>Translation is considered a kind of modification, so you may distribute translations of the Document under the terms of section 4. Replacing Invariant Sections with translations requires special permission from their copyright holders, but you may include translations of some or all Invariant Sections in addition to the original versions of these Invariant Sections. You may include a translation of this License provided that you also include the original English version of this License. In case of a disagreement between the translation and the original English version of this License, the original English version will prevail.</p></li><li>TERMINATION <p class=Pp>You may not copy, modify, sublicense, or distribute the Document except as expressly provided for under this License. Any other attempt to copy, modify, sublicense or distribute the Document is void, and will automatically terminate your rights under this License. However, parties who have received copies, or rights, from you under this License will not have their licenses terminated so long as such parties remain in full compliance.</p></li><li>FUTURE REVISIONS OF THIS LICENSE <p class=Pp>The Free Software Foundation may publish new, revised versions of the GNU Free Documentation License from time to time. Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns. See http://www.gnu.org/copyleft/.</p><p class=Pp>Each version of the License is given a distinguishing version number. If the Document specifies that a particular numbered version of this License “or any later version” applies to it, you have the option of following the terms and conditions either of that specified version or of any later version that has been published (not as a draft) by the Free Software Foundation. If the Document does not specify a version number of this License, you may choose any version ever published (not as a draft) by the Free Software Foundation.</p></li></ol><section class=Ss><h2 class=Ss id=ADDENDUM:_How_to_use_this_License_for_your_documents><a class=permalink href=#ADDENDUM:_How_to_use_this_License_for_your_documents>ADDENDUM: How to use this License for your documents</a></h2> To use this License in a document you have written, include a copy of the License in the document and put the following copyright and license notices just after the title page: <div class="Bd Pp Bd-indent"><pre>

Copyright (C)  year  your name.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with the Invariant Sections being list their titles, with the
Front-Cover Texts being list, and with the Back-Cover Texts being list.
A copy of the license is included in the section entitled "GNU
Free Documentation License."

</pre></div><p class=Pp>If you have no Invariant Sections, write “with no Invariant Sections” instead of saying which ones are invariant. If you have no Front-Cover Texts, write “no Front-Cover Texts” instead of “Front-Cover Texts being <var class=Va>list</var> ”; likewise for Back-Cover Texts.</p><p class=Pp>If your document contains nontrivial examples of program code, we recommend releasing these examples in parallel under your choice of free software license, such as the GNU General Public License, to permit their use in free software.</p></section></section><section class=Sh><h2 class=Sh id=AS_Index><a class=permalink href=#AS_Index>AS Index</a></h2></section></div><table class=foot><tr><td class=foot-date>2015-03-02</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>