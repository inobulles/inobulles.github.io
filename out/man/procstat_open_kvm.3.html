<!DOCTYPE html>
<html><head><meta charset=utf-8><title>procstat_open_kvm(3)</title><keywords content=man,procstat_open_kvm></keywords><style>:root { --monitor-bleed: rgba(183, 0, 255, 0.46); --gradient: -webkit-linear-gradient(50deg, rgb(126, 119, 255), rgb(255, 34, 137)); --background-colour: #fff; --title-colour: #000; --text-colour: #000; --article-colour: #fff; --accent-colour: #4385f5; --muted-colour: #555; --shadow-colour: rgba(183, 0, 255, 0.487); --border-radius: 12px; --blur-radius: 0px; --navbar-colour: #fffc; --navbar-shadow: rgba(183, 0, 255, 0.1) 0 8px 32px; --code-background: #ddd; } .dark { visibility: hidden; } @media (prefers-color-scheme: light) { } @media (prefers-color-scheme: dark) { :root { --monitor-bleed: rgba(183, 0, 255, 0.172); --gradient: -webkit-linear-gradient(50deg, rgb(255, 79, 79), rgb(255, 52, 221)); --background-colour: #000; --title-colour: #fff; --text-colour: #ddd; --article-colour: #00000033; --accent-colour: #98beff; --muted-colour: #999; --shadow-colour: #ff00cc29; --blur-radius: 96px; --navbar-colour: #000a; --navbar-shadow: rgba(183, 0, 255, 0.05) 0 8px 32px; --code-background: #111; } .dark { visibility: visible; } .light { visibility: hidden; } } html, body { overflow-x: hidden; } body { background-image: url(bg.svg); background-size: cover; margin: 0; background-color: var(--background-colour); color: var(--text-colour); font-size: 22px; font-display: optional; font-family: "Montserrat", sans-serif; overflow-y: hidden; } h1 { color: var(--title-colour); font-size: 70px; font-display: optional; font-family: "Montserrat", sans-serif; } h2 { color: var(--title-colour); font-size: 40px; font-display: optional; font-family: "Montserrat", sans-serif; } h3 { color: var(--title-colour); font-size: 24px; font-display: optional; font-family: "Roboto Slab", serif; } q, blockquote { font-style: italic; white-space: pre-wrap; padding-left: 42px; } pre { margin: 32px; white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; } strong { background: var(--gradient); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold; } code { border-radius: 8px; background-color: var(--code-background); } pre { white-space: pre-wrap; } .info-container { max-width: 400px; margin: 32px; } .info-container p { margin-inline: 16px; margin-block: 32px; text-align: justify; font-size: 18px; } .labeled-img { max-width: 100%; position: relative; } .labeled-img div { position: absolute; bottom: 0; width: 100%; height: 70%; background: linear-gradient(to bottom, transparent, black); border-radius: var(--border-radius); } .labeled-img div h2 { color: white; position: absolute; bottom: 0; left: 32px; } .labeled-img img { width: 100%; border-radius: var(--border-radius); } a { background: var(--gradient); background-clip: none; color: var(--background-colour); font-weight: bold; text-decoration: none; border-radius: 3px; } a:hover { background: var(--text-colour); } .link, .link:hover { background: none; } button { background: var(--gradient); color: var(--background-colour); box-shadow: none; border: none; border-radius: 48px; padding: 8px; padding-left: 32px; padding-right: 32px; margin: 24px; font-size: 24px; font-display: optional; font-family: "Montserrat", sans-serif; font-weight: bold; cursor: pointer; transition: background .2s, color .2s, opacity .2s, box-shadow .2s, transform .2s; } button:hover { box-shadow: var(--shadow-colour) 0 8px 32px; transform: translateY(-4px); } button:active { transform: none; opacity: 50%; } .clickable { padding: 2px; transition: background-color 0.05s ease-out; border-radius: var(--border-radius); } .clickable:hover { background-color: var(--shadow-colour); } .docs-container { margin: auto; margin-top: 64px; max-width: 1200px; display: grid; justify-content: center; grid-template-columns: 1fr 3fr; } .docs { max-width: 900px; } .sidebar { min-width: 250px; position: fixed; padding: 16px; display: grid; justify-content: center; grid-auto-flow: row; grid-gap: 32px; padding-top: 64px; } .sidebar * { margin: auto; display: grid; justify-content: left; grid-auto-flow: column; grid-gap: 8px; } .sidebar p { font-size: 18px; } .sidebar-item { color: var(--text-colour); background: none; padding-inline: 8px; width: 100%; height: 100%; } .sidebar-item div svg { fill: var(--text-colour); } .navbar-container { width: 100vw; height: 48px; } .navbar { position: fixed; z-index: 100; width: 100vw; background-color: var(--navbar-colour); backdrop-filter: blur(20px); display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 32px; padding: 12px; } .navbar * { margin: auto; display: grid; justify-content: center; grid-auto-flow: column; grid-gap: 8px; } .navbar p { font-size: 18px; } .navbar-logo { height: 100%; max-height: 32px; stroke: var(--text-colour); } .navbar-icon { fill: var(--text-colour); } .navbar-item { color: var(--text-colour); background-color: transparent; padding-inline: 8px; width: 100%; height: 100%; border-radius: 8px; } @media only screen and (max-width: 800px) { .navbar-item { position: absolute; visibility: hidden; } } footer { text-align: center; padding: 64px; border-radius: 64px 64px 0 0; background: -webkit-linear-gradient(50deg, transparent, var(--monitor-bleed)); } footer p { margin: auto; } .permalink { color: var(--text-colour); background: none; } .permalink:hover { background: none; } </style></head><body><html><body><div class=navbar-container><div class=navbar><a class="navbar-item clickable link" href=https://inobulles.github.io><div><svg class=navbar-logo fill=none height=24px viewbox="0 0 144 144" width=24px xmlns=http://www.w3.org/2000/svg><path d=m22,115l50,-88l50,88l-100,0z stroke-width=20 transform="rotate(180 72 72)"></path></svg><p><strong>aquaBSD</strong></p></div></a><a class="navbar-item clickable link" href=https://inobulles.github.io/docs><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"></path></svg><p>Develop</p></div></a><a class="navbar-item clickable link" href=mailto:inobulles@gmail.com><div><svg class=navbar-icon fill=none height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M6.54 5c.06.89.21 1.76.45 2.59l-1.2 1.2c-.41-1.2-.67-2.47-.76-3.79h1.51m9.86 12.02c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19M7.5 3H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1z"></path></svg><p>Contact</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M19.46,9.12l-2.78,1.15 c-0.51-1.36-1.58-2.44-2.95-2.94l1.15-2.78C16.98,5.35,18.65,7.02,19.46,9.12z M12,15c-1.66,0-3-1.34-3-3s1.34-3,3-3s3,1.34,3,3 S13.66,15,12,15z M9.13,4.54l1.17,2.78c-1.38,0.5-2.47,1.59-2.98,2.97L4.54,9.13C5.35,7.02,7.02,5.35,9.13,4.54z M4.54,14.87 l2.78-1.15c0.51,1.38,1.59,2.46,2.97,2.96l-1.17,2.78C7.02,18.65,5.35,16.98,4.54,14.87z M14.88,19.46l-1.15-2.78 c1.37-0.51,2.45-1.59,2.95-2.97l2.78,1.17C18.65,16.98,16.98,18.65,14.88,19.46z"></path></g></svg><p>Support</p></div></a><a class="navbar-item clickable link" href=#><div><svg class=navbar-icon fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 12 7.4l3.38 4.6L17 10.83 14.92 8H20v6z"></path></svg><p>Log in</p></div></a></div></div></body></html><div class=docs-container><html><body><div class=sidebar-container><div class=sidebar><a class="sidebar-item clickable" href=https://inobulles.github.io/docs><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z"></path></svg><p>Introduction</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/struct><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><rect fill=none height=24 width=24></rect><path d="M22,11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3H22z M7,9H4V5h3V9z M17,15h3v4h-3V15z M17,5h3v4h-3V5z"></path></svg><p>OS Components</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/dev-tools><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><rect height=8.48 transform="matrix(0.7071 -0.7071 0.7071 0.7071 -6.8717 17.6255)" width=3 x=16.34 y=12.87></rect><path d="M17.5,10c1.93,0,3.5-1.57,3.5-3.5c0-0.58-0.16-1.12-0.41-1.6l-2.7,2.7L16.4,6.11l2.7-2.7C18.62,3.16,18.08,3,17.5,3 C15.57,3,14,4.57,14,6.5c0,0.41,0.08,0.8,0.21,1.16l-1.85,1.85l-1.78-1.78l0.71-0.71L9.88,5.61L12,3.49 c-1.17-1.17-3.07-1.17-4.24,0L4.22,7.03l1.41,1.41H2.81L2.1,9.15l3.54,3.54l0.71-0.71V9.15l1.41,1.41l0.71-0.71l1.78,1.78 l-7.41,7.41l2.12,2.12L16.34,9.79C16.7,9.92,17.09,10,17.5,10z"></path></g></g></svg><p>Developer Tools</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/create-app><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24 x=0></rect></g><g><g><polygon points="19,9 20.25,6.25 23,5 20.25,3.75 19,1 17.75,3.75 15,5 17.75,6.25"></polygon><polygon points="19,15 17.75,17.75 15,19 17.75,20.25 19,23 20.25,20.25 23,19 20.25,17.75"></polygon><path d="M11.5,9.5L9,4L6.5,9.5L1,12l5.5,2.5L9,20l2.5-5.5L17,12L11.5,9.5z M9.99,12.99L9,15.17l-0.99-2.18L5.83,12l2.18-0.99 L9,8.83l0.99,2.18L12.17,12L9.99,12.99z"></path></g></g></svg><p>Creating an App</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/packaging><div><svg enable-background="new 0 0 24 24" fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><g><rect fill=none height=24 width=24></rect></g><g><g><path d="M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M19,20H5V9h14V20z M20,7H4V4h16V7z"></path><rect height=2 width=6 x=9 y=12></rect></g></g></svg><p>Packaging Apps</p></div></a><a class="sidebar-item clickable" href=https://inobulles.github.io/docs/publishing><div><svg fill=#000000 height=24px viewbox="0 0 24 24" width=24px xmlns=http://www.w3.org/2000/svg><path d="M0 0h24v24H0V0z" fill=none></path><path d="M13 3v1h-2V3h2m-1 7.11l5.38 1.77 2.39.78-1.12 3.97c-.54-.3-.94-.71-1.14-.94L16 13.96l-1.51 1.72c-.34.4-1.28 1.32-2.49 1.32s-2.15-.92-2.49-1.32L8 13.96l-1.51 1.72c-.2.23-.6.63-1.14.93l-1.13-3.96 2.4-.79L12 10.11M15 1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1zM6 9.97V6h12v3.97L12 8 6 9.97zm10 9.71c-1.22.85-2.61 1.28-4 1.28s-2.78-.43-4-1.28C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 1.26.64 2.63.97 4 .97s2.74-.32 4-.97c1.26.65 2.62.99 4 .99h2v-2h-2c-1.39 0-2.78-.47-4-1.32z"></path></svg><p>Publishing Apps</p></div></a></div></div></body></html><div class=docs><h1>procstat_open_kvm(3)</h1><table class=head><tr><td class=head-ltitle>LIBPROCSTAT(3)</td><td class=head-vol>FreeBSD Library Functions Manual</td><td class=head-rtitle>LIBPROCSTAT(3)</td></tr></table><div class=manual-text><section class=Sh><h2 class=Sh id=NAME><a class=permalink href=#NAME>NAME</a></h2><code class=Nm>procstat_close</code>, <code class=Nm>procstat_freeargv</code>, <code class=Nm>procstat_freeauxv</code>, <code class=Nm>procstat_freeenvv</code>, <code class=Nm>procstat_freefiles</code>, <code class=Nm>procstat_freegroups</code>, <code class=Nm>procstat_freekstack</code>, <code class=Nm>procstat_freeprocs</code>, <code class=Nm>procstat_freeptlwpinfo</code>, <code class=Nm>procstat_freevmmap</code>, <code class=Nm>procstat_get_pipe_info</code>, <code class=Nm>procstat_get_pts_info</code>, <code class=Nm>procstat_get_sem_info</code>, <code class=Nm>procstat_get_shm_info</code>, <code class=Nm>procstat_get_socket_info</code>, <code class=Nm>procstat_get_vnode_info</code>, <code class=Nm>procstat_getargv</code>, <code class=Nm>procstat_getauxv</code>, <code class=Nm>procstat_getenvv</code>, <code class=Nm>procstat_getfiles</code>, <code class=Nm>procstat_getgroups</code>, <code class=Nm>procstat_getkstack</code>, <code class=Nm>procstat_getosrel</code>, <code class=Nm>procstat_getpathname</code>, <code class=Nm>procstat_getprocs</code>, <code class=Nm>procstat_getptlwpinfo</code>, <code class=Nm>procstat_getrlimit</code>, <code class=Nm>procstat_getumask</code>, <code class=Nm>procstat_getvmmap</code>, <code class=Nm>procstat_open_core</code>, <code class=Nm>procstat_open_kvm</code>, <code class=Nm>procstat_open_sysctl</code> — <div class=Nd>library interface for file and process information retrieval</div></section><section class=Sh><h2 class=Sh id=LIBRARY><a class=permalink href=#LIBRARY>LIBRARY</a></h2><span class=Lb>Process and Files Information Retrieval (libprocstat, -lprocstat)</span></section><section class=Sh><h2 class=Sh id=SYNOPSIS><a class=permalink href=#SYNOPSIS>SYNOPSIS</a></h2><code class=In>#include &lt;<a class=In href=../src/sys/param.h.html>sys/param.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/sys/queue.h.html>sys/queue.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/sys/socket.h.html>sys/socket.h</a>&gt;</code><br><code class=In>#include &lt;<a class=In href=../src/libprocstat.h.html>libprocstat.h</a>&gt;</code><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_close</code>(<var class=Fa style="white-space: nowrap;">struct procstat *procstat</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freeargv</code>(<var class=Fa>struct procstat *procstat</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freeauxv</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>Elf_Auxinfo *auxv</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freeenvv</code>(<var class=Fa>struct procstat *procstat</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freefiles</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat_list *head</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freegroups</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>gid_t *groups</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freekstack</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_kstack *kkstp</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freeprocs</code>(<var class=Fa style="white-space: nowrap;">struct procstat *procstat</var>, <var class=Fa style="white-space: nowrap;">struct kinfo_proc *p</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freevmmap</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_vmentry *vmmap</var>);</p><p class=Pp><var class=Ft>void</var><br><code class=Fn>procstat_freeptlwpinfo</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct ptrace_lwpinfo *pl</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_pipe_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct pipestat *pipe</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_pts_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct ptsstat *pts</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_sem_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct semstat *sem</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_shm_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct shmstat *shm</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_socket_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct sockstat *sock</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_get_vnode_info</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct filestat *fst</var>, <var class=Fa>struct vnstat *vn</var>, <var class=Fa>char *errbuf</var>);</p><p class=Pp><var class=Ft>char **</var><br><code class=Fn>procstat_getargv</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>const struct kinfo_proc *kp</var>, <var class=Fa>size_t nchr</var>);</p><p class=Pp><var class=Ft>Elf_Auxinfo *</var><br><code class=Fn>procstat_getauxv</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>char **</var><br><code class=Fn>procstat_getenvv</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>const struct kinfo_proc *kp</var>, <var class=Fa>size_t nchr</var>);</p><p class=Pp><var class=Ft>struct filestat_list *</var><br><code class=Fn>procstat_getfiles</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>int mmapped</var>);</p><p class=Pp><var class=Ft>gid_t *</var><br><code class=Fn>procstat_getgroups</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>struct kinfo_kstack *</var><br><code class=Fn>procstat_getkstack</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_getosrel</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>int *osrelp</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_getpathname</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>char *pathname</var>, <var class=Fa>size_t maxlen</var>);</p><p class=Pp><var class=Ft>struct kinfo_proc *</var><br><code class=Fn>procstat_getprocs</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>int what</var>, <var class=Fa>int arg</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>struct ptrace_lwpinfo *</var><br><code class=Fn>procstat_getptlwpinfo</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_getrlimit</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>int which</var>, <var class=Fa>struct rlimit* rlimit</var>);</p><p class=Pp><var class=Ft>int</var><br><code class=Fn>procstat_getumask</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>unsigned short *maskp</var>);</p><p class=Pp><var class=Ft>struct kinfo_vmentry *</var><br><code class=Fn>procstat_getvmmap</code>(<var class=Fa>struct procstat *procstat</var>, <var class=Fa>struct kinfo_proc *kp</var>, <var class=Fa>unsigned int *count</var>);</p><p class=Pp><var class=Ft>struct procstat *</var><br><code class=Fn>procstat_open_core</code>(<var class=Fa style="white-space: nowrap;">const char *filename</var>);</p><p class=Pp><var class=Ft>struct procstat *</var><br><code class=Fn>procstat_open_kvm</code>(<var class=Fa style="white-space: nowrap;">const char *nlistf</var>, <var class=Fa style="white-space: nowrap;">const char *memf</var>);</p><p class=Pp><var class=Ft>struct procstat *</var><br><code class=Fn>procstat_open_sysctl</code>(<var class=Fa style="white-space: nowrap;">void</var>);</p></section><section class=Sh><h2 class=Sh id=DESCRIPTION><a class=permalink href=#DESCRIPTION>DESCRIPTION</a></h2> The <code class=Nm>libprocstat</code> library contains the API for runtime file and process information retrieval from the running kernel via the <a class=Xr href=sysctl.3.html>sysctl(3)</a> library backend, and for post-mortem analysis via the <a class=Xr href=kvm.3.html>kvm(3)</a> library backend, or from the process <a class=Xr href=core.5.html>core(5)</a> file, searching for statistics in special <a class=Xr href=elf.3.html>elf(3)</a> note sections. <p class=Pp>The <code class=Fn>procstat_open_kvm</code>() and <code class=Fn>procstat_open_sysctl</code>() functions use the <a class=Xr href=kvm.3.html>kvm(3)</a> or <a class=Xr href=sysctl.3.html>sysctl(3)</a> library routines, respectively, to access kernel state information used to retrieve processes and files states. The <code class=Fn>procstat_open_core</code>() uses <a class=Xr href=elf.3.html>elf(3)</a> routines to access statistics stored as a set of notes in a process <a class=Xr href=core.5.html>core(5)</a> file, written by the kernel at the moment of the process abnormal termination. The <var class=Fa>filename</var> argument is the process core file name. The <var class=Fa>nlistf</var> argument is the executable image of the kernel being examined. If this argument is <code class=Dv>NULL</code>, the currently running kernel is assumed. The <var class=Fa>memf</var> argument is the kernel memory device file. If this argument is <code class=Dv>NULL</code>, then <span class=Pa>/dev/mem</span> is assumed. See <a class=Xr href=kvm_open.3.html>kvm_open(3)</a> for more details. The functions dynamically allocate and return a <var class=Vt>procstat</var> structure pointer used in the rest of the <code class=Nm>libprocstat</code> library routines until the corresponding <code class=Fn>procstat_close</code>() call that cleans up the resources allocated by the <code class=Fn>procstat_open_*</code>() functions.</p><p class=Pp>The <code class=Fn>procstat_getprocs</code>() function gets a pointer to the <var class=Vt>procstat</var> structure from one of the <code class=Fn>procstat_open_*</code>() functions and returns a dynamically allocated (sub-)set of active processes in the kernel filled in to array of <var class=Vt>kinfo_proc</var> structures. The <var class=Fa>what</var> and <var class=Fa>arg</var> arguments constitute a filtering predicate as described in the <a class=Xr href=kvm_getprocs.3.html>kvm_getprocs(3)</a> function. The number of processes found is returned in the reference parameter <var class=Fa>cnt</var>. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freeprocs</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getptlwpinfo</code>() function gets a pointer to the <var class=Vt>procstat</var> structure from the <code class=Fn>procstat_open_core</code>() function and returns a dynamically allocated set of signals intercepted by a process in the process's core file. The number of processes found is returned in the reference parameter <var class=Fa>cnt</var>. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freeptlwpinfo</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getargv</code>() function gets a pointer to the <var class=Vt>procstat</var> structure from one of the <code class=Fn>procstat_open_*</code>() functions, a pointer to <var class=Vt>kinfo_proc</var> structure from the array obtained from the <code class=Fn>kvm_getprocs</code>() function, and returns a null-terminated argument vector that corresponds to the command line arguments passed to the process. The <var class=Fa>nchr</var> argument indicates the maximum number of characters, including null bytes, to use in building the strings. If this amount is exceeded, the string causing the overflow is truncated and the partial result is returned. This is handy for programs that print only a one line summary of a command and should not copy out large amounts of text only to ignore it. If <var class=Fa>nchr</var> is zero, no limit is imposed and all argument strings are returned. The values of the returned argument vector refer the strings stored in the <var class=Vt>procstat</var> internal buffer. A subsequent call of the function with the same <var class=Vt>procstat</var> argument will reuse the buffer. To free the allocated memory <code class=Fn>procstat_freeargv</code>() function call can be used, or it will be released on <code class=Fn>procstat_close</code>().</p><p class=Pp>The <code class=Fn>procstat_getenvv</code>() function is similar to <code class=Fn>procstat_getargv</code>() but returns the vector of environment strings. The caller may free the allocated memory with a subsequent <code class=Fn>procstat_freeenvv</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getauxv</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns the auxiliary vector as a dynamically allocated array of <var class=Vt>Elf_Auxinfo</var> elements. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freeauxv</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getfiles</code>() function gets a pointer to the <var class=Vt>procstat</var> structure initialized with one of the <code class=Fn>procstat_open_*</code>() functions, a pointer to <var class=Vt>kinfo_proc</var> structure from the array obtained from the <code class=Fn>kvm_getprocs</code>() function, and returns a dynamically allocated linked list of filled in <var class=Vt>filestat_list</var> structures using the STAILQ macros defined in <a class=Xr href=queue.3.html>queue(3)</a>. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freefiles</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getgroups</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns the process groups as a dynamically allocated array of <var class=Vt>gid_t</var> elements. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freegroups</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getkstack</code>() function gets a pointer to the <var class=Vt>procstat</var> structure initialized with one of the <code class=Fn>procstat_open_*</code>() functions, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns kernel stacks of the process as a dynamically allocated array of <var class=Vt>kinfo_kstack</var> structures. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freekstack</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_getosrel</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns osrel date in the 3rd reference parameter.</p><p class=Pp>The <code class=Fn>procstat_getpathname</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, and copies the path of the process executable to <var class=Fa>pathname</var> buffer, limiting to <var class=Fa>maxlen</var> characters.</p><p class=Pp>The <code class=Fn>procstat_getrlimit</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, resource index <var class=Fa>which</var>, and returns the actual resource limit in the 4th reference parameter.</p><p class=Pp>The <code class=Fn>procstat_getumask</code>() function gets a pointer to the <var class=Vt>procstat</var> structure, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns the process umask in the 3rd reference parameter.</p><p class=Pp>The <code class=Fn>procstat_getvmmap</code>() function gets a pointer to the <var class=Vt>procstat</var> structure initialized with one of the <code class=Fn>procstat_open_*</code>() functions, a pointer to <var class=Vt>kinfo_proc</var> structure, and returns VM layout of the process as a dynamically allocated array of <var class=Vt>kinfo_vmentry</var> structures. The caller is responsible to free the allocated memory with a subsequent <code class=Fn>procstat_freevmmap</code>() function call.</p><p class=Pp>The <code class=Fn>procstat_get_pipe_info</code>(), <code class=Fn>procstat_get_pts_info</code>(), <code class=Fn>procstat_get_sem_info</code>(), <code class=Fn>procstat_get_shm_info</code>(), <code class=Fn>procstat_get_socket_info</code>() and <code class=Fn>procstat_get_vnode_info</code>() functions are used to retrieve information about pipes, pseudo-terminals, semaphores, shared memory objects, sockets, and vnodes, respectively. Each of them have a similar interface API. The <var class=Fa>procstat</var> argument is a pointer obtained from one of <code class=Fn>procstat_open_*</code>() functions. The <var class=Ft>filestat</var><var class=Fa>fst</var> argument is an element of STAILQ linked list as obtained from the <code class=Fn>procstat_getfiles</code>() function. The <var class=Ft>filestat</var> structure contains a <var class=Fa>fs_type</var> field that specifies a file type and a corresponding function to be called among the <code class=Nm>procstat_get_*_info</code> function family. The actual object is returned in the 3rd reference parameter. The <var class=Fa>errbuf</var> argument indicates an actual error message in case of failure.</p><p class=Pp></p><div class=Bd-indent><dl class="Bl-tag Bl-compact"><dt><a class=permalink href=#PS_FST_TYPE_FIFO><code class=Li id=PS_FST_TYPE_FIFO>PS_FST_TYPE_FIFO</code></a></dt><dd><code class=Nm>procstat_get_vnode_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_VNODE><code class=Li id=PS_FST_TYPE_VNODE>PS_FST_TYPE_VNODE</code></a></dt><dd><code class=Nm>procstat_get_vnode_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_SOCKET><code class=Li id=PS_FST_TYPE_SOCKET>PS_FST_TYPE_SOCKET</code></a></dt><dd><code class=Nm>procstat_get_socket_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_PIPE><code class=Li id=PS_FST_TYPE_PIPE>PS_FST_TYPE_PIPE</code></a></dt><dd><code class=Nm>procstat_get_pipe_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_PTS><code class=Li id=PS_FST_TYPE_PTS>PS_FST_TYPE_PTS</code></a></dt><dd><code class=Nm>procstat_get_pts_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_SEM><code class=Li id=PS_FST_TYPE_SEM>PS_FST_TYPE_SEM</code></a></dt><dd><code class=Nm>procstat_get_sem_info</code></dd><dt><a class=permalink href=#PS_FST_TYPE_SHM><code class=Li id=PS_FST_TYPE_SHM>PS_FST_TYPE_SHM</code></a></dt><dd><code class=Nm>procstat_get_shm_info</code></dd></dl></div></section><section class=Sh><h2 class=Sh id=SEE_ALSO><a class=permalink href=#SEE_ALSO>SEE ALSO</a></h2><a class=Xr href=fstat.1.html>fstat(1)</a>, <a class=Xr href=fuser.1.html>fuser(1)</a>, <a class=Xr href=pipe.2.html>pipe(2)</a>, <a class=Xr href=shm_open.2.html>shm_open(2)</a>, <a class=Xr href=socket.2.html>socket(2)</a>, <a class=Xr href=elf.3.html>elf(3)</a>, <a class=Xr href=kvm.3.html>kvm(3)</a>, <a class=Xr href=queue.3.html>queue(3)</a>, <a class=Xr href=sem_open.3.html>sem_open(3)</a>, <a class=Xr href=sysctl.3.html>sysctl(3)</a>, <a class=Xr href=pts.4.html>pts(4)</a>, <a class=Xr href=core.5.html>core(5)</a>, <a class=Xr href=vnode.9.html>vnode(9)</a></section><section class=Sh><h2 class=Sh id=HISTORY><a class=permalink href=#HISTORY>HISTORY</a></h2> The <code class=Nm>libprocstat</code> library appeared in <span class=Ux>FreeBSD 9.0</span>. </section><section class=Sh><h2 class=Sh id=AUTHORS><a class=permalink href=#AUTHORS>AUTHORS</a></h2> The <code class=Nm>libprocstat</code> library was written by <span class=An>Stanislav Sedov</span> &lt;<a class=Mt href=mailto:stas@FreeBSD.org>stas@FreeBSD.org</a>&gt;. <p class=Pp>This manual page was written by <span class=An>Sergey Kandaurov</span> &lt;<a class=Mt href=mailto:pluknet@FreeBSD.org>pluknet@FreeBSD.org</a>&gt;.</p></section></div><table class=foot><tr><td class=foot-date>July 29, 2017</td><td class=foot-os>FreeBSD 13.1-RELEASE-p2</td></tr></table></div></div><html><body><footer><p>©️ 2023 Inobulles</p></footer></body></html></body></html>